/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

dojo.provide("misys.layer.common");if(!dojo._hasResource["dojo.cldr.supplemental"]){dojo._hasResource["dojo.cldr.supplemental"]=true;dojo.provide("dojo.cldr.supplemental");dojo.getObject("cldr.supplemental",true,dojo);dojo.cldr.supplemental.getFirstDayOfWeek=function(_1){var _2={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,sy:6,tn:6,ye:6,ar:0,as:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,il:0,"in":0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mn:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,zw:0};var _3=dojo.cldr.supplemental._region(_1);var _4=_2[_3];return (_4===undefined)?1:_4;};dojo.cldr.supplemental._region=function(_5){_5=dojo.i18n.normalizeLocale(_5);var _6=_5.split("-");var _7=_6[1];if(!_7){_7={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[_6[0]];}else{if(_7.length==4){_7=_6[2];}}return _7;};dojo.cldr.supplemental.getWeekend=function(_8){var _9={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5};var _a={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6};var _b=dojo.cldr.supplemental._region(_8);var _c=_9[_b];var _d=_a[_b];if(_c===undefined){_c=6;}if(_d===undefined){_d=0;}return {start:_c,end:_d};};}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.getObject("date",true,dojo);dojo.date.getDaysInMonth=function(_e){var _f=_e.getMonth();var _10=[31,28,31,30,31,30,31,31,30,31,30,31];if(_f==1&&dojo.date.isLeapYear(_e)){return 29;}return _10[_f];};dojo.date.isLeapYear=function(_11){var _12=_11.getFullYear();return !(_12%400)||(!(_12%4)&&!!(_12%100));};dojo.date.getTimezoneName=function(_13){var str=_13.toString();var tz="";var _14;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_14=str.match(pat))){tz=_14[1];}else{str=_13.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_14=str.match(pat))){tz=_14[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(_15,_16,_17){_15=new Date(+_15);_16=new Date(+(_16||new Date()));if(_17=="date"){_15.setHours(0,0,0,0);_16.setHours(0,0,0,0);}else{if(_17=="time"){_15.setFullYear(0,0,0);_16.setFullYear(0,0,0);}}if(_15>_16){return 1;}if(_15<_16){return -1;}return 0;};dojo.date.add=function(_18,_19,_1a){var sum=new Date(+_18);var _1b=false;var _1c="Date";switch(_19){case "day":break;case "weekday":var _1d,_1e;var mod=_1a%5;if(!mod){_1d=(_1a>0)?5:-5;_1e=(_1a>0)?((_1a-5)/5):((_1a+5)/5);}else{_1d=mod;_1e=parseInt(_1a/5);}var _1f=_18.getDay();var adj=0;if(_1f==6&&_1a>0){adj=1;}else{if(_1f==0&&_1a<0){adj=-1;}}var _20=_1f+_1d;if(_20==0||_20==6){adj=(_1a>0)?2:-2;}_1a=(7*_1e)+_1d+adj;break;case "year":_1c="FullYear";_1b=true;break;case "week":_1a*=7;break;case "quarter":_1a*=3;case "month":_1b=true;_1c="Month";break;default:_1c="UTC"+_19.charAt(0).toUpperCase()+_19.substring(1)+"s";}if(_1c){sum["set"+_1c](sum["get"+_1c]()+_1a);}if(_1b&&(sum.getDate()<_18.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(_21,_22,_23){_22=_22||new Date();_23=_23||"day";var _24=_22.getFullYear()-_21.getFullYear();var _25=1;switch(_23){case "quarter":var m1=_21.getMonth();var m2=_22.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_24*4);_25=q2-q1;break;case "weekday":var _26=Math.round(dojo.date.difference(_21,_22,"day"));var _27=parseInt(dojo.date.difference(_21,_22,"week"));var mod=_26%7;if(mod==0){_26=_27*5;}else{var adj=0;var _28=_21.getDay();var _29=_22.getDay();_27=parseInt(_26/7);mod=_26%7;var _2a=new Date(_21);_2a.setDate(_2a.getDate()+(_27*7));var _2b=_2a.getDay();if(_26>0){switch(true){case _28==6:adj=-1;break;case _28==0:adj=0;break;case _29==6:adj=-1;break;case _29==0:adj=-2;break;case (_2b+mod)>5:adj=-2;}}else{if(_26<0){switch(true){case _28==6:adj=0;break;case _28==0:adj=1;break;case _29==6:adj=2;break;case _29==0:adj=1;break;case (_2b+mod)<0:adj=2;}}}_26+=adj;_26-=(_27*2);}_25=_26;break;case "year":_25=_24;break;case "month":_25=(_22.getMonth()-_21.getMonth())+(_24*12);break;case "week":_25=parseInt(dojo.date.difference(_21,_22,"day")/7);break;case "day":_25/=24;case "hour":_25/=60;case "minute":_25/=60;case "second":_25/=1000;case "millisecond":_25*=_22.getTime()-_21.getTime();}return Math.round(_25);};}if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");dojo.getObject("date.locale",true,dojo);(function(){function _2c(_2d,_2e,_2f,_30){return _30.replace(/([a-z])\1*/ig,function(_31){var s,pad,c=_31.charAt(0),l=_31.length,_32=["abbr","wide","narrow"];switch(c){case "G":s=_2e[(l<4)?"eraAbbr":"eraNames"][_2d.getFullYear()<0?0:1];break;case "y":s=_2d.getFullYear();switch(l){case 1:break;case 2:if(!_2f.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_2d.getMonth()+1)/3);pad=true;break;case "M":var m=_2d.getMonth();if(l<3){s=m+1;pad=true;}else{var _33=["months","format",_32[l-3]].join("-");s=_2e[_33][m];}break;case "w":var _34=0;s=dojo.date.locale._getWeekOfYear(_2d,_34);pad=true;break;case "d":s=_2d.getDate();pad=true;break;case "D":s=dojo.date.locale._getDayOfYear(_2d);pad=true;break;case "E":var d=_2d.getDay();if(l<3){s=d+1;pad=true;}else{var _35=["days","format",_32[l-3]].join("-");s=_2e[_35][d];}break;case "a":var _36=(_2d.getHours()<12)?"am":"pm";s=_2f[_36]||_2e["dayPeriods-format-wide-"+_36];break;case "h":case "H":case "K":case "k":var h=_2d.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_2d.getMinutes();pad=true;break;case "s":s=_2d.getSeconds();pad=true;break;case "S":s=Math.round(_2d.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=dojo.date.locale._getZone(_2d,true,_2f);if(s){break;}l=4;case "Z":var _37=dojo.date.locale._getZone(_2d,false,_2f);var tz=[(_37<=0?"+":"-"),dojo.string.pad(Math.floor(Math.abs(_37)/60),2),dojo.string.pad(Math.abs(_37)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_30);}if(pad){s=dojo.string.pad(s,l);}return s;});};dojo.date.locale._getZone=function(_38,_39,_3a){if(_39){return dojo.date.getTimezoneName(_38);}else{return _38.getTimezoneOffset();}};dojo.date.locale.format=function(_3b,_3c){_3c=_3c||{};var _3d=dojo.i18n.normalizeLocale(_3c.locale),_3e=_3c.formatLength||"short",_3f=dojo.date.locale._getGregorianBundle(_3d),str=[],_40=dojo.hitch(this,_2c,_3b,_3f,_3c);if(_3c.selector=="year"){return _41(_3f["dateFormatItem-yyyy"]||"yyyy",_40);}var _42;if(_3c.selector!="date"){_42=_3c.timePattern||_3f["timeFormat-"+_3e];if(_42){str.push(_41(_42,_40));}}if(_3c.selector!="time"){_42=_3c.datePattern||_3f["dateFormat-"+_3e];if(_42){str.push(_41(_42,_40));}}return str.length==1?str[0]:_3f["dateTimeFormat-"+_3e].replace(/\{(\d+)\}/g,function(_43,key){return str[key];});};dojo.date.locale.regexp=function(_44){return dojo.date.locale._parseInfo(_44).regexp;};dojo.date.locale._parseInfo=function(_45){_45=_45||{};var _46=dojo.i18n.normalizeLocale(_45.locale),_47=dojo.date.locale._getGregorianBundle(_46),_48=_45.formatLength||"short",_49=_45.datePattern||_47["dateFormat-"+_48],_4a=_45.timePattern||_47["timeFormat-"+_48],_4b;if(_45.selector=="date"){_4b=_49;}else{if(_45.selector=="time"){_4b=_4a;}else{_4b=_47["dateTimeFormat-"+_48].replace(/\{(\d+)\}/g,function(_4c,key){return [_4a,_49][key];});}}var _4d=[],re=_41(_4b,dojo.hitch(this,_4e,_4d,_47,_45));return {regexp:re,tokens:_4d,bundle:_47};};dojo.date.locale.parse=function(_4f,_50){var _51=/[\u200E\u200F\u202A\u202E]/g,_52=dojo.date.locale._parseInfo(_50),_53=_52.tokens,_54=_52.bundle,re=new RegExp("^"+_52.regexp.replace(_51,"")+"$",_52.strict?"":"i"),_55=re.exec(_4f&&_4f.replace(_51,""));if(!_55){return null;}var _56=["abbr","wide","narrow"],_57=[1970,0,1,0,0,0,0],_58="",_59=dojo.every(_55,function(v,i){if(!i){return true;}var _5a=_53[i-1];var l=_5a.length;switch(_5a.charAt(0)){case "y":if(l!=2&&_50.strict){_57[0]=v;}else{if(v<100){v=Number(v);var _5b=""+new Date().getFullYear(),_5c=_5b.substring(0,2)*100,_5d=Math.min(Number(_5b.substring(2,4))+20,99),num=(v<_5d)?_5c+v:_5c-100+v;_57[0]=num;}else{if(_50.strict){return false;}_57[0]=v;}}break;case "M":if(l>2){var _5e=_54["months-format-"+_56[l-3]].concat();if(!_50.strict){v=v.replace(".","").toLowerCase();_5e=dojo.map(_5e,function(s){return s.replace(".","").toLowerCase();});}v=dojo.indexOf(_5e,v);if(v==-1){return false;}}else{v--;}_57[1]=v;break;case "E":case "e":var _5f=_54["days-format-"+_56[l-3]].concat();if(!_50.strict){v=v.toLowerCase();_5f=dojo.map(_5f,function(d){return d.toLowerCase();});}v=dojo.indexOf(_5f,v);if(v==-1){return false;}break;case "D":_57[1]=0;case "d":_57[2]=v;break;case "a":var am=_50.am||_54["dayPeriods-format-wide-am"],pm=_50.pm||_54["dayPeriods-format-wide-pm"];if(!_50.strict){var _60=/\./g;v=v.replace(_60,"").toLowerCase();am=am.replace(_60,"").toLowerCase();pm=pm.replace(_60,"").toLowerCase();}if(_50.strict&&v!=am&&v!=pm){return false;}_58=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_57[3]=v;break;case "m":_57[4]=v;break;case "s":_57[5]=v;break;case "S":_57[6]=v;}return true;});var _61=+_57[3];if(_58==="p"&&_61<12){_57[3]=_61+12;}else{if(_58==="a"&&_61==12){_57[3]=0;}}var _62=new Date(_57[0],_57[1],_57[2],_57[3],_57[4],_57[5],_57[6]);if(_50.strict){_62.setFullYear(_57[0]);}var _63=_53.join(""),_64=_63.indexOf("d")!=-1,_65=_63.indexOf("M")!=-1;if(!_59||(_65&&_62.getMonth()>_57[1])||(_64&&_62.getDate()>_57[2])){return null;}if((_65&&_62.getMonth()<_57[1])||(_64&&_62.getDate()<_57[2])){_62=dojo.date.add(_62,"hour",1);}return _62;};function _41(_66,_67,_68,_69){var _6a=function(x){return x;};_67=_67||_6a;_68=_68||_6a;_69=_69||_6a;var _6b=_66.match(/(''|[^'])+/g),_6c=_66.charAt(0)=="'";dojo.forEach(_6b,function(_6d,i){if(!_6d){_6b[i]="";}else{_6b[i]=(_6c?_68:_67)(_6d.replace(/''/g,"'"));_6c=!_6c;}});return _69(_6b.join(""));};function _4e(_6e,_6f,_70,_71){_71=dojo.regexp.escapeString(_71);if(!_70.strict){_71=_71.replace(" a"," ?a");}return _71.replace(/([a-z])\1*/ig,function(_72){var s,c=_72.charAt(0),l=_72.length,p2="",p3="";if(_70.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p3+"[1-9][0-9]|"+p2+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_70.am||_6f["dayPeriods-format-wide-am"],pm=_70.pm||_6f["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_70.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_6e){_6e.push(_72);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};})();(function(){var _73=[];dojo.date.locale.addCustomFormats=function(_74,_75){_73.push({pkg:_74,name:_75});};dojo.date.locale._getGregorianBundle=function(_76){var _77={};dojo.forEach(_73,function(_78){var _79=dojo.i18n.getLocalization(_78.pkg,_78.name,_76);_77=dojo.mixin(_77,_79);},this);return _77;};})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(_7a,_7b,_7c,_7d){var _7e,_7f=dojo.date.locale._getGregorianBundle(_7d),_80=[_7a,_7c,_7b];if(_7c=="standAlone"){var key=_80.join("-");_7e=_7f[key];if(_7e[0]==1){_7e=undefined;}}_80[1]="format";return (_7e||_7f[_80.join("-")]).concat();};dojo.date.locale.isWeekend=function(_81,_82){var _83=dojo.cldr.supplemental.getWeekend(_82),day=(_81||new Date()).getDay();if(_83.end<_83.start){_83.end+=7;if(day<_83.start){day+=7;}}return day>=_83.start&&day<=_83.end;};dojo.date.locale._getDayOfYear=function(_84){return dojo.date.difference(new Date(_84.getFullYear(),0,1,_84.getHours()),_84)+1;};dojo.date.locale._getWeekOfYear=function(_85,_86){if(arguments.length==1){_86=0;}var _87=new Date(_85.getFullYear(),0,1).getDay(),adj=(_87-_86+7)%7,_88=Math.floor((dojo.date.locale._getDayOfYear(_85)+adj-1)/7);if(_87==_86){_88++;}return _88;};}if(!dojo._hasResource["dijit.form.DropDownButton"]){dojo._hasResource["dijit.form.DropDownButton"]=true;dojo.provide("dijit.form.DropDownButton");}if(!dojo._hasResource["dijit.Calendar"]){dojo._hasResource["dijit.Calendar"]=true;dojo.provide("dijit.Calendar");dojo.declare("dijit.Calendar",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/Calendar.html","<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" dojoAttachEvent=\"onkeypress: _onKeyPress\" aria-labelledby=\"${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span dojoAttachPoint=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div dojoType=\"dijit.form.DropDownButton\" dojoAttachPoint=\"monthDropDownButton\"\n\t\t\t\t\tid=\"${id}_mddb\" tabIndex=\"-1\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span dojoAttachPoint=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent=\"onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut, onmousedown: _onDayMouseDown, onmouseup: _onDayMouseUp\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">\n\t\t\t<td class=\"dijitReset dijitCalendarDateTemplate\" role=\"gridcell\"><span class=\"dijitCalendarDateLabel\"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\">\n\t\t\t\t<h3 class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span dojoAttachPoint=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"),widgetsInTemplate:true,value:new Date(""),datePackage:"dojo.date",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},_isValidDate:function(_89){return _89&&!isNaN(_89)&&typeof _89=="object"&&_89.toString()!=this.constructor.prototype.value.toString();},setValue:function(_8a){dojo.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_8a);},_getValueAttr:function(){var _8b=new this.dateClassObj(this.value);_8b.setHours(0,0,0,0);if(_8b.getDate()<this.value.getDate()){_8b=this.dateFuncObj.add(_8b,"hour",1);}return _8b;},_setValueAttr:function(_8c,_8d){if(_8c){_8c=new this.dateClassObj(_8c);}if(this._isValidDate(_8c)){if(!this._isValidDate(this.value)||this.dateFuncObj.compare(_8c,this.value)){_8c.setHours(1,0,0,0);if(!this.isDisabledDate(_8c,this.lang)){this._set("value",_8c);this.set("currentFocus",_8c);if(_8d||typeof _8d=="undefined"){this.onChange(this.get("value"));this.onValueSelected(this.get("value"));}}}}else{this._set("value",null);this.set("currentFocus",this.currentFocus);}},_setText:function(_8e,_8f){while(_8e.firstChild){_8e.removeChild(_8e.firstChild);}_8e.appendChild(dojo.doc.createTextNode(_8f));},_populateGrid:function(){var _90="";if(dijit.byId("customer_bank")&&dijit.byId("customer_bank").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank&&[dijit.byId("customer_bank").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("customer_bank").get("value")][0].value!==""){_90=misys._config.businessDateForBank[dijit.byId("customer_bank").get("value")][0].value;}else{if(dijit.byId("issuing_bank_abbv_name")&&dijit.byId("issuing_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("issuing_bank_abbv_name").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("issuing_bank_abbv_name").get("value")][0].value!==""){_90=misys._config.businessDateForBank[dijit.byId("issuing_bank_abbv_name").get("value")][0].value;}else{if(dijit.byId("remitting_bank_abbv_name")&&dijit.byId("remitting_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("remitting_bank_abbv_name").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("remitting_bank_abbv_name").get("value")][0].value!==""){_90=misys._config.businessDateForBank[dijit.byId("remitting_bank_abbv_name").get("value")][0].value;}else{if(dijit.byId("recipient_bank_abbv_name")&&dijit.byId("recipient_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("recipient_bank_abbv_name").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("recipient_bank_abbv_name").get("value")][0].value!==""){_90=misys._config.businessDateForBank[dijit.byId("recipient_bank_abbv_name").get("value")][0].value;}else{if(dijit.byId("advising_bank_abbv_name")&&dijit.byId("advising_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("advising_bank_abbv_name").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("advising_bank_abbv_name").get("value")][0].value!==""){_90=misys._config.businessDateForBank[dijit.byId("advising_bank_abbv_name").get("value")][0].value;}else{if(dijit.byId("bank_abbv_name")&&dijit.byId("bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("bank_abbv_name").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("bank_abbv_name").get("value")][0].value!==""){_90=misys._config.businessDateForBank[dijit.byId("bank_abbv_name").get("value")][0].value;}else{if(misys&&misys._config&&misys._config.bankBusinessDate&&misys._config.bankBusinessDate!==""){_90=misys._config.bankBusinessDate;}}}}}}}var _91=new this.dateClassObj(this.currentFocus);_91.setDate(1);var _92=_91.getDay(),_93=this.dateFuncObj.getDaysInMonth(_91),_94=this.dateFuncObj.getDaysInMonth(this.dateFuncObj.add(_91,"month",-1)),_95=null;if(_90!==""){var _96=_90.substring(0,4);var _97=_90.substring(5,7);var _98=_90.substring(8,10);_95=new this.dateClassObj(_96,_97-1,_98);}else{_95=new this.dateClassObj();}var _99=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);if(_99>_92){_99-=7;}dojo.query(".dijitCalendarDateTemplate",this.domNode).forEach(function(_9a,i){i+=_99;var _9b=new this.dateClassObj(_91),_9c,_9d="dijitCalendar",adj=0;if(i<_92){_9c=_94-_92+i+1;adj=-1;_9d+="Previous";}else{if(i>=(_92+_93)){_9c=i-_92-_93+1;adj=1;_9d+="Next";}else{_9c=i-_92+1;_9d+="Current";}}if(adj){_9b=this.dateFuncObj.add(_9b,"month",adj);}_9b.setDate(_9c);if(!this.dateFuncObj.compare(_9b,_95,"date")){_9d="dijitCalendarCurrentDate "+_9d;}if(this._isSelectedDate(_9b,this.lang)){_9d="dijitCalendarSelectedDate "+_9d;}if(this.isDisabledDate(_9b,this.lang)){_9d="dijitCalendarDisabledDate "+_9d;}var _9e=this.getClassForDate(_9b,this.lang);if(_9e){_9d=_9e+" "+_9d;}_9a.className=_9d+"Month dijitCalendarDateTemplate";_9a.dijitDateValue=_9b.valueOf();dojo.attr(_9a,"dijitDateValue",_9b.valueOf());var _9f=dojo.query(".dijitCalendarDateLabel",_9a)[0],_a0=_9b.getDateLocalized?_9b.getDateLocalized(this.lang):_9b.getDate();this._setText(_9f,_a0);},this);var _a1=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_91);this.monthDropDownButton.dropDown.set("months",_a1);this.monthDropDownButton.containerNode.innerHTML=(dojo.isIE==6?"":"<div class='dijitSpacer'>"+this.monthDropDownButton.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_a1[_91.getMonth()]+"</div>";var y=_91.getFullYear()-1;var d=new this.dateClassObj();dojo.forEach(["previous","current","next"],function(_a2){d.setFullYear(y++);this._setText(this[_a2+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(_a3){var _a4=(_a3.datePackage&&(_a3.datePackage!="dojo.date"))?_a3.datePackage+".Date":"Date";this.dateClassObj=dojo.getObject(_a4,false);this.datePackage=_a3.datePackage||this.datePackage;this.dateFuncObj=dojo.getObject(this.datePackage,false);this.dateLocaleModule=dojo.getObject(this.datePackage+".locale",false);},postMixInProperties:function(){if(isNaN(this.value)){delete this.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);var _a5=dojo.hitch(this,function(_a6,n){var _a7=dojo.query(_a6,this.domNode)[0];for(var i=0;i<n;i++){_a7.parentNode.appendChild(_a7.cloneNode(true));}});_a5(".dijitCalendarDayLabelTemplate",6);_a5(".dijitCalendarDateTemplate",6);_a5(".dijitCalendarWeekTemplate",5);var _a8=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang);var _a9=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);dojo.query(".dijitCalendarDayLabel",this.domNode).forEach(function(_aa,i){this._setText(_aa,_a8[(i+_a9)%7]);},this);var _ab=new this.dateClassObj(this.currentFocus);this.monthDropDownButton.dropDown=new dijit.Calendar._MonthDropDown({id:this.id+"_mdd",onChange:dojo.hitch(this,"_onMonthSelect")});this.set("currentFocus",_ab,false);var _ac=this;var _ad=function(_ae,_af,adj){_ac._connects.push(dijit.typematic.addMouseListener(_ac[_ae],_ac,function(_b0){if(_b0>=0){_ac._adjustDisplay(_af,adj);}},0.8,500));};_ad("incrementMonth","month",1);_ad("decrementMonth","month",-1);_ad("nextYearLabelNode","year",1);_ad("previousYearLabelNode","year",-1);},_adjustDisplay:function(_b1,_b2){this._setCurrentFocusAttr(this.dateFuncObj.add(this.currentFocus,_b1,_b2));},_setCurrentFocusAttr:function(_b3,_b4){var _b5=this.currentFocus,_b6=_b5?dojo.query("[dijitDateValue="+_b5.valueOf()+"]",this.domNode)[0]:null;_b3=new this.dateClassObj(_b3);_b3.setHours(1,0,0,0);this._set("currentFocus",_b3);this._populateGrid();var _b7=dojo.query("[dijitDateValue="+_b3.valueOf()+"]",this.domNode)[0];_b7.setAttribute("tabIndex",this.tabIndex);if(this._focused||_b4){_b7.focus();}if(_b6&&_b6!=_b7){if(dojo.isWebKit){_b6.setAttribute("tabIndex","-1");}else{_b6.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onMonthSelect:function(_b8){this.currentFocus=this.dateFuncObj.add(this.currentFocus,"month",_b8-this.currentFocus.getMonth());this._populateGrid();},_onDayClick:function(evt){dojo.stopEvent(evt);for(var _b9=evt.target;_b9&&!_b9.dijitDateValue;_b9=_b9.parentNode){}if(_b9&&!dojo.hasClass(_b9,"dijitCalendarDisabledDate")){this.set("value",_b9.dijitDateValue);}},_onDayMouseOver:function(evt){var _ba=dojo.hasClass(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(_ba&&(_ba.dijitDateValue||_ba==this.previousYearLabelNode||_ba==this.nextYearLabelNode)){dojo.addClass(_ba,"dijitCalendarHoveredDate");this._currentNode=_ba;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(dojo.hasClass(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}dojo.removeClass(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var _bb=evt.target.parentNode;if(_bb&&_bb.dijitDateValue){dojo.addClass(_bb,"dijitCalendarActiveDate");this._currentNode=_bb;}},_onDayMouseUp:function(evt){var _bc=evt.target.parentNode;if(_bc&&_bc.dijitDateValue){dojo.removeClass(_bc,"dijitCalendarActiveDate");}},handleKey:function(evt){var _bd=false;var dk=dojo.keys,_be=-1,_bf,_c0=this.currentFocus;switch(evt.keyCode){case dk.RIGHT_ARROW:_be=1;case dk.LEFT_ARROW:_bf="day";if(!this.isLeftToRight()){_be*=-1;}break;case dk.DOWN_ARROW:_be=1;case dk.UP_ARROW:_bf="week";break;case dk.PAGE_DOWN:_be=1;case dk.PAGE_UP:_bf=evt.ctrlKey||evt.altKey?"year":"month";break;case dk.END:_c0=this.dateFuncObj.add(_c0,"month",1);_bf="day";case dk.HOME:_c0=new this.dateClassObj(_c0);_c0.setDate(1);break;case dk.ENTER:case dk.SPACE:if(window.isAccessibilityEnabled==true){_bd=true;}this.set("value",this.currentFocus);break;default:return true;}if(_bf){_c0=this.dateFuncObj.add(_c0,_bf,_be);}this._setCurrentFocusAttr(_c0);if(_bd){this.domNode.tBodies[0].click();}return false;},_onKeyPress:function(evt){if(!this.handleKey(evt)){dojo.stopEvent(evt);}},onValueSelected:function(_c1){},onChange:function(_c2){},_isSelectedDate:function(_c3,_c4){return this._isValidDate(this.value)&&!this.dateFuncObj.compare(_c3,this.value,"date");},isDisabledDate:function(_c5,_c6){},getClassForDate:function(_c7,_c8){}});dojo.declare("dijit.Calendar._MonthDropDown",[dijit._Widget,dijit._Templated],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"dojoAttachEvent='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_c9){this.domNode.innerHTML=dojo.map(_c9,function(_ca,idx){return _ca?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+_ca+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(dojo.attr(evt.target,"month"));},onChange:function(_cb){},_onMenuHover:function(evt){dojo.toggleClass(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});}if(!dojo._hasResource["dijit.form._DateTimeTextBox"]){dojo._hasResource["dijit.form._DateTimeTextBox"]=true;dojo.provide("dijit.form._DateTimeTextBox");new Date("X");dojo.declare("dijit.form._DateTimeTextBox",[dijit.form.RangeBoundTextBox,dijit._HasDropDown],{templateString:dojo.cache("dijit.form","templates/DropDownBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdojoAttachPoint=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"0\" readonly=\"readonly\" aria-label=\"This is a ${id} dropdown\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled} \n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input aria-label=\"Form field error\" class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"),hasDownArrow:true,openOnClick:true,regExpGen:dojo.date.locale.regexp,datePackage:"dojo.date",compare:function(_cc,_cd){var _ce=this._isInvalidDate(_cc);var _cf=this._isInvalidDate(_cd);return _ce?(_cf?0:-1):(_cf?1:dojo.date.compare(_cc,_cd,this._selector));},forceWidth:true,format:function(_d0,_d1){if(!_d0){return "";}return this.dateLocaleModule.format(_d0,_d1);},"parse":function(_d2,_d3){return this.dateLocaleModule.parse(_d2,_d3)||(this._isEmpty(_d2)?null:undefined);},serialize:function(val,_d4){if(val.toGregorian){val=val.toGregorian();}return dojo.date.stamp.toISOString(val,_d4);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(_d5){var _d6=_d5.datePackage?_d5.datePackage+".Date":"Date";this.dateClassObj=dojo.getObject(_d6,false);this.value=new this.dateClassObj("");this.datePackage=_d5.datePackage||this.datePackage;this.dateLocaleModule=dojo.getObject(this.datePackage+".locale",false);this.regExpGen=this.dateLocaleModule.regexp;this._invalidDate=dijit.form._DateTimeTextBox.prototype.value.toString();if(misys&&misys._config&&misys._config.bankBusinessDate){var _d7=misys._config.bankBusinessDate.substring(0,4);var _d8=misys._config.bankBusinessDate.substring(5,7);var _d9=misys._config.bankBusinessDate.substring(8,10);this.dropDownDefaultValue=new Date(_d7,_d8-1,_d9);}},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(this.openOnClick||!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_da){_da.selector=this._selector;_da.fullYear=true;var _db=dojo.date.stamp.fromISOString;if(typeof _da.min=="string"){_da.min=_db(_da.min);}if(typeof _da.max=="string"){_da.max=_db(_da.max);}this.inherited(arguments);},_isInvalidDate:function(_dc){return !_dc||isNaN(_dc)||typeof _dc!="object"||_dc.toString()==this._invalidDate;},_setValueAttr:function(_dd,_de,_df){if(_dd!==undefined){if(typeof _dd=="string"){_dd=dojo.date.stamp.fromISOString(_dd);}if(this._isInvalidDate(_dd)){_dd=null;}if(_dd instanceof Date&&!(this.dateClassObj instanceof Date)){_dd=new this.dateClassObj(_dd);}}this.inherited(arguments);if(this.dropDown){this.dropDown.set("value",_dd,false);}},_set:function(_e0,_e1){if(_e0=="value"&&this.value instanceof Date&&this.compare(_e1,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){var x=val.toString()==this._invalidDate;var y=!val;var z=isNaN(val);var p=typeof val!="object";var q=val.toString()==this._invalidDate;if(this._isInvalidDate(val)){if(misys&&misys._config&&misys._config.bankBusinessDate&&misys._config.bankBusinessDate!==""){var _e2=misys._config.bankBusinessDate.substring(0,4);var _e3=misys._config.bankBusinessDate.substring(5,7);var _e4=misys._config.bankBusinessDate.substring(8,10);val=new this.dateClassObj(_e2,_e3-1,_e4);}else{val=new this.dateClassObj();}}this.dropDownDefaultValue=val;},openDropDown:function(_e5){if(this.dropDown){this.dropDown.destroy();}var _e6=dojo.getObject(this.popupClass,false),_e7=this,_e8=this.get("value");this.dropDown=new _e6({onChange:function(_e9){dijit.form._DateTimeTextBox.superclass._setValueAttr.call(_e7,_e9,true);},id:this.id+"_popup",dir:_e7.dir,lang:_e7.lang,value:_e8,currentFocus:!this._isInvalidDate(_e8)?_e8:this.dropDownDefaultValue,constraints:_e7.constraints,filterString:_e7.filterString,datePackage:_e7.datePackage,isDisabledDate:function(_ea){return !_e7.rangeCheck(_ea,_e7.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_eb,_ec){this._setValueAttr(this.parse(_eb,this.constraints),_ec,_eb);}});}if(!dojo._hasResource["dijit.form.DateTextBox"]){dojo._hasResource["dijit.form.DateTextBox"]=true;dojo.provide("dijit.form.DateTextBox");dojo.declare("dijit.form.DateTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:"dijit.Calendar",_selector:"date",value:new Date(""),buildRendering:function(){this.inherited(arguments);if(window.isAccessibilityEnabled){dijit.setWaiState(this.textbox,"describedby","date-instructions");}}});}if(!dojo._hasResource["dojo.cldr.monetary"]){dojo._hasResource["dojo.cldr.monetary"]=true;dojo.provide("dojo.cldr.monetary");dojo.getObject("cldr.monetary",true,dojo);dojo.cldr.monetary.getData=function(_ed){var _ee={ADP:0,AFN:0,ALL:2,AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,CRC:0,DJF:0,ESP:0,GNF:0,GYD:0,IQD:3,IRR:3,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:2,MNT:0,MRO:0,OMR:3,PYG:0,RWF:0,SLL:0,SOS:0,STD:0,TMM:0,TND:3,TRL:0,TZS:0,UGX:0,UZS:0,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0};var _ef={CHF:5};var _f0=_ee[_ed],_f1=_ef[_ed];if(typeof _f0=="undefined"){_f0=2;}if(typeof _f1=="undefined"){_f1=0;}return {places:_f0,round:_f1};};}if(!dojo._hasResource["dojo.currency"]){dojo._hasResource["dojo.currency"]=true;dojo.provide("dojo.currency");dojo.getObject("currency",true,dojo);dojo.currency._mixInDefaults=function(_f2){_f2=_f2||{};_f2.type="currency";var _f3=dojo.i18n.getLocalization("dojo.cldr","currency",_f2.locale)||{};var iso=_f2.currency;var _f4=dojo.cldr.monetary.getData(iso);dojo.forEach(["displayName","symbol","group","decimal"],function(_f5){_f4[_f5]=_f3[iso+"_"+_f5];});_f4.fractional=[true,false];return dojo.mixin(_f4,_f2);};dojo.currency.format=function(_f6,_f7){return dojo.number.format(_f6,dojo.currency._mixInDefaults(_f7));};dojo.currency.regexp=function(_f8){return dojo.number.regexp(dojo.currency._mixInDefaults(_f8));};dojo.currency.parse=function(_f9,_fa){return dojo.number.parse(_f9,dojo.currency._mixInDefaults(_fa));};}if(!dojo._hasResource["dijit.form.NumberTextBox"]){dojo._hasResource["dijit.form.NumberTextBox"]=true;dojo.provide("dijit.form.NumberTextBox");dojo.declare("dijit.form.NumberTextBoxMixin",null,{regExpGen:dojo.number.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:dojo.number.format,_setConstraintsAttr:function(_fb){var _fc=typeof _fb.places=="number"?_fb.places:0;if(_fc){_fc++;}if(typeof _fb.max!="number"){_fb.max=9*Math.pow(10,15-_fc);}if(typeof _fb.min!="number"){_fb.min=-9*Math.pow(10,15-_fc);}this.inherited(arguments,[_fb]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value)){this.set("value",this.value);}},_onFocus:function(){if(this.disabled){return;}var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var _fd=this.format(val,this.constraints);if(_fd!==undefined){this.textbox.value=_fd;}}this.inherited(arguments);},format:function(_fe,_ff){var _100=String(_fe);if(typeof _fe!="number"){return _100;}if(isNaN(_fe)){return "";}if(!("rangeCheck" in this&&this.rangeCheck(_fe,_ff))&&_ff.exponent!==false&&/\de[-+]?\d/i.test(_100)){return _100;}if(this.editOptions&&this._focused){_ff=dojo.mixin({},_ff,this.editOptions);}return this._formatter(_fe,_ff);},_parser:dojo.number.parse,parse:function(_101,_102){var v=this._parser(_101,dojo.mixin({},_102,(this.editOptions&&this._focused)?this.editOptions:{}));if(this.editOptions&&this._focused&&isNaN(v)){v=this._parser(_101,_102);}return v;},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(_103){return (_103===null||_103===""||_103===undefined)?NaN:this.inherited(arguments);},serialize:function(_104,_105){return (typeof _104!="number"||isNaN(_104))?"":this.inherited(arguments);},_setBlurValue:function(){var val=dojo.hitch(dojo.mixin({},this,{_focused:true}),"get")("value");this._setValueAttr(val,true);},_setValueAttr:function(_106,_107,_108){if(_106!==undefined&&_108===undefined){_108=String(_106);if(typeof _106=="number"){if(isNaN(_106)){_108="";}else{if(("rangeCheck" in this&&this.rangeCheck(_106,this.constraints))||this.constraints.exponent===false||!/\de[-+]?\d/i.test(_108)){_108=undefined;}}}else{if(!_106){_108="";_106=NaN;}else{_106=undefined;}}}this.inherited(arguments,[_106,_107,_108]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+dojo.number._realNumberRegexp(dojo.mixin({},this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_109){if(!this._focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}}});dojo.declare("dijit.form.NumberTextBox",[dijit.form.RangeBoundTextBox,dijit.form.NumberTextBoxMixin],{baseClass:"dijitTextBox dijitNumberTextBox"});}if(!dojo._hasResource["dijit.form.CurrencyTextBox"]){dojo._hasResource["dijit.form.CurrencyTextBox"]=true;dojo.provide("dijit.form.CurrencyTextBox");dojo.declare("dijit.form.CurrencyTextBox",dijit.form.NumberTextBox,{currency:"",baseClass:"dijitTextBox dijitCurrencyTextBox",regExpGen:function(_10a){return "("+(this._focused?this.inherited(arguments,[dojo.mixin({},_10a,this.editOptions)])+"|":"")+dojo.currency.regexp(_10a)+")";},_formatter:dojo.currency.format,_parser:dojo.currency.parse,parse:function(_10b,_10c){var v=this.inherited(arguments);if(isNaN(v)&&/\d+/.test(_10b)){v=dojo.hitch(dojo.mixin({},this,{_parser:dijit.form.NumberTextBox.prototype._parser}),"inherited")(arguments);}return v;},_setConstraintsAttr:function(_10d){if(!_10d.currency&&this.currency){_10d.currency=this.currency;}this.inherited(arguments,[dojo.currency._mixInDefaults(dojo.mixin(_10d,{exponent:false}))]);}});}if(!dojo._hasResource["misys.form.CurrencyTextBox"]){dojo._hasResource["misys.form.CurrencyTextBox"]=true;dojo.provide("misys.form.CurrencyTextBox");dojo.experimental("misys.form.CurrencyTextBox");dojo.declare("misys.form.CurrencyTextBox",dijit.form.CurrencyTextBox,{validator:function(_10e,_10f){var _110,_111=_10e;if(_10f&&_10f.places&&_10e){var _112=dojo.i18n.normalizeLocale(_10f.locale),_113=dojo.i18n.getLocalization("dojo.cldr","number",_112),_114=_113.decimal;var _115=_10f.places;if(_10e.indexOf(_114)>=0){_110=_10e.substring(_10e.indexOf(_114)+1,_10e.length);if(_115>_110.length){while(_110.length<_115){_111=_111+"0";_110=_110+"0";}this.textbox.value=_111;this._set("displayedValue",this.get("displayedValue"));}}}return (new RegExp("^(?:"+this.regExpGen(_10f)+")"+(this.required?"":"?")+"$")).test(_111)&&(!this.required||!this._isEmpty(_10e))&&(this._isEmpty(_10e)||this.parse(_10e,_10f)!==undefined);}});}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.getObject("data.util.sorter",true,dojo);dojo.data.util.sorter.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};dojo.data.util.sorter.createSortFunction=function(_116,_117){var _118=[];function _119(attr,dir,comp,s){return function(_11a,_11b){var a=s.getValue(_11a,attr);var b=s.getValue(_11b,attr);return dir*comp(a,b);};};var _11c;var map=_117.comparatorMap;var bc=dojo.data.util.sorter.basicComparator;for(var i=0;i<_116.length;i++){_11c=_116[i];var attr=_11c.attribute;if(attr){var dir=(_11c.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_118.push(_119(attr,dir,comp,_117));}}return function(rowA,rowB){var i=0;while(i<_118.length){var ret=_118[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.getObject("data.util.simpleFetch",true,dojo);dojo.data.util.simpleFetch.fetch=function(_11d){_11d=_11d||{};if(!_11d.store){_11d.store=this;}var self=this;var _11e=function(_11f,_120){if(_120.onError){var _121=_120.scope||dojo.global;_120.onError.call(_121,_11f,_120);}};var _122=function(_123,_124){var _125=_124.abort||null;var _126=false;var _127=_124.start?_124.start:0;var _128=(_124.count&&(_124.count!==Infinity))?(_127+_124.count):_123.length;_124.abort=function(){_126=true;if(_125){_125.call(_124);}};var _129=_124.scope||dojo.global;if(!_124.store){_124.store=self;}if(_124.onBegin){_124.onBegin.call(_129,_123.length,_124);}if(_124.sort){_123.sort(dojo.data.util.sorter.createSortFunction(_124.sort,self));}if(_124.onItem){for(var i=_127;(i<_123.length)&&(i<_128);++i){var item=_123[i];if(!_126){_124.onItem.call(_129,item,_124);}}}if(_124.onComplete&&!_126){var _12a=null;if(!_124.onItem){_12a=_123.slice(_127,_128);}_124.onComplete.call(_129,_12a,_124);}};this._fetchItems(_11d,_122,_11e);return _11d;};}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.getObject("data.util.filter",true,dojo);dojo.data.util.filter.patternToRegExp=function(_12b,_12c){var rxp="^";var c=null;for(var i=0;i<_12b.length;i++){c=_12b.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_12b.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_12c){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};}if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.declare("dijit.form.ComboBoxMixin",dijit._HasDropDown,{item:null,pageSize:Infinity,store:null,fetchProperties:{},query:{},autoComplete:true,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:dojo.cache("dijit.form","templates/DropDownBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdojoAttachPoint=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"0\" readonly=\"readonly\" aria-label=\"This is a ${id} dropdown\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled} \n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input aria-label=\"Form field error\" class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitComboBox",dropDownClass:"dijit.form._ComboBoxMenu",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_12d){var pos=0;if(typeof (_12d.selectionStart)=="number"){pos=_12d.selectionStart;}else{if(dojo.isIE){var tr=dojo.doc.selection.createRange().duplicate();var ntr=_12d.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_12e,_12f){_12f=parseInt(_12f);dijit.selectInputText(_12e,_12f,_12f);},_setDisabledAttr:function(_130){this.inherited(arguments);dijit.setWaiState(this.domNode,"disabled",_130);},_abortQuery:function(){if(this.searchTimer){clearTimeout(this.searchTimer);this.searchTimer=null;}if(this._fetchHandle){if(this._fetchHandle.abort){this._fetchHandle.abort();}this._fetchHandle=null;}},_onInput:function(evt){if(!this.searchTimer&&(evt.type=="paste"||evt.type=="input")&&this._lastInput!=this.textbox.value){this.searchTimer=setTimeout(dojo.hitch(this,function(){this._onKey({charOrCode:229});}),100);}this.inherited(arguments);},_onKey:function(evt){var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==dojo.keys.SHIFT){return;}var _131=false;var pw=this.dropDown;var dk=dojo.keys;var _132=null;this._prev_key_backspace=false;this._abortQuery();this.inherited(arguments);if(this._opened){_132=pw.getHighlightedOption();}switch(key){case dk.PAGE_DOWN:case dk.DOWN_ARROW:case dk.PAGE_UP:case dk.UP_ARROW:if(this._opened){this._announceOption(_132);}dojo.stopEvent(evt);break;case dk.ENTER:if(_132){if(_132==pw.nextButton){this._nextSearch(1);dojo.stopEvent(evt);break;}else{if(_132==pw.previousButton){this._nextSearch(-1);dojo.stopEvent(evt);break;}}}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}if(this._opened||this._fetchHandle){evt.preventDefault();}case dk.TAB:var _133=this.get("displayedValue");if(pw&&(_133==pw._messages["previousMessage"]||_133==pw._messages["nextMessage"])){break;}if(_132){this._selectOption();}if(this._opened){this._lastQuery=null;this.closeDropDown();}break;case " ":if(_132){dojo.stopEvent(evt);this._selectOption();this.closeDropDown();}else{_131=true;}break;case dk.DELETE:case dk.BACKSPACE:this._prev_key_backspace=true;_131=true;break;default:_131=typeof key=="string"||key==229;}if(_131){this.item=undefined;this.searchTimer=setTimeout(dojo.hitch(this,"_startSearchFromInput"),1);}},_autoCompleteText:function(text){var fn=this.focusNode;dijit.selectInputText(fn,fn.value.length);var _134=this.ignoreCase?"toLowerCase":"substr";if(text[_134](0).indexOf(this.focusNode.value[_134](0))==0){var cpos=this._getCaretPos(fn);if((cpos+1)>fn.value.length){fn.value=text;dijit.selectInputText(fn,cpos);}}else{fn.value=text;dijit.selectInputText(fn);}},_openResultList:function(_135,_136){this._fetchHandle=null;if(this.disabled||this.readOnly||(_136.query[this.searchAttr]!=this._lastQuery)){return;}var _137=this.dropDown._highlighted_option&&dojo.hasClass(this.dropDown._highlighted_option,"dijitMenuItemSelected");this.dropDown.clearResultList();if(!_135.length&&!this._maxOptions){this.closeDropDown();return;}_136._maxOptions=this._maxOptions;var _138=this.dropDown.createOptions(_135,_136,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(_136.direction){if(1==_136.direction){this.dropDown.highlightFirstOption();}else{if(-1==_136.direction){this.dropDown.highlightLastOption();}}if(_137){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_136.query[this.searchAttr])){this._announceOption(_138[1]);}}},_showResultList:function(){this.closeDropDown(true);this.displayMessage("");this.openDropDown();dijit.setWaiState(this.domNode,"expanded","true");},loadDropDown:function(_139){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);dijit.setWaiState(this.domNode,"expanded","false");dijit.removeWaiState(this.focusNode,"activedescendant");}},_setBlurValue:function(){var _13a=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_13a==pw._messages["previousMessage"]||_13a==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_13a);}else{if(this.value!=this._lastValueReported){dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);}this._refreshState();}}},_onBlur:function(){this.closeDropDown();this.inherited(arguments);},_setItemAttr:function(item,_13b,_13c){if(!_13c){_13c=this.store.getValue(item,this.searchAttr);}var _13d=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_13c;this._set("item",item);dijit.form.ComboBox.superclass._setValueAttr.call(this,_13d,_13b,_13c);},_announceOption:function(node){if(!node){return;}var _13e;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){_13e=node.innerHTML;this.item=undefined;this.value="";}else{_13e=this.store.getValue(node.item,this.searchAttr).toString();this.set("item",node.item,false,_13e);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(node,"id"));this._autoCompleteText(_13e);},_selectOption:function(evt){if(evt){this._announceOption(evt.target);}this.closeDropDown();this._setCaretPos(this.focusNode,this.focusNode.value.length);dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_getQueryString:function(text){return dojo.string.substitute(this.queryExpr,[text]);},_startSearch:function(key){if(!this.dropDown){var _13f=this.id+"_popup",_140=dojo.getObject(this.dropDownClass,false);this.dropDown=new _140({onChange:dojo.hitch(this,this._selectOption),id:_13f,dir:this.dir});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,"owns",_13f);}var _141=dojo.clone(this.query);this._lastInput=key;this._lastQuery=_141[this.searchAttr]=this._getQueryString(key);this.searchTimer=setTimeout(dojo.hitch(this,function(_142,_143){this.searchTimer=null;var _144={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:_142,onBegin:dojo.hitch(this,"_setMaxOptions"),onComplete:dojo.hitch(this,"_openResultList"),onError:function(_145){_143._fetchHandle=null;console.error("dijit.form.ComboBox: "+_145);_143.closeDropDown();},start:0,count:this.pageSize};dojo.mixin(_144,_143.fetchProperties);this._fetchHandle=_143.store.fetch(_144);var _146=function(_147,_148){_147.start+=_147.count*_148;_147.direction=_148;this._fetchHandle=this.store.fetch(_147);this.focus();};this._nextSearch=this.dropDown.onPage=dojo.hitch(this,_146,this._fetchHandle);},_141,this),this.searchDelay);},_setMaxOptions:function(size,_149){this._maxOptions=size;},_getValueField:function(){return this.searchAttr;},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var _14a=this.srcNodeRef;this.store=new dijit.form._ComboBoxDataStore(_14a);if(!("value" in this.params)){var item=(this.item=this.store.fetchSelectedItem());if(item){var _14b=this._getValueField();this.value=this.store.getValue(item,_14b);}}}this.inherited(arguments);},postCreate:function(){var _14c=dojo.query("label[for=\""+this.id+"\"]");if(_14c.length){_14c[0].id=(this.id+"_label");dijit.setWaiState(this.domNode,"labelledby",_14c[0].id);}this.inherited(arguments);},_setHasDownArrowAttr:function(val){this.hasDownArrow=val;this._buttonNode.style.display=val?"":"none";},_getMenuLabelFromItem:function(item){var _14d=this.labelFunc(item,this.store),_14e=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_14d=this.doHighlight(_14d,this._escapeHtml(this._lastInput));_14e="html";}return {html:_14e=="html",label:_14d};},doHighlight:function(_14f,find){var _150=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=dojo.regexp.escapeString(find);return this._escapeHtml(_14f).replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_150),"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_151){return _151.getValue(item,this.labelAttr||this.searchAttr).toString();}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' style='overflow: \"auto\"; overflow-x: \"hidden\";'>"+"<li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' role='option'></li>"+"<li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' role='option'></li>"+"</ul>",_messages:null,baseClass:"dijitComboBoxMenu",postMixInProperties:function(){this.inherited(arguments);this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(_152){this.value=_152;this.onChange(_152);},onChange:function(_153){},onPage:function(_154){},onClose:function(){this._blurOptionNode();},_createOption:function(item,_155){var _156=dojo.create("li",{"class":"dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl"),role:"option"});var _157=_155(item);if(_157.html){_156.innerHTML=_157.label;}else{_156.appendChild(dojo.doc.createTextNode(_157.label));}if(_156.innerHTML==""){_156.innerHTML="&nbsp;";}_156.item=item;return _156;},createOptions:function(_158,_159,_15a){this.previousButton.style.display=(_159.start==0)?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(_158,function(item,i){var _15b=this._createOption(item,_15a);dojo.attr(_15b,"id",this.id+i);this.domNode.insertBefore(_15b,this.nextButton);},this);var _15c=false;if(_159._maxOptions&&_159._maxOptions!=-1){if((_159.start+_159.count)<_159._maxOptions){_15c=true;}else{if((_159.start+_159.count)>_159._maxOptions&&_159.count==_158.length){_15c=true;}}}else{if(_159.count==_158.length){_15c=true;}}this.nextButton.style.display=_15c?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next");return this.domNode.childNodes;},clearResultList:function(){while(this.domNode.childNodes.length>2){this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2]);}this._blurOptionNode();},_onMouseDown:function(evt){dojo.stopEvent(evt);},_onMouseUp:function(evt){if(evt.target===this.domNode||!this._highlighted_option){return;}else{if(evt.target==this.previousButton){this._blurOptionNode();this.onPage(-1);}else{if(evt.target==this.nextButton){this._blurOptionNode();this.onPage(1);}else{var tgt=evt.target;while(!tgt.item){tgt=tgt.parentNode;}this._setValueAttr({target:tgt},true);}}}},_onMouseOver:function(evt){if(evt.target===this.domNode){return;}var tgt=evt.target;if(!(tgt==this.previousButton||tgt==this.nextButton)){while(!tgt.item){tgt=tgt.parentNode;}}this._focusOptionNode(tgt);},_onMouseOut:function(evt){if(evt.target===this.domNode){return;}this._blurOptionNode();},_focusOptionNode:function(node){if(this._highlighted_option!=node){this._blurOptionNode();this._highlighted_option=node;dojo.addClass(this._highlighted_option,"dijitMenuItemSelected");}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");this._highlighted_option=null;}},_highlightNextOption:function(){if(!this.getHighlightedOption()){var fc=this.domNode.firstChild;this._focusOptionNode(fc.style.display=="none"?fc.nextSibling:fc);}else{var ns=this._highlighted_option.nextSibling;if(ns&&ns.style.display!="none"){this._focusOptionNode(ns);}else{this.highlightFirstOption();}}dojo.window.scrollIntoView(this._highlighted_option);},highlightFirstOption:function(){var _15d=this.domNode.firstChild;var _15e=_15d.nextSibling;this._focusOptionNode(_15e.style.display=="none"?_15d:_15e);dojo.window.scrollIntoView(this._highlighted_option);},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dojo.window.scrollIntoView(this._highlighted_option);},_highlightPrevOption:function(){if(!this.getHighlightedOption()){var lc=this.domNode.lastChild;this._focusOptionNode(lc.style.display=="none"?lc.previousSibling:lc);}else{var ps=this._highlighted_option.previousSibling;if(ps&&ps.style.display!="none"){this._focusOptionNode(ps);}else{this.highlightLastOption();}}dojo.window.scrollIntoView(this._highlighted_option);},_page:function(up){var _15f=0;var _160=this.domNode.scrollTop;var _161=dojo.style(this.domNode,"height");if(!this.getHighlightedOption()){this._highlightNextOption();}while(_15f<_161){if(up){if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break;}this._highlightPrevOption();}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break;}this._highlightNextOption();}var _162=this.domNode.scrollTop;_15f+=(_162-_160)*(up?-1:1);_160=_162;}},pageUp:function(){this._page(true);},pageDown:function(){this._page(false);},getHighlightedOption:function(){var ho=this._highlighted_option;return (ho&&ho.parentNode)?ho:null;},handleKey:function(evt){switch(evt.charOrCode){case dojo.keys.DOWN_ARROW:this._highlightNextOption();return false;case dojo.keys.PAGE_DOWN:this.pageDown();return false;case dojo.keys.UP_ARROW:this._highlightPrevOption();return false;case dojo.keys.PAGE_UP:this.pageUp();return false;default:return true;}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{_setValueAttr:function(_163,_164,_165){this._set("item",null);if(!_163){_163="";}dijit.form.ValidationTextBox.prototype._setValueAttr.call(this,_163,_164,_165);}});dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(root){this.root=root;if(root.tagName!="SELECT"&&root.firstChild){root=dojo.query("select",root);if(root.length>0){root=root[0];}else{this.root.innerHTML="<SELECT>"+this.root.innerHTML+"</SELECT>";root=this.root.firstChild;}this.root=root;}dojo.query("> option",root).forEach(function(node){node.innerHTML=dojo.trim(node.innerHTML);});},getValue:function(item,_166,_167){return (_166=="value")?item.value:(item.innerText||item.textContent||"");},isItemLoaded:function(_168){return true;},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true};},_fetchItems:function(args,_169,_16a){if(!args.query){args.query={};}if(!args.query.name){args.query.name="";}if(!args.queryOptions){args.queryOptions={};}var _16b=dojo.data.util.filter.patternToRegExp(args.query.name,args.queryOptions.ignoreCase),_16c=dojo.query("> option",this.root).filter(function(_16d){return (_16d.innerText||_16d.textContent||"").match(_16b);});if(args.sort){_16c.sort(dojo.data.util.sorter.createSortFunction(args.sort,this));}_169(_16c,args);},close:function(_16e){return;},getLabel:function(item){return item.innerHTML;},getIdentity:function(item){return dojo.attr(item,"value");},fetchItemByIdentity:function(args){var item=dojo.query("> option[value='"+args.identity+"']",this.root)[0];args.onItem(item);},fetchSelectedItem:function(){var root=this.root,si=root.selectedIndex;return typeof si=="number"?dojo.query("> option:nth-child("+(si!=-1?si+1:1)+")",root)[0]:null;}});dojo.extend(dijit.form._ComboBoxDataStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["dijit.form.FilteringSelect"]){dojo._hasResource["dijit.form.FilteringSelect"]=true;dojo.provide("dijit.form.FilteringSelect");dojo.declare("dijit.form.FilteringSelect",[dijit.form.MappedTextBox,dijit.form.ComboBoxMixin],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened;},isValid:function(){return this.item||(!this.required&&this.get("displayedValue")=="");},_refreshState:function(){if(!this.searchTimer){this.inherited(arguments);}},_callbackSetLabel:function(_16f,_170,_171){if((_170&&_170.query[this.searchAttr]!=this._lastQuery)||(!_170&&_16f.length&&this.store.getIdentity(_16f[0])!=this._lastQuery)){return;}if(!_16f.length){this.valueNode.value="";dijit.form.TextBox.superclass._setValueAttr.call(this,"",_171||(_171===undefined&&!this._focused));this._set("item",null);this.validate(this._focused);}else{this.set("item",_16f[0],_171);}},_openResultList:function(_172,_173){if(_173.query[this.searchAttr]!=this._lastQuery){return;}dijit.form.ComboBoxMixin.prototype._openResultList.apply(this,arguments);if(this.item===undefined){this.validate(true);}},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(_174,_175){if(!this._onChangeActive){_175=null;}this._lastQuery=_174;if(_174===null||_174===""){this._setDisplayedValueAttr("",_175);return;}var self=this;this.store.fetchItemByIdentity({identity:_174,onItem:function(item){self._callbackSetLabel(item?[item]:[],undefined,_175);}});},_setItemAttr:function(item,_176,_177){this.inherited(arguments);this.valueNode.value=this.value;this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(_178,_179){if(_178==null){_178="";}if(!this._created){if(!("displayedValue" in this.params)){return;}_179=false;}if(this.store){this.closeDropDown();var _17a=dojo.clone(this.query);this._lastQuery=_17a[this.searchAttr]=this._getDisplayQueryString(_178);this.textbox.value=_178;this._lastDisplayedValue=_178;this._set("displayedValue",_178);var _17b=this;var _17c={query:_17a,queryOptions:{ignoreCase:this.ignoreCase,deep:true},onComplete:function(_17d,_17e){_17b._fetchHandle=null;dojo.hitch(_17b,"_callbackSetLabel")(_17d,_17e,_179);},onError:function(_17f){_17b._fetchHandle=null;console.error("dijit.form.FilteringSelect: "+_17f);dojo.hitch(_17b,"_callbackSetLabel")([],undefined,false);}};dojo.mixin(_17c,this.fetchProperties);this._fetchHandle=this.store.fetch(_17c);}},undo:function(){this.set("displayedValue",this._lastDisplayedValue);}});}if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(_180){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_180.url;this._ccUrl=_180.url;this.url=_180.url;this._jsonData=_180.data;this.data=null;this._datatypeMap=_180.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_181){return dojo.date.stamp.fromISOString(_181);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_180.urlPreventCache!==undefined){this.urlPreventCache=_180.urlPreventCache?true:false;}if(_180.hierarchical!==undefined){this.hierarchical=_180.hierarchical?true:false;}if(_180.clearOnClose){this.clearOnClose=true;}if("failOk" in _180){this.failOk=_180.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){if(!(window.isDrawdown&&window.isDrawdown===true)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.");}}},_assertIsAttribute:function(_182){if(typeof _182!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");}},getValue:function(item,_183,_184){var _185=this.getValues(item,_183);return (_185.length>0)?_185[0]:_184;},getValues:function(item,_186){this._assertIsItem(item);this._assertIsAttribute(_186);return (item[_186]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _187=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_187.push(key);}}return _187;},hasAttribute:function(item,_188){this._assertIsItem(item);this._assertIsAttribute(_188);return (_188 in item);},containsValue:function(item,_189,_18a){var _18b=undefined;if(typeof _18a==="string"){_18b=dojo.data.util.filter.patternToRegExp(_18a,false);}return this._containsValue(item,_189,_18a,_18b);},_containsValue:function(item,_18c,_18d,_18e){return dojo.some(this.getValues(item,_18c),function(_18f){if(_18f!==null&&!dojo.isObject(_18f)&&_18e){if(_18f.toString().match(_18e)){return true;}}else{if(_18d===_18f){return true;}}});},isItem:function(_190){if(_190&&_190[this._storeRefPropName]===this){if(this._arrayOfAllItems[_190[this._itemNumPropName]]===_190){return true;}}return false;},isItemLoaded:function(_191){return this.isItem(_191);},loadItem:function(_192){this._assertIsItem(_192.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},_fetchItems:function(_193,_194,_195){var self=this,_196=function(_197,_198){var _199=[],i,key;if(_197.query){var _19a,_19b=_197.queryOptions?_197.queryOptions.ignoreCase:false;var _19c={};for(key in _197.query){_19a=_197.query[key];if(typeof _19a==="string"){_19c[key]=dojo.data.util.filter.patternToRegExp(_19a,_19b);}else{if(_19a instanceof RegExp){_19c[key]=_19a;}}}for(i=0;i<_198.length;++i){var _19d=true;var _19e=_198[i];if(_19e===null){_19d=false;}else{for(key in _197.query){_19a=_197.query[key];if(!self._containsValue(_19e,key,_19a,_19c[key])){_19d=false;}}}if(_19d){_199.push(_19e);}}_194(_199,_197);}else{for(i=0;i<_198.length;++i){var item=_198[i];if(item!==null){_199.push(item);}}_194(_199,_197);}};if(this._loadFinished){_196(_193,this._getItemsArray(_193.queryOptions));}else{if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_193,filter:_196});}else{this._loadInProgress=true;var _19f={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _1a0=misys.xhrPost(_19f);_1a0.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;_196(_193,self._getItemsArray(_193.queryOptions));self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_195(e,_193);}});_1a0.addErrback(function(_1a1){self._loadInProgress=false;_195(_1a1,_193);});var _1a2=null;if(_193.abort){_1a2=_193.abort;}_193.abort=function(){var df=_1a0;if(df&&df.fired===-1){df.cancel();df=null;}if(_1a2){_1a2.call(_193);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;_196(_193,this._getItemsArray(_193.queryOptions));}catch(e){_195(e,_193);}}else{_195(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),_193);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _1a3=this._queuedFetches[i],_1a4=_1a3.args,_1a5=_1a3.filter;if(_1a5){_1a5(_1a4,this._getItemsArray(_1a4.queryOptions));}else{this.fetchItemByIdentity(_1a4);}}this._queuedFetches=[];}},_getItemsArray:function(_1a6){if(_1a6&&_1a6.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_1a7){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_1a8){var _1a9=false,self=this;function _1aa(_1ab){var _1ac=((_1ab!==null)&&(typeof _1ab==="object")&&(!dojo.isArray(_1ab)||_1a9)&&(!dojo.isFunction(_1ab))&&(_1ab.constructor==Object||dojo.isArray(_1ab))&&(typeof _1ab._reference==="undefined")&&(typeof _1ab._type==="undefined")&&(typeof _1ab._value==="undefined")&&self.hierarchical);return _1ac;};function _1ad(_1ae){self._arrayOfAllItems.push(_1ae);for(var _1af in _1ae){var _1b0=_1ae[_1af];if(_1b0){if(dojo.isArray(_1b0)){var _1b1=_1b0;for(var k=0;k<_1b1.length;++k){var _1b2=_1b1[k];if(_1aa(_1b2)){_1ad(_1b2);}}}else{if(_1aa(_1b0)){_1ad(_1b0);}}}}};this._labelAttr=_1a8.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_1a8.items;if(this._arrayOfTopLevelItems){for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(dojo.isArray(item)){_1a9=true;}_1ad(item);item[this._rootItemPropName]=true;}}var _1b3={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _1b4=item[key];if(_1b4!==null){if(!dojo.isArray(_1b4)){item[key]=[_1b4];}}else{item[key]=[null];}}_1b3[key]=key;}}while(_1b3[this._storeRefPropName]){this._storeRefPropName+="_";}while(_1b3[this._itemNumPropName]){this._itemNumPropName+="_";}while(_1b3[this._reverseRefMap]){this._reverseRefMap+="_";}var _1b5;var _1b6=_1a8.identifier;if(_1b6){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_1b6;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_1b5=item[_1b6];var _1b7=_1b5[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_1b7)){this._itemsByIdentity[_1b7]=item;}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_1b6+"].  Value collided: ["+_1b7+"]");}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_1b6+"].  Value collided: ["+_1b7+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_1b5=item[key];for(var j=0;j<_1b5.length;++j){_1b4=_1b5[j];if(_1b4!==null&&typeof _1b4=="object"){if(("_type" in _1b4)&&("_value" in _1b4)){var type=_1b4._type;var _1b8=this._datatypeMap[type];if(!_1b8){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(dojo.isFunction(_1b8)){_1b5[j]=new _1b8(_1b4._value);}else{if(dojo.isFunction(_1b8.deserialize)){_1b5[j]=_1b8.deserialize(_1b4._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_1b4._reference){var _1b9=_1b4._reference;if(!dojo.isObject(_1b9)){_1b5[j]=this._getItemByIdentity(_1b9);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _1ba=this._arrayOfAllItems[k],_1bb=true;for(var _1bc in _1b9){if(_1ba[_1bc]!=_1b9[_1bc]){_1bb=false;}}if(_1bb){_1b5[j]=_1ba;}}}if(this.referenceIntegrity){var _1bd=_1b5[j];if(this.isItem(_1bd)){this._addReferenceToMap(_1bd,item,key);}}}else{if(this.isItem(_1b4)){if(this.referenceIntegrity){this._addReferenceToMap(_1b4,item,key);}}}}}}}},_addReferenceToMap:function(_1be,_1bf,_1c0){},getIdentity:function(item){var _1c1=this._features["dojo.data.api.Identity"];if(_1c1===Number){return item[this._itemNumPropName];}else{var _1c2=item[_1c1];if(_1c2){return _1c2[0];}}return null;},fetchItemByIdentity:function(_1c3){var item,_1c4;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_1c3});}else{this._loadInProgress=true;var _1c5={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _1c6=dojo.xhrGet(_1c5);_1c6.addCallback(function(data){var _1c7=_1c3.scope?_1c3.scope:dojo.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_1c3.identity);if(_1c3.onItem){_1c3.onItem.call(_1c7,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_1c3.onError){_1c3.onError.call(_1c7,error);}}});_1c6.addErrback(function(_1c8){self._loadInProgress=false;if(_1c3.onError){var _1c9=_1c3.scope?_1c3.scope:dojo.global;_1c3.onError.call(_1c9,_1c8);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_1c3.identity);if(_1c3.onItem){_1c4=_1c3.scope?_1c3.scope:dojo.global;_1c3.onItem.call(_1c4,item);}}}}else{item=this._getItemByIdentity(_1c3.identity);if(_1c3.onItem){_1c4=_1c3.scope?_1c3.scope:dojo.global;_1c3.onItem.call(_1c4,item);}}},_getItemByIdentity:function(_1ca){var item=null;if(this._itemsByIdentity&&Object.hasOwnProperty.call(this._itemsByIdentity,_1ca)){item=this._itemsByIdentity[_1ca];}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_1ca)){item=this._arrayOfAllItems[_1ca];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _1cb=this._features["dojo.data.api.Identity"];if(_1cb===Number){return null;}else{return [_1cb];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _1cc={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _1cd=dojo.xhrGet(_1cc);_1cd.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){throw e;}});_1cd.addErrback(function(_1ce){throw _1ce;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["misys.data.ItemFileReadStore"]){dojo._hasResource["misys.data.ItemFileReadStore"]=true;dojo.provide("misys.data.ItemFileReadStore");dojo.experimental("misys.data.ItemFileReadStore");dojo.declare("misys.data.ItemFileReadStore",dojo.data.ItemFileReadStore,{_fetchItems:function(_1cf,_1d0,_1d1){var _1d2=_1cf.serverQuery||_1cf.queryOptions||{};var self=this,_1d3=function(_1d4,_1d5){var _1d6=[],i,key;if(_1d4.query){var _1d7,_1d8=_1d4.queryOptions?_1d4.queryOptions.ignoreCase:false;var _1d9={};for(key in _1d4.query){_1d7=_1d4.query[key];if(typeof _1d7==="string"){_1d9[key]=dojo.data.util.filter.patternToRegExp(_1d7,_1d8);}else{if(_1d7 instanceof RegExp){_1d9[key]=_1d7;}}}for(i=0;i<_1d5.length;++i){var _1da=true;var _1db=_1d5[i];if(_1db===null){_1da=false;}else{for(key in _1d4.query){_1d7=_1d4.query[key];if(!self._containsValue(_1db,key,_1d7,_1d9[key])){_1da=false;}}}if(_1da){_1d6.push(_1db);}}_1d0(_1d6,_1d4);}else{if(_1d5){for(i=0;i<_1d5.length;++i){var item=_1d5[i];if(item!==null){_1d6.push(item);}}}_1d0(_1d6,_1d4);}};if(this._loadFinished){_1d3(_1cf,this._getItemsArray(_1cf.queryOptions));}else{if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("misys.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_1cf,filter:_1d3});}else{this._loadInProgress=true;var _1dc={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,content:_1d2};var _1dd=misys.xhrPost(_1dc);_1dd.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;_1d3(_1cf,self._getItemsArray(_1cf.queryOptions));self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_1d1(e,_1cf);}});_1dd.addErrback(function(_1de){self._loadInProgress=false;_1d1(_1de,_1cf);});var _1df=null;if(_1cf.abort){_1df=_1cf.abort;}_1cf.abort=function(){var df=_1dd;if(df&&df.fired===-1){df.cancel();df=null;}if(_1df){_1df.call(_1cf);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;_1d3(_1cf,this._getItemsArray(_1cf.queryOptions));}catch(e){_1d1(e,_1cf);}}else{_1d1(new Error("misys.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),_1cf);}}}}});}if(!dojo._hasResource["dojo.data.ItemFileWriteStore"]){dojo._hasResource["dojo.data.ItemFileWriteStore"]=true;dojo.provide("dojo.data.ItemFileWriteStore");dojo.declare("dojo.data.ItemFileWriteStore",dojo.data.ItemFileReadStore,{constructor:function(_1e0){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize){this._datatypeMap["Date"].serialize=function(obj){return dojo.date.stamp.toISOString(obj,{zulu:true});};}if(_1e0&&(_1e0.referenceIntegrity===false)){this.referenceIntegrity=false;}this._saveInProgress=false;},referenceIntegrity:true,_assert:function(_1e1){if(!_1e1){throw new Error("assertion failed in ItemFileWriteStore");}},_getIdentifierAttribute:function(){var _1e2=this.getFeatures()["dojo.data.api.Identity"];return _1e2;},newItem:function(_1e3,_1e4){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad();}if(typeof _1e3!="object"&&typeof _1e3!="undefined"){throw new Error("newItem() was passed something other than an object");}var _1e5=null;var _1e6=this._getIdentifierAttribute();if(_1e6===Number){_1e5=this._arrayOfAllItems.length;}else{_1e5=_1e3[_1e6];if(typeof _1e5==="undefined"){throw new Error("newItem() was not passed an identity for the new item");}if(dojo.isArray(_1e5)){throw new Error("newItem() was not passed an single-valued identity");}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[_1e5]==="undefined");}this._assert(typeof this._pending._newItems[_1e5]==="undefined");this._assert(typeof this._pending._deletedItems[_1e5]==="undefined");var _1e7={};_1e7[this._storeRefPropName]=this;_1e7[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[_1e5]=_1e7;_1e7[_1e6]=[_1e5];}this._arrayOfAllItems.push(_1e7);var _1e8=null;if(_1e4&&_1e4.parent&&_1e4.attribute){_1e8={item:_1e4.parent,attribute:_1e4.attribute,oldValue:undefined};var _1e9=this.getValues(_1e4.parent,_1e4.attribute);if(_1e9&&_1e9.length>0){var _1ea=_1e9.slice(0,_1e9.length);if(_1e9.length===1){_1e8.oldValue=_1e9[0];}else{_1e8.oldValue=_1e9.slice(0,_1e9.length);}_1ea.push(_1e7);this._setValueOrValues(_1e4.parent,_1e4.attribute,_1ea,false);_1e8.newValue=this.getValues(_1e4.parent,_1e4.attribute);}else{this._setValueOrValues(_1e4.parent,_1e4.attribute,_1e7,false);_1e8.newValue=_1e7;}}else{_1e7[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(_1e7);}this._pending._newItems[_1e5]=_1e7;for(var key in _1e3){if(key===this._storeRefPropName||key===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem");}var _1eb=_1e3[key];if(!dojo.isArray(_1eb)){_1eb=[_1eb];}_1e7[key]=_1eb;if(this.referenceIntegrity){for(var i=0;i<_1eb.length;i++){var val=_1eb[i];if(this.isItem(val)){this._addReferenceToMap(val,_1e7,key);}}}}this.onNew(_1e7,_1e8);return _1e7;},_removeArrayElement:function(_1ec,_1ed){var _1ee=dojo.indexOf(_1ec,_1ed);if(_1ee!=-1){_1ec.splice(_1ee,1);return true;}return false;},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var _1ef=item[this._itemNumPropName];var _1f0=this.getIdentity(item);if(this.referenceIntegrity){var _1f1=this.getAttributes(item);if(item[this._reverseRefMap]){item["backup_"+this._reverseRefMap]=dojo.clone(item[this._reverseRefMap]);}dojo.forEach(_1f1,function(_1f2){dojo.forEach(this.getValues(item,_1f2),function(_1f3){if(this.isItem(_1f3)){if(!item["backupRefs_"+this._reverseRefMap]){item["backupRefs_"+this._reverseRefMap]=[];}item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(_1f3),attr:_1f2});this._removeReferenceFromMap(_1f3,item,_1f2);}},this);},this);var _1f4=item[this._reverseRefMap];if(_1f4){for(var _1f5 in _1f4){var _1f6=null;if(this._itemsByIdentity){_1f6=this._itemsByIdentity[_1f5];}else{_1f6=this._arrayOfAllItems[_1f5];}if(_1f6){for(var _1f7 in _1f4[_1f5]){var _1f8=this.getValues(_1f6,_1f7)||[];var _1f9=dojo.filter(_1f8,function(_1fa){return !(this.isItem(_1fa)&&this.getIdentity(_1fa)==_1f0);},this);this._removeReferenceFromMap(item,_1f6,_1f7);if(_1f9.length<_1f8.length){this._setValueOrValues(_1f6,_1f7,_1f9,true);}}}}}}this._arrayOfAllItems[_1ef]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[_1f0];}this._pending._deletedItems[_1f0]=item;if(item[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,item);}this.onDelete(item);return true;},setValue:function(item,_1fb,_1fc){return this._setValueOrValues(item,_1fb,_1fc,true);},setValues:function(item,_1fd,_1fe){return this._setValueOrValues(item,_1fd,_1fe,true);},unsetAttribute:function(item,_1ff){return this._setValueOrValues(item,_1ff,[],true);},_setValueOrValues:function(item,_200,_201,_202){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(dojo.isString(_200));this._assert(typeof _201!=="undefined");var _203=this._getIdentifierAttribute();if(_200==_203){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");}var _204=this._getValueOrValues(item,_200);var _205=this.getIdentity(item);if(!this._pending._modifiedItems[_205]){var _206={};for(var key in item){if((key===this._storeRefPropName)||(key===this._itemNumPropName)||(key===this._rootItemPropName)){_206[key]=item[key];}else{if(key===this._reverseRefMap){_206[key]=dojo.clone(item[key]);}else{_206[key]=item[key].slice(0,item[key].length);}}}this._pending._modifiedItems[_205]=_206;}var _207=false;if(dojo.isArray(_201)&&_201.length===0){_207=delete item[_200];_201=undefined;if(this.referenceIntegrity&&_204){var _208=_204;if(!dojo.isArray(_208)){_208=[_208];}for(var i=0;i<_208.length;i++){var _209=_208[i];if(this.isItem(_209)){this._removeReferenceFromMap(_209,item,_200);}}}}else{var _20a;if(dojo.isArray(_201)){var _20b=_201;_20a=_201.slice(0,_201.length);}else{_20a=[_201];}if(this.referenceIntegrity){if(_204){var _208=_204;if(!dojo.isArray(_208)){_208=[_208];}var map={};dojo.forEach(_208,function(_20c){if(this.isItem(_20c)){var id=this.getIdentity(_20c);map[id.toString()]=true;}},this);dojo.forEach(_20a,function(_20d){if(this.isItem(_20d)){var id=this.getIdentity(_20d);if(map[id.toString()]){delete map[id.toString()];}else{this._addReferenceToMap(_20d,item,_200);}}},this);for(var rId in map){var _20e;if(this._itemsByIdentity){_20e=this._itemsByIdentity[rId];}else{_20e=this._arrayOfAllItems[rId];}this._removeReferenceFromMap(_20e,item,_200);}}else{for(var i=0;i<_20a.length;i++){var _209=_20a[i];if(this.isItem(_209)){this._addReferenceToMap(_209,item,_200);}}}}item[_200]=_20a;_207=true;}if(_202){this.onSet(item,_200,_204,_201);}return _207;},_addReferenceToMap:function(_20f,_210,_211){var _212=this.getIdentity(_210);var _213=_20f[this._reverseRefMap];if(!_213){_213=_20f[this._reverseRefMap]={};}var _214=_213[_212];if(!_214){_214=_213[_212]={};}_214[_211]=true;},_removeReferenceFromMap:function(_215,_216,_217){var _218=this.getIdentity(_216);var _219=_215[this._reverseRefMap];var _21a;if(_219){for(_21a in _219){if(_21a==_218){delete _219[_21a][_217];if(this._isEmpty(_219[_21a])){delete _219[_21a];}}}if(this._isEmpty(_219)){delete _215[this._reverseRefMap];}}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap]){}}},_getValueOrValues:function(item,_21b){var _21c=undefined;if(this.hasAttribute(item,_21b)){var _21d=this.getValues(item,_21b);if(_21d.length==1){_21c=_21d[0];}else{_21c=_21d;}}return _21c;},_flatten:function(_21e){if(this.isItem(_21e)){var item=_21e;var _21f=this.getIdentity(item);var _220={_reference:_21f};return _220;}else{if(typeof _21e==="object"){for(var type in this._datatypeMap){var _221=this._datatypeMap[type];if(dojo.isObject(_221)&&!dojo.isFunction(_221)){if(_21e instanceof _221.type){if(!_221.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");}return {_type:type,_value:_221.serialize(_21e)};}}else{if(_21e instanceof _221){return {_type:type,_value:_21e.toString()};}}}}return _21e;}},_getNewFileContentString:function(){var _222={};var _223=this._getIdentifierAttribute();if(_223!==Number){_222.identifier=_223;}if(this._labelAttr){_222.label=this._labelAttr;}_222.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var _224={};for(var key in item){if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var _225=key;var _226=this.getValues(item,_225);if(_226.length==1){_224[_225]=this._flatten(_226[0]);}else{var _227=[];for(var j=0;j<_226.length;++j){_227.push(this._flatten(_226[j]));_224[_225]=_227;}}}}_222.items.push(_224);}}var _228=true;return dojo.toJson(_222,_228);},_isEmpty:function(_229){var _22a=true;if(dojo.isObject(_229)){var i;for(i in _229){_22a=false;break;}}else{if(dojo.isArray(_229)){if(_229.length>0){_22a=false;}}}return _22a;},save:function(_22b){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var _22c=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(_22b&&_22b.onComplete){var _22d=_22b.scope||dojo.global;_22b.onComplete.call(_22d);}};var _22e=function(err){self._saveInProgress=false;if(_22b&&_22b.onError){var _22f=_22b.scope||dojo.global;_22b.onError.call(_22f,err);}};if(this._saveEverything){var _230=this._getNewFileContentString();this._saveEverything(_22c,_22e,_230);}if(this._saveCustom){this._saveCustom(_22c,_22e);}if(!this._saveEverything&&!this._saveCustom){_22c();}},revert:function(){this._assert(!this._saveInProgress);var _231;for(_231 in this._pending._modifiedItems){var _232=this._pending._modifiedItems[_231];var _233=null;if(this._itemsByIdentity){_233=this._itemsByIdentity[_231];}else{_233=this._arrayOfAllItems[_231];}_232[this._storeRefPropName]=this;for(key in _233){delete _233[key];}dojo.mixin(_233,_232);}var _234;for(_231 in this._pending._deletedItems){_234=this._pending._deletedItems[_231];_234[this._storeRefPropName]=this;var _235=_234[this._itemNumPropName];if(_234["backup_"+this._reverseRefMap]){_234[this._reverseRefMap]=_234["backup_"+this._reverseRefMap];delete _234["backup_"+this._reverseRefMap];}this._arrayOfAllItems[_235]=_234;if(this._itemsByIdentity){this._itemsByIdentity[_231]=_234;}if(_234[this._rootItemPropName]){this._arrayOfTopLevelItems.push(_234);}}for(_231 in this._pending._deletedItems){_234=this._pending._deletedItems[_231];if(_234["backupRefs_"+this._reverseRefMap]){dojo.forEach(_234["backupRefs_"+this._reverseRefMap],function(_236){var _237;if(this._itemsByIdentity){_237=this._itemsByIdentity[_236.id];}else{_237=this._arrayOfAllItems[_236.id];}this._addReferenceToMap(_237,_234,_236.attr);},this);delete _234["backupRefs_"+this._reverseRefMap];}}for(_231 in this._pending._newItems){var _238=this._pending._newItems[_231];_238[this._storeRefPropName]=null;this._arrayOfAllItems[_238[this._itemNumPropName]]=null;if(_238[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,_238);}if(this._itemsByIdentity){delete this._itemsByIdentity[_231];}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true;},isDirty:function(item){if(item){var _239=this.getIdentity(item);return new Boolean(this._pending._newItems[_239]||this._pending._modifiedItems[_239]||this._pending._deletedItems[_239]).valueOf();}else{if(!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)){return true;}return false;}},onSet:function(item,_23a,_23b,_23c){},onNew:function(_23d,_23e){},onDelete:function(_23f){},close:function(_240){if(this.clearOnClose){if(!this.isDirty()){this.inherited(arguments);}else{throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}}}});}if(!dojo._hasResource["dojox.uuid._base"]){dojo._hasResource["dojox.uuid._base"]=true;dojo.provide("dojox.uuid._base");dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(_241,_242){if(!_241){if(!_242){_242="An assert statement failed.\n"+"The method dojox.uuid.assert() was called with a 'false' value.\n";}throw new Error(_242);}};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID;};dojox.uuid.isValid=function(_243){_243=_243.toString();var _244=(dojo.isString(_243)&&(_243.length==36)&&(_243==_243.toLowerCase()));if(_244){var _245=_243.split("-");_244=((_245.length==5)&&(_245[0].length==8)&&(_245[1].length==4)&&(_245[2].length==4)&&(_245[3].length==4)&&(_245[4].length==12));var _246=16;for(var i in _245){var part=_245[i];var _247=parseInt(part,_246);_244=_244&&isFinite(_247);}}return _244;};dojox.uuid.getVariant=function(_248){if(!dojox.uuid._ourVariantLookupTable){var _249=dojox.uuid.variant;var _24a=[];_24a[0]=_249.NCS;_24a[1]=_249.NCS;_24a[2]=_249.NCS;_24a[3]=_249.NCS;_24a[4]=_249.NCS;_24a[5]=_249.NCS;_24a[6]=_249.NCS;_24a[7]=_249.NCS;_24a[8]=_249.DCE;_24a[9]=_249.DCE;_24a[10]=_249.DCE;_24a[11]=_249.DCE;_24a[12]=_249.MICROSOFT;_24a[13]=_249.MICROSOFT;_24a[14]=_249.UNKNOWN;_24a[15]=_249.UNKNOWN;dojox.uuid._ourVariantLookupTable=_24a;}_248=_248.toString();var _24b=_248.charAt(19);var _24c=16;var _24d=parseInt(_24b,_24c);dojox.uuid.assert((_24d>=0)&&(_24d<=16));return dojox.uuid._ourVariantLookupTable[_24d];};dojox.uuid.getVersion=function(_24e){var _24f="dojox.uuid.getVersion() was not passed a DCE Variant UUID.";dojox.uuid.assert(dojox.uuid.getVariant(_24e)==dojox.uuid.variant.DCE,_24f);_24e=_24e.toString();var _250=_24e.charAt(14);var _251=16;var _252=parseInt(_250,_251);return _252;};dojox.uuid.getNode=function(_253){var _254="dojox.uuid.getNode() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_253)==dojox.uuid.version.TIME_BASED,_254);_253=_253.toString();var _255=_253.split("-");var _256=_255[4];return _256;};dojox.uuid.getTimestamp=function(_257,_258){var _259="dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_257)==dojox.uuid.version.TIME_BASED,_259);_257=_257.toString();if(!_258){_258=null;}switch(_258){case "string":case String:return dojox.uuid.getTimestamp(_257,Date).toUTCString();break;case "hex":var _25a=_257.split("-");var _25b=_25a[0];var _25c=_25a[1];var _25d=_25a[2];_25d=_25d.slice(1);var _25e=_25d+_25c+_25b;dojox.uuid.assert(_25e.length==15);return _25e;break;case null:case "date":case Date:var _25f=3394248;var _260=16;var _261=_257.split("-");var _262=parseInt(_261[0],_260);var _263=parseInt(_261[1],_260);var _264=parseInt(_261[2],_260);var _265=_264&4095;_265<<=16;_265+=_263;_265*=4294967296;_265+=_262;var _266=_265/10000;var _267=60*60;var _268=_25f;var _269=_268*_267;var _26a=_269*1000;var _26b=_266-_26a;var _26c=new Date(_26b);return _26c;break;default:dojox.uuid.assert(false,"dojox.uuid.getTimestamp was not passed a valid returnType: "+_258);break;}};}if(!dojo._hasResource["dojox.uuid"]){dojo._hasResource["dojox.uuid"]=true;dojo.provide("dojox.uuid");}if(!dojo._hasResource["dojox.data.QueryReadStore"]){dojo._hasResource["dojox.data.QueryReadStore"]=true;dojo.provide("dojox.data.QueryReadStore");dojo.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,doClientPaging:false,doClientSorting:false,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":true,"dojo.data.api.Identity":true},_labelAttr:"label",constructor:function(_26d){dojo.mixin(this,_26d);},getValue:function(item,_26e,_26f){this._assertIsItem(item);if(!dojo.isString(_26e)){throw new Error(this._className+".getValue(): Invalid attribute, string expected!");}if(!this.hasAttribute(item,_26e)){if(_26f){return _26f;}}return item.i[_26e];},getValues:function(item,_270){this._assertIsItem(item);var ret=[];if(this.hasAttribute(item,_270)){ret.push(item.i[_270]);}return ret;},getAttributes:function(item){this._assertIsItem(item);var ret=[];for(var i in item.i){ret.push(i);}return ret;},hasAttribute:function(item,_271){return this.isItem(item)&&typeof item.i[_271]!="undefined";},containsValue:function(item,_272,_273){var _274=this.getValues(item,_272);var len=_274.length;for(var i=0;i<len;i++){if(_274[i]==_273){return true;}}return false;},isItem:function(_275){if(_275){return typeof _275.r!="undefined"&&_275.r==this;}return false;},isItemLoaded:function(_276){return this.isItem(_276);},loadItem:function(args){if(this.isItemLoaded(args.item)){return;}},fetch:function(_277){_277=_277||{};if(!_277.store){_277.store=this;}var self=this;var _278=function(_279,_27a){if(_27a.onError){var _27b=_27a.scope||dojo.global;_27a.onError.call(_27b,_279,_27a);}};var _27c=function(_27d,_27e,_27f){var _280=_27e.abort||null;var _281=false;var _282=_27e.start?_27e.start:0;if(self.doClientPaging==false){_282=0;}var _283=_27e.count?(_282+_27e.count):_27d.length;_27e.abort=function(){_281=true;if(_280){_280.call(_27e);}};var _284=_27e.scope||dojo.global;if(!_27e.store){_27e.store=self;}if(_27e.onBegin){_27e.onBegin.call(_284,_27f,_27e);}if(_27e.sort&&self.doClientSorting){_27d.sort(dojo.data.util.sorter.createSortFunction(_27e.sort,self));}if(_27e.onItem){for(var i=_282;(i<_27d.length)&&(i<_283);++i){var item=_27d[i];if(!_281){_27e.onItem.call(_284,item,_27e);}}}if(_27e.onComplete&&!_281){var _285=null;if(!_27e.onItem){_285=_27d.slice(_282,_283);}_27e.onComplete.call(_284,_285,_27e);}};this._fetchItems(_277,_27c,_278);return _277;},getFeatures:function(){return this._features;},close:function(_286){},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},_xhrFetchHandler:function(data,_287,_288,_289){data=this._filterResponse(data);if(data.label){this._labelAttr=data.label;}var _28a=data.numRows||-1;this._items=[];dojo.forEach(data.items,function(e){this._items.push({i:e,r:this});},this);var _28b=data.identifier;this._itemsByIdentity={};if(_28b){this._identifier=_28b;var i;for(i=0;i<this._items.length;++i){var item=this._items[i].i;var _28c=item[_28b];if(!this._itemsByIdentity[_28c]){this._itemsByIdentity[_28c]=item;}else{throw new Error(this._className+":  The json data as specified by: ["+this.url+"] is malformed.  Items within the list have identifier: ["+_28b+"].  Value collided: ["+_28c+"]");}}}else{this._identifier=Number;for(i=0;i<this._items.length;++i){this._items[i].n=i;}}_28a=this._numRows=(_28a===-1)?this._items.length:_28a;_288(this._items,_287,_28a);this._numRows=_28a;},_fetchItems:function(_28d,_28e,_28f){var _290=_28d.serverQuery||_28d.query||{};if(!this.doClientPaging){_290.start=_28d.start||0;if(_28d.count){_290.count=_28d.count;}}if(!this.doClientSorting&&_28d.sort){var _291=[];dojo.forEach(_28d.sort,function(sort){if(sort&&sort.attribute){_291.push((sort.descending?"-":"")+sort.attribute);}});_290.sort=_291.join(",");}if(document.getElementById("_token")){_290.token=document.getElementById("_token").getAttribute("value");}if(this.doClientPaging&&this._lastServerQuery!==null&&dojo.toJson(_290)==dojo.toJson(this._lastServerQuery)){this._numRows=(this._numRows===-1)?this._items.length:this._numRows;_28e(this._items,_28d,this._numRows);}else{var _292=this.requestMethod.toLowerCase()=="post"?dojo.xhrPost:dojo.xhrGet;var _293=_292({url:this.url,handleAs:"json-comment-optional",content:_290,failOk:true});_28d.abort=function(){_293.cancel();};_293.addCallback(dojo.hitch(this,function(data){this._xhrFetchHandler(data,_28d,_28e,_28f);}));_293.addErrback(function(_294){_28f(_294,_28d);});this.lastRequestHash=new Date().getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=dojo.mixin({},_290);}},_filterResponse:function(data){return data;},_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this._className+": Invalid item argument.");}},_assertIsAttribute:function(_295){if(typeof _295!=="string"){throw new Error(this._className+": Invalid attribute argument ('"+_295+"').");}},fetchItemByIdentity:function(_296){if(this._itemsByIdentity){var item=this._itemsByIdentity[_296.identity];if(!(item===undefined)){if(_296.onItem){var _297=_296.scope?_296.scope:dojo.global;_296.onItem.call(_297,{i:item,r:this});}return;}}var _298=function(_299,_29a){var _29b=_296.scope?_296.scope:dojo.global;if(_296.onError){_296.onError.call(_29b,_299);}};var _29c=function(_29d,_29e){var _29f=_296.scope?_296.scope:dojo.global;try{var item=null;if(_29d&&_29d.length==1){item=_29d[0];}if(_296.onItem){_296.onItem.call(_29f,item);}}catch(error){if(_296.onError){_296.onError.call(_29f,error);}}};var _2a0={serverQuery:{id:_296.identity}};this._fetchItems(_2a0,_29c,_298);},getIdentity:function(item){var _2a1=null;if(this._identifier===Number){_2a1=item.n;}else{_2a1=item.i[this._identifier];}return _2a1;},getIdentityAttributes:function(item){return [this._identifier];}});}if(!dojo._hasResource["dijit._KeyNavContainer"]){dojo._hasResource["dijit._KeyNavContainer"]=true;dojo.provide("dijit._KeyNavContainer");dojo.declare("dijit._KeyNavContainer",dijit._Container,{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(_2a2,_2a3){var _2a4=(this._keyNavCodes={});var prev=dojo.hitch(this,this.focusPrev);var next=dojo.hitch(this,this.focusNext);dojo.forEach(_2a2,function(code){_2a4[code]=prev;});dojo.forEach(_2a3,function(code){_2a4[code]=next;});_2a4[dojo.keys.HOME]=dojo.hitch(this,"focusFirstChild");_2a4[dojo.keys.END]=dojo.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"));},addChild:function(_2a5,_2a6){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(_2a5);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){var _2a7=this._getFirstFocusableChild();if(_2a7){this.focusChild(_2a7);}},focusLastChild:function(){var _2a8=this._getLastFocusableChild();if(_2a8){this.focusChild(_2a8);}},focusNext:function(){var _2a9=this._getNextFocusableChild(this.focusedChild,1);this.focusChild(_2a9);},focusPrev:function(){var _2aa=this._getNextFocusableChild(this.focusedChild,-1);this.focusChild(_2aa,true);},focusChild:function(_2ab,last){if(this.focusedChild&&_2ab!==this.focusedChild){this._onChildBlur(this.focusedChild);}_2ab.set("tabIndex",this.tabIndex);_2ab.focus(last?"end":"start");this._set("focusedChild",_2ab);},_startupChild:function(_2ac){_2ac.set("tabIndex","-1");this.connect(_2ac,"_onFocus",function(){_2ac.set("tabIndex",this.tabIndex);});this.connect(_2ac,"_onBlur",function(){_2ac.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode){return;}this.focusFirstChild();dojo.attr(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();dojo.stopEvent(evt);}},_onChildBlur:function(_2ad){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(_2ae,dir){if(_2ae){_2ae=this._getSiblingOfChild(_2ae,dir);}var _2af=this.getChildren();for(var i=0;i<_2af.length;i++){if(!_2ae){_2ae=_2af[(dir>0)?0:(_2af.length-1)];}if(_2ae.isFocusable()){return _2ae;}_2ae=this._getSiblingOfChild(_2ae,dir);}return null;}});}if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/MenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" dojoAttachPoint=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),baseClass:"dijitMenuItem",label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(_2b0){if(_2b0&&!("label" in this.params)){this.set("label",_2b0.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _2b1=this.id+"_text";dojo.attr(this.containerNode,"id",_2b1);if(this.accelKeyNode){if(!window.isAccessibilityEnabled||(window.isAccessibilityEnabled&&this.accelKeyNode&&this.accelKeyNode.innerHTML&&this.accelKeyNode.innerHTML!=="")){dojo.attr(this.accelKeyNode,"id",this.id+"_accel");_2b1+=" "+this.id+"_accel";}}dijit.setWaiState(this.domNode,"labelledby",_2b1);dojo.setSelectable(this.domNode,false);},_onHover:function(){this.getParent().onItemHover(this);},_onUnhover:function(){this.getParent().onItemUnhover(this);this._set("hovering",false);},_onClick:function(evt){this.getParent().onItemClick(this,evt);dojo.stopEvent(evt);},onClick:function(evt){},focus:function(){try{if(dojo.isIE==8){this.containerNode.focus();}dijit.focus(this.focusNode);}catch(e){}},_onFocus:function(){this._setSelected(false);this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_2b2){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",_2b2);},setLabel:function(_2b3){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_2b3);},setDisabled:function(_2b4){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_2b4);},_setDisabledAttr:function(_2b5){dijit.setWaiState(this.focusNode,"disabled",_2b5?"true":"false");this._set("disabled",_2b5);},_setAccelKeyAttr:function(_2b6){this.accelKeyNode.style.display=_2b6?"":"none";this.accelKeyNode.innerHTML=_2b6;dojo.attr(this.containerNode,"colSpan",_2b6?"1":"2");this._set("accelKey",_2b6);}});}if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var _2b7=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,_2b7[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(node);}dojo.body().appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){dojo.style(this.arrowWrapper,"visibility","");}dijit.setWaiState(this.focusNode,"haspopup","true");},destroyDescendants:function(){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive();}delete this.popup;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:dojo.cache("dijit","templates/CheckedMenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" dojoAttachPoint=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&nbsp;</td>\n</tr>\n"),checked:false,_setCheckedAttr:function(_2b8){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",_2b8);dijit.setWaiState(this.domNode,"checked",_2b8);this._set("checked",_2b8);},onChange:function(_2b9){},_onClick:function(e){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuSeparator.html","<tr class=\"dijitMenuSeparator\">\n\t<td class=\"dijitMenuSeparatorIconCell\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n"),buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_2ba){_2ba.startup();});this.startupKeyNavChildren();this.inherited(arguments);},onExecute:function(){},onCancel:function(_2bb){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(evt);}else{var _2bc=this._getTopMenu();if(_2bc&&_2bc._isMenuBar){_2bc.focusNext();}}},_onPopupHover:function(evt){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var _2bd=this.currentPopup.parentMenu;if(_2bd.focusedChild){_2bd.focusedChild._setSelected(false);}_2bd.focusedChild=this.currentPopup.from_item;_2bd.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup);}},onItemHover:function(item){if(this.isActive){this.focusChild(item);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay);}}if(this.focusedChild){this.focusChild(item);}this._hoveredChild=item;},_onChildBlur:function(item){this._stopPopupTimer();item._setSelected(false);var _2be=item.popup;if(_2be){this._stopPendingCloseTimer(_2be);_2be._pendingClose_timer=setTimeout(function(){_2be._pendingClose_timer=null;if(_2be.parentMenu){_2be.parentMenu.currentPopup=null;}dijit.popup.close(_2be);},this.popupDelay);}},onItemUnhover:function(item){if(this.isActive){this._stopPopupTimer();item._setSelected(false);}if(this._hoveredChild==item){this._hoveredChild=null;}},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null;}},_stopPendingCloseTimer:function(_2bf){if(_2bf._pendingClose_timer){clearTimeout(_2bf._pendingClose_timer);_2bf._pendingClose_timer=null;}},_stopFocusTimer:function(){if(this._focus_timer){clearTimeout(this._focus_timer);this._focus_timer=null;}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(typeof this.isShowingNow=="undefined"){this._markActive();}this.focusChild(item);if(item.disabled){return false;}if(item.popup){this._openPopup();}else{this.onExecute();item.onClick(evt);}},_openPopup:function(){this._stopPopupTimer();var _2c0=this.focusedChild;if(!_2c0){return;}var _2c1=_2c0.popup;if(_2c1.isShowingNow){return;}if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);dijit.popup.close(this.currentPopup);}_2c1.parentMenu=this;_2c1.from_item=_2c0;var self=this;dijit.popup.open({parent:this,popup:_2c1,around:_2c0.domNode,orient:this._orient||(this.isLeftToRight()?{"TR":"TL","TL":"TR","BR":"BL","BL":"BR"}:{"TL":"TR","TR":"TL","BL":"BR","BR":"BL"}),onCancel:function(){self.focusChild(_2c0);self._cleanUp();_2c0._setSelected(true);self.focusedChild=_2c0;},onExecute:dojo.hitch(this,"_cleanUp")});this.currentPopup=_2c1;_2c1.connect(_2c1.domNode,"onmouseenter",dojo.hitch(self,"_onPopupHover"));if(_2c1.focus){_2c1._focus_timer=setTimeout(dojo.hitch(_2c1,function(){this._focus_timer=null;this.focus();}),0);}},_markActive:function(){this.isActive=true;dojo.replaceClass(this.domNode,"dijitMenuActive","dijitMenuPassive");},onOpen:function(e){this.isShowingNow=true;this._markActive();},_markInactive:function(){this.isActive=false;dojo.replaceClass(this.domNode,"dijitMenuPassive","dijitMenuActive");},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();var _2c2=this.focusedChild&&this.focusedChild.from_item;if(this.currentPopup){if(dijit._curFocus&&dojo.isDescendant(dijit._curFocus,this.currentPopup.domNode)){this.focusedChild.focusNode.focus();}dijit.popup.close(this.currentPopup);this.currentPopup=null;}if(this.focusedChild){this.focusedChild._setSelected(false);this.focusedChild._onUnhover();this.focusedChild=null;}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item){this._hoveredChild._onUnhover();}},_onBlur:function(){this._cleanUp();this.inherited(arguments);},_cleanUp:function(){this._closeChild();if(typeof this.isShowingNow=="undefined"){this._markInactive();}}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[];},templateString:dojo.cache("dijit","templates/Menu.html","<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" dojoAttachPoint=\"containerNode\"></tbody>\n</table>\n"),baseClass:"dijitMenu",targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(dojo.body());}else{dojo.forEach(this.targetNodeIds,this.bindDomNode,this);}var k=dojo.keys,l=this.isLeftToRight();this._openSubMenuKey=l?k.RIGHT_ARROW:k.LEFT_ARROW;this._closeSubMenuKey=l?k.LEFT_ARROW:k.RIGHT_ARROW;this.connectKeyNavHandlers([k.UP_ARROW],[k.DOWN_ARROW]);},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);dojo.stopEvent(evt);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{dojo.stopEvent(evt);}break;}},_iframeContentWindow:function(_2c3){var win=dojo.window.get(this._iframeContentDocument(_2c3))||this._iframeContentDocument(_2c3)["__parent__"]||(_2c3.name&&dojo.doc.frames[_2c3.name])||null;return win;},_iframeContentDocument:function(_2c4){var doc=_2c4.contentDocument||(_2c4.contentWindow&&_2c4.contentWindow.document)||(_2c4.name&&dojo.doc.frames[_2c4.name]&&dojo.doc.frames[_2c4.name].document)||null;return doc;},bindDomNode:function(node){node=dojo.byId(node);var cn;if(node.tagName.toLowerCase()=="iframe"){var _2c5=node,win=this._iframeContentWindow(_2c5);cn=dojo.withGlobal(win,dojo.body);}else{cn=(node==dojo.body()?dojo.doc.documentElement:node);}var _2c6={node:node,iframe:_2c5};dojo.attr(node,"_dijitMenu"+this.id,this._bindings.push(_2c6));var _2c7=dojo.hitch(this,function(cn){return [dojo.connect(cn,this.leftClickToOpen?"onclick":"oncontextmenu",this,function(evt){dojo.stopEvent(evt);this._scheduleOpen(evt.target,_2c5,{x:evt.pageX,y:evt.pageY});}),dojo.connect(cn,"onkeydown",this,function(evt){if(evt.shiftKey&&evt.keyCode==dojo.keys.F10){dojo.stopEvent(evt);this._scheduleOpen(evt.target,_2c5);}})];});_2c6.connects=cn?_2c7(cn):[];if(_2c5){_2c6.onloadHandler=dojo.hitch(this,function(){var win=this._iframeContentWindow(_2c5);cn=dojo.withGlobal(win,dojo.body);_2c6.connects=_2c7(cn);});if(_2c5.addEventListener){_2c5.addEventListener("load",_2c6.onloadHandler,false);}else{_2c5.attachEvent("onload",_2c6.onloadHandler);}}},unBindDomNode:function(_2c8){var node;try{node=dojo.byId(_2c8);}catch(e){return;}var _2c9="_dijitMenu"+this.id;if(node&&dojo.hasAttr(node,_2c9)){var bid=dojo.attr(node,_2c9)-1,b=this._bindings[bid];dojo.forEach(b.connects,dojo.disconnect);var _2ca=b.iframe;if(_2ca){if(_2ca.removeEventListener){_2ca.removeEventListener("load",b.onloadHandler,false);}else{_2ca.detachEvent("onload",b.onloadHandler);}}dojo.removeAttr(node,_2c9);delete this._bindings[bid];}},_scheduleOpen:function(_2cb,_2cc,_2cd){if(!this._openTimer){this._openTimer=setTimeout(dojo.hitch(this,function(){delete this._openTimer;this._openMyself({target:_2cb,iframe:_2cc,coords:_2cd});}),1);}},_openMyself:function(args){var _2ce=args.target,_2cf=args.iframe,_2d0=args.coords;if(_2d0){if(_2cf){var od=_2ce.ownerDocument,ifc=dojo.position(_2cf,true),win=this._iframeContentWindow(_2cf),_2d1=dojo.withGlobal(win,"_docScroll",dojo);var cs=dojo.getComputedStyle(_2cf),tp=dojo._toPixelValue,left=(dojo.isIE&&dojo.isQuirks?0:tp(_2cf,cs.paddingLeft))+(dojo.isIE&&dojo.isQuirks?tp(_2cf,cs.borderLeftWidth):0),top=(dojo.isIE&&dojo.isQuirks?0:tp(_2cf,cs.paddingTop))+(dojo.isIE&&dojo.isQuirks?tp(_2cf,cs.borderTopWidth):0);_2d0.x+=ifc.x+left-_2d1.x;_2d0.y+=ifc.y+top-_2d1.y;}}else{_2d0=dojo.position(_2ce,true);_2d0.x+=10;_2d0.y+=10;}var self=this;var _2d2=dijit.getFocus(this);function _2d3(){if(self.refocus){dijit.focus(_2d2);}dijit.popup.close(self);};dijit.popup.open({popup:this,x:_2d0.x,y:_2d0.y,onExecute:_2d3,onCancel:_2d3,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this);};},uninitialize:function(){dojo.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});}if(!dojo._hasResource["dojox.html.metrics"]){dojo._hasResource["dojox.html.metrics"]=true;dojo.provide("dojox.html.metrics");(function(){var dhm=dojox.html.metrics;dhm.getFontMeasurements=function(){var _2d4={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(dojo.isIE){dojo.doc.documentElement.style.fontSize="100%";}var div=dojo.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.borderWidth="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";dojo.body().appendChild(div);for(var p in _2d4){ds.fontSize=p;_2d4[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}dojo.body().removeChild(div);div=null;return _2d4;};var _2d5=null;dhm.getCachedFontMeasurements=function(_2d6){if(_2d6||!_2d5){_2d5=dhm.getFontMeasurements();}return _2d5;};var _2d7=null,_2d8={};dhm.getTextBox=function(text,_2d9,_2da){var m,s;if(!_2d7){m=_2d7=dojo.doc.createElement("div");var c=dojo.doc.createElement("div");c.appendChild(m);s=c.style;s.overflow="scroll";s.position="absolute";s.left="0px";s.top="-10000px";s.width="1px";s.height="1px";s.visibility="hidden";s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";dojo.body().appendChild(c);}else{m=_2d7;}m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&_2d9){for(var i in _2d9){if(i in _2d8){continue;}s[i]=_2d9[i];}}if(arguments.length>2&&_2da){m.className=_2da;}m.innerHTML=text;var box=dojo.position(m);box.w=m.parentNode.scrollWidth;return box;};var _2db={w:16,h:16};dhm.getScrollbar=function(){return {w:_2db.w,h:_2db.h};};dhm._fontResizeNode=null;dhm.initOnFontResize=function(_2dc){var f=dhm._fontResizeNode=dojo.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";if(dojo.isIE){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onresize=f.contentWindow.parent[dojox._scopeName].html.metrics._fontresize;}};}else{f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[dojox._scopeName].html.metrics._fontresize;};}f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'");dojo.body().appendChild(f);dhm.initOnFontResize=function(){};};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize();};dojo.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(dojo.isIE&&f.onresize){f.onresize=null;}else{if(f.contentWindow&&f.contentWindow.onresize){f.contentWindow.onresize=null;}}dhm._fontResizeNode=null;}});dojo.addOnLoad(function(){try{var n=dojo.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";dojo.body().appendChild(n);_2db.w=n.offsetWidth-n.clientWidth;_2db.h=n.offsetHeight-n.clientHeight;dojo.body().removeChild(n);delete n;}catch(e){}if("fontSizeWatch" in dojo.config&&!!dojo.config.fontSizeWatch){dhm.initOnFontResize();}});})();}if(!dojo._hasResource["dojox.grid.util"]){dojo._hasResource["dojox.grid.util"]=true;dojo.provide("dojox.grid.util");(function(){var dgu=dojox.grid.util;dgu.na="...";dgu.rowIndexTag="gridRowIndex";dgu.gridViewTag="gridView";dgu.fire=function(ob,ev,args){var fn=ob&&ev&&ob[ev];return fn&&(args?fn.apply(ob,args):ob[ev]());};dgu.setStyleHeightPx=function(_2dd,_2de){if(_2de>=0){var s=_2dd.style;var v=_2de+"px";if(_2dd&&s["height"]!=v){s["height"]=v;}}};dgu.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];dgu.keyEvents=["keyup","keydown","keypress"];dgu.funnelEvents=function(_2df,_2e0,_2e1,_2e2){var evts=(_2e2?_2e2:dgu.mouseEvents.concat(dgu.keyEvents));for(var i=0,l=evts.length;i<l;i++){_2e0.connect(_2df,"on"+evts[i],_2e1);}};dgu.removeNode=function(_2e3){_2e3=dojo.byId(_2e3);_2e3&&_2e3.parentNode&&_2e3.parentNode.removeChild(_2e3);return _2e3;};dgu.arrayCompare=function(inA,inB){for(var i=0,l=inA.length;i<l;i++){if(inA[i]!=inB[i]){return false;}}return (inA.length==inB.length);};dgu.arrayInsert=function(_2e4,_2e5,_2e6){if(_2e4.length<=_2e5){_2e4[_2e5]=_2e6;}else{_2e4.splice(_2e5,0,_2e6);}};dgu.arrayRemove=function(_2e7,_2e8){_2e7.splice(_2e8,1);};dgu.arraySwap=function(_2e9,inI,inJ){var _2ea=_2e9[inI];_2e9[inI]=_2e9[inJ];_2e9[inJ]=_2ea;};})();}if(!dojo._hasResource["dojox.grid._Scroller"]){dojo._hasResource["dojox.grid._Scroller"]=true;dojo.provide("dojox.grid._Scroller");(function(){var _2eb=function(_2ec){var i=0,n,p=_2ec.parentNode;while((n=p.childNodes[i++])){if(n==_2ec){return i-1;}}return -1;};var _2ed=function(_2ee){if(!_2ee){return;}var _2ef=function(inW){return inW.domNode&&dojo.isDescendant(inW.domNode,_2ee,true);};var ws=dijit.registry.filter(_2ef);for(var i=0,w;(w=ws[i]);i++){w.destroy();}delete ws;};var _2f0=function(_2f1){var node=dojo.byId(_2f1);return (node&&node.tagName?node.tagName.toLowerCase():"");};var _2f2=function(_2f3,_2f4){var _2f5=[];var i=0,n;while((n=_2f3.childNodes[i])){i++;if(_2f0(n)==_2f4){_2f5.push(n);}}return _2f5;};var _2f6=function(_2f7){return _2f2(_2f7,"div");};dojo.declare("dojox.grid._Scroller",null,{constructor:function(_2f8){this.setContentNodes(_2f8);this.pageHeights=[];this.pageNodes=[];this.stack=[];},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(_2f9,_2fa,_2fb){switch(arguments.length){case 3:this.rowsPerPage=_2fb;case 2:this.keepRows=_2fa;case 1:this.rowCount=_2f9;default:break;}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=dojo.hitch(this,"onscroll");}},_getPageCount:function(_2fc,_2fd){return _2fc?(Math.ceil(_2fc/_2fd)||1):0;},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode;},setKeepInfo:function(_2fe){this.keepRows=_2fe;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2);},setContentNodes:function(_2ff){this.contentNodes=_2ff;this.colCount=(this.contentNodes?this.contentNodes.length:0);this.pageNodes=[];for(var i=0;i<this.colCount;i++){this.pageNodes[i]=[];}},getDefaultNodes:function(){return this.pageNodes[0]||[];},invalidate:function(){this._invalidating=true;this.invalidateNodes();this.pageHeights=[];this.height=(this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0);this.resize();this._invalidating=false;},updateRowCount:function(_300){this.invalidateNodes();this.rowCount=_300;var _301=this.pageCount;if(_301===0){this.height=1;}this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<_301){for(var i=_301-1;i>=this.pageCount;i--){this.height-=this.getPageHeight(i);delete this.pageHeights[i];}}else{if(this.pageCount>_301){this.height+=this.defaultPageHeight*(this.pageCount-_301-1)+this.calcLastPageHeight();}}this.resize();},pageExists:function(_302){return Boolean(this.getDefaultPageNode(_302));},measurePage:function(_303){if(this.grid.rowHeight){var _304=this.grid.rowHeight+1;return ((_303+1)*this.rowsPerPage>this.rowCount?this.rowCount-_303*this.rowsPerPage:this.rowsPerPage)*_304;}var n=this.getDefaultPageNode(_303);return (n&&n.innerHTML)?n.offsetHeight:undefined;},positionPage:function(_305,_306){for(var i=0;i<this.colCount;i++){this.pageNodes[i][_305].style.top=_306+"px";}},repositionPages:function(_307){var _308=this.getDefaultNodes();var last=0;for(var i=0;i<this.stack.length;i++){last=Math.max(this.stack[i],last);}var n=_308[_307];var y=(n?this.getPageNodePosition(n)+this.getPageHeight(_307):0);for(var p=_307+1;p<=last;p++){n=_308[p];if(n){if(this.getPageNodePosition(n)==y){return;}this.positionPage(p,y);}y+=this.getPageHeight(p);}},installPage:function(_309){for(var i=0;i<this.colCount;i++){this.contentNodes[i].appendChild(this.pageNodes[i][_309]);}},preparePage:function(_30a,_30b){var p=(_30b?this.popPage():null);for(var i=0;i<this.colCount;i++){var _30c=this.pageNodes[i];var _30d=(p===null?this.createPageNode():this.invalidatePageNode(p,_30c));_30d.pageIndex=_30a;_30c[_30a]=_30d;}},renderPage:function(_30e){var _30f=[];var i,j;for(i=0;i<this.colCount;i++){_30f[i]=this.pageNodes[i][_30e];}for(i=0,j=_30e*this.rowsPerPage;(i<this.rowsPerPage)&&(j<this.rowCount);i++,j++){this.renderRow(j,_30f);}},removePage:function(_310){for(var i=0,j=_310*this.rowsPerPage;i<this.rowsPerPage;i++,j++){this.removeRow(j);}},destroyPage:function(_311){for(var i=0;i<this.colCount;i++){var n=this.invalidatePageNode(_311,this.pageNodes[i]);if(n){dojo.destroy(n);}}},pacify:function(_312){},pacifying:false,pacifyTicks:200,setPacifying:function(_313){if(this.pacifying!=_313){this.pacifying=_313;this.pacify(this.pacifying);}},startPacify:function(){this.startPacifyTicks=new Date().getTime();},doPacify:function(){var _314=(new Date().getTime()-this.startPacifyTicks)>this.pacifyTicks;this.setPacifying(true);this.startPacify();return _314;},endPacify:function(){this.setPacifying(false);},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight;}for(var i=0;i<this.colCount;i++){dojox.grid.util.setStyleHeightPx(this.contentNodes[i],Math.max(1,this.height));}var _315=(!this._invalidating);if(!_315){var ah=this.grid.get("autoHeight");if(typeof ah=="number"&&ah<=Math.min(this.rowsPerPage,this.rowCount)){_315=true;}}if(_315){this.needPage(this.page,this.pageTop);}var _316=(this.page<this.pageCount-1)?this.rowsPerPage:((this.rowCount%this.rowsPerPage)||this.rowsPerPage);var _317=this.getPageHeight(this.page);this.averageRowHeight=(_317>0&&_316>0)?(_317/_316):0;},calcLastPageHeight:function(){if(!this.pageCount){return 0;}var _318=this.pageCount-1;var _319=((this.rowCount%this.rowsPerPage)||(this.rowsPerPage))*this.defaultRowHeight;this.pageHeights[_318]=_319;return _319;},updateContentHeight:function(inDh){this.height+=inDh;this.resize();},updatePageHeight:function(_31a,_31b,_31c){if(this.pageExists(_31a)){var oh=this.getPageHeight(_31a);var h=(this.measurePage(_31a));if(h===undefined){h=oh;}this.pageHeights[_31a]=h;if(oh!=h){this.updateContentHeight(h-oh);var ah=this.grid.get("autoHeight");if((typeof ah=="number"&&ah>this.rowCount)||(ah===true&&!_31b)){if(!_31c){this.grid.sizeChange();}else{var ns=this.grid.viewsNode.style;ns.height=parseInt(ns.height)+h-oh+"px";this.repositionPages(_31a);}}else{this.repositionPages(_31a);}}return h;}return 0;},rowHeightChanged:function(_31d,_31e){this.updatePageHeight(Math.floor(_31d/this.rowsPerPage),false,_31e);},invalidateNodes:function(){while(this.stack.length){this.destroyPage(this.popPage());}},createPageNode:function(){var p=document.createElement("div");dojo.attr(p,"role","presentation");p.style.position="absolute";p.style[dojo._isBodyLtr()?"left":"right"]="0";return p;},getPageHeight:function(_31f){var ph=this.pageHeights[_31f];return (ph!==undefined?ph:this.defaultPageHeight);},pushPage:function(_320){return this.stack.push(_320);},popPage:function(){return this.stack.shift();},findPage:function(_321){var i=0,h=0;for(var ph=0;i<this.pageCount;i++,h+=ph){ph=this.getPageHeight(i);if(h+ph>=_321){break;}}this.page=i;this.pageTop=h;},buildPage:function(_322,_323,_324){this.preparePage(_322,_323);this.positionPage(_322,_324);this.installPage(_322);this.renderPage(_322);this.pushPage(_322);},needPage:function(_325,_326){var h=this.getPageHeight(_325),oh=h;if(!this.pageExists(_325)){this.buildPage(_325,(!this.grid._autoHeight&&this.keepPages&&(this.stack.length>=this.keepPages)),_326);h=this.updatePageHeight(_325,true);}else{this.positionPage(_325,_326);}return h;},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop);},scroll:function(_327){this.grid.scrollTop=_327;if(this.colCount){this.startPacify();this.findPage(_327);var h=this.height;var b=this.getScrollBottom(_327);for(var p=this.page,y=this.pageTop;(p<this.pageCount)&&((b<0)||(y<b));p++){y+=this.needPage(p,y);}this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,_327);this.lastVisibleRow=this.getLastVisibleRow(p-1,y,b);if(h!=this.height){this.repositionPages(p-1);}this.endPacify();}},getScrollBottom:function(_328){return (this.windowHeight>=0?_328+this.windowHeight:-1);},processNodeEvent:function(e,_329){var t=e.target;while(t&&(t!=_329)&&t.parentNode&&(t.parentNode.parentNode!=_329)){t=t.parentNode;}if(!t||!t.parentNode||(t.parentNode.parentNode!=_329)){return false;}var page=t.parentNode;e.topRowIndex=page.pageIndex*this.rowsPerPage;e.rowIndex=e.topRowIndex+_2eb(t);e.rowTarget=t;return true;},processEvent:function(e){return this.processNodeEvent(e,this.contentNode);},renderRow:function(_32a,_32b){},removeRow:function(_32c){},getDefaultPageNode:function(_32d){return this.getDefaultNodes()[_32d];},positionPageNode:function(_32e,_32f){},getPageNodePosition:function(_330){return _330.offsetTop;},invalidatePageNode:function(_331,_332){var p=_332[_331];if(p){delete _332[_331];this.removePage(_331,p);_2ed(p);p.innerHTML="";}return p;},getPageRow:function(_333){return _333*this.rowsPerPage;},getLastPageRow:function(_334){return Math.min(this.rowCount,this.getPageRow(_334+1))-1;},getFirstVisibleRow:function(_335,_336,_337){if(!this.pageExists(_335)){return 0;}var row=this.getPageRow(_335);var _338=this.getDefaultNodes();var rows=_2f6(_338[_335]);for(var i=0,l=rows.length;i<l&&_336<_337;i++,row++){_336+=rows[i].offsetHeight;}return (row?row-1:row);},getLastVisibleRow:function(_339,_33a,_33b){if(!this.pageExists(_339)){return 0;}var _33c=this.getDefaultNodes();var row=this.getLastPageRow(_339);var rows=_2f6(_33c[_339]);for(var i=rows.length-1;i>=0&&_33a>_33b;i--,row--){_33a-=rows[i].offsetHeight;}return row+1;},findTopRow:function(_33d){var _33e=this.getDefaultNodes();var rows=_2f6(_33e[this.page]);for(var i=0,l=rows.length,t=this.pageTop,h;i<l;i++){h=rows[i].offsetHeight;t+=h;if(t>=_33d){this.offset=h-(t-_33d);return i+this.page*this.rowsPerPage;}}return -1;},findScrollTop:function(_33f){var _340=Math.floor(_33f/this.rowsPerPage);var t=0;var i,l;for(i=0;i<_340;i++){t+=this.getPageHeight(i);}this.pageTop=t;this.page=_340;this.needPage(_340,this.pageTop);var _341=this.getDefaultNodes();var rows=_2f6(_341[_340]);var r=_33f-this.rowsPerPage*_340;for(i=0,l=rows.length;i<l&&i<r;i++){t+=rows[i].offsetHeight;}return t;},dummy:0});})();}if(!dojo._hasResource["dojox.grid.cells._base"]){dojo._hasResource["dojox.grid.cells._base"]=true;dojo.provide("dojox.grid.cells._base");dojo.declare("dojox.grid._DeferredTextWidget",dijit._Widget,{deferred:null,_destroyOnRemove:true,postCreate:function(){if(this.deferred){this.deferred.addBoth(dojo.hitch(this,function(text){if(this.domNode){this.domNode.innerHTML=text;}}));}}});(function(){var _342=function(_343){try{dojox.grid.util.fire(_343,"focus");dojox.grid.util.fire(_343,"select");}catch(e){}};var _344=function(){setTimeout(dojo.hitch.apply(dojo,arguments),0);};var dgc=dojox.grid.cells;dojo.declare("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:false,alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,draggable:true,_valueProp:"value",_formatPending:false,constructor:function(_345){this._props=_345||{};dojo.mixin(this,_345);if(this.draggable===undefined){this.draggable=true;}},_defaultFormat:function(_346,_347){var s=this.grid.formatterScope||this;var f=this.formatter;if(f&&s&&typeof f=="string"){f=this.formatter=s[f];}var v=(_346!=this.defaultValue&&f)?f.apply(s,_347):_346;if(typeof v=="undefined"){return this.defaultValue;}if(v&&v.addBoth){v=new dojox.grid._DeferredTextWidget({deferred:v},dojo.create("span",{innerHTML:this.defaultValue}));}if(v&&v.declaredClass&&v.startup){return "<div class='dojoxGridStubNode' linkWidget='"+v.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>";}return v;},format:function(_348,_349){var f,i=this.grid.edit.info,d=this.get?this.get(_348,_349):(this.value||this.defaultValue);if(this.editable&&(this.alwaysEditing||(i.rowIndex==_348&&i.cell==this))){return this.formatEditing(d,_348);}else{return this._defaultFormat(d,[d,_348,this]);}},formatEditing:function(_34a,_34b){},getNode:function(_34c){return this.view.getCellNode(_34c,this.index);},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index);},getEditNode:function(_34d){return (this.getNode(_34d)||0).firstChild||0;},canResize:function(){var uw=this.unitWidth;return uw&&(uw!=="auto");},isFlex:function(){var uw=this.unitWidth;return uw&&dojo.isString(uw)&&(uw=="auto"||uw.slice(-1)=="%");},applyEdit:function(_34e,_34f){this.grid.edit.applyCellEdit(_34e,this,_34f);},cancelEdit:function(_350){this.grid.doCancelEdit(_350);},_onEditBlur:function(_351){if(this.grid.edit.isEditCell(_351,this.index)){this.grid.edit.apply();}},registerOnBlur:function(_352,_353){if(this.commitOnBlur){dojo.connect(_352,"onblur",function(e){setTimeout(dojo.hitch(this,"_onEditBlur",_353),250);});}},needFormatNode:function(_354,_355){this._formatPending=true;_344(this,"_formatNode",_354,_355);},cancelFormatNode:function(){this._formatPending=false;},_formatNode:function(_356,_357){if(this._formatPending){this._formatPending=false;dojo.setSelectable(this.grid.domNode,true);this.formatNode(this.getEditNode(_357),_356,_357);}},formatNode:function(_358,_359,_35a){if(dojo.isIE){_344(this,"focus",_35a,_358);}else{this.focus(_35a,_358);}},dispatchEvent:function(m,e){if(m in this){return this[m](e);}},getValue:function(_35b){return this.getEditNode(_35b)[this._valueProp];},setValue:function(_35c,_35d){var n=this.getEditNode(_35c);if(n){n[this._valueProp]=_35d;}},focus:function(_35e,_35f){_342(_35f||this.getEditNode(_35e));},save:function(_360){this.value=this.value||this.getValue(_360);},restore:function(_361){this.setValue(_361,this.value);},_finish:function(_362){dojo.setSelectable(this.grid.domNode,false);this.cancelFormatNode();},apply:function(_363){this.applyEdit(this.getValue(_363),_363);this._finish(_363);},cancel:function(_364){this.cancelEdit(_364);this._finish(_364);}});dgc._Base.markupFactory=function(node,_365){var d=dojo;var _366=d.trim(d.attr(node,"formatter")||"");if(_366){_365.formatter=dojo.getObject(_366)||_366;}var get=d.trim(d.attr(node,"get")||"");if(get){_365.get=dojo.getObject(get);}var _367=function(attr,cell,_368){var _369=d.trim(d.attr(node,attr)||"");if(_369){cell[_368||attr]=!(_369.toLowerCase()=="false");}};_367("sortDesc",_365);_367("editable",_365);_367("alwaysEditing",_365);_367("noresize",_365);_367("draggable",_365);var _36a=d.trim(d.attr(node,"loadingText")||d.attr(node,"defaultValue")||"");if(_36a){_365.defaultValue=_36a;}var _36b=function(attr,cell,_36c){var _36d=d.trim(d.attr(node,attr)||"")||undefined;if(_36d){cell[_36c||attr]=_36d;}};_36b("styles",_365);_36b("headerStyles",_365);_36b("cellStyles",_365);_36b("classes",_365);_36b("headerClasses",_365);_36b("cellClasses",_365);};dojo.declare("dojox.grid.cells.Cell",dgc._Base,{constructor:function(){this.keyFilter=this.keyFilter;},keyFilter:null,formatEditing:function(_36e,_36f){this.needFormatNode(_36e,_36f);return "<input class=\"dojoxGridInput\" type=\"text\" value=\""+_36e+"\">";},formatNode:function(_370,_371,_372){this.inherited(arguments);this.registerOnBlur(_370,_372);},doKey:function(e){if(this.keyFilter){var key=String.fromCharCode(e.charCode);if(key.search(this.keyFilter)==-1){dojo.stopEvent(e);}}},_finish:function(_373){this.inherited(arguments);var n=this.getEditNode(_373);try{dojox.grid.util.fire(n,"blur");}catch(e){}}});dgc.Cell.markupFactory=function(node,_374){dgc._Base.markupFactory(node,_374);var d=dojo;var _375=d.trim(d.attr(node,"keyFilter")||"");if(_375){_374.keyFilter=new RegExp(_375);}};dojo.declare("dojox.grid.cells.RowIndex",dgc.Cell,{name:"Row",postscript:function(){this.editable=false;},get:function(_376){return _376+1;}});dgc.RowIndex.markupFactory=function(node,_377){dgc.Cell.markupFactory(node,_377);};dojo.declare("dojox.grid.cells.Select",dgc.Cell,{options:null,values:null,returnIndex:-1,constructor:function(_378){this.values=this.values||this.options;},formatEditing:function(_379,_37a){this.needFormatNode(_379,_37a);var h=["<select class=\"dojoxGridSelect\">"];for(var i=0,o,v;((o=this.options[i])!==undefined)&&((v=this.values[i])!==undefined);i++){h.push("<option",(_379==v?" selected":"")," value=\""+v+"\"",">",o,"</option>");}h.push("</select>");return h.join("");},getValue:function(_37b){var n=this.getEditNode(_37b);if(n){var i=n.selectedIndex,o=n.options[i];return this.returnIndex>-1?i:o.value||o.innerHTML;}}});dgc.Select.markupFactory=function(node,cell){dgc.Cell.markupFactory(node,cell);var d=dojo;var _37c=d.trim(d.attr(node,"options")||"");if(_37c){var o=_37c.split(",");if(o[0]!=_37c){cell.options=o;}}var _37d=d.trim(d.attr(node,"values")||"");if(_37d){var v=_37d.split(",");if(v[0]!=_37d){cell.values=v;}}};dojo.declare("dojox.grid.cells.AlwaysEdit",dgc.Cell,{alwaysEditing:true,_formatNode:function(_37e,_37f){this.formatNode(this.getEditNode(_37f),_37e,_37f);},applyStaticValue:function(_380){var e=this.grid.edit;e.applyCellEdit(this.getValue(_380),this,_380);e.start(this,_380,true);}});dgc.AlwaysEdit.markupFactory=function(node,cell){dgc.Cell.markupFactory(node,cell);};dojo.declare("dojox.grid.cells.Bool",dgc.AlwaysEdit,{_valueProp:"checked",formatEditing:function(_381,_382){return "<input class=\"dojoxGridInput\" type=\"checkbox\""+(_381?" checked=\"checked\"":"")+" style=\"width: auto\" />";},doclick:function(e){if(e.target.tagName=="INPUT"){this.applyStaticValue(e.rowIndex);}}});dgc.Bool.markupFactory=function(node,cell){dgc.AlwaysEdit.markupFactory(node,cell);};})();}if(!dojo._hasResource["dojox.grid.cells"]){dojo._hasResource["dojox.grid.cells"]=true;dojo.provide("dojox.grid.cells");}if(!dojo._hasResource["dojox.grid._Builder"]){dojo._hasResource["dojox.grid._Builder"]=true;dojo.provide("dojox.grid._Builder");(function(){var dg=dojox.grid;var _383=function(td){return td.cellIndex>=0?td.cellIndex:dojo.indexOf(td.parentNode.cells,td);};var _384=function(tr){return tr.rowIndex>=0?tr.rowIndex:dojo.indexOf(tr.parentNode.childNodes,tr);};var _385=function(_386,_387){return _386&&((_386.rows||0)[_387]||_386.childNodes[_387]);};var _388=function(node){for(var n=node;n&&n.tagName!="TABLE";n=n.parentNode){}return n;};var _389=function(_38a,_38b){for(var n=_38a;n&&_38b(n);n=n.parentNode){}return n;};var _38c=function(_38d){var name=_38d.toUpperCase();return function(node){return node.tagName!=name;};};var _38e=dojox.grid.util.rowIndexTag;var _38f=dojox.grid.util.gridViewTag;dg._Builder=dojo.extend(function(view){if(view){this.view=view;this.grid=view.grid;}},{view:null,_table:"<table class=\"dojoxGridRowTable\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"",getTableArray:function(){var html=[this._table];if(this.view.viewWidth){html.push([" style=\"width:",this.view.viewWidth,";\""].join(""));}html.push(">");return html;},generateCellMarkup:function(_390,_391,_392,_393){var _394=[],html;if(_393){var _395=_390.index!=_390.grid.getSortIndex()?"":_390.grid.sortInfo>0?"aria-sort=\"ascending\"":"aria-sort=\"descending\"";if(!_390.id){_390.id=this.grid.id+"Hdr"+_390.index;}html=["<th tabIndex=\"-1\" aria-readonly=\"true\" role=\"columnheader\"",_395,"id=\"",_390.id,"\""];}else{var _396=this.grid.editable&&!_390.editable?"aria-readonly=\"true\"":"";html=["<td tabIndex=\"-1\" role=\"gridcell\"",_396];}if(_390.colSpan){html.push(" colspan=\"",_390.colSpan,"\"");}if(_390.rowSpan){html.push(" rowspan=\"",_390.rowSpan,"\"");}html.push(" class=\"dojoxGridCell ");if(_390.classes){html.push(_390.classes," ");}if(_392){html.push(_392," ");}_394.push(html.join(""));_394.push("");html=["\" idx=\"",_390.index,"\" style=\""];if(_391&&_391[_391.length-1]!=";"){_391+=";";}html.push(_390.styles,_391||"",_390.hidden?"display:none;":"");if(_390.unitWidth){html.push("width:",_390.unitWidth,";");}_394.push(html.join(""));_394.push("");html=["\""];if(_390.attrs){html.push(" ",_390.attrs);}html.push(">");_394.push(html.join(""));_394.push("");_394.push(_393?"</th>":"</td>");return _394;},isCellNode:function(_397){return Boolean(_397&&_397!=dojo.doc&&dojo.attr(_397,"idx"));},getCellNodeIndex:function(_398){return _398?Number(dojo.attr(_398,"idx")):-1;},getCellNode:function(_399,_39a){for(var i=0,row;((row=_385(_399.firstChild,i))&&row.cells);i++){for(var j=0,cell;(cell=row.cells[j]);j++){if(this.getCellNodeIndex(cell)==_39a){return cell;}}}return null;},findCellTarget:function(_39b,_39c){var n=_39b;while(n&&(!this.isCellNode(n)||(n.offsetParent&&_38f in n.offsetParent.parentNode&&n.offsetParent.parentNode[_38f]!=this.view.id))&&(n!=_39c)){n=n.parentNode;}return n!=_39c?n:null;},baseDecorateEvent:function(e){e.dispatch="do"+e.type;e.grid=this.grid;e.sourceView=this.view;e.cellNode=this.findCellTarget(e.target,e.rowNode);e.cellIndex=this.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);},findTarget:function(_39d,_39e){var n=_39d;while(n&&(n!=this.domNode)&&(!(_39e in n)||(_38f in n&&n[_38f]!=this.view.id))){n=n.parentNode;}return (n!=this.domNode)?n:null;},findRowTarget:function(_39f){return this.findTarget(_39f,_38e);},isIntraNodeEvent:function(e){try{return (e.cellNode&&e.relatedTarget&&dojo.isDescendant(e.relatedTarget,e.cellNode));}catch(x){return false;}},isIntraRowEvent:function(e){try{var row=e.relatedTarget&&this.findRowTarget(e.relatedTarget);return !row&&(e.rowIndex==-1)||row&&(e.rowIndex==row.gridRowIndex);}catch(x){return false;}},dispatchEvent:function(e){if(e.dispatch in this){return this[e.dispatch](e);}return false;},domouseover:function(e){if(e.cellNode&&(e.cellNode!=this.lastOverCellNode)){this.lastOverCellNode=e.cellNode;this.grid.onMouseOver(e);}this.grid.onMouseOverRow(e);},domouseout:function(e){if(e.cellNode&&(e.cellNode==this.lastOverCellNode)&&!this.isIntraNodeEvent(e,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(e);if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}},domousedown:function(e){if(e.cellNode){this.grid.onMouseDown(e);}this.grid.onMouseDownRow(e);}});dg._ContentBuilder=dojo.extend(function(view){dg._Builder.call(this,view);},dg._Builder.prototype,{update:function(){this.prepareHtml();},prepareHtml:function(){var _3a0=this.grid.get,_3a1=this.view.structure.cells;for(var j=0,row;(row=_3a1[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.get=cell.get||(cell.value==undefined)&&_3a0;cell.markup=this.generateCellMarkup(cell,cell.cellStyles,cell.cellClasses,false);if(!this.grid.editable&&cell.editable){this.grid.editable=true;}}}},generateHtml:function(_3a2,_3a3){var html=this.getTableArray(),v=this.view,_3a4=v.structure.cells,item=this.grid.getItem(_3a3);dojox.grid.util.fire(this.view,"onBeforeRow",[_3a3,_3a4]);for(var j=0,row;(row=_3a4[j]);j++){if(row.hidden||row.header){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,m,cc,cs;(cell=row[i]);i++){m=cell.markup;cc=cell.customClasses=[];cs=cell.customStyles=[];m[5]=cell.format(_3a3,item);m[1]=cc.join(" ");m[3]=cs.join(";");html.push.apply(html,m);}html.push("</tr>");}html.push("</table>");return html.join("");},decorateEvent:function(e){e.rowNode=this.findRowTarget(e.target);if(!e.rowNode){return false;}e.rowIndex=e.rowNode[_38e];this.baseDecorateEvent(e);e.cell=this.grid.getCell(e.cellIndex);return true;}});dg._HeaderBuilder=dojo.extend(function(view){this.moveable=null;dg._Builder.call(this,view);},dg._Builder.prototype,{_skipBogusClicks:false,overResizeWidth:4,minColWidth:1,update:function(){if(this.tableMap){this.tableMap.mapRows(this.view.structure.cells);}else{this.tableMap=new dg._TableMap(this.view.structure.cells);}},generateHtml:function(_3a5,_3a6){var html=this.getTableArray(),_3a7=this.view.structure.cells;dojox.grid.util.fire(this.view,"onBeforeRow",[-1,_3a7]);for(var j=0,row;(row=_3a7[j]);j++){if(row.hidden){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,_3a8;(cell=row[i]);i++){cell.customClasses=[];cell.customStyles=[];if(this.view.simpleStructure){if(cell.draggable){if(cell.headerClasses){if(cell.headerClasses.indexOf("dojoDndItem")==-1){cell.headerClasses+=" dojoDndItem";}}else{cell.headerClasses="dojoDndItem";}}if(cell.attrs){if(cell.attrs.indexOf("dndType='gridColumn_")==-1){cell.attrs+=" dndType='gridColumn_"+this.grid.id+"'";}}else{cell.attrs="dndType='gridColumn_"+this.grid.id+"'";}}_3a8=this.generateCellMarkup(cell,cell.headerStyles,cell.headerClasses,true);_3a8[5]=(_3a6!=undefined?_3a6:_3a5(cell));_3a8[3]=cell.customStyles.join(";");_3a8[1]=cell.customClasses.join(" ");html.push(_3a8.join(""));}html.push("</tr>");}html.push("</table>");return html.join("");},getCellX:function(e){var n,x=e.layerX;if(dojo.isMoz||dojo.isIE>=9){n=_389(e.target,_38c("th"));x-=(n&&n.offsetLeft)||0;var t=e.sourceView.getScrollbarWidth();if(!dojo._isBodyLtr()){table=_389(n,_38c("table"));x-=(table&&table.offsetLeft)||0;}}n=_389(e.target,function(){if(!n||n==e.cellNode){return false;}x+=(n.offsetLeft<0?0:n.offsetLeft);return true;});return x;},decorateEvent:function(e){this.baseDecorateEvent(e);e.rowIndex=-1;e.cellX=this.getCellX(e);return true;},prepareResize:function(e,mod){do{var i=_383(e.cellNode);e.cellNode=(i?e.cellNode.parentNode.cells[i+mod]:null);e.cellIndex=(e.cellNode?this.getCellNodeIndex(e.cellNode):-1);}while(e.cellNode&&e.cellNode.style.display=="none");return Boolean(e.cellNode);},canResize:function(e){if(!e.cellNode||e.cellNode.colSpan>1){return false;}var cell=this.grid.getCell(e.cellIndex);return !cell.noresize&&cell.canResize();},overLeftResizeArea:function(e){if(dojo.hasClass(dojo.body(),"dojoDndMove")){return false;}if(dojo.isIE){var tN=e.target;if(dojo.hasClass(tN,"dojoxGridArrowButtonNode")||dojo.hasClass(tN,"dojoxGridArrowButtonChar")){return false;}}if(dojo._isBodyLtr()){return (e.cellIndex>0)&&(e.cellX>0&&e.cellX<this.overResizeWidth)&&this.prepareResize(e,-1);}var t=e.cellNode&&(e.cellX>0&&e.cellX<this.overResizeWidth);return t;},overRightResizeArea:function(e){if(dojo.hasClass(dojo.body(),"dojoDndMove")){return false;}if(dojo.isIE){var tN=e.target;if(dojo.hasClass(tN,"dojoxGridArrowButtonNode")||dojo.hasClass(tN,"dojoxGridArrowButtonChar")){return false;}}if(dojo._isBodyLtr()){return e.cellNode&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth);}return (e.cellIndex>0)&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth)&&this.prepareResize(e,-1);},domousemove:function(e){if(!this.moveable){var c=(this.overRightResizeArea(e)?"dojoxGridColResize":(this.overLeftResizeArea(e)?"dojoxGridColResize":""));if(c&&!this.canResize(e)){c="dojoxGridColNoResize";}dojo.toggleClass(e.sourceView.headerNode,"dojoxGridColNoResize",(c=="dojoxGridColNoResize"));dojo.toggleClass(e.sourceView.headerNode,"dojoxGridColResize",(c=="dojoxGridColResize"));if(dojo.isIE){var t=e.sourceView.headerNode.scrollLeft;e.sourceView.headerNode.scrollLeft=t;}if(c){dojo.stopEvent(e);}}},domousedown:function(e){if(!this.moveable){if((this.overRightResizeArea(e)||this.overLeftResizeArea(e))&&this.canResize(e)){}else{this.grid.onMouseDown(e);this.grid.onMouseOverRow(e);}}},doclick:function(e){if(this._skipBogusClicks){dojo.stopEvent(e);return true;}return false;},colResizeSetup:function(e,_3a9){var _3aa=dojo.contentBox(e.sourceView.headerNode);if(_3a9){this.lineDiv=document.createElement("div");var vw=(dojo.position||dojo._abs)(e.sourceView.headerNode,true);var _3ab=dojo.contentBox(e.sourceView.domNode);var l=e.pageX;if(!dojo._isBodyLtr()&&dojo.isIE<8){l-=dojox.html.metrics.getScrollbar().w;}dojo.style(this.lineDiv,{top:vw.y+"px",left:l+"px",height:(_3ab.h+_3aa.h)+"px"});dojo.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=l;dojo.body().appendChild(this.lineDiv);}var _3ac=[],_3ad=this.tableMap.findOverlappingNodes(e.cellNode);for(var i=0,cell;(cell=_3ad[i]);i++){_3ac.push({node:cell,index:this.getCellNodeIndex(cell),width:cell.offsetWidth});}var view=e.sourceView;var adj=dojo._isBodyLtr()?1:-1;var _3ae=e.grid.views.views;var _3af=[];for(var j=view.idx+adj,_3b0;(_3b0=_3ae[j]);j=j+adj){_3af.push({node:_3b0.headerNode,left:window.parseInt(_3b0.headerNode.style.left)});}var _3b1=view.headerContentNode.firstChild;var drag={scrollLeft:e.sourceView.headerNode.scrollLeft,view:view,node:e.cellNode,index:e.cellIndex,w:dojo.contentBox(e.cellNode).w,vw:_3aa.w,table:_3b1,tw:dojo.contentBox(_3b1).w,spanners:_3ac,followers:_3af};return drag;},beginColumnResize:function(e){this.moverDiv=document.createElement("div");dojo.style(this.moverDiv,{position:"absolute",left:0});dojo.body().appendChild(this.moverDiv);dojo.addClass(this.grid.domNode,"dojoxGridColumnResizing");var m=(this.moveable=new dojo.dnd.Moveable(this.moverDiv));var drag=this.colResizeSetup(e,true);m.onMove=dojo.hitch(this,"doResizeColumn",drag);dojo.connect(m,"onMoveStop",dojo.hitch(this,function(){this.endResizeColumn(drag);if(drag.node.releaseCapture){drag.node.releaseCapture();}this.moveable.destroy();delete this.moveable;this.moveable=null;dojo.removeClass(this.grid.domNode,"dojoxGridColumnResizing");}));if(e.cellNode.setCapture){e.cellNode.setCapture();}m.onMouseDown(e);},doResizeColumn:function(_3b2,_3b3,_3b4){var _3b5=_3b4.l;var data={deltaX:_3b5,w:_3b2.w+(dojo._isBodyLtr()?_3b5:-_3b5),vw:_3b2.vw+_3b5,tw:_3b2.tw+_3b5};this.dragRecord={inDrag:_3b2,mover:_3b3,leftTop:_3b4};if(data.w>=this.minColWidth){if(!_3b3){this.doResizeNow(_3b2,data);}else{dojo.style(this.lineDiv,"left",(this.lineDiv._origLeft+data.deltaX)+"px");}}},endResizeColumn:function(_3b6){if(this.dragRecord){var _3b7=this.dragRecord.leftTop;var _3b8=dojo._isBodyLtr()?_3b7.l:-_3b7.l;_3b8+=Math.max(_3b6.w+_3b8,this.minColWidth)-(_3b6.w+_3b8);if(dojo.isWebKit&&_3b6.spanners.length){_3b8+=dojo._getPadBorderExtents(_3b6.spanners[0].node).w;}var data={deltaX:_3b8,w:_3b6.w+_3b8,vw:_3b6.vw+_3b8,tw:_3b6.tw+_3b8};this.doResizeNow(_3b6,data);delete this.dragRecord;}dojo.destroy(this.lineDiv);dojo.destroy(this.moverDiv);dojo.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=true;_3b6.view.update();this._skipBogusClicks=false;this.grid.onResizeColumn(_3b6.index);},doResizeNow:function(_3b9,data){_3b9.view.convertColPctToFixed();if(_3b9.view.flexCells&&!_3b9.view.testFlexCells()){var t=_388(_3b9.node);if(t){(t.style.width="");}}var i,s,sw,f,fl;for(i=0;(s=_3b9.spanners[i]);i++){sw=s.width+data.deltaX;if(sw>0){s.node.style.width=sw+"px";_3b9.view.setColWidth(s.index,sw);}}if(dojo._isBodyLtr()||!dojo.isIE){for(i=0;(f=_3b9.followers[i]);i++){fl=f.left+data.deltaX;f.node.style.left=fl+"px";}}_3b9.node.style.width=data.w+"px";_3b9.view.setColWidth(_3b9.index,data.w);_3b9.view.headerNode.style.width=data.vw+"px";_3b9.view.setColumnsWidth(data.tw);if(!dojo._isBodyLtr()){_3b9.view.headerNode.scrollLeft=_3b9.scrollLeft+data.deltaX;}}});dg._TableMap=dojo.extend(function(rows){this.mapRows(rows);},{map:null,mapRows:function(_3ba){var _3bb=_3ba.length;if(!_3bb){return;}this.map=[];var row;for(var k=0;(row=_3ba[k]);k++){this.map[k]=[];}for(var j=0;(row=_3ba[j]);j++){for(var i=0,x=0,cell,_3bc,_3bd;(cell=row[i]);i++){while(this.map[j][x]){x++;}this.map[j][x]={c:i,r:j};_3bd=cell.rowSpan||1;_3bc=cell.colSpan||1;for(var y=0;y<_3bd;y++){for(var s=0;s<_3bc;s++){this.map[j+y][x+s]=this.map[j][x];}}x+=_3bc;}}},dumpMap:function(){for(var j=0,row,h="";(row=this.map[j]);j++,h=""){for(var i=0,cell;(cell=row[i]);i++){h+=cell.r+","+cell.c+"   ";}}},getMapCoords:function(_3be,_3bf){for(var j=0,row;(row=this.map[j]);j++){for(var i=0,cell;(cell=row[i]);i++){if(cell.c==_3bf&&cell.r==_3be){return {j:j,i:i};}}}return {j:-1,i:-1};},getNode:function(_3c0,_3c1,_3c2){var row=_3c0&&_3c0.rows[_3c1];return row&&row.cells[_3c2];},_findOverlappingNodes:function(_3c3,_3c4,_3c5){var _3c6=[];var m=this.getMapCoords(_3c4,_3c5);for(var j=0,row;(row=this.map[j]);j++){if(j==m.j){continue;}var rw=row[m.i];var n=(rw?this.getNode(_3c3,rw.r,rw.c):null);if(n){_3c6.push(n);}}return _3c6;},findOverlappingNodes:function(_3c7){return this._findOverlappingNodes(_388(_3c7),_384(_3c7.parentNode),_383(_3c7));}});})();}if(!dojo._hasResource["dojo.dnd.Container"]){dojo._hasResource["dojo.dnd.Container"]=true;dojo.provide("dojo.dnd.Container");dojo.declare("dojo.dnd.Container",null,{skipForm:false,constructor:function(node,_3c8){this.node=dojo.byId(node);if(!_3c8){_3c8={};}this.creator=_3c8.creator||null;this.skipForm=_3c8.skipForm;this.parent=_3c8.dropParent&&dojo.byId(_3c8.dropParent);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");if(!(_3c8&&_3c8._skipStartup)){this.startup();}this.events=[dojo.connect(this.node,"onmouseover",this,"onMouseOver"),dojo.connect(this.node,"onmouseout",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",this,"onSelectStart"),dojo.connect(this.node,"onselectstart",this,"onSelectStart")];},creator:function(){},getItem:function(key){return this.map[key];},setItem:function(key,data){this.map[key]=data;},delItem:function(key){delete this.map[key];},forInItems:function(f,o){o=o||dojo.global;var m=this.map,e=dojo.dnd._empty;for(var i in m){if(i in e){continue;}f.call(o,m[i],i,this);}return o;},clearItems:function(){this.map={};},getAllNodes:function(){return dojo.query("> .dojoDndItem",this.parent);},sync:function(){var map={};this.getAllNodes().forEach(function(node){if(node.id){var item=this.getItem(node.id);if(item){map[node.id]=item;return;}}else{node.id=dojo.dnd.getUniqueId();}var type=node.getAttribute("dndType"),data=node.getAttribute("dndData");map[node.id]={data:data||node.innerHTML,type:type?type.split(/\s*,\s*/):["text"]};},this);this.map=map;return this;},insertNodes:function(data,_3c9,_3ca){if(!this.parent.firstChild){_3ca=null;}else{if(_3c9){if(!_3ca){_3ca=this.parent.firstChild;}}else{if(_3ca){_3ca=_3ca.nextSibling;}}}if(_3ca){for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.insertBefore(t.node,_3ca);}}else{for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.appendChild(t.node);}}return this;},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.clearItems();this.node=this.parent=this.current=null;},markupFactory:function(_3cb,node){_3cb._skipStartup=true;return new dojo.dnd.Container(node,_3cb);},startup:function(){if(!this.parent){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var c=this.parent.getElementsByTagName("tbody");if(c&&c.length){this.parent=c[0];}}}this.defaultCreator=dojo.dnd._defaultCreator(this.parent);this.sync();},onMouseOver:function(e){var n=e.relatedTarget;while(n){if(n==this.node){break;}try{n=n.parentNode;}catch(x){n=null;}}if(!n){this._changeState("Container","Over");this.onOverEvent();}n=this._getChildByEvent(e);if(this.current==n){return;}if(this.current){this._removeItemClass(this.current,"Over");}if(n){this._addItemClass(n,"Over");}this.current=n;},onMouseOut:function(e){for(var n=e.relatedTarget;n;){if(n==this.node){return;}try{n=n.parentNode;}catch(x){n=null;}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null;}this._changeState("Container","");this.onOutEvent();},onSelectStart:function(e){if(!this.skipForm||!dojo.dnd.isFormElement(e)){dojo.stopEvent(e);}},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(type,_3cc){var _3cd="dojoDnd"+type;var _3ce=type.toLowerCase()+"State";dojo.replaceClass(this.node,_3cd+_3cc,_3cd+this[_3ce]);this[_3ce]=_3cc;},_addItemClass:function(node,type){dojo.addClass(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){dojo.removeClass(node,"dojoDndItem"+type);},_getChildByEvent:function(e){var node=e.target;if(node){for(var _3cf=node.parentNode;_3cf;node=_3cf,_3cf=node.parentNode){if(_3cf==this.parent&&dojo.hasClass(node,"dojoDndItem")){return node;}}}return null;},_normalizedCreator:function(item,hint){var t=(this.creator||this.defaultCreator).call(this,item,hint);if(!dojo.isArray(t.type)){t.type=["text"];}if(!t.node.id){t.node.id=dojo.dnd.getUniqueId();}dojo.addClass(t.node,"dojoDndItem");return t;}});dojo.dnd._createNode=function(tag){if(!tag){return dojo.dnd._createSpan;}return function(text){return dojo.create(tag,{innerHTML:text});};};dojo.dnd._createTrTd=function(text){var tr=dojo.create("tr");dojo.create("td",{innerHTML:text},tr);return tr;};dojo.dnd._createSpan=function(text){return dojo.create("span",{innerHTML:text});};dojo.dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dojo.dnd._defaultCreator=function(node){var tag=node.tagName.toLowerCase();var c=tag=="tbody"||tag=="thead"?dojo.dnd._createTrTd:dojo.dnd._createNode(dojo.dnd._defaultCreatorNodes[tag]);return function(item,hint){var _3d0=item&&dojo.isObject(item),data,type,n;if(_3d0&&item.tagName&&item.nodeType&&item.getAttribute){data=item.getAttribute("dndData")||item.innerHTML;type=item.getAttribute("dndType");type=type?type.split(/\s*,\s*/):["text"];n=item;}else{data=(_3d0&&item.data)?item.data:item;type=(_3d0&&item.type)?item.type:["text"];n=(hint=="avatar"?dojo.dnd._createSpan:c)(String(data));}if(!n.id){n.id=dojo.dnd.getUniqueId();}return {node:n,data:data,type:type};};};}if(!dojo._hasResource["dojo.dnd.Selector"]){dojo._hasResource["dojo.dnd.Selector"]=true;dojo.provide("dojo.dnd.Selector");dojo.declare("dojo.dnd.Selector",dojo.dnd.Container,{constructor:function(node,_3d1){if(!_3d1){_3d1={};}this.singular=_3d1.singular;this.autoSync=_3d1.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(dojo.connect(this.node,"onmousedown",this,"onMouseDown"),dojo.connect(this.node,"onmouseup",this,"onMouseUp"));},singular:false,getSelectedNodes:function(){var t=new dojo.NodeList();var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}t.push(dojo.byId(i));}return t;},selectNone:function(){return this._removeSelection()._removeAnchor();},selectAll:function(){this.forInItems(function(data,id){this._addItemClass(dojo.byId(id),"Selected");this.selection[id]=1;},this);return this._removeAnchor();},deleteSelectedNodes:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}var n=dojo.byId(i);this.delItem(i);dojo.destroy(n);}this.anchor=null;this.selection={};return this;},forInSelectedItems:function(f,o){o=o||dojo.global;var s=this.selection,e=dojo.dnd._empty;for(var i in s){if(i in e){continue;}f.call(o,this.getItem(i),i,this);}},sync:function(){dojo.dnd.Selector.superclass.sync.call(this);if(this.anchor){if(!this.getItem(this.anchor.id)){this.anchor=null;}}var t=[],e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}if(!this.getItem(i)){t.push(i);}}dojo.forEach(t,function(i){delete this.selection[i];},this);return this;},insertNodes:function(_3d2,data,_3d3,_3d4){var _3d5=this._normalizedCreator;this._normalizedCreator=function(item,hint){var t=_3d5.call(this,item,hint);if(_3d2){if(!this.anchor){this.anchor=t.node;this._removeItemClass(t.node,"Selected");this._addItemClass(this.anchor,"Anchor");}else{if(this.anchor!=t.node){this._removeItemClass(t.node,"Anchor");this._addItemClass(t.node,"Selected");}}this.selection[t.node.id]=1;}else{this._removeItemClass(t.node,"Selected");this._removeItemClass(t.node,"Anchor");}return t;};dojo.dnd.Selector.superclass.insertNodes.call(this,data,_3d3,_3d4);this._normalizedCreator=_3d5;return this;},destroy:function(){dojo.dnd.Selector.superclass.destroy.call(this);this.selection=this.anchor=null;},markupFactory:function(_3d6,node){_3d6._skipStartup=true;return new dojo.dnd.Selector(node,_3d6);},onMouseDown:function(e){if(this.autoSync){this.sync();}if(!this.current){return;}if(!this.singular&&!dojo.isCopyKey(e)&&!e.shiftKey&&(this.current.id in this.selection)){this.simpleSelection=true;if(e.button===dojo.mouseButtons.LEFT){dojo.stopEvent(e);}return;}if(!this.singular&&e.shiftKey){if(!dojo.isCopyKey(e)){this._removeSelection();}var c=this.getAllNodes();if(c.length){if(!this.anchor){this.anchor=c[0];this._addItemClass(this.anchor,"Anchor");}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var i=0;for(;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current){break;}}for(++i;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current){break;}this._addItemClass(node,"Selected");this.selection[node.id]=1;}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1;}}}else{if(this.singular){if(this.anchor==this.current){if(dojo.isCopyKey(e)){this.selectNone();}}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}}else{if(dojo.isCopyKey(e)){if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor();}else{if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id];}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected");}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}else{if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}}dojo.stopEvent(e);},onMouseUp:function(e){if(!this.simpleSelection){return;}this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}},onMouseMove:function(e){this.simpleSelection=false;},onOverEvent:function(){this.onmousemoveEvent=dojo.connect(this.node,"onmousemove",this,"onMouseMove");},onOutEvent:function(){dojo.disconnect(this.onmousemoveEvent);delete this.onmousemoveEvent;},_removeSelection:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}var node=dojo.byId(i);if(node){this._removeItemClass(node,"Selected");}}this.selection={};return this;},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null;}return this;}});}if(!dojo._hasResource["dojo.dnd.Avatar"]){dojo._hasResource["dojo.dnd.Avatar"]=true;dojo.provide("dojo.dnd.Avatar");dojo.declare("dojo.dnd.Avatar",null,{constructor:function(_3d7){this.manager=_3d7;this.construct();},construct:function(){this.isA11y=dojo.hasClass(dojo.body(),"dijit_a11y");var a=dojo.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),_3d8=this.manager.source,node,b=dojo.create("tbody",null,a),tr=dojo.create("tr",null,b),td=dojo.create("td",null,tr),icon=this.isA11y?dojo.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},td):null,span=dojo.create("span",{innerHTML:_3d8.generateText?this._generateText():""},td),k=Math.min(5,this.manager.nodes.length),i=0;dojo.attr(tr,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;i<k;++i){if(_3d8.creator){node=_3d8._normalizedCreator(_3d8.getItem(this.manager.nodes[i].id).data,"avatar").node;}else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var _3d9=dojo.create("table"),_3da=dojo.create("tbody",null,_3d9);_3da.appendChild(node);node=_3d9;}}node.id="";tr=dojo.create("tr",null,b);td=dojo.create("td",null,tr);td.appendChild(node);dojo.attr(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}});}this.node=a;},destroy:function(){dojo.destroy(this.node);this.node=false;},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");if(this.isA11y){var icon=dojo.byId("a11yIcon");var text="+";if(this.manager.canDropFlag&&!this.manager.copy){text="< ";}else{if(!this.manager.canDropFlag&&!this.manager.copy){text="o";}else{if(!this.manager.canDropFlag){text="x";}}}icon.innerHTML=text;}dojo.query(("tr.dojoDndAvatarHeader td span"+(this.isA11y?" span":"")),this.node).forEach(function(node){node.innerHTML=this._generateText();},this);},_generateText:function(){return this.manager.nodes.length.toString();}});}if(!dojo._hasResource["dojo.dnd.Manager"]){dojo._hasResource["dojo.dnd.Manager"]=true;dojo.provide("dojo.dnd.Manager");dojo.declare("dojo.dnd.Manager",null,{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[];},OFFSET_X:16,OFFSET_Y:16,overSource:function(_3db){if(this.avatar){this.target=(_3db&&_3db.targetState!="Disabled")?_3db:null;this.canDropFlag=Boolean(this.target);this.avatar.update();}dojo.publish("/dnd/source/over",[_3db]);},outSource:function(_3dc){if(this.avatar){if(this.target==_3dc){this.target=null;this.canDropFlag=false;this.avatar.update();dojo.publish("/dnd/source/over",[null]);}}else{dojo.publish("/dnd/source/over",[null]);}},startDrag:function(_3dd,_3de,copy){this.source=_3dd;this.nodes=_3de;this.copy=Boolean(copy);this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);dojo.publish("/dnd/start",[_3dd,_3de,this.copy]);this.events=[dojo.connect(dojo.doc,"onmousemove",this,"onMouseMove"),dojo.connect(dojo.doc,"onmouseup",this,"onMouseUp"),dojo.connect(dojo.doc,"onkeydown",this,"onKeyDown"),dojo.connect(dojo.doc,"onkeyup",this,"onKeyUp"),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent)];var c="dojoDnd"+(copy?"Copy":"Move");dojo.addClass(dojo.body(),c);},canDrop:function(flag){var _3df=Boolean(this.target&&flag);if(this.canDropFlag!=_3df){this.canDropFlag=_3df;this.avatar.update();}},stopDrag:function(){dojo.removeClass(dojo.body(),["dojoDndCopy","dojoDndMove"]);dojo.forEach(this.events,dojo.disconnect);this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[];},makeAvatar:function(){return new dojo.dnd.Avatar(this);},updateAvatar:function(){this.avatar.update();},onMouseMove:function(e){var a=this.avatar;if(a){dojo.dnd.autoScrollNodes(e);var s=a.node.style;s.left=(e.pageX+this.OFFSET_X)+"px";s.top=(e.pageY+this.OFFSET_Y)+"px";var copy=Boolean(this.source.copyState(dojo.isCopyKey(e)));if(this.copy!=copy){this._setCopyStatus(copy);}}},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=Boolean(this.source.copyState(dojo.isCopyKey(e))),_3e0=[this.source,this.nodes,copy,this.target,e];dojo.publish("/dnd/drop/before",_3e0);dojo.publish("/dnd/drop",_3e0);}else{dojo.publish("/dnd/cancel");}this.stopDrag();}},onKeyDown:function(e){if(this.avatar){switch(e.keyCode){case dojo.keys.CTRL:var copy=Boolean(this.source.copyState(true));if(this.copy!=copy){this._setCopyStatus(copy);}break;case dojo.keys.ESCAPE:dojo.publish("/dnd/cancel");this.stopDrag();break;}}},onKeyUp:function(e){if(this.avatar&&e.keyCode==dojo.keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy){this._setCopyStatus(copy);}}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();dojo.replaceClass(dojo.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"));}});dojo.dnd._manager=null;dojo.dnd.manager=function(){if(!dojo.dnd._manager){dojo.dnd._manager=new dojo.dnd.Manager();}return dojo.dnd._manager;};}if(!dojo._hasResource["dojo.dnd.Source"]){dojo._hasResource["dojo.dnd.Source"]=true;dojo.provide("dojo.dnd.Source");dojo.declare("dojo.dnd.Source",dojo.dnd.Selector,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],generateText:true,constructor:function(node,_3e1){dojo.mixin(this,dojo.mixin({},_3e1));var type=this.accept;if(type.length){this.accept={};for(var i=0;i<type.length;++i){this.accept[type[i]]=1;}}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.before=true;this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource){dojo.addClass(this.node,"dojoDndSource");}this.targetState="";if(this.accept){dojo.addClass(this.node,"dojoDndTarget");}if(this.horizontal){dojo.addClass(this.node,"dojoDndHorizontal");}this.topics=[dojo.subscribe("/dnd/source/over",this,"onDndSourceOver"),dojo.subscribe("/dnd/start",this,"onDndStart"),dojo.subscribe("/dnd/drop",this,"onDndDrop"),dojo.subscribe("/dnd/cancel",this,"onDndCancel")];},checkAcceptance:function(_3e2,_3e3){if(this==_3e2){return !this.copyOnly||this.selfAccept;}for(var i=0;i<_3e3.length;++i){var type=_3e2.getItem(_3e3[i].id).type;var flag=false;for(var j=0;j<type.length;++j){if(type[j] in this.accept){flag=true;break;}}if(!flag){return false;}}return true;},copyState:function(_3e4,self){if(_3e4){return true;}if(arguments.length<2){self=this==dojo.dnd.manager().target;}if(self){if(this.copyOnly){return this.selfCopy;}}else{return this.copyOnly;}return false;},destroy:function(){dojo.dnd.Source.superclass.destroy.call(this);dojo.forEach(this.topics,dojo.unsubscribe);this.targetAnchor=null;},markupFactory:function(_3e5,node){_3e5._skipStartup=true;return new dojo.dnd.Source(node,_3e5);},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled"){return;}dojo.dnd.Source.superclass.onMouseMove.call(this,e);var m=dojo.dnd.manager();if(!this.isDragging){if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)){var _3e6=this.getSelectedNodes();if(_3e6.length){m.startDrag(this,_3e6,this.copyState(dojo.isCopyKey(e),true));}}}if(this.isDragging){var _3e7=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current){this.targetBox=dojo.position(this.current,true);}if(this.horizontal){_3e7=(e.pageX-this.targetBox.x)<(this.targetBox.w/2);}else{_3e7=(e.pageY-this.targetBox.y)<(this.targetBox.h/2);}}if(this.current!=this.targetAnchor||_3e7!=this.before){this._markTargetAnchor(_3e7);m.canDrop(!this.current||m.source!=this||!(this.current.id in this.selection));}}},onMouseDown:function(e){if(!this.mouseDown&&this._legalMouseDown(e)&&(!this.skipForm||!dojo.dnd.isFormElement(e))){this.mouseDown=true;this._lastX=e.pageX;this._lastY=e.pageY;dojo.dnd.Source.superclass.onMouseDown.call(this,e);}},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;dojo.dnd.Source.superclass.onMouseUp.call(this,e);}},onDndSourceOver:function(_3e8){if(this!=_3e8){this.mouseDown=false;if(this.targetAnchor){this._unmarkTargetAnchor();}}else{if(this.isDragging){var m=dojo.dnd.manager();m.canDrop(this.targetState!="Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)));}}},onDndStart:function(_3e9,_3ea,copy){if(this.autoSync){this.sync();}if(this.isSource){this._changeState("Source",this==_3e9?(copy?"Copied":"Moved"):"");}var _3eb=this.accept&&this.checkAcceptance(_3e9,_3ea);this._changeState("Target",_3eb?"":"Disabled");if(this==_3e9){dojo.dnd.manager().overSource(this);}this.isDragging=true;},onDndDrop:function(_3ec,_3ed,copy,_3ee){if(this==_3ee){this.onDrop(_3ec,_3ed,copy);}this.onDndCancel();},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null;}this.before=true;this.isDragging=false;this.mouseDown=false;this._changeState("Source","");this._changeState("Target","");},onDrop:function(_3ef,_3f0,copy){if(this!=_3ef){this.onDropExternal(_3ef,_3f0,copy);}else{this.onDropInternal(_3f0,copy);}},onDropExternal:function(_3f1,_3f2,copy){var _3f3=this._normalizedCreator;if(this.creator){this._normalizedCreator=function(node,hint){return _3f3.call(this,_3f1.getItem(node.id).data,hint);};}else{if(copy){this._normalizedCreator=function(node,hint){var t=_3f1.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}else{this._normalizedCreator=function(node,hint){var t=_3f1.getItem(node.id);_3f1.delItem(node.id);return {node:node,data:t.data,type:t.type};};}}this.selectNone();if(!copy&&!this.creator){_3f1.selectNone();}this.insertNodes(true,_3f2,this.before,this.current);if(!copy&&this.creator){_3f1.deleteSelectedNodes();}this._normalizedCreator=_3f3;},onDropInternal:function(_3f4,copy){var _3f5=this._normalizedCreator;if(this.current&&this.current.id in this.selection){return;}if(copy){if(this.creator){this._normalizedCreator=function(node,hint){return _3f5.call(this,this.getItem(node.id).data,hint);};}else{this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}}else{if(!this.current){return;}this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);return {node:node,data:t.data,type:t.type};};}this._removeSelection();this.insertNodes(true,_3f4,this.before,this.current);this._normalizedCreator=_3f5;},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){dojo.dnd.Source.superclass.onOverEvent.call(this);dojo.dnd.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOver();}},onOutEvent:function(){dojo.dnd.Source.superclass.onOutEvent.call(this);dojo.dnd.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOut();}},_markTargetAnchor:function(_3f6){if(this.current==this.targetAnchor&&this.before==_3f6){return;}if(this.targetAnchor){this._removeItemClass(this.targetAnchor,this.before?"Before":"After");}this.targetAnchor=this.current;this.targetBox=null;this.before=_3f6;if(this.targetAnchor){this._addItemClass(this.targetAnchor,this.before?"Before":"After");}},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return;}this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true;},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved");},_legalMouseDown:function(e){if(!dojo.mouseButtons.isLeft(e)){return false;}if(!this.withHandles){return true;}for(var node=e.target;node&&node!==this.node;node=node.parentNode){if(dojo.hasClass(node,"dojoDndHandle")){return true;}if(dojo.hasClass(node,"dojoDndItem")||dojo.hasClass(node,"dojoDndIgnore")){break;}}return false;}});dojo.declare("dojo.dnd.Target",dojo.dnd.Source,{constructor:function(node,_3f7){this.isSource=false;dojo.removeClass(this.node,"dojoDndSource");},markupFactory:function(_3f8,node){_3f8._skipStartup=true;return new dojo.dnd.Target(node,_3f8);}});dojo.declare("dojo.dnd.AutoSource",dojo.dnd.Source,{constructor:function(node,_3f9){this.autoSync=true;},markupFactory:function(_3fa,node){_3fa._skipStartup=true;return new dojo.dnd.AutoSource(node,_3fa);}});}if(!dojo._hasResource["dojox.grid._View"]){dojo._hasResource["dojox.grid._View"]=true;dojo.provide("dojox.grid._View");(function(){var _3fb=function(_3fc,_3fd){return _3fc.style.cssText==undefined?_3fc.getAttribute("style"):_3fc.style.cssText;};dojo.declare("dojox.grid._View",[dijit._Widget,dijit._Templated],{defaultWidth:"18em",viewWidth:"",templateString:"<div class=\"dojoxGridView\" role=\"presentation\">\n\t<div class=\"dojoxGridHeader\" dojoAttachPoint=\"headerNode\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"headerNodeContainer\" style=\"width:100%\" role=\"presentation\">\n\t\t\t<div dojoAttachPoint=\"headerContentNode\" role=\"row\"></div>\n\t\t</div>\n\t</div>\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" dojoAttachPoint=\"hiddenFocusNode\" role=\"presentation\" aria-hidden=\"true\"/>\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" role=\"presentation\" aria-hidden=\"true\"/>\n\t<div class=\"dojoxGridScrollbox\" dojoAttachPoint=\"scrollboxNode\" role=\"presentation\">\n\t\t<div class=\"dojoxGridContent\" dojoAttachPoint=\"contentNode\" hidefocus=\"hidefocus\" role=\"presentation\"></div>\n\t</div>\n</div>\n",themeable:false,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:dojox.grid._HeaderBuilder,_contentBuilderClass:dojox.grid._ContentBuilder,postMixInProperties:function(){this.rowNodes={};},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");dojox.grid.util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);dojox.grid.util.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!dojo._isBodyLtr()){this.headerNodeContainer.style.width="";}},destroy:function(){dojo.destroy(this.headerNode);delete this.headerNode;for(var i in this.rowNodes){dojo.destroy(this.rowNodes[i]);}this.rowNodes={};if(this.source){this.source.destroy();}this.inherited(arguments);},focus:function(){if(dojo.isIE||dojo.isWebKit||dojo.isOpera){this.hiddenFocusNode.focus();}else{this.scrollboxNode.focus();}},setStructure:function(_3fe){var vs=(this.structure=_3fe);if(vs.width&&!isNaN(vs.width)){this.viewWidth=vs.width+"em";}else{this.viewWidth=vs.width||(vs.noscroll?"auto":this.viewWidth);}this._onBeforeRow=vs.onBeforeRow||function(){};this._onAfterRow=vs.onAfterRow||function(){};this.noscroll=vs.noscroll;if(this.noscroll){this.scrollboxNode.style.overflow="hidden";}this.simpleStructure=Boolean(vs.cells.length==1);this.testFlexCells();this.updateStructure();},_cleanupRowWidgets:function(_3ff){if(_3ff){dojo.forEach(dojo.query("[widgetId]",_3ff).map(dijit.byNode),function(w){if(w._destroyOnRemove){w.destroy();delete w;}else{if(w.domNode&&w.domNode.parentNode){w.domNode.parentNode.removeChild(w.domNode);}}});}},onBeforeRow:function(_400,_401){this._onBeforeRow(_400,_401);if(_400>=0){this._cleanupRowWidgets(this.getRowNode(_400));}},onAfterRow:function(_402,_403,_404){this._onAfterRow(_402,_403,_404);var g=this.grid;dojo.forEach(dojo.query(".dojoxGridStubNode",_404),function(n){if(n&&n.parentNode){var lw=n.getAttribute("linkWidget");var _405=window.parseInt(dojo.attr(n,"cellIdx"),10);var _406=g.getCell(_405);var w=dijit.byId(lw);if(w){n.parentNode.replaceChild(w.domNode,n);if(!w._started){w.startup();}}else{n.innerHTML="";}}},this);},testFlexCells:function(){this.flexCells=false;for(var j=0,row;(row=this.structure.cells[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.view=this;this.flexCells=this.flexCells||cell.isFlex();}}return this.flexCells;},updateStructure:function(){this.header.update();this.content.update();},getScrollbarWidth:function(){var _407=this.hasVScrollbar();var _408=dojo.style(this.scrollboxNode,"overflow");if(this.noscroll||!_408||_408=="hidden"){_407=false;}else{if(_408=="scroll"){_407=true;}}return (_407?dojox.html.metrics.getScrollbar().w:0);},getColumnsWidth:function(){var h=this.headerContentNode;return h&&h.firstChild?h.firstChild.offsetWidth:0;},setColumnsWidth:function(_409){this.headerContentNode.firstChild.style.width=_409+"px";if(this.viewWidth){this.viewWidth=_409+"px";}},getWidth:function(){return this.viewWidth||(this.getColumnsWidth()+this.getScrollbarWidth())+"px";},getContentWidth:function(){return Math.max(0,dojo._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px";},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(this._togglingColumn>=0){this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn);this._togglingColumn=-1;}var _40a=this.grid.layout.cells;var _40b=dojo.hitch(this,function(node,_40c){!dojo._isBodyLtr()&&(_40c=!_40c);var inc=_40c?-1:1;var idx=this.header.getCellNodeIndex(node)+inc;var cell=_40a[idx];while(cell&&cell.getHeaderNode()&&cell.getHeaderNode().style.display=="none"){idx+=inc;cell=_40a[idx];}if(cell){return cell.getHeaderNode();}return null;});if(this.grid.columnReordering&&this.simpleStructure){if(this.source){this.source.destroy();}var _40d="dojoxGrid_bottomMarker";var _40e="dojoxGrid_topMarker";if(this.bottomMarker){dojo.destroy(this.bottomMarker);}this.bottomMarker=dojo.byId(_40d);if(this.topMarker){dojo.destroy(this.topMarker);}this.topMarker=dojo.byId(_40e);if(!this.bottomMarker){this.bottomMarker=dojo.create("div",{"id":_40d,"class":"dojoxGridColPlaceBottom"},dojo.body());this._hide(this.bottomMarker);this.topMarker=dojo.create("div",{"id":_40e,"class":"dojoxGridColPlaceTop"},dojo.body());this._hide(this.topMarker);}this.arrowDim=dojo.contentBox(this.bottomMarker);var _40f=dojo.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new dojo.dnd.Source(this.headerContentNode.firstChild.rows[0],{horizontal:true,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:false,onMouseDown:dojo.hitch(this,function(e){this.header.decorateEvent(e);if((this.header.overRightResizeArea(e)||this.header.overLeftResizeArea(e))&&this.header.canResize(e)&&!this.header.moveable){}else{if(this.grid.headerMenu){this.grid.headerMenu.onCancel(true);}if(e.button===(dojo.isIE?1:0)){dojo.dnd.Source.prototype.onMouseDown.call(this.source,e);}}}),onMouseOver:dojo.hitch(this,function(e){var src=this.source;if(src._getChildByEvent(e)){dojo.dnd.Source.prototype.onMouseOver.apply(src,arguments);}}),_markTargetAnchor:dojo.hitch(this,function(_410){var src=this.source;if(src.current==src.targetAnchor&&src.before==_410){return;}if(src.targetAnchor&&_40b(src.targetAnchor,src.before)){src._removeItemClass(_40b(src.targetAnchor,src.before),src.before?"After":"Before");}dojo.dnd.Source.prototype._markTargetAnchor.call(src,_410);var _411=_410?src.targetAnchor:_40b(src.targetAnchor,src.before);var _412=0;if(!_411){_411=src.targetAnchor;_412=dojo.contentBox(_411).w+this.arrowDim.w/2+2;}var pos=(dojo.position||dojo._abs)(_411,true);var left=Math.floor(pos.x-this.arrowDim.w/2+_412);dojo.style(this.bottomMarker,"visibility","visible");dojo.style(this.topMarker,"visibility","visible");dojo.style(this.bottomMarker,{"left":left+"px","top":(_40f+pos.y)+"px"});dojo.style(this.topMarker,{"left":left+"px","top":(pos.y-this.arrowDim.h)+"px"});if(src.targetAnchor&&_40b(src.targetAnchor,src.before)){src._addItemClass(_40b(src.targetAnchor,src.before),src.before?"After":"Before");}}),_unmarkTargetAnchor:dojo.hitch(this,function(){var src=this.source;if(!src.targetAnchor){return;}if(src.targetAnchor&&_40b(src.targetAnchor,src.before)){src._removeItemClass(_40b(src.targetAnchor,src.before),src.before?"After":"Before");}this._hide(this.bottomMarker);this._hide(this.topMarker);dojo.dnd.Source.prototype._unmarkTargetAnchor.call(src);}),destroy:dojo.hitch(this,function(){dojo.disconnect(this._source_conn);dojo.unsubscribe(this._source_sub);dojo.dnd.Source.prototype.destroy.call(this.source);if(this.bottomMarker){dojo.destroy(this.bottomMarker);delete this.bottomMarker;}if(this.topMarker){dojo.destroy(this.topMarker);delete this.topMarker;}}),onDndCancel:dojo.hitch(this,function(){dojo.dnd.Source.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker);})});this._source_conn=dojo.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=dojo.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup();}},_hide:function(node){dojo.style(node,{left:"-10000px",top:"-10000px","visibility":"hidden"});},_onDndDropBefore:function(_413,_414,copy){if(dojo.dnd.manager().target!==this.source){return;}this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var _415=this.grid.views.views;var _416=_415[_413.viewIndex];var _417=_415[this.index];if(_417!=_416){_416.convertColPctToFixed();_417.convertColPctToFixed();}},_onDndDrop:function(_418,_419,copy){if(dojo.dnd.manager().target!==this.source){if(dojo.dnd.manager().source===this.source){this._removingColumn=true;}return;}this._hide(this.bottomMarker);this._hide(this.topMarker);var _41a=function(n){return n?dojo.attr(n,"idx"):null;};var w=dojo.marginBox(_419[0]).w;if(_418.viewIndex!==this.index){var _41b=this.grid.views.views;var _41c=_41b[_418.viewIndex];var _41d=_41b[this.index];if(_41c.viewWidth&&_41c.viewWidth!="auto"){_41c.setColumnsWidth(_41c.getColumnsWidth()-w);}if(_41d.viewWidth&&_41d.viewWidth!="auto"){_41d.setColumnsWidth(_41d.getColumnsWidth());}}var stn=this.source._targetNode;var stb=this.source._beforeTarget;!dojo._isBodyLtr()&&(stb=!stb);var _41e=this.grid.layout;var idx=this.index;delete this.source._targetNode;delete this.source._beforeTarget;_41e.moveColumn(_418.viewIndex,idx,_41a(_419[0]),_41a(stn),stb);},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}dojox.grid.util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode]);},_getHeaderContent:function(_41f){var n=_41f.name||_41f.grid.getCellName(_41f);var ret=["<div class=\"dojoxGridSortNode"];if(_41f.index!=_41f.grid.getSortIndex()){ret.push("\">");}else{ret=ret.concat([" ",_41f.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown","\"><div class=\"dojoxGridArrowButtonChar\">",_41f.grid.sortInfo>0?"&#9650;":"&#9660;","</div><div class=\"dojoxGridArrowButtonNode\" role=\"presentation\"></div>","<div class=\"dojoxGridColCaption\">"]);}ret=ret.concat([n,"</div></div>"]);return ret.join("");},resize:function(){this.adaptHeight();this.adaptWidth();},hasHScrollbar:function(_420){var _421=this._hasHScroll||false;if(this._hasHScroll==undefined||_420){if(this.noscroll){this._hasHScroll=false;}else{var _422=dojo.style(this.scrollboxNode,"overflow");if(_422=="hidden"){this._hasHScroll=false;}else{if(_422=="scroll"){this._hasHScroll=true;}else{this._hasHScroll=(this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth);}}}}if(_421!==this._hasHScroll){this.grid.update();}return this._hasHScroll;},hasVScrollbar:function(_423){var _424=this._hasVScroll||false;if(this._hasVScroll==undefined||_423){if(this.noscroll){this._hasVScroll=false;}else{var _425=dojo.style(this.scrollboxNode,"overflow");if(_425=="hidden"){this._hasVScroll=false;}else{if(_425=="scroll"){this._hasVScroll=true;}else{this._hasVScroll=(this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight);}}}}if(_424!==this._hasVScroll){this.grid.update();}return this._hasVScroll;},convertColPctToFixed:function(){var _426=false;this.grid.initialWidth="";var _427=dojo.query("th",this.headerContentNode);var _428=dojo.map(_427,function(c,vIdx){var w=c.style.width;dojo.attr(c,"vIdx",vIdx);if(w&&w.slice(-1)=="%"){_426=true;}else{if(w&&w.slice(-2)=="px"){return window.parseInt(w,10);}}return dojo.contentBox(c).w;});if(_426){dojo.forEach(this.grid.layout.cells,function(cell,idx){if(cell.view==this){var _429=cell.view.getHeaderCellNode(cell.index);if(_429&&dojo.hasAttr(_429,"vIdx")){var vIdx=window.parseInt(dojo.attr(_429,"vIdx"));this.setColWidth(idx,_428[vIdx]);dojo.removeAttr(_429,"vIdx");}}},this);return true;}return false;},adaptHeight:function(_42a){if(!this.grid._autoHeight){var h=(this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10))||this.domNode.clientHeight;var self=this;var _42b=function(){var v;for(var i in self.grid.views.views){v=self.grid.views.views[i];if(v!==self&&v.hasHScrollbar()){return true;}}return false;};if(_42a||(this.noscroll&&_42b())){h-=dojox.html.metrics.getScrollbar().h;}dojox.grid.util.setStyleHeightPx(this.scrollboxNode,h);}this.hasVScrollbar(true);},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}var w=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();if(!this._removingColumn){w=Math.max(w,this.getColumnsWidth())+"px";}else{w=Math.min(w,this.getColumnsWidth())+"px";this._removingColumn=false;}var cn=this.contentNode;cn.style.width=w;this.hasHScrollbar(true);},setSize:function(w,h){var ds=this.domNode.style;var hs=this.headerNode.style;if(w){ds.width=w;hs.width=w;}ds.height=(h>=0?h+"px":"");},renderRow:function(_42c){var _42d=this.createRowNode(_42c);this.buildRow(_42c,_42d);this.grid.edit.restore(this,_42c);return _42d;},createRowNode:function(_42e){var node=document.createElement("div");node.className=this.classTag+"Row";if(this instanceof dojox.grid._RowSelector){dojo.attr(node,"role","presentation");}else{dojo.attr(node,"role","row");if(this.grid.selectionMode!="none"){dojo.attr(node,"aria-selected","false");}}node[dojox.grid.util.gridViewTag]=this.id;node[dojox.grid.util.rowIndexTag]=_42e;this.rowNodes[_42e]=node;return node;},buildRow:function(_42f,_430){this.buildRowContent(_42f,_430);this.styleRow(_42f,_430);},buildRowContent:function(_431,_432){_432.innerHTML=this.content.generateHtml(_431,_431);if(this.flexCells&&this.contentWidth){_432.firstChild.style.width=this.contentWidth;}dojox.grid.util.fire(this,"onAfterRow",[_431,this.structure.cells,_432]);},rowRemoved:function(_433){if(_433>=0){this._cleanupRowWidgets(this.getRowNode(_433));}this.grid.edit.save(this,_433);delete this.rowNodes[_433];},getRowNode:function(_434){return this.rowNodes[_434];},getCellNode:function(_435,_436){var row=this.getRowNode(_435);if(row){return this.content.getCellNode(row,_436);}},getHeaderCellNode:function(_437){if(this.headerContentNode){return this.header.getCellNode(this.headerContentNode,_437);}},styleRow:function(_438,_439){_439._style=_3fb(_439);this.styleRowNode(_438,_439);},styleRowNode:function(_43a,_43b){if(_43b){this.doStyleRowNode(_43a,_43b);}},doStyleRowNode:function(_43c,_43d){this.grid.styleRowNode(_43c,_43d);},updateRow:function(_43e){var _43f=this.getRowNode(_43e);if(_43f){_43f.style.height="";this.buildRow(_43e,_43f);}return _43f;},updateRowStyles:function(_440){this.styleRowNode(_440,this.getRowNode(_440));},lastTop:0,firstScroll:0,doscroll:function(_441){var _442=dojo._isBodyLtr();if(this.firstScroll<2){if((!_442&&this.firstScroll==1)||(_442&&this.firstScroll===0)){var s=dojo.marginBox(this.headerNodeContainer);if(dojo.isIE){this.headerNodeContainer.style.width=s.w+this.getScrollbarWidth()+"px";}else{if(dojo.isMoz){this.headerNodeContainer.style.width=s.w-this.getScrollbarWidth()+"px";this.scrollboxNode.scrollLeft=_442?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth;}}}this.firstScroll++;}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var top=this.scrollboxNode.scrollTop;if(top!==this.lastTop){this.grid.scrollTo(top);}},setScrollTop:function(_443){this.lastTop=_443;this.scrollboxNode.scrollTop=_443;return this.scrollboxNode.scrollTop;},doContentEvent:function(e){if(this.content.decorateEvent(e)){this.grid.onContentEvent(e);}},doHeaderEvent:function(e){if(this.header.decorateEvent(e)){this.grid.onHeaderEvent(e);}},dispatchContentEvent:function(e){return this.content.dispatchEvent(e);},dispatchHeaderEvent:function(e){return this.header.dispatchEvent(e);},setColWidth:function(_444,_445){this.grid.setCellWidth(_444,_445+"px");},update:function(){if(!this.domNode){return;}this.content.update();this.grid.update();var left=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=left;this.headerNode.scrollLeft=left;}});dojo.declare("dojox.grid._GridAvatar",dojo.dnd.Avatar,{construct:function(){var dd=dojo.doc;var a=dd.createElement("table");a.cellPadding=a.cellSpacing="0";a.className="dojoxGridDndAvatar";a.style.position="absolute";a.style.zIndex=1999;a.style.margin="0px";var b=dd.createElement("tbody");var tr=dd.createElement("tr");var td=dd.createElement("td");var img=dd.createElement("td");tr.className="dojoxGridDndAvatarItem";img.className="dojoxGridDndAvatarItemImage";img.style.width="16px";var _446=this.manager.source,node;if(_446.creator){node=_446._normalizedCreator(_446.getItem(this.manager.nodes[0].id).data,"avatar").node;}else{node=this.manager.nodes[0].cloneNode(true);var _447,_448;if(node.tagName.toLowerCase()=="tr"){_447=dd.createElement("table");_448=dd.createElement("tbody");_448.appendChild(node);_447.appendChild(_448);node=_447;}else{if(node.tagName.toLowerCase()=="th"){_447=dd.createElement("table");_448=dd.createElement("tbody");var r=dd.createElement("tr");_447.cellPadding=_447.cellSpacing="0";r.appendChild(node);_448.appendChild(r);_447.appendChild(_448);node=_447;}}}node.id="";td.appendChild(node);tr.appendChild(img);tr.appendChild(td);dojo.style(tr,"opacity",0.9);b.appendChild(tr);a.appendChild(b);this.node=a;var m=dojo.dnd.manager();this.oldOffsetY=m.OFFSET_Y;m.OFFSET_Y=1;},destroy:function(){dojo.dnd.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments);}});var _449=dojo.dnd.manager().makeAvatar;dojo.dnd.manager().makeAvatar=function(){var src=this.source;if(src.viewIndex!==undefined&&!dojo.hasClass(dojo.body(),"dijit_a11y")){return new dojox.grid._GridAvatar(this);}return _449.call(dojo.dnd.manager());};})();}if(!dojo._hasResource["dojox.grid._RowSelector"]){dojo._hasResource["dojox.grid._RowSelector"]=true;dojo.provide("dojox.grid._RowSelector");dojo.declare("dojox.grid._RowSelector",dojox.grid._View,{defaultWidth:"2em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden";},getWidth:function(){return this.viewWidth||this.defaultWidth;},buildRowContent:function(_44a,_44b){var w=this.contentWidth||0;_44b.innerHTML="<table class=\"dojoxGridRowbarTable\" style=\"width:"+w+"px;height:1px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"><tr><td class=\"dojoxGridRowbarInner\">&nbsp;</td></tr></table>";},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight();},adaptWidth:function(){if(!("contentWidth" in this)&&this.contentNode){this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth;}},doStyleRowNode:function(_44c,_44d){var n=["dojoxGridRowbar dojoxGridNonNormalizedCell"];if(this.grid.rows.isOver(_44c)){n.push("dojoxGridRowbarOver");}if(this.grid.selection.isSelected(_44c)){n.push("dojoxGridRowbarSelected");}_44d.className=n.join(" ");},domouseover:function(e){this.grid.onMouseOverRow(e);},domouseout:function(e){if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}});}if(!dojo._hasResource["dojox.grid._Layout"]){dojo._hasResource["dojox.grid._Layout"]=true;dojo.provide("dojox.grid._Layout");dojo.declare("dojox.grid._Layout",null,{constructor:function(_44e){this.grid=_44e;},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(_44f,_450,_451,_452,_453){var _454=this.structure[_44f].cells[0];var _455=this.structure[_450].cells[0];var cell=null;var _456=0;var _457=0;for(var i=0,c;c=_454[i];i++){if(c.index==_451){_456=i;break;}}cell=_454.splice(_456,1)[0];cell.view=this.grid.views.views[_450];for(i=0,c=null;c=_455[i];i++){if(c.index==_452){_457=i;break;}}if(!_453){_457+=1;}_455.splice(_457,0,cell);var _458=this.grid.getCell(this.grid.getSortIndex());if(_458){_458._currentlySorted=this.grid.getSortAsc();}this.cells=[];_451=0;var v;for(i=0;v=this.structure[i];i++){for(var j=0,cs;cs=v.cells[j];j++){for(var k=0;c=cs[k];k++){c.index=_451;this.cells.push(c);if("_currentlySorted" in c){var si=_451+1;si*=c._currentlySorted?1:-1;this.grid.sortInfo=si;delete c._currentlySorted;}_451++;}}}dojo.forEach(this.cells,function(c){var _459=c.markup[2].split(" ");var _45a=parseInt(_459[1].substring(5));if(_45a!=c.index){_459[1]="idx=\""+c.index+"\"";c.markup[2]=_459.join(" ");}});this.grid.setupHeaderMenu();},setColumnVisibility:function(_45b,_45c){var cell=this.cells[_45b];if(cell.hidden==_45c){cell.hidden=!_45c;var v=cell.view,w=v.viewWidth;if(w&&w!="auto"){v._togglingColumn=dojo.marginBox(cell.getHeaderNode()).w||0;}v.update();return true;}else{return false;}},addCellDef:function(_45d,_45e,_45f){var self=this;var _460=function(_461){var w=0;if(_461.colSpan>1){w=0;}else{w=_461.width||self._defaultCellProps.width||self.defaultWidth;if(!isNaN(w)){w=w+"em";}}return w;};var _462={grid:this.grid,subrow:_45d,layoutIndex:_45e,index:this.cells.length};if(_45f&&_45f instanceof dojox.grid.cells._Base){var _463=dojo.clone(_45f);_462.unitWidth=_460(_463._props);_463=dojo.mixin(_463,this._defaultCellProps,_45f._props,_462);return _463;}var _464=_45f.type||_45f.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||dojox.grid.cells.Cell;_462.unitWidth=_460(_45f);return new _464(dojo.mixin({},this._defaultCellProps,_45f,_462));},addRowDef:function(_465,_466){var _467=[];var _468=0,_469=0,_46a=true;for(var i=0,def,cell;(def=_466[i]);i++){cell=this.addCellDef(_465,i,def);_467.push(cell);this.cells.push(cell);if(_46a&&cell.relWidth){_468+=cell.relWidth;}else{if(cell.width){var w=cell.width;if(typeof w=="string"&&w.slice(-1)=="%"){_469+=window.parseInt(w,10);}else{if(w=="auto"){_46a=false;}}}}}if(_468&&_46a){dojo.forEach(_467,function(cell){if(cell.relWidth){cell.width=cell.unitWidth=((cell.relWidth/_468)*(100-_469))+"%";}});}return _467;},addRowsDef:function(_46b){var _46c=[];if(dojo.isArray(_46b)){if(dojo.isArray(_46b[0])){for(var i=0,row;_46b&&(row=_46b[i]);i++){_46c.push(this.addRowDef(i,row));}}else{_46c.push(this.addRowDef(0,_46b));}}return _46c;},addViewDef:function(_46d){this._defaultCellProps=_46d.defaultCell||{};if(_46d.width&&_46d.width=="auto"){delete _46d.width;}return dojo.mixin({},_46d,{cells:this.addRowsDef(_46d.rows||_46d.cells)});},setStructure:function(_46e){this.fieldIndex=0;this.cells=[];var s=this.structure=[];if(this.grid.rowSelector){var sel={type:dojox._scopeName+".grid._RowSelector"};if(dojo.isString(this.grid.rowSelector)){var _46f=this.grid.rowSelector;if(_46f=="false"){sel=null;}else{if(_46f!="true"){sel["width"]=_46f;}}}else{if(!this.grid.rowSelector){sel=null;}}if(sel){s.push(this.addViewDef(sel));}}var _470=function(def){return ("name" in def||"field" in def||"get" in def);};var _471=function(def){if(dojo.isArray(def)){if(dojo.isArray(def[0])||_470(def[0])){return true;}}return false;};var _472=function(def){return (def!==null&&dojo.isObject(def)&&("cells" in def||"rows" in def||("type" in def&&!_470(def))));};if(dojo.isArray(_46e)){var _473=false;for(var i=0,st;(st=_46e[i]);i++){if(_472(st)){_473=true;break;}}if(!_473){s.push(this.addViewDef({cells:_46e}));}else{for(i=0;(st=_46e[i]);i++){if(_471(st)){s.push(this.addViewDef({cells:st}));}else{if(_472(st)){s.push(this.addViewDef(st));}}}}}else{if(_472(_46e)){s.push(this.addViewDef(_46e));}}this.cellCount=this.cells.length;this.grid.setupHeaderMenu();}});}if(!dojo._hasResource["dojox.grid._ViewManager"]){dojo._hasResource["dojox.grid._ViewManager"]=true;dojo.provide("dojox.grid._ViewManager");dojo.declare("dojox.grid._ViewManager",null,{constructor:function(_474){this.grid=_474;},defaultWidth:200,views:[],resize:function(){this.onEach("resize");},render:function(){this.onEach("render");},addView:function(_475){_475.idx=this.views.length;this.views.push(_475);},destroyViews:function(){for(var i=0,v;v=this.views[i];i++){v.destroy();}this.views=[];},getContentNodes:function(){var _476=[];for(var i=0,v;v=this.views[i];i++){_476.push(v.contentNode);}return _476;},forEach:function(_477){for(var i=0,v;v=this.views[i];i++){_477(v,i);}},onEach:function(_478,_479){_479=_479||[];for(var i=0,v;v=this.views[i];i++){if(_478 in v){v[_478].apply(v,_479);}}},normalizeHeaderNodeHeight:function(){var _47a=[];for(var i=0,v;(v=this.views[i]);i++){if(v.headerContentNode.firstChild){_47a.push(v.headerContentNode);}}this.normalizeRowNodeHeights(_47a);},normalizeRowNodeHeights:function(_47b){var h=0;var _47c=[];if(this.grid.rowHeight){h=this.grid.rowHeight;}else{if(_47b.length<=1){return;}for(var i=0,n;(n=_47b[i]);i++){if(!dojo.hasClass(n,"dojoxGridNonNormalizedCell")){_47c[i]=n.firstChild.offsetHeight;h=Math.max(h,_47c[i]);}}h=(h>=0?h:0);if(dojo.isMoz&&h){h++;}}for(i=0;(n=_47b[i]);i++){if(_47c[i]!=h){n.firstChild.style.height=h+"px";}}},resetHeaderNodeHeight:function(){for(var i=0,v,n;(v=this.views[i]);i++){n=v.headerContentNode.firstChild;if(n){n.style.height="";}}},renormalizeRow:function(_47d){var _47e=[];for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(_47d));i++){n.firstChild.style.height="";_47e.push(n);}this.normalizeRowNodeHeights(_47e);},getViewWidth:function(_47f){return this.views[_47f].getWidth()||this.defaultWidth;},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(_480){_480.headerContentNode.style.height="";});var h=0;this.forEach(function(_481){h=Math.max(_481.headerNode.offsetHeight,h);});return h;},measureContent:function(){var h=0;this.forEach(function(_482){h=Math.max(_482.domNode.offsetHeight,h);});return h;},findClient:function(_483){var c=this.grid.elasticView||-1;if(c<0){for(var i=1,v;(v=this.views[i]);i++){if(v.viewWidth){for(i=1;(v=this.views[i]);i++){if(!v.viewWidth){c=i;break;}}break;}}}if(c<0){c=Math.floor(this.views.length/2);}return c;},arrange:function(l,w){var i,v,vw,len=this.views.length;var c=(w<=0?len:this.findClient());var _484=function(v,l){var ds=v.domNode.style;var hs=v.headerNode.style;if(!dojo._isBodyLtr()){ds.right=l+"px";if(dojo.isMoz){hs.right=l+"px";hs.width=parseInt(hs.width,10)-v.getScrollbarWidth()+"px";}else{if(dojo.isChrome){if(v.hasHScrollbar()||v.hasVScrollbar()){hs.left=0+"px";hs.width=parseInt(hs.width,10)-v.getScrollbarWidth()+"px";}else{hs.right=0+"px";}}else{hs.right=l+"px";}}}else{ds.left=l+"px";hs.left=l+"px";}ds.top=0+"px";hs.top=0;};for(i=0;(v=this.views[i])&&(i<c);i++){vw=this.getViewWidth(i);v.setSize(vw,0);_484(v,l);if(v.headerContentNode&&v.headerContentNode.firstChild){vw=v.getColumnsWidth()+v.getScrollbarWidth();}else{vw=v.domNode.offsetWidth;}l+=vw;}i++;var r=w;for(var j=len-1;(v=this.views[j])&&(i<=j);j--){vw=this.getViewWidth(j);v.setSize(vw,0);vw=v.domNode.offsetWidth;r-=vw;_484(v,r);}if(c<len){v=this.views[c];vw=Math.max(1,r-l);v.setSize(vw+"px",0);_484(v,l);}return l;},renderRow:function(_485,_486,_487){var _488=[];for(var i=0,v,n,_489;(v=this.views[i])&&(n=_486[i]);i++){_489=v.renderRow(_485);n.appendChild(_489);_488.push(_489);}if(!_487){this.normalizeRowNodeHeights(_488);}},rowRemoved:function(_48a){this.onEach("rowRemoved",[_48a]);},updateRow:function(_48b,_48c){for(var i=0,v;v=this.views[i];i++){v.updateRow(_48b);}if(!_48c){this.renormalizeRow(_48b);}},updateRowStyles:function(_48d){this.onEach("updateRowStyles",[_48d]);},setScrollTop:function(_48e){var top=_48e;for(var i=0,v;v=this.views[i];i++){top=v.setScrollTop(_48e);if(dojo.isIE&&v.headerNode&&v.scrollboxNode){v.headerNode.scrollLeft=v.scrollboxNode.scrollLeft;}}return top;},getFirstScrollingView:function(){for(var i=0,v;(v=this.views[i]);i++){if(v.hasHScrollbar()||v.hasVScrollbar()){return v;}}return null;}});}if(!dojo._hasResource["dojox.grid._RowManager"]){dojo._hasResource["dojox.grid._RowManager"]=true;dojo.provide("dojox.grid._RowManager");(function(){var _48f=function(_490,_491){if(_490.style.cssText==undefined){_490.setAttribute("style",_491);}else{_490.style.cssText=_491;}};dojo.declare("dojox.grid._RowManager",null,{constructor:function(_492){this.grid=_492;},linesToEms:2,overRow:-2,prepareStylingRow:function(_493,_494){return {index:_493,node:_494,odd:Boolean(_493&1),selected:!!this.grid.selection.isSelected(_493),over:this.isOver(_493),customStyles:"",customClasses:"dojoxGridRow"};},styleRowNode:function(_495,_496){var row=this.prepareStylingRow(_495,_496);this.grid.onStyleRow(row);this.applyStyles(row);},applyStyles:function(_497){var i=_497;i.node.className=i.customClasses;var h=i.node.style.height;_48f(i.node,i.customStyles+";"+(i.node._style||""));i.node.style.height=h;},updateStyles:function(_498){this.grid.updateRowStyles(_498);},setOverRow:function(_499){var last=this.overRow;this.overRow=_499;if((last!=this.overRow)&&(dojo.isString(last)||last>=0)){this.updateStyles(last);}this.updateStyles(this.overRow);},isOver:function(_49a){return (this.overRow==_49a&&!dojo.hasClass(this.grid.domNode,"dojoxGridColumnResizing"));}});})();}if(!dojo._hasResource["dojox.grid._FocusManager"]){dojo._hasResource["dojox.grid._FocusManager"]=true;dojo.provide("dojox.grid._FocusManager");dojo.declare("dojox.grid._FocusManager",null,{constructor:function(_49b){this.grid=_49b;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(dojo.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(dojo.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(dojo.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(dojo.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(dojo.connect(this.grid,"postrender",this,"_delayedHeaderFocus"));},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);dojo.forEach(this._headerConnects,dojo.disconnect);delete this.grid;delete this.cell;},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:false,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._initColumnHeaders();},isFocusCell:function(_49c,_49d){return (this.cell==_49c)&&(this.rowIndex==_49d);},isLastFocusCell:function(){if(this.cell){return (this.rowIndex==this.grid.rowCount-1)&&(this.cell.index==this.grid.layout.cellCount-1);}return false;},isFirstFocusCell:function(){if(this.cell){return (this.rowIndex===0)&&(this.cell.index===0);}return false;},isNoFocusCell:function(){return (this.rowIndex<0)||!this.cell;},isNavHeader:function(){return (!!this._colHeadNode);},getHeaderIndex:function(){if(this._colHeadNode){return dojo.indexOf(this._findHeaderCells(),this._colHeadNode);}else{return -1;}},_focusifyCellNode:function(_49e){var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){dojo.toggleClass(n,this.focusClass,_49e);if(_49e){var sl=this.scrollIntoView();try{if(!this.grid.edit.isEditing()){dojox.grid.util.fire(n,"focus");if(sl){this.cell.view.scrollboxNode.scrollLeft=sl;}}}catch(e){}}}},_delayedCellFocus:function(){if(this.isNavHeader()||!this.grid._focused){return;}var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){try{var _49f=true;if(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed){_49f=!(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed);}if(_49f){if(!this.grid.edit.isEditing()){dojo.toggleClass(n,this.focusClass,true);this.blurHeader();dojox.grid.util.fire(n,"focus");}}}catch(e){}}},_delayedHeaderFocus:function(){var _4a0=true;if(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed){_4a0=!(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed);}if(_4a0){if(this.isNavHeader()){this.focusHeader();this.grid.domNode.focus();}}},_initColumnHeaders:function(){dojo.forEach(this._headerConnects,dojo.disconnect);this._headerConnects=[];var _4a1=this._findHeaderCells();for(var i=0;i<_4a1.length;i++){this._headerConnects.push(dojo.connect(_4a1[i],"onfocus",this,"doColHeaderFocus"));this._headerConnects.push(dojo.connect(_4a1[i],"onblur",this,"doColHeaderBlur"));}},_findHeaderCells:function(){var _4a2=dojo.query("th",this.grid.viewsHeaderNode);var _4a3=[];for(var i=0;i<_4a2.length;i++){var _4a4=_4a2[i];var _4a5=dojo.hasAttr(_4a4,"tabIndex");var _4a6=dojo.attr(_4a4,"tabIndex");if(_4a5&&_4a6<0){_4a3.push(_4a4);}}return _4a3;},_setActiveColHeader:function(_4a7,_4a8,_4a9){dojo.attr(this.grid.domNode,"aria-activedescendant",_4a7.id);if(_4a9!=null&&_4a9>=0&&_4a9!=_4a8){dojo.toggleClass(this._findHeaderCells()[_4a9],this.focusClass,false);}dojo.toggleClass(_4a7,this.focusClass,true);this._colHeadNode=_4a7;this._colHeadFocusIdx=_4a8;this._scrollHeader(this._colHeadFocusIdx);},scrollIntoView:function(){var info=(this.cell?this._scrollInfo(this.cell):null);if(!info||!info.s){return null;}var rt=this.grid.scroller.findScrollTop(this.rowIndex);if(info.n&&info.sr){if(info.n.offsetLeft+info.n.offsetWidth>info.sr.l+info.sr.w){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}}}if(info.r&&info.sr){if(rt+info.r.offsetHeight>info.sr.t+info.sr.h){this.grid.setScrollTop(rt+info.r.offsetHeight-info.sr.h);}else{if(rt<info.sr.t){this.grid.setScrollTop(rt);}}}return info.s.scrollLeft;},_scrollInfo:function(cell,_4aa){if(cell){var cl=cell,sbn=cl.view.scrollboxNode,sbnr={w:sbn.clientWidth,l:sbn.scrollLeft,t:sbn.scrollTop,h:sbn.clientHeight},rn=cl.view.getRowNode(this.rowIndex);return {c:cl,s:sbn,sr:sbnr,n:(_4aa?_4aa:cell.getNode(this.rowIndex)),r:rn};}return null;},_scrollHeader:function(_4ab){var info=null;if(this._colHeadNode){var cell=this.grid.getCell(_4ab);info=this._scrollInfo(cell,cell.getNode(0));}if(info&&info.s&&info.sr&&info.n){var _4ac=info.sr.l+info.sr.w;if(info.n.offsetLeft+info.n.offsetWidth>_4ac){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}else{if(dojo.isIE<=7&&cell&&cell.view.headerNode){cell.view.headerNode.scrollLeft=info.s.scrollLeft;}}}}},_isHeaderHidden:function(){var _4ad=this.focusView;if(!_4ad){for(var i=0,_4ae;(_4ae=this.grid.views.views[i]);i++){if(_4ae.headerNode){_4ad=_4ae;break;}}}return (_4ad&&dojo.getComputedStyle(_4ad.headerNode).display=="none");},colSizeAdjust:function(e,_4af,_4b0){var _4b1=this._findHeaderCells();var view=this.focusView;if(!view){for(var i=0,_4b2;(_4b2=this.grid.views.views[i]);i++){if(_4b2.header.tableMap.map){view=_4b2;break;}}}var _4b3=_4b1[_4af];if(!view||(_4af==_4b1.length-1&&_4af===0)){return;}view.content.baseDecorateEvent(e);e.cellNode=_4b3;e.cellIndex=view.content.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);if(view.header.canResize(e)){var _4b4={l:_4b0};var drag=view.header.colResizeSetup(e,false);view.header.doResizeColumn(drag,null,_4b4);view.update();}},styleRow:function(_4b5){return;},setFocusIndex:function(_4b6,_4b7){this.setFocusCell(this.grid.getCell(_4b7),_4b6);},setFocusCell:function(_4b8,_4b9){if(_4b8&&!this.isFocusCell(_4b8,_4b9)){this.tabbingOut=false;if(this._colHeadNode){this.blurHeader();}this._colHeadNode=this._colHeadFocusIdx=null;this.focusGridView();this._focusifyCellNode(false);this.cell=_4b8;this.rowIndex=_4b9;this._focusifyCellNode(true);}if(dojo.isOpera){setTimeout(dojo.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);}else{this.grid.onCellFocus(this.cell,this.rowIndex);}},next:function(){if(this.cell){var row=this.rowIndex,col=this.cell.index+1,cc=this.grid.layout.cellCount-1,rc=this.grid.rowCount-1;if(col>cc){col=0;row++;}if(row>rc){col=cc;row=rc;}if(this.grid.edit.isEditing()){var _4ba=this.grid.getCell(col);if(!this.isLastFocusCell()&&(!_4ba.editable||this.grid.canEdit&&!this.grid.canEdit(_4ba,row))){this.cell=_4ba;this.rowIndex=row;this.next();return;}}this.setFocusIndex(row,col);}},previous:function(){if(this.cell){var row=(this.rowIndex||0),col=(this.cell.index||0)-1;if(col<0){col=this.grid.layout.cellCount-1;row--;}if(row<0){row=0;col=0;}if(this.grid.edit.isEditing()){var _4bb=this.grid.getCell(col);if(!this.isFirstFocusCell()&&!_4bb.editable){this.cell=_4bb;this.rowIndex=row;this.previous();return;}}this.setFocusIndex(row,col);}},move:function(_4bc,_4bd){var _4be=_4bd<0?-1:1;if(this.isNavHeader()){var _4bf=this._findHeaderCells();var _4c0=currentIdx=dojo.indexOf(_4bf,this._colHeadNode);currentIdx+=_4bd;while(currentIdx>=0&&currentIdx<_4bf.length&&_4bf[currentIdx].style.display=="none"){currentIdx+=_4be;}if((currentIdx>=0)&&(currentIdx<_4bf.length)){this._setActiveColHeader(_4bf[currentIdx],currentIdx,_4c0);}}else{if(this.cell){var sc=this.grid.scroller,r=this.rowIndex,rc=this.grid.rowCount-1,row=Math.min(rc,Math.max(0,r+_4bc));if(_4bc){if(_4bc>0){if(row>sc.getLastPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop+sc.findScrollTop(row)-sc.findScrollTop(r));}}else{if(_4bc<0){if(row<=sc.getPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop-sc.findScrollTop(r)-sc.findScrollTop(row));}}}}var cc=this.grid.layout.cellCount-1,i=this.cell.index,col=Math.min(cc,Math.max(0,i+_4bd));var cell=this.grid.getCell(col);while(col>=0&&col<cc&&cell&&cell.hidden===true){col+=_4be;cell=this.grid.getCell(col);}if(!cell||cell.hidden===true){col=i;}var n=cell.getNode(row);if(!n&&_4bc){if((row+_4bc)>=0&&(row+_4bc)<=rc){this.move(_4bc>0?++_4bc:--_4bc,_4bd);}return;}else{if((!n||dojo.style(n,"display")==="none")&&_4bd){if((col+_4bc)>=0&&(col+_4bc)<=cc){this.move(_4bc,_4bd>0?++_4bd:--_4bd);}return;}}this.setFocusIndex(row,col);if(_4bc){this.grid.updateRow(r);}}}},previousKey:function(e){if(this.grid.edit.isEditing()){dojo.stopEvent(e);this.previous();}else{if(!this.isNavHeader()&&!this._isHeaderHidden()){this.grid.domNode.focus();dojo.stopEvent(e);}else{this.tabOut(this.grid.domNode);if(this._colHeadFocusIdx!=null){dojo.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,false);this._colHeadFocusIdx=null;}this._focusifyCellNode(false);}}},nextKey:function(e){var _4c1=(this.grid.rowCount===0);if(e.target===this.grid.domNode&&this._colHeadFocusIdx==null){this.focusHeader();dojo.stopEvent(e);}else{if(this.isNavHeader()){this.blurHeader();if(!this.findAndFocusGridCell()){this.tabOut(this.grid.lastFocusNode);}this._colHeadNode=this._colHeadFocusIdx=null;}else{if(this.grid.edit.isEditing()){dojo.stopEvent(e);this.next();}else{this.tabOut(this.grid.lastFocusNode);}}}},tabOut:function(_4c2){this.tabbingOut=true;_4c2.focus();},focusGridView:function(){dojox.grid.util.fire(this.focusView,"focus");},focusGrid:function(_4c3){this.focusGridView();this._focusifyCellNode(true);},findAndFocusGridCell:function(){var _4c4=true;var _4c5=(this.grid.rowCount===0);if(this.isNoFocusCell()&&!_4c5){var _4c6=0;var cell=this.grid.getCell(_4c6);if(cell.hidden){_4c6=this.isNavHeader()?this._colHeadFocusIdx:0;}this.setFocusIndex(0,_4c6);}else{if(this.cell&&!_4c5){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex]){this.grid.scrollToRow(this.rowIndex);}this.focusGrid();}else{_4c4=false;}}this._colHeadNode=this._colHeadFocusIdx=null;return _4c4;},focusHeader:function(){var _4c7=this._findHeaderCells();var _4c8=this._colHeadFocusIdx;if(this._isHeaderHidden()){this.findAndFocusGridCell();}else{if(!this._colHeadFocusIdx){if(this.isNoFocusCell()){this._colHeadFocusIdx=0;}else{this._colHeadFocusIdx=this.cell.index;}}}this._colHeadNode=_4c7[this._colHeadFocusIdx];while(this._colHeadNode&&this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<_4c7.length&&this._colHeadNode.style.display=="none"){this._colHeadFocusIdx++;this._colHeadNode=_4c7[this._colHeadFocusIdx];}if(this._colHeadNode&&this._colHeadNode.style.display!="none"){if(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode){this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode);this.headerMenu.bindDomNode(this.grid.domNode);this._contextMenuBindNode=this.grid.domNode;}this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,_4c8);this._scrollHeader(this._colHeadFocusIdx);this._focusifyCellNode(false);}else{this.findAndFocusGridCell();}},blurHeader:function(){dojo.removeClass(this._colHeadNode,this.focusClass);dojo.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var _4c9=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(_4c9);this._contextMenuBindNode=_4c9;}},doFocus:function(e){if(e&&e.target!=e.currentTarget){dojo.stopEvent(e);return;}if(!this.tabbingOut){this.focusHeader();}this.tabbingOut=false;dojo.stopEvent(e);},doBlur:function(e){dojo.stopEvent(e);},doContextMenu:function(e){if(!this.headerMenu){dojo.stopEvent(e);}},doLastNodeFocus:function(e){if(this.tabbingOut){this._focusifyCellNode(false);}else{if(this.grid.rowCount>0){if(this.isNoFocusCell()){this.setFocusIndex(0,0);}this._focusifyCellNode(true);}else{this.focusHeader();}}this.tabbingOut=false;dojo.stopEvent(e);},doLastNodeBlur:function(e){dojo.stopEvent(e);},doColHeaderFocus:function(e){this._setActiveColHeader(e.target,dojo.attr(e.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());dojo.stopEvent(e);},doColHeaderBlur:function(e){dojo.toggleClass(e.target,this.focusClass,false);}});}if(!dojo._hasResource["dojox.grid._EditManager"]){dojo._hasResource["dojox.grid._EditManager"]=true;dojo.provide("dojox.grid._EditManager");dojo.declare("dojox.grid._EditManager",null,{constructor:function(_4ca){this.grid=_4ca;if(dojo.isIE){this.connections=[dojo.connect(document.body,"onfocus",dojo.hitch(this,"_boomerangFocus"))];}else{this.connections=[dojo.connect(this.grid,"onBlur",this,"apply")];}},info:{},destroy:function(){dojo.forEach(this.connections,dojo.disconnect);},cellFocus:function(_4cb,_4cc){if(this.grid.singleClickEdit||this.isEditRow(_4cc)){this.setEditCell(_4cb,_4cc);}else{this.apply();}if(this.isEditing()||(_4cb&&_4cb.editable&&_4cb.alwaysEditing)){this._focusEditor(_4cb,_4cc);}},rowClick:function(e){if(this.isEditing()&&!this.isEditRow(e.rowIndex)){this.apply();}},styleRow:function(_4cd){if(_4cd.index==this.info.rowIndex){_4cd.customClasses+=" dojoxGridRowEditing";}},dispatchEvent:function(e){var c=e.cell,ed=(c&&c["editable"])?c:0;return ed&&ed.dispatchEvent(e.dispatch,e);},isEditing:function(){return this.info.rowIndex!==undefined;},isEditCell:function(_4ce,_4cf){return (this.info.rowIndex===_4ce)&&(this.info.cell.index==_4cf);},isEditRow:function(_4d0){return this.info.rowIndex===_4d0;},setEditCell:function(_4d1,_4d2){if(!this.isEditCell(_4d2,_4d1.index)&&this.grid.canEdit&&this.grid.canEdit(_4d1,_4d2)){this.start(_4d1,_4d2,this.isEditRow(_4d2)||_4d1.editable);}},_focusEditor:function(_4d3,_4d4){dojox.grid.util.fire(_4d3,"focus",[_4d4]);},focusEditor:function(){if(this.isEditing()){this._focusEditor(this.info.cell,this.info.rowIndex);}},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>new Date().getTime();},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();this.focusEditor();this._catchBoomerang=0;}},_doCatchBoomerang:function(){if(dojo.isIE){this._catchBoomerang=new Date().getTime()+this._boomerangWindow;}},start:function(_4d5,_4d6,_4d7){this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(_4d6)){this.applyRowEdit();this.grid.updateRow(_4d6);}if(_4d7){this.info={cell:_4d5,rowIndex:_4d6};this.grid.doStartEdit(_4d5,_4d6);this.grid.updateRow(_4d6);}else{this.info={};}this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(_4d5,_4d6);this._doCatchBoomerang();},_editorDo:function(_4d8){var c=this.info.cell;if(c&&c.editable){c[_4d8](this.info.rowIndex);}},editorApply:function(){this._editorDo("apply");},editorCancel:function(){this._editorDo("cancel");},applyCellEdit:function(_4d9,_4da,_4db){if(this.grid.canEdit(_4da,_4db)){this.grid.doApplyCellEdit(_4d9,_4db,_4da.field);}},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field);},apply:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},save:function(_4dc,_4dd){var c=this.info.cell;if(this.isEditRow(_4dc)&&(!_4dd||c.view==_4dd)&&c.editable){c.save(c,this.info.rowIndex);}},restore:function(_4de,_4df){var c=this.info.cell;if(this.isEditRow(_4df)&&c.view==_4de&&c.editable){c.restore(c,this.info.rowIndex);}}});}if(!dojo._hasResource["dojox.grid.Selection"]){dojo._hasResource["dojox.grid.Selection"]=true;dojo.provide("dojox.grid.Selection");dojo.declare("dojox.grid.Selection",null,{constructor:function(_4e0){this.grid=_4e0;this.selected=[];this.setMode(_4e0.selectionMode);},mode:"extended",selected:null,updating:0,selectedIndex:-1,setMode:function(mode){if(this.selected.length){this.deselectAll();}if(mode!="extended"&&mode!="multiple"&&mode!="single"&&mode!="none"){this.mode="extended";}else{this.mode=mode;}},onCanSelect:function(_4e1){return this.grid.onCanSelect(_4e1);},onCanDeselect:function(_4e2){return this.grid.onCanDeselect(_4e2);},onSelected:function(_4e3){},onDeselected:function(_4e4){},onChanging:function(){},onChanged:function(){},isSelected:function(_4e5){if(this.mode=="none"){return false;}return this.selected[_4e5];},getFirstSelected:function(){if(!this.selected.length||this.mode=="none"){return -1;}for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getNextSelected:function(_4e6){if(this.mode=="none"){return -1;}for(var i=_4e6+1,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getSelected:function(){var _4e7=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_4e7.push(i);}}return _4e7;},getSelectedCount:function(){var c=0;for(var i=0;i<this.selected.length;i++){if(this.selected[i]){c++;}}return c;},_beginUpdate:function(){if(this.updating===0){this.onChanging();}this.updating++;},_endUpdate:function(){this.updating--;if(this.updating===0){this.onChanged();}},select:function(_4e8){if(this.mode=="none"){return;}if(this.mode!="multiple"){this.deselectAll(_4e8);this.addToSelection(_4e8);}else{this.toggleSelect(_4e8);}},addToSelection:function(_4e9){if(this.mode=="none"){return;}if(dojo.isArray(_4e9)){dojo.forEach(_4e9,this.addToSelection,this);return;}_4e9=Number(_4e9);if(this.selected[_4e9]){this.selectedIndex=_4e9;}else{if(this.onCanSelect(_4e9)!==false){this.selectedIndex=_4e9;var _4ea=this.grid.getRowNode(_4e9);if(_4ea){dojo.attr(_4ea,"aria-selected","true");}this._beginUpdate();this.selected[_4e9]=true;this.onSelected(_4e9);this._endUpdate();}}},deselect:function(_4eb){if(this.mode=="none"){return;}if(dojo.isArray(_4eb)){dojo.forEach(_4eb,this.deselect,this);return;}_4eb=Number(_4eb);if(this.selectedIndex==_4eb){this.selectedIndex=-1;}if(this.selected[_4eb]){if(this.onCanDeselect(_4eb)===false){return;}var _4ec=this.grid.getRowNode(_4eb);if(_4ec){dojo.attr(_4ec,"aria-selected","false");}this._beginUpdate();delete this.selected[_4eb];this.onDeselected(_4eb);this._endUpdate();}},setSelected:function(_4ed,_4ee){this[(_4ee?"addToSelection":"deselect")](_4ed);},toggleSelect:function(_4ef){if(dojo.isArray(_4ef)){dojo.forEach(_4ef,this.toggleSelect,this);return;}this.setSelected(_4ef,!this.selected[_4ef]);},_range:function(_4f0,inTo,func){var s=(_4f0>=0?_4f0:inTo),e=inTo;if(s>e){e=s;s=inTo;}for(var i=s;i<=e;i++){func(i);}},selectRange:function(_4f1,inTo){this._range(_4f1,inTo,dojo.hitch(this,"addToSelection"));},deselectRange:function(_4f2,inTo){this._range(_4f2,inTo,dojo.hitch(this,"deselect"));},insert:function(_4f3){this.selected.splice(_4f3,0,false);if(this.selectedIndex>=_4f3){this.selectedIndex++;}},remove:function(_4f4){this.selected.splice(_4f4,1);if(this.selectedIndex>=_4f4){this.selectedIndex--;}},deselectAll:function(_4f5){for(var i in this.selected){if((i!=_4f5)&&(this.selected[i]===true)){this.deselect(i);}}},clickSelect:function(_4f6,_4f7,_4f8){if(this.mode=="none"){return;}this._beginUpdate();if(this.mode!="extended"){this.select(_4f6);}else{var _4f9=this.selectedIndex;if(!_4f7){this.deselectAll(_4f6);}if(_4f8){this.selectRange(_4f9,_4f6);}else{if(_4f7){this.toggleSelect(_4f6);}else{this.addToSelection(_4f6);}}}this._endUpdate();},clickSelectEvent:function(e){this.clickSelect(e.rowIndex,dojo.isCopyKey(e),e.shiftKey);},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate();}});}if(!dojo._hasResource["dojox.grid._Events"]){dojo._hasResource["dojox.grid._Events"]=true;dojo.provide("dojox.grid._Events");dojo.declare("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(e){this.dispatchKeyEvent(e);},onContentEvent:function(e){this.dispatchContentEvent(e);},onHeaderEvent:function(e){this.dispatchHeaderEvent(e);},onStyleRow:function(_4fa){var i=_4fa;i.customClasses+=(i.odd?" dojoxGridRowOdd":"")+(i.selected?" dojoxGridRowSelected":"")+(i.over?" dojoxGridRowOver":"");this.focus.styleRow(_4fa);this.edit.styleRow(_4fa);},onKeyDown:function(e){if(e.altKey||e.metaKey){return;}var dk=dojo.keys;var _4fb;switch(e.keyCode){case dk.ESCAPE:this.edit.cancel();break;case dk.ENTER:if(!this.edit.isEditing()){_4fb=this.focus.getHeaderIndex();if(_4fb>=0){this.setSortIndex(_4fb);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}dojo.stopEvent(e);}if(!e.shiftKey){var _4fc=this.edit.isEditing();this.edit.apply();if(!_4fc){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex);}}if(!this.edit.isEditing()){var _4fd=this.focus.focusView||this.views.views[0];_4fd.content.decorateEvent(e);this.onRowClick(e);dojo.stopEvent(e);}break;case dk.SPACE:if(!this.edit.isEditing()){_4fb=this.focus.getHeaderIndex();if(_4fb>=0){this.setSortIndex(_4fb);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}dojo.stopEvent(e);}break;case dk.TAB:this.focus[e.shiftKey?"previousKey":"nextKey"](e);break;case dk.LEFT_ARROW:case dk.RIGHT_ARROW:if(!this.edit.isEditing()){var _4fe=e.keyCode;dojo.stopEvent(e);_4fb=this.focus.getHeaderIndex();if(_4fb>=0&&(e.shiftKey&&e.ctrlKey)){this.focus.colSizeAdjust(e,_4fb,(_4fe==dk.LEFT_ARROW?-1:1)*5);}else{var _4ff=(_4fe==dk.LEFT_ARROW)?1:-1;if(dojo._isBodyLtr()){_4ff*=-1;}this.focus.move(0,_4ff);}}break;case dk.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(e);this.focus.move(-1,0);}break;case dk.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(e);this.focus.move(1,0);}break;case dk.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(e);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1){this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0);}}break;case dk.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(e);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1){this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0);}}break;default:break;}},onMouseOver:function(e){e.rowIndex==-1?this.onHeaderCellMouseOver(e):this.onCellMouseOver(e);},onMouseOut:function(e){e.rowIndex==-1?this.onHeaderCellMouseOut(e):this.onCellMouseOut(e);},onMouseDown:function(e){e.rowIndex==-1?this.onHeaderCellMouseDown(e):this.onCellMouseDown(e);},onMouseOverRow:function(e){if(!this.rows.isOver(e.rowIndex)){this.rows.setOverRow(e.rowIndex);e.rowIndex==-1?this.onHeaderMouseOver(e):this.onRowMouseOver(e);}},onMouseOutRow:function(e){if(this.rows.isOver(-1)){this.onHeaderMouseOut(e);}else{if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(e);}}},onMouseDownRow:function(e){if(e.rowIndex!=-1){this.onRowMouseDown(e);}},onCellMouseOver:function(e){if(e.cellNode){dojo.addClass(e.cellNode,this.cellOverClass);}},onCellMouseOut:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.cellOverClass);}},onCellMouseDown:function(e){},onCellClick:function(e){this._click[0]=this._click[1];this._click[1]=e;if(!this.edit.isEditCell(e.rowIndex,e.cellIndex)){this.focus.setFocusCell(e.cell,e.rowIndex);}this.onRowClick(e);},onCellDblClick:function(e){if(this._click.length>1&&dojo.isIE){this.edit.setEditCell(this._click[1].cell,this._click[1].rowIndex);}else{if(this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex){this.edit.setEditCell(this._click[0].cell,this._click[0].rowIndex);}else{this.edit.setEditCell(e.cell,e.rowIndex);}}this.onRowDblClick(e);},onCellContextMenu:function(e){this.onRowContextMenu(e);},onCellFocus:function(_500,_501){this.edit.cellFocus(_500,_501);},onRowClick:function(e){this.edit.rowClick(e);this.selection.clickSelectEvent(e);},onRowDblClick:function(e){},onRowMouseOver:function(e){},onRowMouseOut:function(e){},onRowMouseDown:function(e){},onRowContextMenu:function(e){dojo.stopEvent(e);},onHeaderMouseOver:function(e){},onHeaderMouseOut:function(e){},onHeaderCellMouseOver:function(e){if(e.cellNode){dojo.addClass(e.cellNode,this.cellOverClass);}},onHeaderCellMouseOut:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.cellOverClass);}},onHeaderCellMouseDown:function(e){},onHeaderClick:function(e){},onHeaderCellClick:function(e){this.setSortIndex(e.cell.index);this.onHeaderClick(e);},onHeaderDblClick:function(e){},onHeaderCellDblClick:function(e){this.onHeaderDblClick(e);},onHeaderCellContextMenu:function(e){this.onHeaderContextMenu(e);},onHeaderContextMenu:function(e){if(!this.headerMenu){dojo.stopEvent(e);}},onStartEdit:function(_502,_503){},onApplyCellEdit:function(_504,_505,_506){},onCancelEdit:function(_507){},onApplyEdit:function(_508){},onCanSelect:function(_509){return true;},onCanDeselect:function(_50a){return true;},onSelected:function(_50b){this.updateRowStyles(_50b);},onDeselected:function(_50c){this.updateRowStyles(_50c);},onSelectionChanged:function(){}});}if(!dojo._hasResource["dojox.grid._Grid"]){dojo._hasResource["dojox.grid._Grid"]=true;dojo.provide("dojox.grid._Grid");(function(){if(!dojo.isCopyKey){dojo.isCopyKey=dojo.dnd.getCopyKeyState;}dojo.declare("dojox.grid._Grid",[dijit._Widget,dijit._Templated,dojox.grid._Events],{templateString:"<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\n</div>\n",classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:1000,autoWidth:false,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:true,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:false,selectionMode:"extended",rowSelector:"",columnReordering:false,headerMenu:null,placeholderLabel:"GridColumns",selectable:false,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:true,formatterScope:null,editable:false,sortInfo:0,themeable:true,_placeholders:null,_layoutClass:dojox.grid._Layout,buildRendering:function(){this.inherited(arguments);if(!this.domNode.getAttribute("tabIndex")){this.domNode.tabIndex="0";}this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");dojox.html.metrics.initOnFontResize();this.connect(dojox.html.metrics,"onFontResize","textSizeChanged");dojox.grid.util.funnelEvents(this.domNode,this,"doKeyEvent",dojox.grid.util.keyEvents);if(this.selectionMode!="none"){dojo.attr(this.domNode,"aria-multiselectable",this.selectionMode=="single"?"false":"true");}dojo.addClass(this.domNode,this.classTag);if(!this.isLeftToRight()){dojo.addClass(this.domNode,this.classTag+"Rtl");}},postMixInProperties:function(){this.inherited(arguments);var _50d=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,_50d);this.errorMessage=dojo.string.substitute(this.errorMessage,_50d);if(this.srcNodeRef&&this.srcNodeRef.style.height){this.height=this.srcNodeRef.style.height;}this._setAutoHeightAttr(this.autoHeight,true);this.lastScrollTop=this.scrollTop=0;},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth){this.domNode.style.width=this.initialWidth;}if(this.domNode&&!this.editable){dojo.attr(this.domNode,"aria-readonly","true");}},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.edit.destroy();delete this.edit;this.views.destroyViews();if(this.scroller){this.scroller.destroy();delete this.scroller;}if(this.focus){this.focus.destroy();delete this.focus;}if(this.headerMenu&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){p.unReplace(true);});this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.inherited(arguments);},_setAutoHeightAttr:function(ah,_50e){if(typeof ah=="string"){if(!ah||ah=="false"){ah=false;}else{if(ah=="true"){ah=true;}else{ah=window.parseInt(ah,10);}}}if(typeof ah=="number"){if(isNaN(ah)){ah=false;}if(ah<0){ah=true;}else{if(ah===0){ah=false;}}}this.autoHeight=ah;if(typeof ah=="boolean"){this._autoHeight=ah;}else{if(typeof ah=="number"){this._autoHeight=(ah>=this.get("rowCount"));}else{this._autoHeight=false;}}if(this._started&&!_50e){this.render();}},_getRowCountAttr:function(){return this.updating&&this.invalidated&&this.invalidated.rowCount!=undefined?this.invalidated.rowCount:this.rowCount;},textSizeChanged:function(){this.render();},sizeChange:function(){this.update();},createManagers:function(){this.rows=new dojox.grid._RowManager(this);this.focus=new dojox.grid._FocusManager(this);this.edit=new dojox.grid._EditManager(this);},createSelection:function(){this.selection=new dojox.grid.Selection(this);},createScroller:function(){this.scroller=new dojox.grid._Scroller();this.scroller.grid=this;this.scroller.renderRow=dojo.hitch(this,"renderRow");this.scroller.removeRow=dojo.hitch(this,"rowRemoved");},createLayout:function(){this.layout=new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn");},onMoveColumn:function(){this.render();},onResizeColumn:function(_50f){},createViews:function(){this.views=new dojox.grid._ViewManager(this);this.views.createView=dojo.hitch(this,"createView");},createView:function(_510,idx){var c=dojo.getObject(_510);var view=new c({grid:this,index:idx});this.viewsNode.appendChild(view.domNode);this.viewsHeaderNode.appendChild(view.headerNode);this.views.addView(view);dojo.attr(this.domNode,"align",dojo._isBodyLtr()?"left":"right");return view;},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){this.createView(vs.type||dojox._scopeName+".grid._View",i).setStructure(vs);}this.scroller.setContentNodes(this.views.getContentNodes());},_setStructureAttr:function(_511){var s=_511;if(s&&dojo.isString(s)){dojo.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0");s=dojo.getObject(s);}this.structure=s;if(!s){if(this.layout.structure){s=this.layout.structure;}else{return;}}this.views.destroyViews();this.focus.focusView=null;if(s!==this.layout.structure){this.layout.setStructure(s);}this._structureChanged();},setStructure:function(_512){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(_512);},getColumnTogglingItems:function(){return dojo.map(this.layout.cells,function(cell){if(!cell.menuItems){cell.menuItems=[];}var self=this;var item=new dijit.CheckedMenuItem({label:cell.name,checked:!cell.hidden,_gridCell:cell,onChange:function(_513){if(self.layout.setColumnVisibility(this._gridCell.index,_513)){var _514=this._gridCell.menuItems;if(_514.length>1){dojo.forEach(_514,function(item){if(item!==this){item.setAttribute("checked",_513);}},this);}_513=dojo.filter(self.layout.cells,function(c){if(c.menuItems.length>1){dojo.forEach(c.menuItems,"item.set('disabled', false);");}else{c.menuItems[0].set("disabled",false);}return !c.hidden;});if(_513.length==1){dojo.forEach(_513[0].menuItems,"item.set('disabled', true);");}}},destroy:function(){var _515=dojo.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(_515,1);delete this._gridCell;dijit.CheckedMenuItem.prototype.destroy.apply(this,arguments);}});cell.menuItems.push(item);return item;},this);},_setHeaderMenuAttr:function(menu){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){p.unReplace(true);});this._placeholders=[];}if(this.headerMenu){this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.headerMenu=menu;if(!menu){return;}this.headerMenu.bindDomNode(this.viewsHeaderNode);if(this.headerMenu.getPlaceholders){this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel);}},setHeaderMenu:function(menu){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(menu);},setupHeaderMenu:function(){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){if(p._replaced){p.unReplace(true);}p.replace(this.getColumnTogglingItems());},this);}},_fetch:function(_516){this.setScrollTop(0);},getItem:function(_517){return null;},showMessage:function(_518){if(_518){this.messagesNode.innerHTML=_518;this.messagesNode.style.display="";}else{this.messagesNode.innerHTML="";this.messagesNode.style.display="none";}},_structureChanged:function(){this.buildViews();if(this.autoRender&&this._started){this.render();}},hasLayout:function(){return this.layout.cells.length;},resize:function(_519,_51a){this._pendingChangeSize=_519;this._pendingResultSize=_51a;this.sizeChange();},_getPadBorder:function(){this._padBorder=this._padBorder||dojo._getPadBorderExtents(this.domNode);return this._padBorder;},_getHeaderHeight:function(){var vns=this.viewsHeaderNode.style,t=vns.display=="none"?0:this.views.measureHeader();vns.height=t+"px";this.views.normalizeHeaderNodeHeight();return t;},_resize:function(_51b,_51c){_51b=_51b||this._pendingChangeSize;_51c=_51c||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(!this.domNode){return;}var pn=this.domNode.parentNode;if(!pn||pn.nodeType!=1||!this.hasLayout()||pn.style.visibility=="hidden"||pn.style.display=="none"){return;}var _51d=this._getPadBorder();var hh=undefined;var h;if(this._autoHeight){this.domNode.style.height="auto";}else{if(typeof this.autoHeight=="number"){h=hh=this._getHeaderHeight();h+=(this.scroller.averageRowHeight*this.autoHeight);this.domNode.style.height=h+"px";}else{if(this.domNode.clientHeight<=_51d.h){if(pn==document.body){this.domNode.style.height=this.defaultHeight;}else{if(this.height){this.domNode.style.height=this.height;}else{this.fitTo="parent";}}}}}if(_51c){_51b=_51c;}if(_51b){dojo.marginBox(this.domNode,_51b);this.height=this.domNode.style.height;delete this.fitTo;}else{if(this.fitTo=="parent"){h=this._parentContentBoxHeight=this._parentContentBoxHeight||dojo._getContentBox(pn).h;this.domNode.style.height=Math.max(0,h)+"px";}}var _51e=dojo.some(this.views.views,function(v){return v.flexCells;});if(!this._autoHeight&&(h||dojo._getContentBox(this.domNode).h)===0){this.viewsHeaderNode.style.display="none";}else{this.viewsHeaderNode.style.display="block";if(!_51e&&hh===undefined){hh=this._getHeaderHeight();}}if(_51e){hh=undefined;}this.adaptWidth();this.adaptHeight(hh);this.postresize();},adaptWidth:function(){var _51f=(!this.initialWidth&&this.autoWidth);var w=_51f?0:this.domNode.clientWidth||(this.domNode.offsetWidth-this._getPadBorder().w),vw=this.views.arrange(1,w);this.views.onEach("adaptWidth");if(_51f){this.domNode.style.width=vw+"px";}},adaptHeight:function(_520){var t=_520===undefined?this._getHeaderHeight():_520;var h=(this._autoHeight?-1:Math.max(this.domNode.clientHeight-t,0)||0);this.views.onEach("setSize",[0,h]);this.views.onEach("adaptHeight");if(!this._autoHeight){var _521=0,_522=0;var _523=dojo.filter(this.views.views,function(v){var has=v.hasHScrollbar();if(has){_521++;}else{_522++;}return (!has);});if(_521>0&&_522>0){dojo.forEach(_523,function(v){v.adaptHeight(true);});}}if(this.autoHeight===true||h!=-1||(typeof this.autoHeight=="number"&&this.autoHeight>=this.get("rowCount"))){this.scroller.windowHeight=h;}else{this.scroller.windowHeight=Math.max(this.domNode.clientHeight-t,0);}},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.autoRender){this.render();}},render:function(){if(!this.domNode){return;}if(!this._started){return;}if(!this.hasLayout()){this.scroller.init(0,this.keepRows,this.rowsPerPage);return;}this.update=this.defaultUpdate;this._render();},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender();},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize();},postrender:function(){this.postresize();this.focus.initFocusView();dojo.setSelectable(this.domNode,this.selectable);},postresize:function(){if(this._autoHeight){var size=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=size;}},renderRow:function(_524,_525){this.views.renderRow(_524,_525,this._skipRowRenormalize);},rowRemoved:function(_526){this.views.rowRemoved(_526);},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true;},endUpdate:function(){this.updating=false;var i=this.invalidated,r;if(i.all){this.update();}else{if(i.rowCount!=undefined){this.updateRowCount(i.rowCount);}else{for(r in i){this.updateRow(Number(r));}}}this.invalidated=[];},defaultUpdate:function(){if(!this.domNode){return;}if(this.updating){this.invalidated.all=true;return;}this.lastScrollTop=this.scrollTop;this.prerender();this.scroller.invalidateNodes();this.setScrollTop(this.lastScrollTop);this.postrender();},update:function(){this.render();},updateRow:function(_527){_527=Number(_527);if(this.updating){this.invalidated[_527]=true;}else{this.views.updateRow(_527);this.scroller.rowHeightChanged(_527);}},updateRows:function(_528,_529){_528=Number(_528);_529=Number(_529);var i;if(this.updating){for(i=0;i<_529;i++){this.invalidated[i+_528]=true;}}else{for(i=0;i<_529;i++){this.views.updateRow(i+_528,this._skipRowRenormalize);}this.scroller.rowHeightChanged(_528);}},updateRowCount:function(_52a){if(this.updating){this.invalidated.rowCount=_52a;}else{this.rowCount=_52a;this._setAutoHeightAttr(this.autoHeight,true);if(this.layout.cells.length){this.scroller.updateRowCount(_52a);}this._resize();if(this.layout.cells.length){this.setScrollTop(this.scrollTop);}}},updateRowStyles:function(_52b){this.views.updateRowStyles(_52b);},getRowNode:function(_52c){if(this.focus.focusView&&!(this.focus.focusView instanceof dojox.grid._RowSelector)){return this.focus.focusView.rowNodes[_52c];}else{for(var i=0,_52d;(_52d=this.views.views[i]);i++){if(!(_52d instanceof dojox.grid._RowSelector)){return _52d.rowNodes[_52c];}}}return null;},rowHeightChanged:function(_52e){this.views.renormalizeRow(_52e);this.scroller.rowHeightChanged(_52e);},fastScroll:true,delayScroll:false,scrollRedrawThreshold:(dojo.isIE?100:50),scrollTo:function(_52f){if(!this.fastScroll){this.setScrollTop(_52f);return;}var _530=Math.abs(this.lastScrollTop-_52f);this.lastScrollTop=_52f;if(_530>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=_52f;this.views.setScrollTop(_52f);if(this._pendingScroll){window.clearTimeout(this._pendingScroll);}var _531=this;this._pendingScroll=window.setTimeout(function(){delete _531._pendingScroll;_531.finishScrollJob();},200);}else{this.setScrollTop(_52f);}},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop);},setScrollTop:function(_532){this.scroller.scroll(this.views.setScrollTop(_532));},scrollToRow:function(_533){this.setScrollTop(this.scroller.findScrollTop(_533)+1);},styleRowNode:function(_534,_535){if(_535){this.rows.styleRowNode(_534,_535);}},_mouseOut:function(e){this.rows.setOverRow(-2);},getCell:function(_536){return this.layout.cells[_536];},setCellWidth:function(_537,_538){this.getCell(_537).unitWidth=_538;},getCellName:function(_539){return "Cell "+_539.index;},canSort:function(_53a){},sort:function(){},getSortAsc:function(_53b){_53b=_53b==undefined?this.sortInfo:_53b;return Boolean(_53b>0);},getSortIndex:function(_53c){_53c=_53c==undefined?this.sortInfo:_53c;return Math.abs(_53c)-1;},setSortIndex:function(_53d,_53e){var si=_53d+1;if(_53e!=undefined){si*=(_53e?1:-1);}else{if(this.getSortIndex()==_53d){si=-this.sortInfo;}}this.setSortInfo(si);},setSortInfo:function(_53f){if(this.canSort(_53f)){window.callFromSortHeaderClick=true;this.sortInfo=_53f;this.sort();this.update();setTimeout(function(){window.callFromSortHeaderClick=false;},5000);}},doKeyEvent:function(e){e.dispatch="do"+e.type;this.onKeyEvent(e);},_dispatch:function(m,e){if(m in this){return this[m](e);}return false;},dispatchKeyEvent:function(e){this._dispatch(e.dispatch,e);},dispatchContentEvent:function(e){this.edit.dispatchEvent(e)||e.sourceView.dispatchContentEvent(e)||this._dispatch(e.dispatch,e);},dispatchHeaderEvent:function(e){e.sourceView.dispatchHeaderEvent(e)||this._dispatch("doheader"+e.type,e);},dokeydown:function(e){this.onKeyDown(e);},doclick:function(e){if(e.cellNode){this.onCellClick(e);}else{this.onRowClick(e);}},dodblclick:function(e){if(e.cellNode){this.onCellDblClick(e);}else{this.onRowDblClick(e);}},docontextmenu:function(e){if(e.cellNode){this.onCellContextMenu(e);}else{this.onRowContextMenu(e);}},doheaderclick:function(e){if(e.cellNode){this.onHeaderCellClick(e);}else{this.onHeaderClick(e);}},doheaderdblclick:function(e){if(e.cellNode){this.onHeaderCellDblClick(e);}else{this.onHeaderDblClick(e);}},doheadercontextmenu:function(e){if(e.cellNode){this.onHeaderCellContextMenu(e);}else{this.onHeaderContextMenu(e);}},doStartEdit:function(_540,_541){this.onStartEdit(_540,_541);},doApplyCellEdit:function(_542,_543,_544){this.onApplyCellEdit(_542,_543,_544);},doCancelEdit:function(_545){this.onCancelEdit(_545);},doApplyEdit:function(_546){this.onApplyEdit(_546);},addRow:function(){this.updateRowCount(this.get("rowCount")+1);},removeSelectedRows:function(){if(this.allItemsSelected){this.updateRowCount(0);}else{this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));}this.selection.clear();}});dojox.grid._Grid.markupFactory=function(_547,node,ctor,_548){var d=dojo;var _549=function(n){var w=d.attr(n,"width")||"auto";if((w!="auto")&&(w.slice(-2)!="em")&&(w.slice(-1)!="%")){w=parseInt(w,10)+"px";}return w;};if(!_547.structure&&node.nodeName.toLowerCase()=="table"){_547.structure=d.query("> colgroup",node).map(function(cg){var sv=d.attr(cg,"span");var v={noscroll:(d.attr(cg,"noscroll")=="true")?true:false,__span:(!!sv?parseInt(sv,10):1),cells:[]};if(d.hasAttr(cg,"width")){v.width=_549(cg);}return v;});if(!_547.structure.length){_547.structure.push({__span:Infinity,cells:[]});}d.query("thead > tr",node).forEach(function(tr,_54a){var _54b=0;var _54c=0;var _54d;var _54e=null;d.query("> th",tr).map(function(th){if(!_54e){_54d=0;_54e=_547.structure[0];}else{if(_54b>=(_54d+_54e.__span)){_54c++;_54d+=_54e.__span;var _54f=_54e;_54e=_547.structure[_54c];}}var cell={name:d.trim(d.attr(th,"name")||th.innerHTML),colSpan:parseInt(d.attr(th,"colspan")||1,10),type:d.trim(d.attr(th,"cellType")||""),id:d.trim(d.attr(th,"id")||"")};_54b+=cell.colSpan;var _550=d.attr(th,"rowspan");if(_550){cell.rowSpan=_550;}if(d.hasAttr(th,"width")){cell.width=_549(th);}if(d.hasAttr(th,"relWidth")){cell.relWidth=window.parseInt(dojo.attr(th,"relWidth"),10);}if(d.hasAttr(th,"hidden")){cell.hidden=(d.attr(th,"hidden")=="true"||d.attr(th,"hidden")===true);}if(_548){_548(th,cell);}cell.type=cell.type?dojo.getObject(cell.type):dojox.grid.cells.Cell;if(cell.type&&cell.type.markupFactory){cell.type.markupFactory(th,cell);}if(!_54e.cells[_54a]){_54e.cells[_54a]=[];}_54e.cells[_54a].push(cell);});});}return new ctor(_547,node);};})();}if(!dojo._hasResource["dojox.grid.DataSelection"]){dojo._hasResource["dojox.grid.DataSelection"]=true;dojo.provide("dojox.grid.DataSelection");dojo.declare("dojox.grid.DataSelection",dojox.grid.Selection,{getFirstSelected:function(){var idx=dojox.grid.Selection.prototype.getFirstSelected.call(this);if(idx==-1){return null;}return this.grid.getItem(idx);},getNextSelected:function(_551){var _552=this.grid.getItemIndex(_551);var idx=dojox.grid.Selection.prototype.getNextSelected.call(this,_552);if(idx==-1){return null;}return this.grid.getItem(idx);},getSelected:function(){var _553=[];if(!Object.keys){Object.keys=(function(){var _554=Object.prototype.hasOwnProperty,_555=!({toString:null}).propertyIsEnumerable("toString"),_556=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],_557=_556.length;return function(obj){if(typeof obj!=="function"&&(typeof obj!=="object"||obj===null)){throw new TypeError("Object.keys called on non-object");}var _558=[],prop,i;for(prop in obj){if(_554.call(obj,prop)){_558.push(prop);}}if(_555){for(i=0;i<_557;i++){if(_554.call(obj,_556[i])){_558.push(_556[i]);}}}return _558;};}());}if(!Object.entries){Object.entries=function(obj){var _559=Object.keys(obj),i=_559.length,_55a=new Array(i);while(i--){_55a[i]=[_559[i],obj[_559[i]]];}return _55a;};}if(this.grid.multipleSelectItems&&Object.entries(this.grid.multipleSelectItems).length!=0){for(var _55b in this.grid.multipleSelectItems){_553.push(this.grid.multipleSelectItems[_55b]);}}else{for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_553.push(this.grid.getItem(i));}}}return _553;},addToSelection:function(_55c){if(this.mode=="none"){return;}var idx=null,_55d="";if(typeof _55c=="number"||typeof _55c=="string"){idx=_55c;}else{idx=this.grid.getItemIndex(_55c);}dojox.grid.Selection.prototype.addToSelection.call(this,idx);if(this.grid.getItem(idx)&&this.grid.getItem(idx).i){if(this.grid.getItem(idx).i.ref_id){_55d=this.grid.getItem(idx).i.ref_id;}if(this.grid.getItem(idx).i.tnx_id){_55d+="_"+this.grid.getItem(idx).i.tnx_id;}if(this.grid.getItem(idx).loan_alias){_55d=this.grid.getItem(idx).loan_alias;}}if(this.grid.multipleSelectItems&&!this.grid.multipleSelectItems.hasOwnProperty(_55d)&&this.grid.getItem(idx).i){this.grid.multipleSelectItems[_55d]=this.grid.getItem(idx);}},deselect:function(_55e){if(this.mode=="none"){return;}var idx=null;var idx=null,_55f="";if(typeof _55e=="number"||typeof _55e=="string"){idx=_55e;}else{idx=this.grid.getItemIndex(_55e);}dojox.grid.Selection.prototype.deselect.call(this,idx);if(this.grid.getItem(idx)&&this.grid.getItem(idx).i){if(this.grid.getItem(idx).i.ref_id){_55f=this.grid.getItem(idx).i.ref_id;}if(this.grid.getItem(idx).i.tnx_id){_55f+="_"+this.grid.getItem(idx).i.tnx_id;}if(this.grid.getItem(idx).loan_alias){_55f=this.grid.getItem(idx).loan_alias;}}if(!this.selected[idx]&&this.grid.multipleSelectItems&&this.grid.multipleSelectItems.hasOwnProperty(_55f)){delete this.grid.multipleSelectItems[_55f];}},deselectAll:function(_560){var idx=null;if(_560||typeof _560=="number"){if(typeof _560=="number"||typeof _560=="string"){idx=_560;}else{idx=this.grid.getItemIndex(_560);}dojox.grid.Selection.prototype.deselectAll.call(this,idx);}else{this.inherited(arguments);}}});}if(!dojo._hasResource["misys.grid._base"]){dojo._hasResource["misys.grid._base"]=true;dojo.provide("misys.grid._base");(function(d,dj,m){function _561(_562,url,keys,_563){_562=d.isArray(_562)?_562:[_562];var _564={"list_keys":keys},_565=d.byId("batchContainer"),_566;if(dj.byId("reauth_password")){d.mixin(_564,{"reauth_password":dj.byId("reauth_password").get("value")});}_566={url:m.getServletURL(url),handleAs:"text",sync:true,content:_564,load:function(data){data=data.replace(/\n/g,"<br>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");_565.innerHTML=data;setTimeout(function(){m.animate("wipeIn","batchContainer");},500);m._config.groups=[];d.forEach(_562,function(g){g.setStore(g.store);d.hitch(g,"render")();m.connect(g,"_onFetchComplete",function(){g.selection.clear();});});}};if(_563){d.mixin(_566,{handle:_563});}m.xhrPost(_566);};function _567(_568,_569,_56a,_56b){var mode=dijit.byId("mode")?dijit.byId("mode").get("value"):"";var _56c=dijit.byId("forwardHolidayButtonId")?dijit.byId("forwardHolidayButtonId"):new dj.form.Button({label:m.getLocalization("autoForwardMessage"),id:"forwardHolidayButtonId"});if(!dj.byId("holidayCutOffDialog")){d.require("misys.widget.Dialog");d.require("dijit.form.Button");var _56d=new dj.Dialog({id:"holidayCutOffDialog",title:"Confirmation",draggable:false});var _56e=d.create("div",{id:"holidayCutOffDialogContent"});var _56f=d.create("div",{id:"dialogHolidayText"},_56e,"first");var _570=d.create("div",{id:"holidayCutOffDialogButtons",style:"text-align:center;"},_56e,"last");var _571=new dj.form.Button({label:m.getLocalization("cancelMessage"),id:"cancelHolidayButtonId"});d.place(_571.domNode,_570);_56d.set("content",_56e);}var _572=dj.byId("holidayCutOffDialog");if(_568===true){d.place(_56c.domNode,d.byId("holidayCutOffDialogButtons"),"first");m.dialog.connect(dj.byId("forwardHolidayButtonId"),"onClick",function(){if(_56a){_572.hide();m._config.doReauthSubmit(_56b);_56c.destroy();}else{_572.hide();m.xhrPost(_56b);setTimeout(d.hitch(grid,"render"),100);}},_572.id);}else{_56c.destroy();}if(d.byId("dialogHolidayText")){d.byId("dialogHolidayText").innerHTML=_569;d.byId("dialogHolidayText").innerHTML=d.byId("dialogHolidayText").innerHTML.replace(/\,/g,"");}m.dialog.connect(_572,"onKeyPress",function(evt){if(evt.keyCode==d.keys.ESCAPE){d.stopEvent(evt);}});m.dialog.connect(dj.byId("cancelHolidayButtonId"),"onClick",function(){m.dialog.hide();_56c.destroy();_572.hide();},_572.id);m.dialog.connect(_572,"onHide",function(){_56c.destroy();m.dialog.disconnect(_572);m.dialog.hide();});_572.show();};function _573(){var _574=true;if(dijit.byId("operation")&&dijit.byId("operation").get("value")==="LIST_FX_DEALS"){_574=false;}return _574;};m.grid=m.grid||{};d.mixin(m.grid,{setStore:function(_575,_576,_577){var grid=_577||_576.args.grid,_578;if(grid){_578=grid.store;if(_578&&_578!=null){_578.close();}grid.setStore(new dojo.data.ItemFileReadStore({data:_575,urlPreventCache:true,clearOnClose:true}));}},setStoreURL:function(node,url,_579){var grid=dj.byId(node),_57a,_57b,_57c;if(grid){_57c=grid.store;if(_57c){_57a=url||_57c.url;_57b=_579||grid.queryOptions;_57c.close();_57c.url=_57a;if(_57c.declaredClass==="dojox.data.QueryReadStore"){grid.setStore(_57c,_579);}else{grid.setStore(_57c,null,_579);}}else{grid.setStore(new misys.data.ItemFileReadStore({url:url,urlPreventCache:true,clearOnClose:true}),null,_579);}}},filter:function(node,_57d,_57e){var grid=dj.byId(node),_57f=[],_580;if(grid&&(_57d.length===_57e.length)){d.forEach(_57d,function(key,i){_580=dj.byId(_57e[i]);if(_580){var _581=_580.get("value");_581=_581.replace(/\\/g,"\\\\").replace(/'/g,"\\'");if(_581!==""){_57f.push(key,":'",_581,"',");}}});_57f=_57f.join("");if(_57f.charAt(_57f.length-1)===","){_57f=_57f.substring(0,_57f.length);}grid.queryOptions=d.mixin(grid.queryOptions,{ignoreCase:true});grid.filter(d.fromJson("{"+_57f.substring(0,_57f.length-1)+"}"),true);}},selectAll:function(){var _582=d.byId("select_all_box").checked,_583=d.query("input[type=checkbox]");for(var x=0,len=_583.length;x<len;x++){_583[x].checked=_582;}},reloadForSearchTerms:function(){var form=dj.byId("TransactionSearchForm"),_584=d.query(".dojoxGrid"),_585=d.query(".gridContainer")[0],_586=/Date/,_587=/Time/,_588={},_589,_58a,grid;for(var i=0,len=_584.length;i<len;i++){if(!d.hasClass(_584[i],"noReload")){grid=dj.byId(_584[i].id);break;}}if(grid&&form){if(dojo.isFunction(grid.gotoFirstPage)&&_573()){grid.gotoFirstPage();}if(_585){d.removeClass(_585,"notready");}if(d.byId("divResults")){d.style("divResults","margin",0);}_589=grid.get("store");m.connect(grid,"_onFetchComplete",function(){setTimeout(function(){grid.resize();},500);});_58a=_589.url;if(_58a.indexOf("&")!==-1){_58a=_58a.substring(0,_58a.indexOf("&"));}if(_58a.indexOf("EventsSearchAction")!==-1){if(_58a.indexOf("?")!==-1){_58a=_58a.substring(0,_58a.indexOf("?"));}}form.getDescendants().forEach(function(_58b,i){if(_58b.name){var _58c;if(_58b.declaredClass=="dijit.form.RadioButton"){var _58d=dojo.query("[name='"+_58b.name+"']",form.domNode);d.some(_58d,function(_58e){var _58f=dj.byNode(_58e.parentNode);if(_58f.checked){_58c=_58f.params.value;}});}else{_58c=_58b.get("value");}if(_586.test(_58b.declaredClass)||(_587.test(_58b.declaredClass))){_58c=_58b.get("displayedValue");}if(_58c===" "){_58c="";}_588[_58b.get("name")]=_58c;}});_588["searchFlag"]=true;var _590=grid.onSelectionClearedScript;if(_590){d.eval(_590);}if(grid.selection&&grid.get("selectionMode")!==""){grid.selection.clear();}_589.close();_589.url=_58a;if(_588.list_keys){_588.list_keys="";}if(_589.declaredClass==="dojox.data.QueryReadStore"){grid.setStore(_589,_588);}else{grid.setStore(_589,null,_588);}}},onSelection:function(){if(this.selection.selectedIndex!=-1){var _591=this.store.getValue(this.getItem(this.selection.selectedIndex),"onSelectionChangedScript");d.eval(_591);this.updateRowStyles(this.selection.selectedIndex);}},getCellData:function(item,_592){return this.grid.store.getValue(item,_592);},formatJSLink:function(_593){return (_593&&d.isObject(_593))?d.string.substitute("<a href='javascript:${href}'>${text}</a>",_593):_593;},formatSelectField:function(_594,item){if(!item){return this.defaultValue;}var _595=this.grid.store.getValue(item,"box_ref"),_596=this.grid.store.getValue(item,"box_checked")==="true";return "<input id='"+value+"' name='"+value+"' onclick='alert('To implement')' type='checkbox' "+_596?"checked='checked'":"";},formatGroupsAndAggregates:function(_597,idx){if(_597){return m.grid.formatHTML(_597);}else{return _597;}},formatSimpleHTML:function(text){text=text.replace(/&amp;nbsp;/g,"&nbsp;");text=text.replace(/&amp;#x27;/g,"&#x27;");text=text.replace(/&amp;#x2F;/g,"&#x2F;");text=text.replace(/&amp;#34;/g,"&#34;");text=text.replace(/&amp;#x28;/g,"(");text=text.replace(/&amp;#x29;/g,")");text=text.replace(/&amp;#x26;/g,"&");return text.replace(/&amp;amp;/g,"&amp;");},formatHTML:function(text){return text;},sanitizeHTMLDataForUI:function(text){if(text){text=text.replace(/<img/g,"&lt;img");text=text.replace(/>/g,"&gt;");}return text;},formatHTMLInteger:function(_598){return _598;},formatDate:function(_599){var _59a=_599.indexOf(">");var _59b=_599.indexOf("<",1);return _599.substring(_59a+1,_59b);},formatFlagImage:function(_59c){var flag=_59c.toLowerCase();if(misys._config.fbccVersion!==""||misys._config.fbccVersion!==null){return m.grid.formatHTML("<img src='"+m.getContextualURL(m._config.imagesSrc+"flags/")+flag+".png?v="+misys._config.fbccVersion+"'alt='"+flag+"'/>");}else{return m.grid.formatHTML("<img src='"+m.getContextualURL(m._config.imagesSrc+"flags/")+flag+".png' alt='"+flag+"'/>");}},formatCurrencyFlagImage:function(_59d){var flag=_59d.toLowerCase().substring(0,2);if(misys._config.fbccVersion!==""||misys._config.fbccVersion!==null){return m.grid.formatHTML("<img src='"+m.getContextualURL(m._config.imagesSrc+"flags/")+flag+".png?v="+misys._config.fbccVersion+"'alt='"+flag+"'/>");}else{return m.grid.formatHTML("<img src='"+m.getContextualURL(m._config.imagesSrc+"flags/")+flag+".png' alt='"+flag+"'/>");}},formatSummary:function(_59e,_59f,cell,sing,plur){if(_59e===0){return "";}var str;if(_59f>=0){return _59e;}if(_59f===-1){str=m.getLocalization("totalPrefix")+" (${numItems} ${displayName})";}else{str="${numItems} ${displayName}";}return d.string.substitute(str,{numItems:_59e,displayName:(_59e===1)?sing:plur});},formatOperationsSummary:function(_5a0,_5a1){return m.grid.formatSummary(_5a0,_5a1,this,"Operation","Operations");},formatTypesSummary:function(_5a2,_5a3){return m.grid.formatSummary(_5a2,_5a3,this,"Type","Types");},formatDataSummary:function(_5a4,_5a5){return (_5a4===0)?"":_5a4;},formatTitlesSummary:function(_5a6,_5a7){return m.grid.formatSummary(_5a6,_5a7,this,"Title","Titles");},formatURL:function(_5a8){if(!window.isAccessibilityEnabled){return (_5a8&&d.isObject(_5a8))?d.string.substitute("<a href='${href}'>${text}</a>",_5a8):_5a8;}else{var _5a9=misys.getLocalization("link");return (_5a8&&d.isObject(_5a8))?d.string.substitute("<a href='${href}' aria-labelledby='${href}_link_span'>${text}</a><span class='sr-only' id='${href}_link_span'>"+_5a9+"</span>",_5a8):_5a8;}},formatReportActions:function(_5aa,item,cell){var _5ab=cell.grid.gridMultipleItemsWidget.overrideDisplaymode;var _5ac=cell.grid.gridMultipleItemsWidget.id;var _5ad=dojo.create("div");var div=dojo.create("div",{"class":"gridActions"},_5ad);if(_5ab&&_5ab=="view"){dojo.create("img",{"src":misys._config.context+misys._config.imagesSrc+"pic_text.gif","alt":"View",border:"0","type":"view"},div);}else{dojo.create("img",{"src":misys.getContextualURL(misys._config.imagesSrc+m._config.imageStore.editIcon),"title":"Edit","alt":"Edit","border":"0","type":"edit"},div);dojo.create("img",{"src":misys.getContextualURL(misys._config.imagesSrc+m._config.imageStore.deleteIcon),"title":"Delete","alt":"Delete","border":"0","type":"remove"},div);if(_5ac==="columns"){dojo.create("img",{"src":misys._config.context+misys._config.imagesSrc+"action-up.png","alt":"Move Up",border:"0","type":"moveup"},div);dojo.create("img",{"src":misys._config.context+misys._config.imagesSrc+"action-down.png","alt":"Move Down",border:"0","type":"movedown"},div);}}return _5ad.innerHTML;},formatAccountActions:function(_5ae,item,cell){var _5af=cell.grid.gridMultipleItemsWidget.overrideDisplaymode;var _5b0=cell.grid.gridMultipleItemsWidget.id;var _5b1=dojo.create("div");var div=dojo.create("div",{"class":"gridActions"},_5b1);if(_5af&&_5af=="view"){dojo.create("img",{"src":misys._config.context+misys._config.imagesSrc+"pic_text.gif","alt":"View",border:"0","type":"view"},div);}else{dojo.create("img",{"src":misys.getContextualURL(misys._config.imagesSrc+m._config.imageStore.editIcon),"title":"Edit","alt":"Edit","border":"0","type":"edit"},div);}return _5b1.innerHTML;},formatDeleteActions:function(_5b2,item,cell){var _5b3=cell.grid.gridMultipleItemsWidget.overrideDisplaymode;var _5b4=dojo.create("div");var div=dojo.create("div",{"class":"gridActions"},_5b4);dojo.create("img",{"src":misys.getContextualURL(misys._config.imagesSrc+m._config.imageStore.deleteIcon),"alt":"Delete","border":"0","type":"remove"},div);return _5b4.innerHTML;},formatCptyDeleteActions:function(_5b5,item,cell){var _5b6=cell.grid.gridMultipleItemsWidget.overrideDisplaymode;var _5b7=dojo.create("div");var div=dojo.create("div",{"class":"gridActions"},_5b7);if(cell.grid._by_idx[item]&&cell.grid._by_idx[item].item&&cell.grid._by_idx[item].item.cpty_showDelete[0]&&cell.grid._by_idx[item].item.cpty_showDelete[0]==="true"){dojo.create("img",{"src":misys.getContextualURL(misys._config.imagesSrc+m._config.imageStore.deleteIcon),"alt":"Delete","border":"0","type":"remove"},div);}return _5b7.innerHTML;},formatActions:function(_5b8){return (_5b8&&d.isObject(_5b8)?_5b8.href:_5b8);},confirmDeleteRecords:function(grid,url){var _5b9=grid.selection.getSelected().length;var _5ba=grid.store._items.length;if(_5b9>0&&_5ba>0){m.dialog.show("CONFIRMATION",m.getLocalization("deleteTransactionsConfirmation",[grid.selection.getSelected().length]),"",function(){m.grid.processRecords(grid,url);});}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},confirmSubmitRecords:function(grid,url){var _5bb=grid.selection.getSelected().length;var _5bc=grid.store._items.length;if(_5bb>0&&_5bc>0){m.dialog.show("CONFIRMATION",m.getLocalization("submitTransactionsConfirmation",[grid.selection.getSelected().length]),"",function(){m.grid.processRecordsWithHolidayCutOffValidation(grid,url);});}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},confirmResendRecords:function(grid,url){var _5bd=grid.selection.getSelected().length;var _5be=grid.store._items.length;if(_5bd>0&&_5be>0){m.dialog.show("CONFIRMATION",m.getLocalization("resendTransactionsConfirmation",[grid.selection.getSelected().length]),"",function(){setTimeout(function(){m.grid.processRecords(grid,url);},100);});}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},confirmCancelRecords:function(grid,url,_5bf){var _5c0=d.byId("batchContainer"),_5c1=grid.selection.getSelected(),_5c2="",_5c3=0,_5c4,xhr,_5c5=true;var _5c6=dj.byId("reauth_perform");m.animate("wipeOut",_5c0);if(_5c1.length){d.forEach(_5c1,function(_5c7){_5c4=grid.store.getValues(_5c7,"box_ref");if("S"+_5c2!="S"){_5c2=_5c2+",";}_5c2=_5c2+_5c4;_5c3++;});if(_5c3>0){var _5c8=function(){var _5c9={url:m.getServletURL(url),handleAs:"text",content:{list_keys:_5c2},load:function(data){data=data.replace(/\n/g,"<br>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");_5c0.innerHTML=data;m.animate("wipeIn","batchContainer");grid.selection.clear();grid.setStore(grid.store);}};var _5ca=function(){m.xhrPost(_5c9);setTimeout(d.hitch(grid,"render"),100);};if((_5c6&&_5c6.get("value")==="Y")&&d.isFunction(m._config.doReauthSubmit)){m._config.doReauthSubmit(_5c9);}else{_5ca();}};m.dialog.show("CONFIRMATION",m.getLocalization("cancelledTransactionsConfirmation",[grid.selection.getSelected().length]),"",_5c8);}}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},confirmForwardRecords:function(grid,url){var _5cb=grid.selection.getSelected().length;if(_5cb>0){m.dialog.show("CONFIRMATION",m.getLocalization("forwardsTransactionConfirmation",[grid.selection.getSelected().length]),"",function(){m.rocessRecords(grid,url);});}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},processRecordsWithHolidayCutOffValidation:function(grid,url){var _5cc=d.byId("batchContainer"),_5cd=grid.selection.getSelected(),_5ce="",_5cf=0,_5d0,xhr,_5d1=true,_5d2,_5d3,_5d4,_5d5;var _5d6=[];m.animate("wipeOut",_5cc);var _5d7=dj.byId("reauth_perform");if(_5cd.length){d.forEach(_5cd,function(_5d8){_5d0=grid.store.getValues(_5d8,"box_ref");if("S"+_5ce!="S"){_5ce=_5ce+",";}_5ce=_5ce+_5d0;_5cf++;});if(_5cf>0){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateHolidayCutOffMultipleSubmission"),handleAs:"json",preventCache:true,sync:true,content:{list_keys:_5ce},load:function(_5d9,args){_5d5=_5d9.autoForwardEnabled;_5d1=_5d9.isValid;_5d2=_5d9.autoForwardTransactionDetails;_5d4=_5d9.failedTransactionDetailsCutOff;_5d3=_5d9.failedTransactionDetailsHolidays;},error:function(_5da,args){console.error("[misys.grid._base] processRecordsWithHolidayCutOffValidation error",_5da);}});if(_5d1){var _5db={url:m.getServletURL(url),handleAs:"text",content:{list_keys:_5ce},load:function(data){data=data.replace(/\n/g,"<br>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");_5cc.innerHTML=data;grid.selection.clear();grid.setStore(grid.store);setTimeout(function(){m.animate("wipeIn","batchContainer");},1000);}};var _5dc=function(){m.xhrPost(_5db);setTimeout(d.hitch(grid,"render"),10000);};if((_5d7&&_5d7.get("value")==="Y")&&d.isFunction(m._config.doReauthSubmit)){m._config.doReauthSubmit(_5db);}else{_5dc();}}else{if(_5d5&&_5d5==="N"){_5d6=[];_5d6.push("<div style='display:block;'>"+m.getLocalization("Cutoffdatepassed")+"<br/>");d.forEach(_5d2,function(node){_5d6.push("<li>"+node+"</li>");});_5d6.push("</div>");if((_5d7&&_5d7.get("value")==="Y")&&d.isFunction(m._config.doReauthSubmit)){_5dc=function(){m._config.doReauthSubmit(_5db);};m.dialog.show("CUSTOM-NO-CANCEL",_5d6.join(""),"",_5dc);}else{m.dialog.show("CUSTOM-NO-CANCEL",_5d6.join(""),"",callBack);}}else{_5d6=[];if(_5d5){if(_5d4.length>0){_5d6.push("<div <b>"+m.getLocalization("failedMultipleSubmissionCutOff")+"</b><br/>");d.forEach(_5d4,function(node){_5d6.push("<li>"+node+"</li>");});_5d6.push("</div>");}if(_5d3.length>0){_5d6.push("<div style='display:block;'><b>"+m.getLocalization("failedMultipleSubmissionHoliday")+"</b><br/>");d.forEach(_5d3,function(node){_5d6.push("<li>"+node+"</li>");});_5d6.push("</div>");}_5d6.push("<div style='display:block;'><b>"+m.getLocalization("autoForwardMultipleSubmission")+"</b><br/>");_5d6.push("</div>");_5db={url:m.getServletURL(url),handleAs:"text",content:{list_keys:_5ce,autoForward:"Y"},load:function(data){data=data.replace(/\n/g,"<br>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");_5cc.innerHTML=data;m.animate("wipeIn","batchContainer");grid.selection.clear();grid.setStore(grid.store);}};if((_5d7&&_5d7.get("value")==="Y")&&d.isFunction(m._config.doReauthSubmit)){_567(_5d5,_5d6,true,_5db);}else{_567(_5d5,_5d6,false,_5db);}}else{if(_5d4.length>0){_5d6.push("<div style='display:block;'><b>"+m.getLocalization("failedMultipleSubmissionCutOff")+"</b><br/>");d.forEach(_5d4,function(node){_5d6.push("<li>"+node+"</li>");});}if(_5d3.length>0){_5d6.push("<div style='display:block;'><b>"+m.getLocalization("failedMultipleSubmissionHoliday")+"</b><br/>");d.forEach(_5d3,function(node){_5d6.push("<li>"+node+"</li>");});}_567(_5d5,_5d6,false,_5db);}}}}}},processDeletionOfBatch:function(grid,url){var _5dd=d.byId("batchContainer"),_5de=grid.selection.getSelected(),_5df="",_5e0=0,_5e1,xhr,_5e2=true;m.animate("wipeOut",_5dd);if(_5de.length){d.forEach(_5de,function(_5e3){_5e1=grid.store.getValues(_5e3,"box_ref");if("S"+_5df!="S"){_5df=_5df+",";}_5df=_5df+_5e1;_5e0++;});if(_5e0>0){var _5e4=function(){m.xhrPost({url:m.getServletURL(url),handleAs:"text",content:{list_keys:_5df},load:function(data){data=data.replace(/\n/g,"<br>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");_5dd.innerHTML=data;m.animate("wipeIn","batchContainer");grid.setStore(grid.store);setTimeout(d.hitch(grid,"render"),300);m.connect(grid,"_onFetchComplete",function(){grid.selection.clear();});}});};m.dialog.show("CONFIRMATION",m.getLocalization("batchSelectedDelete"),"",_5e4);}}else{if(_5de.length===0){m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}}},processBatchingOfRecords:function(grid,url){var _5e5=d.byId("batchContainer"),_5e6=grid.selection.getSelected(),_5e7="",_5e8=0,_5e9,xhr,_5ea=true;m.animate("wipeOut",_5e5);if(_5e6.length){d.forEach(_5e6,function(_5eb){_5e9=grid.store.getValues(_5eb,"box_ref");if("S"+_5e7!="S"){_5e7=_5e7+",";}_5e7=_5e7+_5e9;_5e8++;});if(_5e8>0){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateBatchCriteria"),handleAs:"json",preventCache:true,sync:true,content:{list_keys:_5e7},load:function(_5ec,args){_5ea=_5ec.isValid;},error:function(_5ed,args){console.error("[misys.grid._base] processBatchingOfRecords error",_5ed);}});if(!_5ea){m.dialog.show("ERROR",m.getLocalization("batchTransactionsError"));}else{m.xhrPost({url:m.getServletURL(url),handleAs:"text",sync:true,content:{list_keys:_5e7},load:function(data){data=data.replace(/\n/g,"<br>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");_5e5.innerHTML=data;grid.selection.clear();grid.setStore(grid.store);setTimeout(function(){m.animate("wipeIn","batchContainer");},3000);}});setTimeout(d.hitch(grid,"render"),100);}}}else{if(_5e6.length===0){m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}}},processRecords:function(grid,url,_5ee){var _5ef=d.isArray(grid)?grid:[grid],_5f0=d.byId("batchContainer"),_5f1=[],keys="",_5f2=0,_5f3,_5f4;m.animate("wipeOut",_5f0);d.forEach(_5ef,function(grid){_5f1=grid.selection.getSelected();if(_5f1&&_5f1.length){d.forEach(_5f1,function(_5f5){_5f3=grid.store.getValues(_5f5,"box_ref");if(keys!==""){keys+=", ";}keys+=_5f3;_5f2++;});}});if(_5f2>0){_561(_5ef,url,keys,_5ee);}grid.multipleSelectItems=new Object();},setListKey:function(grid){var keys="",_5f6=grid.selection.getSelected(),_5f7=0,_5f8=dj.byId("list_keys"),_5f9;if(_5f6.length){d.forEach(_5f6,function(_5fa){_5f9=grid.store.getValues(_5fa,"box_ref");if(_5f7!==0){keys+=",";}keys+=_5f9;_5f7++;});}if(_5f8&&_5f8!=null){_5f8.set("value",keys);}if(_5f7===0&&dj.byId("export_list")&&dj.byId("export_list").get("value")==="zip"){m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));e.preventDefault();}},beforeRow:function(_5fb,_5fc){if(_5fc.length>=2){if(_5fc[1]&&!_5fc[1].hidden){_5fc[1].hidden=true;}if(_5fb===-1){if(!_5fc.headerDisplayed){_5fc.headerDisplayed=true;}else{_5fc[1].hidden=true;if(_5fc.length===3){_5fc[2].hidden=true;}}}else{var item=this.grid.getItem(_5fb);if(item){var _5fd=this.grid.store.getValue(item,"_row_type");if(_5fd===2||_5fd===3){_5fc[1].hidden=false;}else{if(_5fd===4){_5fc[1].hidden=false;_5fc[2].hidden=false;}else{_5fc[1].hidden=true;if(_5fc.length===3){_5fc[2].hidden=true;}}}}else{_5fc[1].hidden=true;if(_5fc.length===3){_5fc[2].hidden=true;}}}}},validateSearchDateRange:function(){var _5fe=dj.byId("range").get("value"),_5ff=dj.byId("startdate"),end=dj.byId("enddate"),diff=0;if(_5ff&&end){diff=d.date.difference(dj.byId("startdate").get("value"),dj.byId("enddate").get("value"),"day");}var days;if(_5fe==1){days=31;}else{days=92;}if(diff<0||diff>days){var _600=false;if(_5fe==1){m.connect("startdate","onChange",function(){if(!_600){var _601=dojo.date.add(dj.byId("startdate").get("value"),"month",1);dijit.byId("enddate").set("value",_601);_600=true;}});m.connect("enddate","onChange",function(){if(!_600){var _602=dojo.date.add(dj.byId("enddate").get("value"),"month",-1);dijit.byId("startdate").set("value",_602);_600=true;}});}else{if(_5fe==3){m.connect("startdate","onChange",function(){if(!_600){var _603=dojo.date.add(dj.byId("startdate").get("value"),"month",3);dijit.byId("enddate").set("value",_603);_600=true;}});m.connect("enddate","onChange",function(){if(!_600){var _604=dojo.date.add(dj.byId("enddate").get("value"),"month",-3);dijit.byId("startdate").set("value",_604);_600=true;}});}else{this.invalidMessage=m.getLocalization("monthRangeValidityMessage",[_5fe,dj.byId("startdate").get("displayedValue")]);return false;}}}return true;},redirect:function(_605){var grid=_605.grid,item=grid.getItem(_605.rowIndex),url=grid.store.getValue(item,"SCREEN");if(url){var _606=m.getQueryParameterByName("productcode",url);var _607=m.getQueryParameterByName("subproductcode",url);var _608=[];if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&m.isAngularProductUrl(_606,_607)){_608.push("/productScreen?");_608.push("refId=",m.getQueryParameterByName("referenceid",url));_608.push("&tnxId=",m.getQueryParameterByName("tnxid",url));_608.push("&productCode=",_606);_608.push("&subProductCode=",_607);_608.push("&mode=",m.getQueryParameterByName("mode",url));_608.push("&tnxTypeCode=",m.getQueryParameterByName("tnxtype",url));_608.push("&subTnxTypeCode=",m.getQueryParameterByName("subTnxTypeCode",url));window.location=m.getServletURL("").replace(/.$/,"#")+_608.join("");}else{window.location=url;}}},noSortOnSecondColumn:function(_609){return Math.abs(_609)!==2;},toggleExpandedList:function(id,_60a){d.query("#"+id+" li").forEach(function(l,i){if(i>=_60a){d.toggleClass(l,"hide");}});d.toggleClass(id+"_show","hide");d.toggleClass(id+"_hide","hide");},noSortOnThirdColumn:function(_60b){return Math.abs(_60b)!==3;},noSortOnFourthColumn:function(_60c){return Math.abs(_60c)!==4;},noSortOnFifthColumn:function(_60d){return Math.abs(_60d)!==5;},noSortOnSixthColumn:function(_60e){return Math.abs(_60e)!==6;},noSortOnSeventhColumn:function(_60f){return Math.abs(_60f)!==7;},noSortOnEighthColumn:function(_610){return Math.abs(_610)!==8;},noSortOnNinthColumn:function(_611){return Math.abs(_611)!==9;},noSortOnEleventhColumn:function(_612){return Math.abs(_612)!==11;},noSortOnThirteenthColumn:function(_613){return Math.abs(_613)!==13;},noSortOnThirdFourthAndFifthColumn:function(_614){return Math.abs(_614)!==3&&Math.abs(_614)!==4&&Math.abs(_614)!==5;},noSortOnAllColumns:function(_615){return false;},noSortOnThirdAndSeventhColumn:function(_616){return Math.abs(_616)!==3&&Math.abs(_616)!==7;},noSortOnLastColumn:function(_617){return Math.abs(_617)!==this.layout.cellCount;},noSortEnabledOnColumn:function(_618){return this.noSortColumnIndex.indexOf(_618)===-1;},noSortColumnConfiguredOnHeader:function(_619){var grid=this;var _61a="";if(grid.structure.cells[0][_619-1]){_61a=grid.structure.cells[0][_619-1];if(grid.selectionMode&&(grid.selectionMode==="single"||grid.selectionMode==="multiple")){_61a=grid.structure.cells[0][_619-2];}}if(grid.structure.cells[1]){_61a=grid.structure.cells[1][_619-2];if(grid.selectionMode&&(grid.selectionMode==="single"||grid.selectionMode==="multiple")){_61a=grid.structure.cells[1][_619-3];}}if(_61a){if(_61a["sort"]&&_61a["sort"]==="false"){return false;}else{return true;}}else{return true;}},sortAmountColumn:function(a,b){var amtA=a;var amtB=b;if(!amtA||amtA==""||amtA==null){amtA=0;}else{amtA=amtA.replace(/\./g,"");amtA=amtA.replace("/ /g","");amtA=amtA.replace(/\,/g,"");amtA=parseFloat(amtA);}if(!amtB||amtB==""||amtB==null){amtB=0;}else{amtB=amtB.replace(/\./g,"");amtB=amtB.replace("/ /g","");amtB=amtB.replace(/\,/g,"");amtB=parseFloat(amtB);}if(amtA>amtB){return 1;}if(amtA<amtB){return -1;}return 0;},sortAccountNumberColumn:function(a,b){var _61b=a.substring(a.indexOf(">",1)+1,a.indexOf("<",1));var _61c=b.substring(b.indexOf(">",1)+1,b.indexOf("<",1));if(_61b>_61c){return -1;}if(_61b<_61c){return 1;}return 0;},sortFloatColumn:function(a,b){var _61d=parseFloat(a);var _61e=parseFloat(b);if((isNaN(_61d)&&isNaN(_61e))||(_61d===_61e)){return 0;}else{if(isNaN(_61d)||(_61d>_61e)){return 1;}else{return -1;}}},sortLinkColumn:function(a,b){var _61f=a.substring(a.indexOf(">",1)+1,a.indexOf("<",1));var _620=b.substring(b.indexOf(">",1)+1,b.indexOf("<",1));if(_61f>_620){return 1;}if(_61f<_620){return -1;}return 0;},sortLinkDateColumn:function(a,b){var _621=a.substring(a.indexOf(">",1)+1,a.indexOf("<",1));var _622=b.substring(b.indexOf(">",1)+1,b.indexOf("<",1));return m.grid.sortDateColumn(_621,_622);},formatDateTimeColumn:function(_623){if(!_623.match(/^[0-9]+$/i)){return _623;}else{var _624=eval(_623);console.warn("formatDateTimeColumn has been called!!");var _625=dojo.date.locale.format(new Date(_624),{datePattern:m.getLocalization("g_strGlobalDateFormat"),selector:"date"});return _625;}},sortCaseSensetiveColumn:function(a,b){var A=a.toLowerCase();var B=b.toLowerCase();if(A>B){return 1;}if(A<B){return -1;}return 0;},sortOnAnchorDescriptionCaseSensetive:function(a,b){var _626=document.createElement("div");_626.innerHTML=a;var _627=_626.innerText;_626.innerHTML=b;var _628=_626.innerText;return misys.grid.sortCaseSensetiveColumn(_627,_628);},sortDateColumn:function(a,b){var _629=m.getLocalization("g_strGlobalDateFormat");var _62a=d.date.locale.parse(a,{selector:"date",datePattern:_629});var _62b=d.date.locale.parse(b,{selector:"date",datePattern:_629});return d.date.compare(_62a,_62b);},sortFormatDateColumn:function(a,b){var _62c=m.getLocalization("g_strGlobalDateFormat");var _62d=m.grid.formatDate(a);var _62e=m.grid.formatDate(b);var _62f=d.date.locale.parse(_62d,{selector:"date",datePattern:_62c});var _630=d.date.locale.parse(_62e,{selector:"date",datePattern:_62c});return d.date.compare(_62f,_630);},getURL:function(_631,item){if(!item||!item.i[this.field]){return this.defaultValue;}if(!item.i[this.field+"_uri"]){return this.grid.store.getValue(item,this.field);}return {text:this.grid.store.getValue(item,this.field),href:this.grid.store.getValue(item,this.field+"_uri")};},getActions:function(_632,item){if(!item){return this.defaultValue;}return {href:this.grid.store.getValue(item,this.field+"_uri")};},deleteRecords:function(){m.concatCheckboxes(m.getLocalization("deleteTransactionsConfirmation"));},loadRecords:function(){var _633=0;d.query(".gridCheckbox").forEach(function(_634){if(d.attr(_634,"checked")){_633++;}});if(_633>0){m.concatCheckboxes(m.getLocalization("loadRecordsConfirmation",[_633]));}else{m.dialog.show("ERROR",m.getLocalization("noTemplateSelectedError"));}},submitRecords:function(){m.concatCheckboxes(m.getLocalization("submitTransactionsConfirmation"));},submitOpenAccount:function(){var _635=function(){dj.byId("dijit_form_Button_3").set("disabled",false);};var _636=[];d.query(".dojoxGrid").forEach(function(g){_636.push(dj.byId(g.id));});var _637=dj.byId("referenceid")?dj.byId("referenceid").get("value"):"";var _638=dj.byId("tnxid")?dj.byId("tnxid").get("value"):"";var url="/screen/AjaxScreen/action/RunPOGroupSubmission?s=PurchaseOrderScreen&operation=SUBMIT&option=PO_FOLDER&mode=DRAFT&tnxtype=01";if(_637){url+="&referenceid="+_637;}if(_638){url+="&tnxid="+_638;}m.grid.processRecords(_636,url);},saveOpenAccount:function(){var _639=[];d.query(".dojoxGrid").forEach(function(g){_639.push(dj.byId(g.id));});var _63a=dj.byId("referenceid")?dj.byId("referenceid").get("value"):"";var _63b=dj.byId("tnxid")?dj.byId("tnxid").get("value"):"";var url="/screen/AjaxScreen/action/RunPOGroupSubmission?s=PurchaseOrderScreen&operation=SAVE&option=PO_FOLDER&mode=DRAFT&tnxtype=01";if(_63a){url+="&referenceid="+_63a;}if(_63b){url+="&tnxid="+_63b;}m.grid.processRecords(_639,url);},submitBankerGuarantee:function(){var _63c=[];d.query(".dojoxGrid").forEach(function(g){_63c.push(dj.byId(g.id));});var _63d=dijit.byId("referenceid")?dijit.byId("referenceid").get("value"):"";var _63e=dijit.byId("tnxid")?dijit.byId("tnxid").get("value"):"";var url="/screen/AjaxScreen/action/RunGroupBGDelete?s=BankerGuaranteeScreen&operation=DELETE&option=PRODUCTS_MAINTENANCE";if(_63d){url+="&referenceid="+_63d;}if(_63e){url+="&tnxid="+_63e;}m.grid.processRecords(_63c,url);},selectFolderRow:function(grid,_63f,_640){var _641=[],_642=false,_643,_644,_645,_646;if(_63f.i._row_type===0){_643=_63f.n;if(_643&&_643!=null){_644=d.indexOf(m._config.groups,_643);if(_644>-1){_645=m._config.groups[_644]+1;_646=m._config.groups[_644+1];_642=_640[_643];m._config.folderTotals=m._config.folderTotals||{};m._config.folderTotals[_63f.i._group_id]=0;for(;_645<_646;_645++){grid.selection.setSelected(_645,_642);_641.push(grid.getItem(_645));}}else{console.error("[grid/_base] Problem finding group Id index",groupId," group row number array",m._config.groups);}}}else{if(_63f.i._row_type===1){_641.push(_63f);}}},selectUnsignedFolderRow:function(grid,_647,_648){var _649=d.isArray(_647)?_647:[_647];},groupRecords:function(){m.concatCheckboxes(m.getLocalization("deleteRoutingSummariesConfirmation"));},printRecords:function(grid,url){var _64a=grid.selection.getSelected().length;var _64b=grid.store._items.length;if(_64a>0&&_64b>0){m.dialog.show("CONFIRMATION",m.getLocalization("printTransactionsConfirmation",[grid.selection.getSelected().length]),"",function(){var _64c=d.isArray(grid)?grid:[grid],_64d=[],keys="",_64e=0,_64f,_650;d.forEach(_64c,function(grid){_64d=grid.selection.getSelected();if(_64d&&_64d.length){d.forEach(_64d,function(_651){_64f=grid.store.getValues(_651,"box_ref");if(keys!==""){keys+=", ";}keys+=_64f;_64e++;});}});var _652={"list_keys":keys};var form=new dijit.form.Form({method:"POST",action:m.getServletURL(url),content:_652},"submitForm");var _653=new dijit.form.SimpleTextarea({name:"list_keys",style:"width:auto;visibility:hidden;"},"list_keys");_653.set("value",keys);form.domNode.appendChild(_653.domNode);document.body.appendChild(form.domNode);form.domNode.appendChild(dijit.byId("token").domNode);form.submit();d.forEach(_64c,function(g){g.setStore(g.store);d.hitch(g,"render")();m.connect(g,"_onFetchComplete",function(){g.selection.clear();});});});}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},selectAllRecords:function(_654){var i;for(i=0;i<dj.byId(_654).rowCount;i++){dj.byId(_654).selection.addToSelection(i);}},deselectAllRecords:function(_655){dj.byId(_655).selection.deselectAll();},reloadDialogGridForSearchTerms:function(_656,_657){var form=dj.byId(_656),grid=dj.byId(_657),_658=/Date/,_659=/Time/,_65a="?",_65b,_65c;if(grid&&form){if(dojo.byId("divResults")){d.style("divResults","margin",0);}_65b=grid.get("store");misys.connect(grid,"_onFetchComplete",function(){setTimeout(function(){grid.resize();},500);});_65c=_65b.url;if(_65c.indexOf("?listdef=")!==-1){if(_65c.indexOf("&")!==-1){_65a=_65c.substring(_65c.indexOf("?listdef="),_65c.indexOf("&"))+"&";}else{_65a=_65c.substring(_65c.indexOf("?listdef="))+"&";}}if(_65c.indexOf("&fields=")!==-1){var _65d=_65c.substring(_65c.indexOf("fields="));if(_65d.indexOf("&")!==-1){_65d=_65d.substring(_65d.indexOf("fields="),_65d.indexOf("&"));}_65a+=_65d+"&";}form.getDescendants().forEach(function(_65e,i){if(_65e.name){if(i!==0){_65a+="&";}var _65f=_65e.get("value");if(_658.test(_65e.declaredClass)||(_659.test(_65e.declaredClass))){_65f=_65e.get("displayedValue");}if(_65f===" "){_65f="";}_65a+=_65e.get("name")+"="+encodeURIComponent(_65f);}});if(grid.selection&&grid.get("selectionMode")!==""){grid.selection.clear();}if(_65b.url.indexOf("?")!==-1){_65c=_65b.url.substring(0,_65b.url.indexOf("?"));}_65b.close();_65b.url=_65c+_65a;grid.setStore(_65b);}},formatOpenAccountProductType:function(_660,item){var type=dojo.isArray(item.type)?item.type[0]:item.type;var _661=dojo.isArray(item.type_label)?item.type_label[0]:item.type_label;var _662=dojo.isArray(item.other_type)?item.other_type[0]:item.other_type;return (type=="OTHR"?_662:_661);},showGroups:function(_663,_664){m.grid.toggleAllGroups(_663,true);d.style(d.byId("open"+_664),"display","none");d.style(d.byId("close"+_664),"display","inline");},hideGroups:function(_665,_666){m.grid.toggleAllGroups(_665,false);d.style(d.byId("close"+_666),"display","none");d.style(d.byId("open"+_666),"display","inline");},toggleAllGroups:function(node,_667){var grid=dj.byId(node);if(grid&&"expandedGroups" in grid){for(var i=1,_668=grid.rowCount;i<=_668;i++){grid.expandedGroups[i]=_667;}}grid.update();},toggleAllGroupsWithTimeOut:function(node,_669){var grid=dj.byId(node);if(grid&&"expandedGroups" in grid){for(var i=1,_66a=grid.rowCount;i<=_66a;i++){grid.expandedGroups[i]=_669;}}else{setTimeout(function(){if(grid&&"expandedGroups" in grid){for(var i=1,_66a=grid.rowCount;i<=_66a;i++){grid.expandedGroups[i]=_669;}}},1000);}grid.update();},getGroupHeader:function(_66b,item){if(!item){return "undefined";}this.grid.expandedGroups=this.grid.expandedGroups||[];var _66c=this.grid.store.getValue(item,"_group_id"),show=(typeof this.grid.expandedGroups[_66c]!=="undefined"&&!this.grid.expandedGroups[_66c]);m._config.groups=m._config.groups||[];m._config.groups.push(_66b);return {groupId:_66c,show:show,name:this.grid.store.getValue(item,"_group_name"),gridId:this.grid.id,rowIndex:_66b};},getGroupFooter:function(_66d,item){if(!item){return "undefined";}return {name:this.grid.store.getValue(item,"_group_name"),value:this.grid.store.getValue(item,"_group_footer"),gridId:this.grid.id};},formatGroupFooter:function(_66e,idx){if(_66e&&d.isObject(_66e)){if(_66e.name==="_root"){return d.string.substitute("<b>${value}</b>",_66e);}return d.string.substitute("<i>${value}</i>",_66e);}else{return _66e;}},formatGroupHeader:function(_66f){if(_66f&&d.isObject(_66f)){if(_66f.name==="_root"){return "";}_66f.image=_66f.show?"closed.gif":"open.gif";return d.string.substitute("<img src='"+m.getContextualURL("/content/images/${image}")+"' onclick='misys.grid.toggleGroup(${show}, \"${groupId}\","+"\"${gridId}\")' height='11' width='11'> ${name}",_66f);}else{return _66f;}},setGroupBeforeRow:function(_670,_671){var _672=_671[2],_673=0,_674=1,item,_675,_676,_677;_671[_673].hidden=false;_671[_674].hidden=false;if(_672){_671[2].hidden=false;}if(_670<0){_671[_673].hidden=true;_671[_674].hidden=false;if(_672){_671[2].hidden=true;}return;}item=this.grid.getItem(_670);if(item){_675=this.grid.store.getValue(item,"_group_id");_676=this.grid.store.getValue(item,"_row_type");_677=this.grid.store.getValue(item,"_group_name");if(_676===0){if(_677==="_root"){_671[_673].hidden=true;}else{_671[_673].hidden=false;}_671[_674].hidden=true;if(_672){_671[2].hidden=true;}}else{if(_676===1){_671[_673].hidden=true;if(typeof this.grid.expandedGroups[_675]!="undefined"&&!this.grid.expandedGroups[_675]){_671[_674].hidden=true;}else{_671[_674].hidden=false;}if(_672){_671[2].hidden=true;}}else{if(_676===2){_671[_673].hidden=true;_671[_674].hidden=true;if(_672){_671[2].hidden=false;}}}}}},toggleGroup:function(_678,_679,_67a){var grid=dj.byId(_67a);grid.expandedGroups[_679]=_678;grid.sizeChange();}});d.mixin(m,{redirectWithConfirmation:function(_67b,_67c){if(_67c){m.dialog.show("CONFIRMATION",_67c,"",function(){window.location.href=_67b;});}else{window.location.href=_67b;}},toggleHistoryButton:function(type){var _67d;if(type==="STANDARD"){_67d=d.position(dj.byId("threadHistoryButton").domNode).h;d.style(dj.byId("threadHistoryButton").domNode,"display","none");d.style(dj.byId("historyButton").domNode,"display","block");}else{_67d=d.position(dj.byId("historyButton").domNode).h;d.style(dj.byId("threadHistoryButton").domNode,"display","block");d.style(dj.byId("historyButton").domNode,"display","none");}d.style("historyButtons","height",_67d+"px");},concatCheckboxes:function(_67e,_67f,_680){var keys="",_681=0,_682,_683;if(_67f){_682=dj.byId("TransactionSearchForm");_683=dj.byId("RealForm");d.query(".gridCheckbox").forEach(function(_684){if(d.attr(_684,"checked")){if(keys.length!==0){keys+=", ";}keys+=_684.id;_681++;}});if(keys.length>0){dj.byId("list_keys").set("value",keys);if(_680==="dissociate"){_683.set("action",m.getServletURL("/screen/BankSystemFeaturesScreen?operation="+"REMOVE_CUSTOMER_AS_COUNTERPARTY&option=CUSTOMER_COUNTERPARTY"));}_683.submit();}}else{m.dialog.show("CONFIRMATION",_67e,"",function(){m.concatCheckboxes(_67e,true,_680);});}},showTransactionUsersDialog:function(_685,_686,_687){var node=d.query(".grid")[0],grid,_688;if(node){grid=dj.byId(node.id);_688=grid.focus.rowIndex;if(grid.selection.isSelected(_688)){grid.selection.deselect(_688);}else{grid.selection.setSelected(_688,true);}}m.showSearchDialog("User","",_685,"AjaxScreen/action/GetValidationUsersPopup",_686,"width:700px;height:600px;overflow:auto;",_687,"","GetValidationUsersList");},toggleSearchGrid:function(){var _689=d.byId("actionDown");var _68a=d.byId("actionUp");var _68b=d.byId("searchCriteria");if(d.style("searchCriteria","display")==="none"){m.animate("wipeIn",_68b);d.style("actionDown","display","none");d.style("actionUp","display","block");if(window.isAccessibilityEnabled){d.style("actionUp","cursor","default");}else{d.style("actionUp","cursor","pointer");}}else{m.animate("wipeOut",_68b);d.style("actionUp","display","none");d.style("actionDown","display","block");if(window.isAccessibilityEnabled){d.style("actionDown","cursor","default");}else{d.style("actionDown","cursor","pointer");}}}});})(dojo,dijit,misys);}if(!dojo._hasResource["dojox.grid.DataGrid"]){dojo._hasResource["dojox.grid.DataGrid"]=true;dojo.provide("dojox.grid.DataGrid");dojo.declare("dojox.grid.DataGrid",dojox.grid._Grid,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:false,_isLoading:false,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments);},createSelection:function(){this.selection=new dojox.grid.DataSelection(this);},get:function(_68c,_68d){if(_68d&&this.field=="_item"&&!this.fields){return _68d;}else{if(_68d&&this.fields){var ret=[];var s=this.grid.store;dojo.forEach(this.fields,function(f){ret=ret.concat(s.getValues(_68d,f));});return ret;}else{if(!_68d&&typeof _68c==="string"){return this.inherited(arguments);}}}return (!_68d?this.defaultValue:(!this.field?this.value:(this.field=="_item"?_68d:this.grid.store.getValue(_68d,this.field))));},_checkUpdateStatus:function(){if(this.updateDelay>0){var _68e=false;if(this._endUpdateDelay){clearTimeout(this._endUpdateDelay);delete this._endUpdateDelay;_68e=true;}if(!this.updating){this.beginUpdate();_68e=true;}if(_68e){var _68f=this;this._endUpdateDelay=setTimeout(function(){delete _68f._endUpdateDelay;_68f.endUpdate();},this.updateDelay);}}},_onSet:function(item,_690,_691,_692){this._checkUpdateStatus();var idx=this.getItemIndex(item);if(idx>-1){this.updateRow(idx);}},_createItem:function(item,_693){var idty=this._hasIdentity?this.store.getIdentity(item):dojo.toJson(this.query)+":idx:"+_693+":sort:"+dojo.toJson(this.getSortProps());var o=this._by_idty[idty]={idty:idty,item:item};return o;},_addItem:function(item,_694,_695){this._by_idx[_694]=this._createItem(this._sanitizeHTMLDataForUI(item),_694);if(!_695){this.updateRow(_694);}},_sanitizeHTMLDataForUI:function(item){if(item){var _696=Object.keys(item);_696.forEach(function(_697,_698){if((_697.includes("key_")||_697.includes("data_")||_697.includes("KEY_")||_697.includes("DATA_"))&&item[_697]&&item[_697][0]){item[_697][0]=item[_697][0].replace(/</g,"&lt;");item[_697][0]=item[_697][0].replace(/>/g,"&gt;");}});}return item;},_onNew:function(item,_699){this._checkUpdateStatus();var _69a=this.get("rowCount");this._addingItem=true;this.updateRowCount(_69a+1);this._addingItem=false;this._addItem(item,_69a);this.showMessage();},_onDelete:function(item){this._checkUpdateStatus();var idx=this._getItemIndex(item,true);if(item.attachment_id){var _69b=false;misys.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/DeleteAttachmentById"),handleAs:"json",sync:true,content:{attachmentId:item.attachment_id},load:function(_69c,args){_69b=_69c.isDeleted;_isError=false;},error:function(_69d,args){console.error("Technical error while deleting attachment");console.error(_69d);_isError=true;misys._config=misys._config||{};}});}if(idx>=0){this._pages=[];this._bop=-1;this._eop=-1;var o=this._by_idx[idx];this._by_idx.splice(idx,1);delete this._by_idty[o.idty];this.updateRowCount(this.get("rowCount")-1);if(this.get("rowCount")===0){this.showMessage(this.noDataMessage);}}},_onRevert:function(){this._refresh();},setStore:function(_69e,_69f,_6a0){this._setQuery(_69f,_6a0);this._setStore(_69e);this._refresh(true);},setQuery:function(_6a1,_6a2){this._setQuery(_6a1,_6a2);this._refresh(true);},setItems:function(_6a3){this.items=_6a3;this._setStore(this.store);this._refresh(true);},_setQuery:function(_6a4,_6a5){this.query=_6a4;this.queryOptions=_6a5||this.queryOptions;},_setStore:function(_6a6){if(this.store&&this._store_connects){dojo.forEach(this._store_connects,this.disconnect,this);}this.store=_6a6;if(this.store){var f=this.store.getFeatures();var h=[];this._canEdit=!!f["dojo.data.api.Write"]&&!!f["dojo.data.api.Identity"];this._hasIdentity=!!f["dojo.data.api.Identity"];if(!!f["dojo.data.api.Notification"]&&!this.items){h.push(this.connect(this.store,"onSet","_onSet"));h.push(this.connect(this.store,"onNew","_onNew"));h.push(this.connect(this.store,"onDelete","_onDelete"));}if(this._canEdit){h.push(this.connect(this.store,"revert","_onRevert"));}this._store_connects=h;}},_onFetchBegin:function(size,req){if(!this.scroller){return;}if(this.rowCount!=size){if(req.isRender){this.scroller.init(size,this.keepRows,this.rowsPerPage);this.rowCount=size;this._setAutoHeightAttr(this.autoHeight,true);this._skipRowRenormalize=true;this.prerender();this._skipRowRenormalize=false;}else{this.updateRowCount(size);}}if(size<1){this.views.render();this._resize();this.showMessage(this.noDataMessage);this.focus.initFocusView();}else{this.showMessage();}},_onFetchComplete:function(_6a7,req){if(!this.scroller){return;}if(_6a7&&_6a7.length>0){dojo.forEach(_6a7,function(item,idx){this._addItem(item,req.start+idx,true);},this);this.updateRows(req.start,_6a7.length);if(req.isRender){this.setScrollTop(0);this.postrender();}else{if(this._lastScrollTop){this.setScrollTop(this._lastScrollTop);}}}delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;}this._pending_requests[req.start]=false;},_onFetchError:function(err,req){delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;this.showMessage(this.errorMessage);}this._pending_requests[req.start]=false;this.onFetchError(err,req);},onFetchError:function(err,req){},_fetch:function(_6a8,_6a9){_6a8=_6a8||0;if(this.store&&!this._pending_requests[_6a8]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage);}this._pending_requests[_6a8]=true;try{if(this.items){var _6aa=this.items;var _6ab=this.store;this.rowsPerPage=_6aa.length;var req={start:_6a8,count:this.rowsPerPage,isRender:_6a9};this._onFetchBegin(_6aa.length,req);var _6ac=0;dojo.forEach(_6aa,function(i){if(!_6ab.isItemLoaded(i)){_6ac++;}});if(_6ac===0){this._onFetchComplete(_6aa,req);}else{var _6ad=function(item){_6ac--;if(_6ac===0){this._onFetchComplete(_6aa,req);}};dojo.forEach(_6aa,function(i){if(!_6ab.isItemLoaded(i)){_6ab.loadItem({item:i,onItem:_6ad,scope:this});}},this);}}else{this.store.fetch({start:_6a8,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:_6a9,onBegin:dojo.hitch(this,"_onFetchBegin"),onComplete:dojo.hitch(this,"_onFetchComplete"),onError:dojo.hitch(this,"_onFetchError")});}}catch(e){this._onFetchError(e,{start:_6a8,count:this.rowsPerPage});}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoaded=false;this._isLoading=false;},getItem:function(idx){var data=this._by_idx[idx];if(!data||(data&&!data.item)){this._preparePage(idx);return null;}return data.item;},getItemIndex:function(item){return this._getItemIndex(item,false);},_getItemIndex:function(item,_6ae){if(!_6ae&&!this.store.isItem(item)){return -1;}var idty=this._hasIdentity?this.store.getIdentity(item):null;for(var i=0,l=this._by_idx.length;i<l;i++){var d=this._by_idx[i];if(d&&((idty&&d.idty==idty)||(d.item===item))){return i;}}return -1;},filter:function(_6af,_6b0){this.query=_6af;if(_6b0){this._clearData();}this._fetch();},_getItemAttr:function(idx,attr){var item=this.getItem(idx);return (!item?this.fetchText:this.store.getValue(item,attr));},_render:function(){if(this.domNode.parentNode){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this._fetch(0,true);}},_requestsPending:function(_6b1){return this._pending_requests[_6b1];},_rowToPage:function(_6b2){return (this.rowsPerPage?Math.floor(_6b2/this.rowsPerPage):_6b2);},_pageToRow:function(_6b3){return (this.rowsPerPage?this.rowsPerPage*_6b3:_6b3);},_preparePage:function(_6b4){if((_6b4<this._bop||_6b4>=this._eop)&&!this._addingItem){var _6b5=this._rowToPage(_6b4);this._needPage(_6b5);this._bop=_6b5*this.rowsPerPage;this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"));}},_needPage:function(_6b6){if(!this._pages[_6b6]){this._pages[_6b6]=true;this._requestPage(_6b6);}},_requestPage:function(_6b7){var row=this._pageToRow(_6b7);var _6b8=Math.min(this.rowsPerPage,this.get("rowCount")-row);if(_6b8>0){this._requests++;if(!this._requestsPending(row)){setTimeout(dojo.hitch(this,"_fetch",row,false),1);}}},getCellName:function(_6b9){return _6b9.field;},_refresh:function(_6ba){this._clearData();this._fetch(0,_6ba);},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh();},canSort:function(){return (!this._isLoading);},getSortProps:function(){var c=this.getCell(this.getSortIndex());if(!c){if(this.sortFields){return this.sortFields;}return null;}else{var desc=c["sortDesc"];var si=!(this.sortInfo>0);if(typeof desc=="undefined"){desc=si;}else{desc=si?!desc:desc;}return [{attribute:c.field,descending:desc}];}},styleRowState:function(_6bb){if(this.store&&this.store.getState){var _6bc=this.store.getState(_6bb.index),c="";for(var i=0,ss=["inflight","error","inserting"],s;s=ss[i];i++){if(_6bc[s]){c=" dojoxGridRow-"+s;break;}}_6bb.customClasses+=c;}},onStyleRow:function(_6bd){this.styleRowState(_6bd);this.inherited(arguments);},canEdit:function(_6be,_6bf){return this._canEdit;},_copyAttr:function(idx,attr){var row={};var _6c0={};var src=this.getItem(idx);return this.store.getValue(src,attr);},doStartEdit:function(_6c1,_6c2){if(!this._cache[_6c2]){this._cache[_6c2]=this._copyAttr(_6c2,_6c1.field);}this.onStartEdit(_6c1,_6c2);},doApplyCellEdit:function(_6c3,_6c4,_6c5){this.store.fetchItemByIdentity({identity:this._by_idx[_6c4].idty,onItem:dojo.hitch(this,function(item){var _6c6=this.store.getValue(item,_6c5);if(typeof _6c6=="number"){_6c3=isNaN(_6c3)?_6c3:parseFloat(_6c3);}else{if(typeof _6c6=="boolean"){_6c3=_6c3=="true"?true:_6c3=="false"?false:_6c3;}else{if(_6c6 instanceof Date){var _6c7=new Date(_6c3);_6c3=isNaN(_6c7.getTime())?_6c3:_6c7;}}}this.store.setValue(item,_6c5,_6c3);this.onApplyCellEdit(_6c3,_6c4,_6c5);})});},doCancelEdit:function(_6c8){var _6c9=this._cache[_6c8];if(_6c9){this.updateRow(_6c8);delete this._cache[_6c8];}this.onCancelEdit.apply(this,arguments);},doApplyEdit:function(_6ca,_6cb){var _6cc=this._cache[_6ca];this.onApplyEdit(_6ca);},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var fx=dojo.hitch(this,function(_6cd){if(_6cd.length){dojo.forEach(_6cd,this.store.deleteItem,this.store);this.selection.clear();}});if(this.allItemsSelected){this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:fx});}else{fx(this.selection.getSelected());}}}});dojox.grid.DataGrid.cell_markupFactory=function(_6ce,node,_6cf){var _6d0=dojo.trim(dojo.attr(node,"field")||"");if(_6d0){_6cf.field=_6d0;}_6cf.field=_6cf.field||_6cf.name;var _6d1=dojo.trim(dojo.attr(node,"fields")||"");if(_6d1){_6cf.fields=_6d1.split(",");}if(_6ce){_6ce(node,_6cf);}};dojox.grid.DataGrid.markupFactory=function(_6d2,node,ctor,_6d3){return dojox.grid._Grid.markupFactory(_6d2,node,ctor,dojo.partial(dojox.grid.DataGrid.cell_markupFactory,_6d3));};}if(!dojo._hasResource["dojox.grid.enhanced._Events"]){dojo._hasResource["dojox.grid.enhanced._Events"]=true;dojo.provide("dojox.grid.enhanced._Events");dojo.declare("dojox.grid.enhanced._Events",null,{_events:null,headerCellActiveClass:"dojoxGridHeaderActive",cellActiveClass:"dojoxGridCellActive",rowActiveClass:"dojoxGridRowActive",constructor:function(_6d4){this._events=new dojox.grid._Events();for(var p in this._events){if(!this[p]){this.p=this._events.p;}}_6d4.mixin(_6d4,this);},dokeyup:function(e){this.focus.currentArea().keyup(e);},onKeyDown:function(e){if(e.altKey||e.metaKey){return;}var dk=dojo.keys;var _6d5=this.focus;switch(e.keyCode){case dk.TAB:if(e.ctrlKey){return;}_6d5.tab(e.shiftKey?-1:1,e);break;case dk.UP_ARROW:case dk.DOWN_ARROW:_6d5.currentArea().move(e.keyCode==dk.UP_ARROW?-1:1,0,e);break;case dk.LEFT_ARROW:case dk.RIGHT_ARROW:var _6d6=(e.keyCode==dk.LEFT_ARROW)?1:-1;if(dojo._isBodyLtr()){_6d6*=-1;}_6d5.currentArea().move(0,_6d6,e);break;case dk.F10:if(this.menus&&e.shiftKey){this.onRowContextMenu(e);}break;case dk.ENTER:if(window.isAccessibilityEnabled&&e.grid&&dojo.attr(e.grid.domNode,"data-row-click-set")&&dojo.attr(e.grid.domNode,"data-row-click-set")==="true"){if(!this.edit.isEditing()){colIdx=this.focus.getHeaderIndex();if(colIdx>=0){this.setSortIndex(colIdx);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}dojo.stopEvent(e);}if(!e.shiftKey){var _6d7=this.edit.isEditing();this.edit.apply();if(!_6d7){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex);}}if(!this.edit.isEditing()){var _6d8=this.focus.focusView||this.views.views[0];_6d8.content.decorateEvent(e);this.onRowClick(e);dojo.stopEvent(e);}break;}else{_6d5.currentArea().keydown(e);break;}default:_6d5.currentArea().keydown(e);break;}},domouseup:function(e){if(e.cellNode){this.onMouseUp(e);}else{this.onRowSelectorMouseUp(e);}},domousedown:function(e){if(!e.cellNode){this.onRowSelectorMouseDown(e);}},onMouseUp:function(e){this[e.rowIndex==-1?"onHeaderCellMouseUp":"onCellMouseUp"](e);},onCellMouseDown:function(e){dojo.addClass(e.cellNode,this.cellActiveClass);dojo.addClass(e.rowNode,this.rowActiveClass);},onCellMouseUp:function(e){dojo.removeClass(e.cellNode,this.cellActiveClass);dojo.removeClass(e.rowNode,this.rowActiveClass);},onCellClick:function(e){this._events.onCellClick.call(this,e);this.focus.contentMouseEvent(e);},onCellDblClick:function(e){if(this.pluginMgr.isFixedCell(e.cell)){return;}if(this._click.length>1&&(!this._click[0]||!this._click[1])){this._click[0]=this._click[1]=e;}this._events.onCellDblClick.call(this,e);},onRowClick:function(e){this.edit.rowClick(e);if(!e.cell||(!e.cell.isRowSelector&&(!this.rowSelectCell||!this.rowSelectCell.disabled(e.rowIndex)))){this.selection.clickSelectEvent(e);}},onRowContextMenu:function(e){if(!this.edit.isEditing()&&this.menus){this.showMenu(e);}},onSelectedRegionContextMenu:function(e){if(this.selectedRegionMenu){this.selectedRegionMenu._openMyself({target:e.target,coords:e.keyCode!==dojo.keys.F10&&"pageX" in e?{x:e.pageX,y:e.pageY}:null});dojo.stopEvent(e);}},onHeaderCellMouseOut:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.cellOverClass);dojo.removeClass(e.cellNode,this.headerCellActiveClass);}},onHeaderCellMouseDown:function(e){if(e.cellNode){dojo.addClass(e.cellNode,this.headerCellActiveClass);}},onHeaderCellMouseUp:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.headerCellActiveClass);}},onHeaderCellClick:function(e){this.focus.currentArea("header");if(!e.cell.isRowSelector){this._events.onHeaderCellClick.call(this,e);}this.focus.headerMouseEvent(e);},onRowSelectorMouseDown:function(e){this.focus.focusArea("rowHeader",e);},onRowSelectorMouseUp:function(e){},onMouseUpRow:function(e){if(e.rowIndex!=-1){this.onRowMouseUp(e);}},onRowMouseUp:function(e){}});}if(!dojo._hasResource["dojox.grid.enhanced._FocusManager"]){dojo._hasResource["dojox.grid.enhanced._FocusManager"]=true;dojo.provide("dojox.grid.enhanced._FocusManager");dojo.declare("dojox.grid.enhanced._FocusArea",null,{constructor:function(area,_6d9){this._fm=_6d9;this._evtStack=[area.name];var _6da=function(){return true;};area.onFocus=area.onFocus||_6da;area.onBlur=area.onBlur||_6da;area.onMove=area.onMove||_6da;area.onKeyUp=area.onKeyUp||_6da;area.onKeyDown=area.onKeyDown||_6da;dojo.mixin(this,area);},move:function(_6db,_6dc,evt){if(this.name){var i,len=this._evtStack.length;for(i=len-1;i>=0;--i){if(this._fm._areas[this._evtStack[i]].onMove(_6db,_6dc,evt)===false){return false;}}}return true;},_onKeyEvent:function(evt,_6dd){if(this.name){var i,len=this._evtStack.length;for(i=len-1;i>=0;--i){if(this._fm._areas[this._evtStack[i]][_6dd](evt,false)===false){return false;}}for(i=0;i<len;++i){if(this._fm._areas[this._evtStack[i]][_6dd](evt,true)===false){return false;}}}return true;},keydown:function(evt){return this._onKeyEvent(evt,"onKeyDown");},keyup:function(evt){return this._onKeyEvent(evt,"onKeyUp");},contentMouseEventPlanner:function(){return 0;},headerMouseEventPlanner:function(){return 0;}});dojo.declare("dojox.grid.enhanced._FocusManager",dojox.grid._FocusManager,{_stopEvent:function(evt){try{if(evt&&evt.preventDefault){dojo.stopEvent(evt);}}catch(e){}},constructor:function(grid){this.grid=grid;this._areas={};this._areaQueue=[];this._contentMouseEventHandlers=[];this._headerMouseEventHandlers=[];this._currentAreaIdx=-1;this._gridBlured=true;this._connects.push(dojo.connect(grid,"onBlur",this,"_doBlur"));this._connects.push(dojo.connect(grid.scroller,"renderPage",this,"_delayedCellFocus"));this.addArea({name:"header",onFocus:dojo.hitch(this,this.focusHeader),onBlur:dojo.hitch(this,this._blurHeader),onMove:dojo.hitch(this,this._navHeader),getRegions:dojo.hitch(this,this._findHeaderCells),onRegionFocus:dojo.hitch(this,this.doColHeaderFocus),onRegionBlur:dojo.hitch(this,this.doColHeaderBlur),onKeyDown:dojo.hitch(this,this._onHeaderKeyDown)});this.addArea({name:"content",onFocus:dojo.hitch(this,this._focusContent),onBlur:dojo.hitch(this,this._blurContent),onMove:dojo.hitch(this,this._navContent),onKeyDown:dojo.hitch(this,this._onContentKeyDown)});this.addArea({name:"editableCell",onFocus:dojo.hitch(this,this._focusEditableCell),onBlur:dojo.hitch(this,this._blurEditableCell),onKeyDown:dojo.hitch(this,this._onEditableCellKeyDown),onContentMouseEvent:dojo.hitch(this,this._onEditableCellMouseEvent),contentMouseEventPlanner:function(evt,_6de){return -1;}});this.placeArea("header");this.placeArea("content");this.placeArea("editableCell");this.placeArea("editableCell","above","content");},destroy:function(){for(var name in this._areas){var area=this._areas[name];dojo.forEach(area._connects,dojo.disconnect);area._connects=null;if(area.uninitialize){area.uninitialize();}}this.inherited(arguments);},addArea:function(area){if(area.name&&dojo.isString(area.name)){if(this._areas[area.name]){dojo.forEach(area._connects,dojo.disconnect);}this._areas[area.name]=new dojox.grid.enhanced._FocusArea(area,this);if(area.onHeaderMouseEvent){this._headerMouseEventHandlers.push(area.name);}if(area.onContentMouseEvent){this._contentMouseEventHandlers.push(area.name);}}},getArea:function(_6df){return this._areas[_6df];},_bindAreaEvents:function(){var area,hdl,_6e0=this._areas;dojo.forEach(this._areaQueue,function(name){area=_6e0[name];if(!area._initialized&&dojo.isFunction(area.initialize)){area.initialize();area._initialized=true;}if(area.getRegions){area._regions=area.getRegions()||[];dojo.forEach(area._connects||[],dojo.disconnect);area._connects=[];dojo.forEach(area._regions,function(r){if(area.onRegionFocus){hdl=dojo.connect(r,"onfocus",area.onRegionFocus);area._connects.push(hdl);}if(area.onRegionBlur){hdl=dojo.connect(r,"onblur",area.onRegionBlur);area._connects.push(hdl);}});}});},removeArea:function(_6e1){var area=this._areas[_6e1];if(area){this.ignoreArea(_6e1);var i=dojo.indexOf(this._contentMouseEventHandlers,_6e1);if(i>=0){this._contentMouseEventHandlers.splice(i,1);}i=dojo.indexOf(this._headerMouseEventHandlers,_6e1);if(i>=0){this._headerMouseEventHandlers.splice(i,1);}dojo.forEach(area._connects,dojo.disconnect);if(area.uninitialize){area.uninitialize();}delete this._areas[_6e1];}},currentArea:function(_6e2,_6e3){var idx,cai=this._currentAreaIdx;if(dojo.isString(_6e2)&&(idx=dojo.indexOf(this._areaQueue,_6e2))>=0){if(cai!=idx){this.tabbingOut=false;if(_6e3&&cai>=0&&cai<this._areaQueue.length){this._areas[this._areaQueue[cai]].onBlur();}this._currentAreaIdx=idx;}}else{return (cai<0||cai>=this._areaQueue.length)?new dojox.grid.enhanced._FocusArea({},this):this._areas[this._areaQueue[this._currentAreaIdx]];}return null;},placeArea:function(name,pos,_6e4){if(!this._areas[name]){return;}var idx=dojo.indexOf(this._areaQueue,_6e4);switch(pos){case "after":if(idx>=0){++idx;}case "before":if(idx>=0){this._areaQueue.splice(idx,0,name);break;}default:this._areaQueue.push(name);break;case "above":var _6e5=true;case "below":var _6e6=this._areas[_6e4];if(_6e6){if(_6e5){_6e6._evtStack.push(name);}else{_6e6._evtStack.splice(0,0,name);}}}},ignoreArea:function(name){this._areaQueue=dojo.filter(this._areaQueue,function(_6e7){return _6e7!=name;});},focusArea:function(_6e8,evt){var idx;if(typeof _6e8=="number"){idx=_6e8<0?this._areaQueue.length+_6e8:_6e8;}else{idx=dojo.indexOf(this._areaQueue,dojo.isString(_6e8)?_6e8:(_6e8&&_6e8.name));}if(idx<0){idx=0;}var step=idx-this._currentAreaIdx;this._gridBlured=false;if(step){this.tab(step,evt);}else{this.currentArea().onFocus(evt,step);}},tab:function(step,evt){var _6e9=this._currentAreaIdx;this._gridBlured=false;this.tabbingOut=false;if(step===0){return;}var cai=this._currentAreaIdx;var dir=step>0?1:-1;if(cai<0||cai>=this._areaQueue.length){cai=(this._currentAreaIdx+=step);}else{var _6ea=this._areas[this._areaQueue[cai]].onBlur(evt,step);if(_6ea===true){cai=(this._currentAreaIdx+=step);}else{if(dojo.isString(_6ea)&&this._areas[_6ea]){cai=this._currentAreaIdx=dojo.indexOf(this._areaQueue,_6ea);}}}for(;cai>=0&&cai<this._areaQueue.length;cai+=dir){this._currentAreaIdx=cai;if(this._areaQueue[cai]&&this._areas[this._areaQueue[cai]].onFocus(evt,step)){if(_6e9===this._currentAreaIdx&&window.preventTabToPages){var _6eb=cai+dir;if(_6eb<this._areaQueue.length){this._currentAreaIdx=_6eb;cai=_6eb;var _6ec=this._areas[this._areaQueue[cai]];if(_6ec){}}}return;}}this.tabbingOut=true;if(step<0){this._currentAreaIdx=-1;dijit.focus(this.grid.domNode);}else{this._currentAreaIdx=this._areaQueue.length;dijit.focus(this.grid.lastFocusNode);}},_onMouseEvent:function(type,evt){var _6ed=type.toLowerCase(),_6ee=this["_"+_6ed+"MouseEventHandlers"],res=dojo.map(_6ee,function(_6ef){return {"area":_6ef,"idx":this._areas[_6ef][_6ed+"MouseEventPlanner"](evt,_6ee)};},this).sort(function(a,b){return b.idx-a.idx;}),_6f0=dojo.map(res,function(_6f1){return res.area;}),i=res.length;while(--i>=0){if(this._areas[res[i].area]["on"+type+"MouseEvent"](evt,_6f0)===false){return;}}},contentMouseEvent:function(evt){this._onMouseEvent("Content",evt);},headerMouseEvent:function(evt){this._onMouseEvent("Header",evt);},initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._bindAreaEvents();},isNavHeader:function(){return this._areaQueue[this._currentAreaIdx]=="header";},previousKey:function(e){this.tab(-1,e);},nextKey:function(e){this.tab(1,e);},setFocusCell:function(_6f2,_6f3){if(_6f2){this.currentArea(this.grid.edit.isEditing()?"editableCell":"content",true);this._focusifyCellNode(false);this.cell=_6f2;this.rowIndex=_6f3;this._focusifyCellNode(true);}this.grid.onCellFocus(this.cell,this.rowIndex);},doFocus:function(e){if(e&&e.target==e.currentTarget&&!this.tabbingOut){if(this._gridBlured){this._gridBlured=false;if(this._currentAreaIdx<0||this._currentAreaIdx>=this._areaQueue.length){this.focusArea(0,e);}else{this.focusArea(this._currentAreaIdx,e);}}}else{this.tabbingOut=false;}dojo.stopEvent(e);},_doBlur:function(){this._gridBlured=true;},doLastNodeFocus:function(e){if(this.tabbingOut){this.tabbingOut=false;}else{this.focusArea(-1,e);}},_delayedHeaderFocus:function(){var _6f4=true;if(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed){_6f4=!(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed);}if(_6f4||window.callFromSortHeaderClick){if(this.isNavHeader()){this.focusHeader();}}},_delayedCellFocus:function(){var _6f5=true;if(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed){_6f5=!(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed);}if(_6f5){this.currentArea("header",true);this.focusArea(this._currentAreaIdx);}if(window.isAccessibilityEnabled){dojo.query("div>div.dojoxGridRow>table>tbody>tr>td>a>img").forEach(function(_6f6){try{if(dojo.hasAttr(_6f6,"title")&&!dojo.hasAttr(_6f6,"alt")){dojo.attr(_6f6,"alt",dojo.attr(_6f6,"title"));if(!window.isTitleToDisplayInTableImageIcons){dojo.removeAttr(_6f6,"title");}}}catch(exc){}});}},_changeMenuBindNode:function(_6f7,_6f8){var hm=this.grid.headerMenu;if(hm&&this._contextMenuBindNode==_6f7){hm.unBindDomNode(_6f7);hm.bindDomNode(_6f8);this._contextMenuBindNode=_6f8;}},focusHeader:function(evt,step){var _6f9=false;this.inherited(arguments);if(this._colHeadNode&&dojo.style(this._colHeadNode,"display")!="none"){dijit.focus(this._colHeadNode);this._stopEvent(evt);_6f9=true;}return _6f9;},_blurHeader:function(evt,step){if(this._colHeadNode){dojo.removeClass(this._colHeadNode,this.focusClass);}dojo.removeAttr(this.grid.domNode,"aria-activedescendant");this._changeMenuBindNode(this.grid.domNode,this.grid.viewsHeaderNode);this._colHeadNode=this._colHeadFocusIdx=null;return true;},_navHeader:function(_6fa,_6fb,evt){var _6fc=_6fb<0?-1:1,_6fd=dojo.indexOf(this._findHeaderCells(),this._colHeadNode);if(_6fd>=0&&(evt.shiftKey&&evt.ctrlKey)){this.colSizeAdjust(evt,_6fd,_6fc*5);return;}this.move(_6fa,_6fb);},_onHeaderKeyDown:function(e,_6fe){if(_6fe){var dk=dojo.keys;switch(e.keyCode){case dk.ENTER:case dk.SPACE:var _6ff=this.getHeaderIndex();if(_6ff>=0&&!this.grid.pluginMgr.isFixedCell(e.cell)){this.grid.setSortIndex(_6ff,null,e);dojo.stopEvent(e);}break;}}return true;},_setActiveColHeader:function(){this.inherited(arguments);dijit.focus(this._colHeadNode);},findAndFocusGridCell:function(){this._focusContent();},_focusContent:function(evt,step){var _700=true;var _701=(this.grid.rowCount===0);if(this.isNoFocusCell()&&!_701){for(var i=0,cell=this.grid.getCell(0);cell&&cell.hidden;cell=this.grid.getCell(++i)){}this.setFocusIndex(0,cell?i:0);}else{if(this.cell&&!_701){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex]){this.grid.scrollToRow(this.rowIndex);this.focusGrid();}else{this.setFocusIndex(this.rowIndex,this.cell.index);}}else{_700=false;}}if(_700){this._stopEvent(evt);}return _700;},_blurContent:function(evt,step){this._focusifyCellNode(false);return true;},_navContent:function(_702,_703,evt){if((this.rowIndex===0&&_702<0)||(this.rowIndex===this.grid.rowCount-1&&_702>0)){return;}this._colHeadNode=null;this.move(_702,_703,evt);if(evt){dojo.stopEvent(evt);}},_onContentKeyDown:function(e,_704){if(_704){var dk=dojo.keys,s=this.grid.scroller;switch(e.keyCode){case dk.ENTER:case dk.SPACE:var g=this.grid;if(g.indirectSelection||g.misysIndirectSelection){break;}g.selection.clickSelect(this.rowIndex,dojo.isCopyKey(e),e.shiftKey);g.onRowClick(e);dojo.stopEvent(e);break;case dk.PAGE_UP:if(this.rowIndex!==0){if(this.rowIndex!=s.firstVisibleRow+1){this._navContent(s.firstVisibleRow-this.rowIndex,0);}else{this.grid.setScrollTop(s.findScrollTop(this.rowIndex-1));this._navContent(s.firstVisibleRow-s.lastVisibleRow+1,0);}dojo.stopEvent(e);}break;case dk.PAGE_DOWN:if(this.rowIndex+1!=this.grid.rowCount){dojo.stopEvent(e);if(this.rowIndex!=s.lastVisibleRow-1){this._navContent(s.lastVisibleRow-this.rowIndex-1,0);}else{this.grid.setScrollTop(s.findScrollTop(this.rowIndex+1));this._navContent(s.lastVisibleRow-s.firstVisibleRow-1,0);}dojo.stopEvent(e);}break;}}return true;},_blurFromEditableCell:false,_isNavigating:false,_navElems:null,_focusEditableCell:function(evt,step){var _705=false;if(this._isNavigating){_705=true;}else{if(this.grid.edit.isEditing()&&this.cell){if(this._blurFromEditableCell||!this._blurEditableCell(evt,step)){this.setFocusIndex(this.rowIndex,this.cell.index);_705=true;}this._stopEvent(evt);}}return _705;},_applyEditableCell:function(){try{this.grid.edit.apply();}catch(e){console.warn("_FocusManager._applyEditableCell() error:",e);}},_blurEditableCell:function(evt,step){this._blurFromEditableCell=false;if(this._isNavigating){var _706=true;if(evt){var _707=this._navElems;var _708=_707.lowest||_707.first;var _709=_707.last||_707.highest||_708;var _70a=dojo.isIE?evt.srcElement:evt.target;_706=_70a==(step>0?_709:_708);}if(_706){this._isNavigating=false;return "content";}return false;}else{if(this.grid.edit.isEditing()&&this.cell){if(!step||typeof step!="number"){return false;}var dir=step>0?1:-1;var cc=this.grid.layout.cellCount;for(var cell,col=this.cell.index+dir;col>=0&&col<cc;col+=dir){cell=this.grid.getCell(col);if(cell.editable){this.cell=cell;this._blurFromEditableCell=true;return false;}}if((this.rowIndex>0||dir==1)&&(this.rowIndex<this.grid.rowCount||dir==-1)){this.rowIndex+=dir;for(col=dir>0?0:cc-1;col>=0&&col<cc;col+=dir){cell=this.grid.getCell(col);if(cell.editable){this.cell=cell;break;}}this._applyEditableCell();return "content";}}}return true;},_initNavigatableElems:function(){this._navElems=dijit._getTabNavigable(this.cell.getNode(this.rowIndex));},_onEditableCellKeyDown:function(e,_70b){var dk=dojo.keys,g=this.grid,edit=g.edit,_70c=false,_70d=true;switch(e.keyCode){case dk.ENTER:if(_70b&&edit.isEditing()){this._applyEditableCell();_70c=true;dojo.stopEvent(e);}case dk.SPACE:if(!_70b&&this._isNavigating){_70d=false;break;}if(_70b){if(!this.cell.editable&&this.cell.navigatable){this._initNavigatableElems();var _70e=this._navElems.lowest||this._navElems.first;if(_70e){this._isNavigating=true;dijit.focus(_70e);dojo.stopEvent(e);this.currentArea("editableCell",true);break;}}if(!_70c&&!edit.isEditing()&&!g.pluginMgr.isFixedCell(this.cell)){edit.setEditCell(this.cell,this.rowIndex);}if(_70c){this.currentArea("content",true);}else{if(this.cell.editable&&g.canEdit()){this.currentArea("editableCell",true);}}}break;case dk.PAGE_UP:case dk.PAGE_DOWN:if(!_70b&&edit.isEditing()){_70d=false;}break;case dk.ESCAPE:if(!_70b){edit.cancel();this.currentArea("content",true);}}return _70d;},_onEditableCellMouseEvent:function(evt){if(evt.type=="click"){var cell=this.cell||evt.cell;if(cell&&!cell.editable&&cell.navigatable){this._initNavigatableElems();if(this._navElems.lowest||this._navElems.first){var _70f=dojo.isIE?evt.srcElement:evt.target;if(_70f!=cell.getNode(evt.rowIndex)){this._isNavigating=true;this.focusArea("editableCell",evt);dijit.focus(_70f);return false;}}}else{if(this.grid.singleClickEdit){this.currentArea("editableCell");return false;}}}return true;}});}if(!dojo._hasResource["dojox.grid.enhanced._PluginManager"]){dojo._hasResource["dojox.grid.enhanced._PluginManager"]=true;dojo.provide("dojox.grid.enhanced._PluginManager");dojo.declare("dojox.grid.enhanced._PluginManager",null,{_options:null,_plugins:null,_connects:null,constructor:function(_710){this.grid=_710;this._store=_710.store;this._options={};this._plugins=[];this._connects=[];this._parseProps(this.grid.plugins);_710.connect(_710,"_setStore",dojo.hitch(this,function(_711){if(this._store!==_711){this.forEach("onSetStore",[_711,this._store]);this._store=_711;}}));},startup:function(){this.forEach("onStartUp");},preInit:function(){this.grid.focus.destroy();this.grid.focus=new dojox.grid.enhanced._FocusManager(this.grid);new dojox.grid.enhanced._Events(this.grid);this._init(true);this.forEach("onPreInit");},postInit:function(){this._init(false);dojo.forEach(this.grid.views.views,this._initView,this);this._connects.push(dojo.connect(this.grid.views,"addView",dojo.hitch(this,this._initView)));if(this._plugins.length>0){var edit=this.grid.edit;if(edit){edit.styleRow=function(_712){};}}this.forEach("onPostInit");},forEach:function(func,args){dojo.forEach(this._plugins,function(p){if(!p||!p[func]){return;}p[func].apply(p,args?args:[]);});},_parseProps:function(_713){if(!_713){return;}var p,_714={},_715=this._options,grid=this.grid;var _716=dojox.grid.enhanced._PluginManager.registry;for(p in _713){if(_713[p]){this._normalize(p,_713,_716,_714);}}if(_715.dnd||_715.indirectSelection){_715.columnReordering=false;}dojo.mixin(grid,_715);},_normalize:function(p,_717,_718,_719){if(!_718[p]){throw new Error("Plugin "+p+" is required.");}if(_719[p]){throw new Error("Recursive cycle dependency is not supported.");}var _71a=this._options;if(_71a[p]){return _71a[p];}_719[p]=true;_71a[p]=dojo.mixin({},_718[p],dojo.isObject(_717[p])?_717[p]:{});var _71b=_71a[p]["dependency"];if(_71b){if(!dojo.isArray(_71b)){_71b=_71a[p]["dependency"]=[_71b];}dojo.forEach(_71b,function(_71c){if(!this._normalize(_71c,_717,_718,_719)){throw new Error("Plugin "+_71c+" is required.");}},this);}delete _719[p];return _71a[p];},_init:function(pre){var p,_71d,_71e=this._options;for(p in _71e){_71d=_71e[p]["preInit"];if((pre?_71d:!_71d)&&_71e[p]["class"]&&!this.pluginExisted(p)){this.loadPlugin(p);}}},loadPlugin:function(name){var _71f=this._options[name];if(!_71f){return null;}var _720=this.getPlugin(name);if(_720){return _720;}var _721=_71f["dependency"];dojo.forEach(_721,function(_722){if(!this.loadPlugin(_722)){throw new Error("Plugin "+_722+" is required.");}},this);var cls=_71f["class"];delete _71f["class"];_720=new this.getPluginClazz(cls)(this.grid,_71f);this._plugins.push(_720);return _720;},_initView:function(view){if(!view){return;}dojox.grid.util.funnelEvents(view.contentNode,view,"doContentEvent",["mouseup","mousemove"]);dojox.grid.util.funnelEvents(view.headerNode,view,"doHeaderEvent",["mouseup"]);},pluginExisted:function(name){return !!this.getPlugin(name);},getPlugin:function(name){var _723=this._plugins;name=name.toLowerCase();for(var i=0,len=_723.length;i<len;i++){if(name==_723[i]["name"].toLowerCase()){return _723[i];}}return null;},getPluginClazz:function(_724){if(dojo.isFunction(_724)){return _724;}var _725="Please make sure Plugin \""+_724+"\" is existed.";try{var cls=dojo.getObject(_724);if(!cls){throw new Error(_725);}return cls;}catch(e){throw new Error(_725);}},isFixedCell:function(cell){return cell&&(cell.isRowSelector||cell.fixedPos);},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);this.forEach("destroy");if(this.grid.unwrap){this.grid.unwrap();}delete this._connects;delete this._plugins;delete this._options;}});dojox.grid.enhanced._PluginManager.registerPlugin=function(_726,_727){if(!_726){console.warn("Failed to register plugin, class missed!");return;}var cls=dojox.grid.enhanced._PluginManager;cls.registry=cls.registry||{};cls.registry[_726.prototype.name]=dojo.mixin({"class":_726},(_727?_727:{}));};}if(!dojo._hasResource["dojox.grid.enhanced.plugins._SelectionPreserver"]){dojo._hasResource["dojox.grid.enhanced.plugins._SelectionPreserver"]=true;dojo.provide("dojox.grid.enhanced.plugins._SelectionPreserver");dojo.declare("dojox.grid.enhanced.plugins._SelectionPreserver",null,{_connects:[],constructor:function(_728){this.selection=_728;var grid=this.grid=_728.grid;grid.onSelectedById=this.onSelectedById;this.reset();var _729=grid._clearData;var _72a=this;grid._clearData=function(){_72a._updateMapping(!grid._noInternalMapping);_72a._trustSelection=[];_729.apply(grid,arguments);};this.connect(grid,"_setStore","reset");this.connect(grid,"_addItem","_reSelectById");this.connect(_728,"addToSelection",dojo.hitch(this,"_selectById",true));this.connect(_728,"deselect",dojo.hitch(this,"_selectById",false));this.connect(_728,"selectRange",dojo.hitch(this,"_updateMapping",true,true,false));this.connect(_728,"deselectRange",dojo.hitch(this,"_updateMapping",true,false,false));this.connect(_728,"deselectAll",dojo.hitch(this,"_updateMapping",true,false,true));},destroy:function(){this.reset();dojo.forEach(this._connects,dojo.disconnect);delete this._connects;},connect:function(obj,_72b,_72c){var conn=dojo.connect(obj,_72b,this,_72c);this._connects.push(conn);return conn;},reset:function(){this._idMap=[];this._selectedById={};this._trustSelection=[];this._defaultSelected=false;},_reSelectById:function(item,_72d){var s=this.selection,g=this.grid;if(item&&g._hasIdentity){var id=g.store.getIdentity(item);if(this._selectedById[id]===undefined){if(!this._trustSelection[_72d]){s.selected[_72d]=this._defaultSelected;}}else{s.selected[_72d]=this._selectedById[id];}this._idMap.push(id);g.onSelectedById(id,_72d,s.selected[_72d]);}},_selectById:function(_72e,_72f){if(this.selection.mode=="none"||!this.grid._hasIdentity){return;}var item=_72f;if(typeof _72f=="number"||typeof _72f=="string"){var _730=this.grid._by_idx[_72f];item=_730&&_730.item;}if(item){var id=this.grid.store.getIdentity(item);this._selectedById[id]=!!_72e;}else{this._trustSelection[_72f]=true;}},onSelectedById:function(id,_731,_732){},_updateMapping:function(_733,_734,_735,from,to){var s=this.selection,g=this.grid,flag=0,_736=0,i,id;for(i=g.rowCount-1;i>=0;--i){if(!g._by_idx[i]){++_736;flag+=s.selected[i]?1:-1;}else{id=g._by_idx[i].idty;if(id&&(_733||this._selectedById[id]===undefined)){this._selectedById[id]=!!s.selected[i];}}}if(_736){this._defaultSelected=flag>0;}if(!_735&&from!==undefined&&to!==undefined){_735=!g.usingPagination&&Math.abs(to-from+1)===g.rowCount;}if(_735&&!g.usingPagination){for(i=this._idMap.length;i>=0;--i){this._selectedById[this._idMap[i]]=_734;}}}});}if(!dojo._hasResource["dojox.grid.EnhancedGrid"]){dojo._hasResource["dojox.grid.EnhancedGrid"]=true;dojo.provide("dojox.grid.EnhancedGrid");dojo.experimental("dojox.grid.EnhancedGrid");dojo.declare("dojox.grid.EnhancedGrid",dojox.grid.DataGrid,{plugins:null,noSortColumnIndex:null,multipleSelectItems:new Object(),pluginMgr:null,keepSelection:false,domIdArray:null,jsonArray:null,_pluginMgrClass:dojox.grid.enhanced._PluginManager,postMixInProperties:function(){this._nls=dojo.i18n.getLocalization("dojox.grid.enhanced","EnhancedGrid",this.lang);this.inherited(arguments);},postCreate:function(){this.pluginMgr=new this._pluginMgrClass(this);this.pluginMgr.preInit();this.inherited(arguments);this.pluginMgr.postInit();if(window.isAccessibilityEnabled){dojo.connect(this,"onCellFocus",function(cell,_737){if(cell.headerSelector){var _738=cell.view.getCellNode(_737,cell.index);if(_738){dojo.attr(_738,"aria-describedby",cell.grid.id+"_rowSelector_"+_737+"_a11y_text");}}cell.navigatable="true";});}},plugin:function(name){return this.pluginMgr.getPlugin(name);},startup:function(){this.inherited(arguments);this.pluginMgr.startup();},createSelection:function(){this.selection=new dojox.grid.enhanced.DataSelection(this);},canSort:function(_739,_73a){return true;},doKeyEvent:function(e){try{var view=this.focus.focusView;view.content.decorateEvent(e);if(!e.cell){view.header.decorateEvent(e);}}catch(e){}this.inherited(arguments);},doApplyCellEdit:function(_73b,_73c,_73d){if(!_73d){this.invalidated[_73c]=true;return;}this.inherited(arguments);},mixin:function(_73e,_73f){var _740={};for(var p in _73f){if(p=="_inherited"||p=="declaredClass"||p=="constructor"||_73f["privates"]&&_73f["privates"][p]){continue;}_740[p]=_73f[p];}dojo.mixin(_73e,_740);},_copyAttr:function(idx,attr){if(!attr){return;}return this.inherited(arguments);},_getHeaderHeight:function(){this.inherited(arguments);return dojo.marginBox(this.viewsHeaderNode).h;},_fetch:function(_741,_742){if(this.items){return this.inherited(arguments);}_741=_741||0;if(this.store&&!this._pending_requests[_741]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage);}this._pending_requests[_741]=true;try{var req={start:_741,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:_742,onBegin:dojo.hitch(this,"_onFetchBegin"),onComplete:dojo.hitch(this,"_onFetchComplete"),onError:dojo.hitch(this,"_onFetchError")};this._storeLayerFetch(req);}catch(e){this._onFetchError(e,{start:_741,count:this.rowsPerPage});}}return 0;},_storeLayerFetch:function(req){this.store.fetch(req);},getCellByField:function(_743){return dojo.filter(this.layout.cells,function(cell){return cell.field==_743;})[0];},onMouseUp:function(e){},createView:function(){var view=this.inherited(arguments);if(dojo.isMoz){var _744=function(_745,_746){for(var n=_745;n&&_746(n);n=n.parentNode){}return n;};var _747=function(_748){var name=_748.toUpperCase();return function(node){return node.tagName!=name;};};var func=view.header.getCellX;view.header.getCellX=function(e){var x=func.call(view.header,e);var n=_744(e.target,_747("th"));if(n&&n!==e.target&&dojo.isDescendant(e.target,n)){x+=n.firstChild.offsetLeft;}return x;};}return view;},destroy:function(){delete this._nls;this.selection.destroy();this.pluginMgr.destroy();this.inherited(arguments);}});dojo.provide("dojox.grid.enhanced.DataSelection");dojo.declare("dojox.grid.enhanced.DataSelection",dojox.grid.DataSelection,{constructor:function(grid){if(grid.keepSelection){this.preserver=new dojox.grid.enhanced.plugins._SelectionPreserver(this);}},_range:function(_749,inTo){this.grid._selectingRange=true;this.inherited(arguments);this.grid._selectingRange=false;this.onChanged();},deselectAll:function(_74a){this.grid._selectingRange=true;this.inherited(arguments);this.grid._selectingRange=false;this.onChanged();},destroy:function(){if(this.preserver){this.preserver.destroy();}}});dojox.grid.EnhancedGrid.markupFactory=function(_74b,node,ctor,_74c){return dojox.grid._Grid.markupFactory(_74b,node,ctor,dojo.partial(dojox.grid.DataGrid.cell_markupFactory,_74c));};dojox.grid.EnhancedGrid.registerPlugin=function(_74d,_74e){dojox.grid.enhanced._PluginManager.registerPlugin(_74d,_74e);};}if(!dojo._hasResource["dijit._TimePicker"]){dojo._hasResource["dijit._TimePicker"]=true;dojo.provide("dijit._TimePicker");dojo.declare("dijit._TimePicker",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("dijit","templates/TimePicker.html","<div id=\"widget_${id}\" class=\"dijitMenu\"\n    ><div dojoAttachPoint=\"upArrow\" class=\"dijitButtonNode dijitUpArrowButton\" dojoAttachEvent=\"onmouseenter:_buttonMouse,onmouseleave:_buttonMouse\"\n\t\t><div class=\"dijitReset dijitInline dijitArrowButtonInner\" role=\"presentation\">&nbsp;</div\n\t\t><div class=\"dijitArrowButtonChar\">&#9650;</div></div\n    ><div dojoAttachPoint=\"timeMenu,focusNode\" dojoAttachEvent=\"onclick:_onOptionSelected,onmouseover,onmouseout\"></div\n    ><div dojoAttachPoint=\"downArrow\" class=\"dijitButtonNode dijitDownArrowButton\" dojoAttachEvent=\"onmouseenter:_buttonMouse,onmouseleave:_buttonMouse\"\n\t\t><div class=\"dijitReset dijitInline dijitArrowButtonInner\" role=\"presentation\">&nbsp;</div\n\t\t><div class=\"dijitArrowButtonChar\">&#9660;</div></div\n></div>\n"),baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T05:00:00",value:new Date(),_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:dojo.date.stamp.toISOString,setValue:function(_74f){dojo.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_74f);},_setValueAttr:function(date){this._set("value",date);this._showText();},_setFilterStringAttr:function(val){this._set("filterString",val);this._showText();},isDisabledDate:function(_750,_751){return false;},_getFilteredNodes:function(_752,_753,_754,_755){var _756=[],_757=_755?_755.date:this._refDate,n,i=_752,max=this._maxIncrement+Math.abs(i),chk=_754?-1:1,dec=_754?1:0,inc=1-dec;do{i=i-dec;n=this._createOption(i);if(n){if((_754&&n.date>_757)||(!_754&&n.date<_757)){break;}_756[_754?"unshift":"push"](n);_757=n.date;}i=i+inc;}while(_756.length<_753&&(i*chk)<max);return _756;},_showText:function(){var _758=dojo.date.stamp.fromISOString;this.timeMenu.innerHTML="";this._clickableIncrementDate=_758(this.clickableIncrement);this._visibleIncrementDate=_758(this.visibleIncrement);this._visibleRangeDate=_758(this.visibleRange);var _759=function(date){return date.getHours()*60*60+date.getMinutes()*60+date.getSeconds();},_75a=_759(this._clickableIncrementDate),_75b=_759(this._visibleIncrementDate),_75c=_759(this._visibleRangeDate),time=(this.value||this.currentFocus).getTime();this._refDate=new Date(time-time%(_75b*1000));this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._totalIncrements=_75c/_75a;this._visibleIncrement=_75b/_75a;this._maxIncrement=(60*60*24)/_75a;var _75d=this._getFilteredNodes(0,Math.min(this._totalIncrements>>1,10)-1),_75e=this._getFilteredNodes(0,Math.min(this._totalIncrements,10)-_75d.length,true,_75d[0]);dojo.forEach(_75e.concat(_75d),function(n){this.timeMenu.appendChild(n);},this);},constructor:function(){this.constraints={};},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints);},_setConstraintsAttr:function(_75f){dojo.mixin(this,_75f);if(!_75f.locale){_75f.locale=this.lang;}},postCreate:function(){this.connect(this.timeMenu,dojo.isIE?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addMouseListener(this.upArrow,this,"_onArrowUp",33,250));this._connects.push(dijit.typematic.addMouseListener(this.downArrow,this,"_onArrowDown",33,250));this.inherited(arguments);},_buttonMouse:function(e){dojo.toggleClass(e.currentTarget,e.currentTarget==this.upArrow?"dijitUpArrowHover":"dijitDownArrowHover",e.type=="mouseenter"||e.type=="mouseover");},_createOption:function(_760){var date=new Date(this._refDate);var _761=this._clickableIncrementDate;date.setHours(date.getHours()+_761.getHours()*_760,date.getMinutes()+_761.getMinutes()*_760,date.getSeconds()+_761.getSeconds()*_760);if(this.constraints.selector=="time"){date.setFullYear(1970,0,1);}var _762=dojo.date.locale.format(date,this.constraints);if(this.filterString&&_762.toLowerCase().indexOf(this.filterString)!==0){return null;}var div=dojo.create("div",{"class":this.baseClass+"Item"});div.date=date;div.index=_760;dojo.create("div",{"class":this.baseClass+"ItemInner",innerHTML:_762},div);if(_760%this._visibleIncrement<1&&_760%this._visibleIncrement>-1){dojo.addClass(div,this.baseClass+"Marker");}else{if(!(_760%this._clickableIncrement)){dojo.addClass(div,this.baseClass+"Tick");}}if(this.isDisabledDate(date)){dojo.addClass(div,this.baseClass+"ItemDisabled");}if(this.value&&!dojo.date.compare(this.value,date,this.constraints.selector)){div.selected=true;dojo.addClass(div,this.baseClass+"ItemSelected");if(dojo.hasClass(div,this.baseClass+"Marker")){dojo.addClass(div,this.baseClass+"MarkerSelected");}else{dojo.addClass(div,this.baseClass+"TickSelected");}this._highlightOption(div,true);}return div;},_onOptionSelected:function(tgt){var _763=tgt.target.date||tgt.target.parentNode.date;if(!_763||this.isDisabledDate(_763)){return;}this._highlighted_option=null;this.set("value",_763);this.onChange(_763);},onChange:function(time){},_highlightOption:function(node,_764){if(!node){return;}if(_764){if(this._highlighted_option){this._highlightOption(this._highlighted_option,false);}this._highlighted_option=node;}else{if(this._highlighted_option!==node){return;}else{this._highlighted_option=null;}}dojo.toggleClass(node,this.baseClass+"ItemHover",_764);if(dojo.hasClass(node,this.baseClass+"Marker")){dojo.toggleClass(node,this.baseClass+"MarkerHover",_764);}else{dojo.toggleClass(node,this.baseClass+"TickHover",_764);}},onmouseover:function(e){this._keyboardSelected=null;var tgr=(e.target.parentNode===this.timeMenu)?e.target:e.target.parentNode;if(!dojo.hasClass(tgr,this.baseClass+"Item")){return;}this._highlightOption(tgr,true);},onmouseout:function(e){this._keyboardSelected=null;var tgr=(e.target.parentNode===this.timeMenu)?e.target:e.target.parentNode;this._highlightOption(tgr,false);},_mouseWheeled:function(e){this._keyboardSelected=null;dojo.stopEvent(e);var _765=(dojo.isIE?e.wheelDelta:-e.detail);this[(_765>0?"_onArrowUp":"_onArrowDown")]();},_onArrowUp:function(_766){if(typeof _766=="number"&&_766==-1){return;}if(!this.timeMenu.childNodes.length){return;}var _767=this.timeMenu.childNodes[0].index;var divs=this._getFilteredNodes(_767,1,true,this.timeMenu.childNodes[0]);if(divs.length){this.timeMenu.removeChild(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);this.timeMenu.insertBefore(divs[0],this.timeMenu.childNodes[0]);}},_onArrowDown:function(_768){if(typeof _768=="number"&&_768==-1){return;}if(!this.timeMenu.childNodes.length){return;}var _769=this.timeMenu.childNodes[this.timeMenu.childNodes.length-1].index+1;var divs=this._getFilteredNodes(_769,1,false,this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);if(divs.length){this.timeMenu.removeChild(this.timeMenu.childNodes[0]);this.timeMenu.appendChild(divs[0]);}},handleKey:function(e){var dk=dojo.keys;if(e.charOrCode==dk.DOWN_ARROW||e.charOrCode==dk.UP_ARROW){dojo.stopEvent(e);if(this._highlighted_option&&!this._highlighted_option.parentNode){this._highlighted_option=null;}var _76a=this.timeMenu,tgt=this._highlighted_option||dojo.query("."+this.baseClass+"ItemSelected",_76a)[0];if(!tgt){tgt=_76a.childNodes[0];}else{if(_76a.childNodes.length){if(e.charOrCode==dk.DOWN_ARROW&&!tgt.nextSibling){this._onArrowDown();}else{if(e.charOrCode==dk.UP_ARROW&&!tgt.previousSibling){this._onArrowUp();}}if(e.charOrCode==dk.DOWN_ARROW){tgt=tgt.nextSibling;}else{tgt=tgt.previousSibling;}}}this._highlightOption(tgt,true);this._keyboardSelected=tgt;return false;}else{if(e.charOrCode==dk.ENTER||e.charOrCode===dk.TAB){if(!this._keyboardSelected&&e.charOrCode===dk.TAB){return true;}if(this._highlighted_option){this._onOptionSelected({target:this._highlighted_option});}return e.charOrCode===dk.TAB;}}}});}if(!dojo._hasResource["dijit.form.TimeTextBox"]){dojo._hasResource["dijit.form.TimeTextBox"]=true;dojo.provide("dijit.form.TimeTextBox");dojo.declare("dijit.form.TimeTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:"dijit._TimePicker",_selector:"time",value:new Date(""),_onKey:function(evt){this.inherited(arguments);switch(evt.keyCode){case dojo.keys.ENTER:case dojo.keys.TAB:case dojo.keys.ESCAPE:case dojo.keys.DOWN_ARROW:case dojo.keys.UP_ARROW:break;default:setTimeout(dojo.hitch(this,function(){var val=this.get("displayedValue");this.filterString=(val&&!this.parse(val,this.constraints))?val.toLowerCase():"";if(this._opened){this.closeDropDown();}this.openDropDown();}),0);}}});}if(!dojo._hasResource["dijit.form._Spinner"]){dojo._hasResource["dijit.form._Spinner"]=true;dojo.provide("dijit.form._Spinner");dojo.declare("dijit.form._Spinner",dijit.form.RangeBoundTextBox,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:dojo.cache("dijit.form","templates/Spinner.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdojoAttachPoint=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650;\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdojoAttachPoint=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660;\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input aria-label=\"Form field error\" class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935;\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' dojoAttachPoint=\"textbox,focusNode\" type=\"${type}\" dojoAttachEvent=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{"upArrowNode":"dijitUpArrowButton","downArrowNode":"dijitDownArrowButton"},adjust:function(val,_76b){return val;},_arrowPressed:function(_76c,_76d,_76e){if(this.disabled||this.readOnly){return;}this._setValueAttr(this.adjust(this.get("value"),_76d*_76e),false);dijit.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(node){this._wheelTimer=null;if(this.disabled||this.readOnly){return;}},_typematicCallback:function(_76f,node,evt){var inc=this.smallDelta;if(node==this.textbox){var k=dojo.keys;var key=evt.charOrCode;inc=(key==k.PAGE_UP||key==k.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==k.UP_ARROW||key==k.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(_76f==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){dojo.stopEvent(evt);var _770=evt.detail?(evt.detail*-1):(evt.wheelDelta/120);if(_770!==0){var node=this[(_770>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_770,this.smallDelta);if(!this._wheelTimer){clearTimeout(this._wheelTimer);}this._wheelTimer=setTimeout(dojo.hitch(this,"_arrowReleased",node),50);}},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));}});}if(!dojo._hasResource["dijit.form.NumberSpinner"]){dojo._hasResource["dijit.form.NumberSpinner"]=true;dojo.provide("dijit.form.NumberSpinner");dojo.declare("dijit.form.NumberSpinner",[dijit.form._Spinner,dijit.form.NumberTextBoxMixin],{adjust:function(val,_771){var tc=this.constraints,v=isNaN(val),_772=!isNaN(tc.max),_773=!isNaN(tc.min);if(v&&_771!=0){val=(_771>0)?_773?tc.min:_772?tc.max:0:_772?this.constraints.max:_773?tc.min:0;}var _774=val+_771;if(v||isNaN(_774)){return val;}if(_772&&(_774>tc.max)){_774=tc.max;}if(_773&&(_774<tc.min)){_774=tc.min;}return _774;},_onKeyPress:function(e){if((e.charOrCode==dojo.keys.HOME||e.charOrCode==dojo.keys.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.get("value")!="undefined"){var _775=this.constraints[(e.charOrCode==dojo.keys.HOME?"min":"max")];if(typeof _775=="number"){this._setValueAttr(_775,false);}dojo.stopEvent(e);}}});}if(!dojo._hasResource["dijit.form.HorizontalSlider"]){dojo._hasResource["dijit.form.HorizontalSlider"]=true;dojo.provide("dijit.form.HorizontalSlider");dojo.declare("dijit.form.HorizontalSlider",[dijit.form._FormValueWidget,dijit._Container],{templateString:dojo.cache("dijit.form","templates/HorizontalSlider.html","<table class=\"dijit dijitReset dijitSlider dijitSliderH\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" dojoAttachEvent=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" style=\"display:none\" dojoAttachPoint=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" dojoAttachEvent=\"onmousedown:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" role=\"presentation\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" dojoAttachEvent=\"onmousedown:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\n\t\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" dojoAttachEvent=\"onmousedown:_onHandleClick\" role=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" dojoAttachEvent=\"onmousedown:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" dojoAttachEvent=\"onmousedown:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" style=\"display:none\" dojoAttachPoint=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n"),value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:dijit.defaultDuration,widgetsInTemplate:true,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{id:""}),baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_startingPixelCount:"l",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}this._setValueAttr(this.value,true);},_onKeyPress:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}switch(e.charOrCode){case dojo.keys.HOME:this._setValueAttr(this.minimum,false);break;case dojo.keys.END:this._setValueAttr(this.maximum,false);break;case ((this._descending||this.isLeftToRight())?dojo.keys.RIGHT_ARROW:dojo.keys.LEFT_ARROW):case (this._descending===false?dojo.keys.DOWN_ARROW:dojo.keys.UP_ARROW):case (this._descending===false?dojo.keys.PAGE_DOWN:dojo.keys.PAGE_UP):this.increment(e);break;case ((this._descending||this.isLeftToRight())?dojo.keys.LEFT_ARROW:dojo.keys.RIGHT_ARROW):case (this._descending===false?dojo.keys.UP_ARROW:dojo.keys.DOWN_ARROW):case (this._descending===false?dojo.keys.PAGE_UP:dojo.keys.PAGE_DOWN):this.decrement(e);break;default:return;}dojo.stopEvent(e);},_onHandleClick:function(e){if(this.disabled||this.readOnly){return;}if(!dojo.isIE){dijit.focus(this.sliderHandle);}dojo.stopEvent(e);},_isReversed:function(){return !this.isLeftToRight();},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect){return;}dijit.focus(this.sliderHandle);dojo.stopEvent(e);var _776=dojo.position(this.sliderBarContainer,true);var _777=e[this._mousePixelCoord]-_776[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(_776[this._pixelCount]-_777):_777,_776[this._pixelCount],true);this._movable.onMouseDown(e);},_setPixelValue:function(_778,_779,_77a){if(this.disabled||this.readOnly){return;}_778=_778<0?0:_779<_778?_779:_778;var _77b=this.discreteValues;if(_77b<=1||_77b==Infinity){_77b=_779;}_77b--;var _77c=_779/_77b;var _77d=Math.round(_778/_77c);this._setValueAttr((this.maximum-this.minimum)*_77d/_77b+this.minimum,_77a);},_setValueAttr:function(_77e,_77f){this._set("value",_77e);this.valueNode.value=_77e;dijit.setWaiState(this.focusNode,"valuenow",_77e);this.inherited(arguments);var _780=(_77e-this.minimum)/(this.maximum-this.minimum);var _781=(this._descending===false)?this.remainingBar:this.progressBar;var _782=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}if(_77f&&this.slideDuration>0&&_781.style[this._progressPixelSize]){var _783=this;var _784={};var _785=parseFloat(_781.style[this._progressPixelSize]);var _786=this.slideDuration*(_780-_785/100);if(_786==0){return;}if(_786<0){_786=0-_786;}_784[this._progressPixelSize]={start:_785,end:_780*100,units:"%"};this._inProgressAnim=dojo.animateProperty({node:_781,duration:_786,onAnimate:function(v){_782.style[_783._progressPixelSize]=(100-parseFloat(v[_783._progressPixelSize]))+"%";},onEnd:function(){delete _783._inProgressAnim;},properties:_784});this._inProgressAnim.play();}else{_781.style[this._progressPixelSize]=(_780*100)+"%";_782.style[this._progressPixelSize]=((1-_780)*100)+"%";}},_bumpValue:function(_787,_788){if(this.disabled||this.readOnly){return;}var s=dojo.getComputedStyle(this.sliderBarContainer);var c=dojo._getContentBox(this.sliderBarContainer,s);var _789=this.discreteValues;if(_789<=1||_789==Infinity){_789=c[this._pixelCount];}_789--;var _78a=(this.value-this.minimum)*_789/(this.maximum-this.minimum)+_787;if(_78a<0){_78a=0;}if(_78a>_789){_78a=_789;}_78a=_78a*(this.maximum-this.minimum)/_789+this.minimum;this._setValueAttr(_78a,_788);},_onClkBumper:function(val){if(this.disabled||this.readOnly||!this.clickSelect){return;}this._setValueAttr(val,true);},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum);},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum);},decrement:function(e){this._bumpValue(e.charOrCode==dojo.keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.charOrCode==dojo.keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){dojo.stopEvent(evt);var _78b=!dojo.isMozilla;var _78c=evt[(_78b?"wheelDelta":"detail")]*(_78b?1:-1);this._bumpValue(_78c<0?-1:1,true);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_78d){if(this[_78d.container]!=this.containerNode){this[_78d.container].appendChild(_78d.domNode);}},this);this.inherited(arguments);},_typematicCallback:function(_78e,_78f,e){if(_78e==-1){this._setValueAttr(this.value,true);}else{this[(_78f==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);}},buildRendering:function(){this.inherited(arguments);if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";}var _790=dojo.query("label[for=\""+this.id+"\"]");if(_790.length){_790[0].id=(this.id+"_label");dijit.setWaiState(this.focusNode,"labelledby",_790[0].id);}dijit.setWaiState(this.focusNode,"valuemin",this.minimum);dijit.setWaiState(this.focusNode,"valuemax",this.maximum);},postCreate:function(){this.inherited(arguments);if(this.showButtons){this._connects.push(dijit.typematic.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500));this._connects.push(dijit.typematic.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));}this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var _791=dojo.declare(dijit.form._SliderMover,{widget:this});this._movable=new dojo.dnd.Moveable(this.sliderHandle,{mover:_791});this._layoutHackIE7();},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}this._supportingWidgets=dijit.findWidgets(this.domNode);this.inherited(arguments);}});dojo.declare("dijit.form._SliderMover",dojo.dnd.Mover,{onMouseMove:function(e){var _792=this.widget;var _793=_792._abspos;if(!_793){_793=_792._abspos=dojo.position(_792.sliderBarContainer,true);_792._setPixelValue_=dojo.hitch(_792,"_setPixelValue");_792._isReversed_=_792._isReversed();}var _794=e.touches?e.touches[0]:e,_795=_794[_792._mousePixelCoord]-_793[_792._startingPixelCoord];_792._setPixelValue_(_792._isReversed_?(_793[_792._pixelCount]-_795):_795,_793[_792._pixelCount],false);},destroy:function(e){dojo.dnd.Mover.prototype.destroy.apply(this,arguments);var _796=this.widget;_796._abspos=null;_796._setValueAttr(_796.value,true);}});}if(!dojo._hasResource["dijit._editor.selection"]){dojo._hasResource["dijit._editor.selection"]=true;dojo.provide("dijit._editor.selection");dojo.getObject("_editor.selection",true,dijit);dojo.mixin(dijit._editor.selection,{getType:function(){if(dojo.isIE<9){return dojo.doc.selection.type.toLowerCase();}else{var _797="text";var oSel;try{oSel=dojo.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _798=oSel.getRangeAt(0);if((_798.startContainer==_798.endContainer)&&((_798.endOffset-_798.startOffset)==1)&&(_798.startContainer.nodeType!=3)){_797="control";}}return _797;}},getSelectedText:function(){if(dojo.isIE<9){if(dijit._editor.selection.getType()=="control"){return null;}return dojo.doc.selection.createRange().text;}else{var _799=dojo.global.getSelection();if(_799){return _799.toString();}}return "";},getSelectedHtml:function(){if(dojo.isIE<9){if(dijit._editor.selection.getType()=="control"){return null;}return dojo.doc.selection.createRange().htmlText;}else{var _79a=dojo.global.getSelection();if(_79a&&_79a.rangeCount){var i;var html="";for(i=0;i<_79a.rangeCount;i++){var frag=_79a.getRangeAt(i).cloneContents();var div=dojo.doc.createElement("div");div.appendChild(frag);html+=div.innerHTML;}return html;}return null;}},getSelectedElement:function(){if(dijit._editor.selection.getType()=="control"){if(dojo.isIE<9){var _79b=dojo.doc.selection.createRange();if(_79b&&_79b.item){return dojo.doc.selection.createRange().item(0);}}else{var _79c=dojo.global.getSelection();return _79c.anchorNode.childNodes[_79c.anchorOffset];}}return null;},getParentElement:function(){if(dijit._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(dojo.isIE<9){var r=dojo.doc.selection.createRange();r.collapse(true);return r.parentElement();}else{var _79d=dojo.global.getSelection();if(_79d){var node=_79d.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}}return null;},hasAncestorElement:function(_79e){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_79f){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _7a0=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _7a1=String(tags[i]).toLowerCase();if(_7a0==_7a1){return _7a1;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_7a2){if(window.getSelection){var _7a3=dojo.global.getSelection();if(_7a3.removeAllRanges){if(_7a2){_7a3.collapseToStart();}else{_7a3.collapseToEnd();}}else{_7a3.collapse(_7a2);}}else{if(dojo.isIE){var _7a4=dojo.doc.selection.createRange();_7a4.collapse(_7a2);_7a4.select();}}},remove:function(){var sel=dojo.doc.selection;if(dojo.isIE<9){if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}else{sel=dojo.global.getSelection();sel.deleteFromDocument();return sel;}},selectElementChildren:function(_7a5,_7a6){var win=dojo.global;var doc=dojo.doc;var _7a7;_7a5=dojo.byId(_7a5);if(doc.selection&&dojo.isIE<9&&dojo.body().createTextRange){_7a7=_7a5.ownerDocument.body.createTextRange();_7a7.moveToElementText(_7a5);if(!_7a6){try{_7a7.select();}catch(e){}}}else{if(win.getSelection){var _7a8=dojo.global.getSelection();if(dojo.isOpera){if(_7a8.rangeCount){_7a7=_7a8.getRangeAt(0);}else{_7a7=doc.createRange();}_7a7.setStart(_7a5,0);_7a7.setEnd(_7a5,(_7a5.nodeType==3)?_7a5.length:_7a5.childNodes.length);_7a8.addRange(_7a7);}else{if(_7a5.innerText&&_7a5.innerText!==""){_7a8.selectAllChildren(_7a5);}}}}},selectElement:function(_7a9,_7aa){var _7ab;var doc=dojo.doc;var win=dojo.global;_7a9=dojo.byId(_7a9);if(dojo.isIE<9&&dojo.body().createTextRange){try{var tg=_7a9.tagName?_7a9.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){_7ab=dojo.body().createControlRange();}else{_7ab=dojo.body().createRange();}_7ab.addElement(_7a9);if(!_7aa){_7ab.select();}}catch(e){this.selectElementChildren(_7a9,_7aa);}}else{if(dojo.global.getSelection){var _7ac=win.getSelection();_7ab=doc.createRange();if(_7ac.removeAllRanges){if(dojo.isOpera){if(_7ac.getRangeAt(0)){_7ab=_7ac.getRangeAt(0);}}_7ab.selectNode(_7a9);_7ac.removeAllRanges();_7ac.addRange(_7ab);}}}},inSelection:function(node){if(node){var _7ad;var doc=dojo.doc;var _7ae;if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.rangeCount>0){_7ae=sel.getRangeAt(0);}if(_7ae&&_7ae.compareBoundaryPoints&&doc.createRange){try{_7ad=doc.createRange();_7ad.setStart(node,0);if(_7ae.compareBoundaryPoints(_7ae.START_TO_END,_7ad)===1){return true;}}catch(e){}}}else{if(doc.selection){_7ae=doc.selection.createRange();try{_7ad=node.ownerDocument.body.createControlRange();if(_7ad){_7ad.addElement(node);}}catch(e1){try{_7ad=node.ownerDocument.body.createTextRange();_7ad.moveToElementText(node);}catch(e2){}}if(_7ae&&_7ad){if(_7ae.compareEndPoints("EndToStart",_7ad)===1){return true;}}}}}return false;}});}if(!dojo._hasResource["dijit._editor.range"]){dojo._hasResource["dijit._editor.range"]=true;dojo.provide("dijit._editor.range");dijit.range={};dijit.range.getIndex=function(node,_7af){var ret=[],retR=[];var stop=_7af;var _7b0=node;var _7b1,n;while(node!=stop){var i=0;_7b1=node.parentNode;while((n=_7b1.childNodes[i++])){if(n===node){--i;break;}}ret.unshift(i);retR.unshift(i-_7b1.childNodes.length);node=_7b1;}if(ret.length>0&&_7b0.nodeType==3){n=_7b0.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=_7b0.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};dijit.range.getNode=function(_7b2,_7b3){if(!dojo.isArray(_7b2)||_7b2.length==0){return _7b3;}var node=_7b3;dojo.every(_7b2,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;return false;}return true;});return node;};dijit.range.getCommonAncestor=function(n1,n2,root){root=root||n1.ownerDocument.body;var _7b4=function(n){var as=[];while(n){as.unshift(n);if(n!==root){n=n.parentNode;}else{break;}}return as;};var n1as=_7b4(n1);var n2as=_7b4(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};dijit.range.getAncestor=function(node,_7b5,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(_7b5.test(name)){return node;}node=node.parentNode;}return null;};dijit.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;dijit.range.getBlockAncestor=function(node,_7b6,root){root=root||node.ownerDocument.body;_7b6=_7b6||dijit.range.BlockTagNames;var _7b7=null,_7b8;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!_7b7&&_7b6.test(name)){_7b7=node;}if(!_7b8&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_7b8=node;}node=node.parentNode;}return {blockNode:_7b7,blockContainer:_7b8||node.ownerDocument.body};};dijit.range.atBeginningOfContainer=function(_7b9,node,_7ba){var _7bb=false;var _7bc=(_7ba==0);if(!_7bc&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,_7ba))){_7bc=true;}}if(_7bc){var _7bd=node;_7bb=true;while(_7bd&&_7bd!==_7b9){if(_7bd.previousSibling){_7bb=false;break;}_7bd=_7bd.parentNode;}}return _7bb;};dijit.range.atEndOfContainer=function(_7be,node,_7bf){var _7c0=false;var _7c1=(_7bf==(node.length||node.childNodes.length));if(!_7c1&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(_7bf))){_7c1=true;}}if(_7c1){var _7c2=node;_7c0=true;while(_7c2&&_7c2!==_7be){if(_7c2.nextSibling){_7c0=false;break;}_7c2=_7c2.parentNode;}}return _7c0;};dijit.range.adjacentNoneTextNode=function(_7c3,next){var node=_7c3;var len=(0-_7c3.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};dijit.range._w3c=Boolean(window["getSelection"]);dijit.range.create=function(win){if(dijit.range._w3c){return (win||dojo.global).document.createRange();}else{return new dijit.range.W3CRange;}};dijit.range.getSelection=function(win,_7c4){if(dijit.range._w3c){return win.getSelection();}else{var s=new dijit.range.ie.selection(win);if(!_7c4){s._getCurrentSelection();}return s;}};if(!dijit.range._w3c){dijit.range.ie={cachedSelection:{},selection:function(win){this._ranges=[];this.addRange=function(r,_7c5){this._ranges.push(r);if(!_7c5){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _7c6=function(){var r=win.document.selection.createRange();var type=win.document.selection.type.toUpperCase();if(type=="CONTROL"){return new dijit.range.W3CRange(dijit.range.ie.decomposeControlRange(r));}else{return new dijit.range.W3CRange(dijit.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_7c6();if(r){this.addRange(r,true);}};},decomposeControlRange:function(_7c7){var _7c8=_7c7.item(0),_7c9=_7c7.item(_7c7.length-1);var _7ca=_7c8.parentNode,_7cb=_7c9.parentNode;var _7cc=dijit.range.getIndex(_7c8,_7ca).o;var _7cd=dijit.range.getIndex(_7c9,_7cb).o+1;return [_7ca,_7cc,_7cb,_7cd];},getEndPoint:function(_7ce,end){var _7cf=_7ce.duplicate();_7cf.collapse(!end);var _7d0="EndTo"+(end?"End":"Start");var _7d1=_7cf.parentElement();var _7d2,_7d3,_7d4;if(_7d1.childNodes.length>0){dojo.every(_7d1.childNodes,function(node,i){var _7d5;if(node.nodeType!=3){_7cf.moveToElementText(node);if(_7cf.compareEndPoints(_7d0,_7ce)>0){if(_7d4&&_7d4.nodeType==3){_7d2=_7d4;_7d5=true;}else{_7d2=_7d1;_7d3=i;return false;}}else{if(i==_7d1.childNodes.length-1){_7d2=_7d1;_7d3=_7d1.childNodes.length;return false;}}}else{if(i==_7d1.childNodes.length-1){_7d2=node;_7d5=true;}}if(_7d5&&_7d2){var _7d6=dijit.range.adjacentNoneTextNode(_7d2)[0];if(_7d6){_7d2=_7d6.nextSibling;}else{_7d2=_7d1.firstChild;}var _7d7=dijit.range.adjacentNoneTextNode(_7d2);_7d6=_7d7[0];var _7d8=_7d7[1];if(_7d6){_7cf.moveToElementText(_7d6);_7cf.collapse(false);}else{_7cf.moveToElementText(_7d1);}_7cf.setEndPoint(_7d0,_7ce);_7d3=_7cf.text.length-_7d8;return false;}_7d4=node;return true;});}else{_7d2=_7d1;_7d3=0;}if(!end&&_7d2.nodeType==1&&_7d3==_7d2.childNodes.length){var _7d9=_7d2.nextSibling;if(_7d9&&_7d9.nodeType==3){_7d2=_7d9;_7d3=0;}}return [_7d2,_7d3];},setEndPoint:function(_7da,_7db,_7dc){var _7dd=_7da.duplicate(),node,len;if(_7db.nodeType!=3){if(_7dc>0){node=_7db.childNodes[_7dc-1];if(node){if(node.nodeType==3){_7db=node;_7dc=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_7db=node.nextSibling;_7dc=0;}else{_7dd.moveToElementText(node.nextSibling?node:_7db);var _7de=node.parentNode;var _7df=_7de.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);_7dd.collapse(false);_7de.removeChild(_7df);}}}}else{_7dd.moveToElementText(_7db);_7dd.collapse(true);}}if(_7db.nodeType==3){var _7e0=dijit.range.adjacentNoneTextNode(_7db);var _7e1=_7e0[0];len=_7e0[1];if(_7e1){_7dd.moveToElementText(_7e1);_7dd.collapse(false);if(_7e1.contentEditable!="inherit"){len++;}}else{_7dd.moveToElementText(_7db.parentNode);_7dd.collapse(true);}_7dc+=len;if(_7dc>0){if(_7dd.move("character",_7dc)!=_7dc){console.error("Error when moving!");}}}return _7dd;},decomposeTextRange:function(_7e2){var _7e3=dijit.range.ie.getEndPoint(_7e2);var _7e4=_7e3[0],_7e5=_7e3[1];var _7e6=_7e3[0],_7e7=_7e3[1];if(_7e2.htmlText.length){if(_7e2.htmlText==_7e2.text){_7e7=_7e5+_7e2.text.length;}else{_7e3=dijit.range.ie.getEndPoint(_7e2,true);_7e6=_7e3[0],_7e7=_7e3[1];}}return [_7e4,_7e5,_7e6,_7e7];},setRange:function(_7e8,_7e9,_7ea,_7eb,_7ec,_7ed){var _7ee=dijit.range.ie.setEndPoint(_7e8,_7e9,_7ea);_7e8.setEndPoint("StartToStart",_7ee);if(!_7ed){var end=dijit.range.ie.setEndPoint(_7e8,_7eb,_7ec);}_7e8.setEndPoint("EndToEnd",end||_7ee);return _7e8;}};dojo.declare("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=dijit.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_7ef){_7ef=parseInt(_7ef);if(this.startContainer===node&&this.startOffset==_7ef){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_7ef;if(!this.endContainer){this.setEnd(node,_7ef);}else{this._updateInternal();}},setEnd:function(node,_7f0){_7f0=parseInt(_7f0);if(this.endContainer===node&&this.endOffset==_7f0){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_7f0;if(!this.startContainer){this.setStart(node,_7f0);}else{this._updateInternal();}},setStartAfter:function(node,_7f1){this._setPoint("setStart",node,_7f1,1);},setStartBefore:function(node,_7f2){this._setPoint("setStart",node,_7f2,0);},setEndAfter:function(node,_7f3){this._setPoint("setEnd",node,_7f3,1);},setEndBefore:function(node,_7f4){this._setPoint("setEnd",node,_7f4,0);},_setPoint:function(what,node,_7f5,ext){var _7f6=dijit.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,_7f6.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();dijit.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(body){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var r=this._getIERange();r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new dijit.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}}if(!dojo._hasResource["dijit._editor.html"]){dojo._hasResource["dijit._editor.html"]=true;dojo.provide("dijit._editor.html");dojo.getObject("_editor",true,dijit);dijit._editor.escapeXml=function(str,_7f7){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_7f7){str=str.replace(/'/gm,"&#39;");}return str;};dijit._editor.getNodeHtml=function(node){var _7f8;switch(node.nodeType){case 1:var _7f9=node.nodeName.toLowerCase();if(!_7f9||_7f9.charAt(0)=="/"){return "";}_7f8="<"+_7f9;var _7fa=[];var attr;if(dojo.isIE&&node.outerHTML){var s=node.outerHTML;s=s.substr(0,s.indexOf(">")).replace(/(['"])[^"']*\1/g,"");var reg=/(\b\w+)\s?=/g;var m,key;while((m=reg.exec(s))){key=m[1];if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(node.getAttribute("_djrealurl")){_7fa.push([key,node.getAttribute("_djrealurl")]);continue;}}var val,_7fb;switch(key){case "style":val=node.style.cssText.toLowerCase();break;case "class":val=node.className;break;case "width":if(_7f9==="img"){_7fb=/width=(\S+)/i.exec(s);if(_7fb){val=_7fb[1];}break;}case "height":if(_7f9==="img"){_7fb=/height=(\S+)/i.exec(s);if(_7fb){val=_7fb[1];}break;}default:val=node.getAttribute(key);}if(val!=null){_7fa.push([key,val.toString()]);}}}}else{var i=0;while((attr=node.attributes[i++])){var n=attr.name;if(n.substr(0,3)!="_dj"){var v=attr.value;if(n=="src"||n=="href"){if(node.getAttribute("_djrealurl")){v=node.getAttribute("_djrealurl");}}_7fa.push([n,v]);}}}_7fa.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((attr=_7fa[j++])){_7f8+=" "+attr[0]+"=\""+(dojo.isString(attr[1])?dijit._editor.escapeXml(attr[1],true):attr[1])+"\"";}if(_7f9==="script"){_7f8+=">"+node.innerHTML+"</"+_7f9+">";}else{if(node.childNodes.length){_7f8+=">"+dijit._editor.getChildrenHtml(node)+"</"+_7f9+">";}else{switch(_7f9){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_7f8+=" />";break;default:_7f8+="></"+_7f9+">";}}}break;case 4:case 3:_7f8=dijit._editor.escapeXml(node.nodeValue,true);break;case 8:_7f8="<!--"+dijit._editor.escapeXml(node.nodeValue,true)+"-->";break;default:_7f8="<!-- Element not recognized - Type: "+node.nodeType+" Name: "+node.nodeName+"-->";}return _7f8;};dijit._editor.getChildrenHtml=function(dom){var out="";if(!dom){return out;}var _7fc=dom["childNodes"]||dom;var _7fd=!dojo.isIE||_7fc!==dom;var node,i=0;while((node=_7fc[i++])){if(!_7fd||node.parentNode==dom){out+=dijit._editor.getNodeHtml(node);}}return out;};}if(!dojo._hasResource["dijit._editor.RichText"]){dojo._hasResource["dijit._editor.RichText"]=true;dojo.provide("dijit._editor.RichText");if(!dojo.config["useXDomain"]||dojo.config["allowXdRichTextSave"]){if(dojo._postLoad){(function(){var _7fe=dojo.doc.createElement("textarea");_7fe.id=dijit._scopeName+"._editor.RichText.value";dojo.style(_7fe,{display:"none",position:"absolute",top:"-100px",height:"3px",width:"3px"});dojo.body().appendChild(_7fe);})();}else{try{dojo.doc.write("<textarea id=\""+dijit._scopeName+"._editor.RichText.value\" "+"style=\"display:none;position:absolute;top:-100px;left:-100px;height:3px;width:3px;overflow:hidden;\"></textarea>");}catch(e){}}}dojo.declare("dijit._editor.RichText",[dijit._Widget,dijit._CssStateMixin],{constructor:function(_7ff){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(_7ff&&dojo.isString(_7ff.value)){this.value=_7ff.value;}this.onLoadDeferred=new dojo.Deferred();},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"==this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}this.contentPreFilters=[dojo.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(dojo.isMoz){this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters);this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);}if(dojo.isWebKit){this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters);this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);}if(dojo.isIE){this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);}this.inherited(arguments);dojo.publish(dijit._scopeName+"._editor.RichText::init",[this]);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=dojo.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _800={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!dojo.isIE){_800.Z=exec("redo");}for(var key in _800){this.addKeyHandler(key,true,false,_800[key]);}},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(dijit._editor._editorCommandsLocalized){this._local2NativeFormatNames=dijit._editor._local2NativeFormatNames;this._native2LocalFormatNames=dijit._editor._native2LocalFormatNames;return;}dijit._editor._editorCommandsLocalized=true;dijit._editor._local2NativeFormatNames={};dijit._editor._native2LocalFormatNames={};this._local2NativeFormatNames=dijit._editor._local2NativeFormatNames;this._native2LocalFormatNames=dijit._editor._native2LocalFormatNames;var _801=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _802="",_803,i=0;while((_803=_801[i++])){if(_803.charAt(1)!=="l"){_802+="<"+_803+"><span>content</span></"+_803+"><br/>";}else{_802+="<"+_803+"><li>content</li></"+_803+"><br/>";}}var _804={position:"absolute",top:"0px",zIndex:10,opacity:0.01};var div=dojo.create("div",{style:_804,innerHTML:_802});dojo.body().appendChild(div);var _805=dojo.hitch(this,function(){var node=div.firstChild;while(node){try{dijit._editor.selection.selectElement(node.firstChild);var _806=node.tagName.toLowerCase();this._local2NativeFormatNames[_806]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_806]]=_806;node=node.nextSibling.nextSibling;}catch(e){}}div.parentNode.removeChild(div);div.innerHTML="";});setTimeout(_805,0);},open:function(_807){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new dojo.Deferred();}if(!this.isClosed){this.close();}dojo.publish(dijit._scopeName+"._editor.RichText::open",[this]);if(arguments.length==1&&_807.nodeName){this.domNode=_807;}var dn=this.domNode;var html;if(dojo.isString(this.value)){html=this.value;delete this.value;dn.innerHTML="";}else{if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=ta.value;dn=this.domNode=dojo.doc.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;dojo.place(dn,ta,"before");var _808=dojo.hitch(this,function(){dojo.style(ta,{display:"block",position:"absolute",top:"-1000px"});if(dojo.isIE){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(dojo.isIE){setTimeout(_808,10);}else{_808();}if(ta.form){var _809=ta.value;this.reset=function(){var _80a=this.getValue();if(_80a!=_809){this.replaceValue(_809);}};dojo.connect(ta.form,"onsubmit",this,function(){dojo.attr(ta,"disabled",this.disabled);ta.value=this.getValue();});}}else{html=dijit._editor.getChildrenHtml(dn);dn.innerHTML="";}}var _80b=dojo.contentBox(dn);this._oldHeight=_80b.h;this._oldWidth=_80b.w;this.value=html;if(dn.nodeName&&dn.nodeName=="LI"){dn.innerHTML=" <br>";}this.header=dn.ownerDocument.createElement("div");dn.appendChild(this.header);this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);this.footer=dn.ownerDocument.createElement("div");dn.appendChild(this.footer);if(!this.name){this.name=this.id+"_AUTOGEN";}if(this.name!==""&&(!dojo.config["useXDomain"]||dojo.config["allowXdRichTextSave"])){var _80c=dojo.byId(dijit._scopeName+"._editor.RichText.value");if(_80c&&_80c.value!==""){var _80d=_80c.value.split(this._SEPARATOR),i=0,dat;while((dat=_80d[i++])){var data=dat.split(this._NAME_CONTENT_SEP);if(data[0]==this.name){html=data[1];_80d=_80d.splice(i,1);_80c.value=_80d.join(this._SEPARATOR);break;}}}if(!dijit._editor._globalSaveHandler){dijit._editor._globalSaveHandler={};dojo.addOnUnload(function(){var id;for(id in dijit._editor._globalSaveHandler){var f=dijit._editor._globalSaveHandler[id];if(dojo.isFunction(f)){f();}}});}dijit._editor._globalSaveHandler[this.id]=dojo.hitch(this,"_saveContent");}this.isClosed=false;var ifr=(this.editorObject=this.iframe=dojo.doc.createElement("iframe"));ifr.id=this.id+"_iframe";this._iframeSrc=this._getIframeDocTxt();ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(dojo.isIE>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=dojo.hitch(this,function(win){this.window=win;this.document=this.window.document;if(dojo.isIE){this._localizeEditorCommands();}this.onLoad(html);});var s="javascript:parent."+dijit._scopeName+".byId(\""+this.id+"\")._iframeSrc";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(dojo.isSafari<=4){var src=ifr.getAttribute("src");if(!src||src.indexOf("javascript")==-1){setTimeout(function(){ifr.setAttribute("src",s);},0);}}if(dn.nodeName=="LI"){dn.lastChild.style.marginTop="-1.2em";}dojo.addClass(this.domNode,this.baseClass);},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var _80e=dojo.getComputedStyle(this.domNode);var html="";var _80f=true;if(dojo.isIE||dojo.isWebKit||(!this.height&&!dojo.isMoz)){html="<div id='dijitEditorBody'></div>";_80f=false;}else{if(dojo.isMoz){this._cursorToStart=true;html="&nbsp;";}}var font=[_80e.fontWeight,_80e.fontSize,_80e.fontFamily].join(" ");var _810=_80e.lineHeight;if(_810.indexOf("px")>=0){_810=parseFloat(_810)/parseFloat(_80e.fontSize);}else{if(_810.indexOf("em")>=0){_810=parseFloat(_810);}else{_810="normal";}}var _811="";var self=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(_812){_812=_812.replace(/^;/ig,"")+";";var s=_812.split(":")[0];if(s){s=dojo.trim(s);s=s.toLowerCase();var i;var sC="";for(i=0;i<s.length;i++){var c=s.charAt(i);switch(c){case "-":i++;c=s.charAt(i).toUpperCase();default:sC+=c;}}dojo.style(self.domNode,sC,"");}_811+=_812+";";});var _813=dojo.query("label[for=\""+this.id+"\"]");return [this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",(dojo.isMoz&&_813.length?"<title>"+_813[0].innerHTML+"</title>\n":""),"<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n",((dojo.isWebKit)?"\t\twidth: 100%;\n":""),((dojo.isWebKit)?"\t\theight: 100%;\n":""),"\t}\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",font,";\n",((this.height||dojo.isOpera)?"":"\t\tposition: fixed;\n"),"\t\tmin-height:",this.minHeight,";\n","\t\tline-height:",_810,";\n","\t}\n","\tp{ margin: 1em 0; }\n",(!_80f&&!this.height?"\tbody,html {overflow-y: hidden;}\n":""),"\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",(!dojo.isIE?"\tli{ min-height:1.2em; }\n":""),"</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body ",(_80f?"id='dijitEditorBody' ":""),"onload='frameElement._loadFunc(window,document)' style='"+_811+"'>",html,"</body>\n</html>"].join("");},_applyEditingAreaStyleSheets:function(){var _814=[];if(this.styleSheets){_814=this.styleSheets.split(";");this.styleSheets="";}_814=_814.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=_814[i++])){var _815=(new dojo._Url(dojo.global.location,url)).toString();this.editingAreaStyleSheets.push(_815);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_815+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)=="."||(url.charAt(0)!="/"&&!uri.host)){url=(new dojo._Url(dojo.global.location,url)).toString();}if(dojo.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);this.onLoadDeferred.addCallback(dojo.hitch(this,function(){if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _816=this.document.createElement("link");_816.rel="stylesheet";_816.type="text/css";_816.href=url;head.appendChild(_816);}}));},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)=="."||(url.charAt(0)!="/"&&!uri.host)){url=(new dojo._Url(dojo.global.location,url)).toString();}var _817=dojo.indexOf(this.editingAreaStyleSheets,url);if(_817==-1){return;}delete this.editingAreaStyleSheets[_817];dojo.withGlobal(this.window,"query",dojo,["link:[href=\""+url+"\"]"]).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(_818){_818=!!_818;this._set("disabled",_818);if(!this.isLoaded){return;}if(dojo.isIE||dojo.isWebKit||dojo.isOpera){var _819=dojo.isIE&&(this.isLoaded||!this.focusOnLoad);if(_819){this.editNode.unselectable="on";}this.editNode.contentEditable=!_818;if(_819){var _81a=this;setTimeout(function(){_81a.editNode.unselectable="off";},0);}}else{try{this.document.designMode=(_818?"off":"on");}catch(e){return;}if(!_818&&this._mozSettingProps){var ps=this._mozSettingProps;for(var n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e2){}}}}}this._disabledOK=true;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=dijit.registerIframe(this.iframe);}if(!dojo.isIE&&!dojo.isWebKit&&(this.height||dojo.isMoz)){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _81b=this;if(dojo.isIE){this.tabStop=dojo.create("div",{tabIndex:-1},this.editingArea);this.iframe.onfocus=function(){_81b.editNode.setActive();};}}this.focusNode=this.editNode;var _81c=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;dojo.forEach(_81c,function(item){this.connect(ap,item.toLowerCase(),item);},this);this.connect(ap,"onmouseup","onClick");if(dojo.isIE){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}else{this.connect(this.document,"onmousedown",function(){delete this._cursorToStart;});}if(dojo.isWebKit){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");this.connect(this.document,"onmousedown",function(e){var t=e.target;if(t&&(t===this.document.body||t===this.document)){setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0);}});}if(dojo.isIE){try{this.document.execCommand("RespectVisibilityInDesign",true,null);}catch(e){}}this.isLoaded=true;this.set("disabled",this.disabled);var _81d=dojo.hitch(this,function(){this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.callback(true);}this.onDisplayChanged();if(this.focusOnLoad){dojo.addOnLoad(dojo.hitch(this,function(){setTimeout(dojo.hitch(this,"focus"),this.updateInterval);}));}this.value=this.getValue(true);});if(this.setValueDeferred){this.setValueDeferred.addCallback(_81d);}else{_81d();}},onKeyDown:function(e){if(e.keyCode===dojo.keys.TAB&&this.isTabIndent){dojo.stopEvent(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(dojo.isIE){if(e.keyCode==dojo.keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===dojo.keys.BACKSPACE&&this.document.selection.type==="Control"){dojo.stopEvent(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}return true;},onKeyUp:function(e){return;},setDisabled:function(_81e){dojo.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.set("disabled",_81e);},_setValueAttr:function(_81f){this.setValue(_81f);},_setDisableSpellCheckAttr:function(_820){if(this.document){dojo.attr(this.document.body,"spellcheck",!_820);}else{this.onLoadDeferred.addCallback(dojo.hitch(this,function(){dojo.attr(this.document.body,"spellcheck",!_820);}));}this._set("disableSpellCheck",_820);},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode,_821=this._keyHandlers[c],args=arguments;if(_821&&!e.altKey){dojo.some(_821,function(h){if(!(h.shift^e.shiftKey)&&!(h.ctrl^(e.ctrlKey||e.metaKey))){if(!h.handler.apply(this,args)){e.preventDefault();}return true;}},this);}if(!this._onKeyHitch){this._onKeyHitch=dojo.hitch(this,"onKeyPressed");}setTimeout(this._onKeyHitch,1);return true;},addKeyHandler:function(key,ctrl,_822,_823){if(!dojo.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:_822||false,ctrl:ctrl||false,handler:_823});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(e){if(!this._focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _824=this.getValue(true);if(_824!=this.value){this.onChange(_824);}this._set("value",_824);},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.set("disabled",false);}this.inherited(arguments);}},blur:function(){if(!dojo.isIE&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(dojo.doc.body.focus){dojo.doc.body.focus();}}},focus:function(){if(!this.isLoaded){this.focusOnLoad=true;return;}if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();return;}}if(!dojo.isIE){dijit.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(e){if(this._updateTimer){clearTimeout(this._updateTimer);}if(!this._updateHandler){this._updateHandler=dojo.hitch(this,"onNormalizedDisplayChanged");}this._updateTimer=setTimeout(this._updateHandler,this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(_825){},_normalizeCommand:function(cmd,_826){var _827=cmd.toLowerCase();if(_827=="formatblock"){if(dojo.isSafari&&_826===undefined){_827="heading";}}else{if(_827=="hilitecolor"&&!dojo.isMoz){_827="backcolor";}}return _827;},_qcaCache:{},queryCommandAvailable:function(_828){var ca=this._qcaCache[_828];if(ca!==undefined){return ca;}return (this._qcaCache[_828]=this._queryCommandAvailable(_828));},_queryCommandAvailable:function(_829){var ie=1;var _82a=1<<1;var _82b=1<<2;var _82c=1<<3;function _82d(_82e){return {ie:Boolean(_82e&ie),mozilla:Boolean(_82e&_82a),webkit:Boolean(_82e&_82b),opera:Boolean(_82e&_82c)};};var _82f=null;switch(_829.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_82f=_82d(_82a|ie|_82b|_82c);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_82f=_82d(_82a|ie|_82c|_82b);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_82f=_82d(ie);break;case "cut":case "copy":case "paste":_82f=_82d(ie|_82a|_82b);break;case "inserttable":_82f=_82d(_82a|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_82f=_82d(ie|_82a);break;default:return false;}return (dojo.isIE&&_82f.ie)||(dojo.isMoz&&_82f.mozilla)||(dojo.isWebKit&&_82f.webkit)||(dojo.isOpera&&_82f.opera);},execCommand:function(_830,_831){var _832;this.focus();_830=this._normalizeCommand(_830,_831);if(_831!==undefined){if(_830=="heading"){throw new Error("unimplemented");}else{if((_830=="formatblock")&&dojo.isIE){_831="<"+_831+">";}}}var _833="_"+_830+"Impl";if(this[_833]){_832=this[_833](_831);}else{_831=arguments.length>1?_831:null;if(_831||_830!="createlink"){_832=this.document.execCommand(_830,false,_831);}}this.onDisplayChanged();return _832;},queryCommandEnabled:function(_834){if(this.disabled||!this._disabledOK){return false;}_834=this._normalizeCommand(_834);if(dojo.isMoz||dojo.isWebKit){if(_834=="unlink"){return this._sCall("hasAncestorElement",["a"]);}else{if(_834=="inserttable"){return true;}}}if(dojo.isWebKit){if(_834=="cut"||_834=="copy"){var sel=this.window.getSelection();if(sel){sel=sel.toString();}return !!sel;}else{if(_834=="paste"){return true;}}}var elem=dojo.isIE?this.document.selection.createRange():this.document;try{return elem.queryCommandEnabled(_834);}catch(e){return false;}},queryCommandState:function(_835){if(this.disabled||!this._disabledOK){return false;}_835=this._normalizeCommand(_835);try{return this.document.queryCommandState(_835);}catch(e){return false;}},queryCommandValue:function(_836){if(this.disabled||!this._disabledOK){return false;}var r;_836=this._normalizeCommand(_836);if(dojo.isIE&&_836=="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_836)];}else{if(dojo.isMoz&&_836==="hilitecolor"){var _837;try{_837=this.document.queryCommandValue("styleWithCSS");}catch(e){_837=false;}this.document.execCommand("styleWithCSS",false,true);r=this.document.queryCommandValue(_836);this.document.execCommand("styleWithCSS",false,_837);}else{r=this.document.queryCommandValue(_836);}}return r;},_sCall:function(name,args){return dojo.withGlobal(this.window,name,dijit._editor.selection,args);},placeCursorAtStart:function(){this.focus();var _838=false;if(dojo.isMoz){var _839=this.editNode.firstChild;while(_839){if(_839.nodeType==3){if(_839.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_838=true;this._sCall("selectElement",[_839]);break;}}else{if(_839.nodeType==1){_838=true;var tg=_839.tagName?_839.tagName.toLowerCase():"";if(/br|input|img|base|meta|area|basefont|hr|link/.test(tg)){this._sCall("selectElement",[_839]);}else{this._sCall("selectElementChildren",[_839]);}break;}}_839=_839.nextSibling;}}else{_838=true;this._sCall("selectElementChildren",[this.editNode]);}if(_838){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _83a=false;if(dojo.isMoz){var last=this.editNode.lastChild;while(last){if(last.nodeType==3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_83a=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType==1){_83a=true;if(last.lastChild){this._sCall("selectElement",[last.lastChild]);}else{this._sCall("selectElement",[last]);}break;}}last=last.previousSibling;}}else{_83a=true;this._sCall("selectElementChildren",[this.editNode]);}if(_83a){this._sCall("collapse",[false]);}},getValue:function(_83b){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_83b);},_getValueAttr:function(){return this.getValue(true);},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.addCallback(dojo.hitch(this,function(){this.setValue(html);}));return;}this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;if(html&&dojo.isMoz&&html.toLowerCase()=="<p></p>"){html="<p>&nbsp;</p>";}if(!html&&dojo.isWebKit){html="&nbsp;";}node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();this._set("value",this.getValue(true));},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!dojo.isMoz){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(!html){this._cursorToStart=true;html="&nbsp;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}this._set("value",this.getValue(true));},_preFilterContent:function(html){var ec=html;dojo.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;dojo.forEach(this.contentDomPreFilters,function(ef){if(ef&&dojo.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_83c){var ec;if(!dojo.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_83c){dom=dojo.clone(dom);}dojo.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=dijit._editor.getChildrenHtml(dom);}else{ec=dom;}if(!dojo.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}dojo.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(e){var _83d=dojo.byId(dijit._scopeName+"._editor.RichText.value");if(_83d.value){_83d.value+=this._SEPARATOR;}_83d.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(true);},escapeXml:function(str,_83e){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_83e){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){dojo.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit._editor.getNodeHtml instead",2);return dijit._editor.getNodeHtml(node);},getNodeChildrenHtml:function(dom){dojo.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit._editor.getChildrenHtml instead",2);return dijit._editor.getChildrenHtml(dom);},close:function(save){if(this.isClosed){return;}if(!arguments.length){save=true;}if(save){this._set("value",this.getValue(true));}if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(dojo.isIE){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this._iframeRegHandle){dijit.unregisterIframe(this._iframeRegHandle);delete this._iframeRegHandle;}if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(dojo.isIE){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=this.value;dojo.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=this.value;}delete this.iframe;dojo.removeClass(this.domNode,this.baseClass);this.isClosed=true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;},destroy:function(){if(!this.isClosed){this.close(false);}this.inherited(arguments);if(dijit._editor._globalSaveHandler){delete dijit._editor._globalSaveHandler[this.id];}},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"");},_removeWebkitBogus:function(html){html=html.replace(/\sclass="webkit-block-placeholder"/gi,"");html=html.replace(/\sclass="apple-style-span"/gi,"");html=html.replace(/<meta charset=\"utf-8\" \/>/gi,"");return html;},_normalizeFontStyle:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");},_inserthorizontalruleImpl:function(_83f){if(dojo.isIE){return this._inserthtmlImpl("<hr>");}return this.document.execCommand("inserthorizontalrule",false,_83f);},_unlinkImpl:function(_840){if((this.queryCommandEnabled("unlink"))&&(dojo.isMoz||dojo.isWebKit)){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);return this.document.execCommand("unlink",false,null);}return this.document.execCommand("unlink",false,_840);},_hilitecolorImpl:function(_841){var _842;if(dojo.isMoz){this.document.execCommand("styleWithCSS",false,true);_842=this.document.execCommand("hilitecolor",false,_841);this.document.execCommand("styleWithCSS",false,false);}else{_842=this.document.execCommand("hilitecolor",false,_841);}return _842;},_backcolorImpl:function(_843){if(dojo.isIE){_843=_843?_843:null;}return this.document.execCommand("backcolor",false,_843);},_forecolorImpl:function(_844){if(dojo.isIE){_844=_844?_844:null;}return this.document.execCommand("forecolor",false,_844);},_inserthtmlImpl:function(_845){_845=this._preFilterContent(_845);var rv=true;var _846=window.navigator.userAgent;if(dojo.isIE){var _847=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()=="CONTROL"){var n=_847.item(0);while(_847.length){_847.remove(_847.item(0));}n.outerHTML=_845;}else{_847.pasteHTML(_845);}_847.select();}else{if(_846.indexOf("Trident/")!=-1){var sel,_848,_849;sel=this.document.getSelection();_848=sel.getRangeAt(0);_849=_848.createContextualFragment(_845);_848.insertNode(_849);sel.removeAllRanges();sel.addRange(_848);sel.collapseToEnd();}else{if(dojo.isMoz&&!_845.length){this._sCall("remove");}else{rv=this.document.execCommand("inserthtml",false,_845);}}}return rv;},_boldImpl:function(_84a){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("bold",false,_84a);},_italicImpl:function(_84b){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("italic",false,_84b);},_underlineImpl:function(_84c){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("underline",false,_84c);},_strikethroughImpl:function(_84d){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("strikethrough",false,_84d);},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header);},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer);},_getNodeChildrenHeight:function(node){var h=0;if(node&&node.childNodes){var i;for(i=0;i<node.childNodes.length;i++){var size=dojo.position(node.childNodes[i]);h+=size.h;}}return h;},_isNodeEmpty:function(node,_84e){if(node.nodeType==1){if(node.childNodes.length>0){return this._isNodeEmpty(node.childNodes[0],_84e);}return true;}else{if(node.nodeType==3){return (node.nodeValue.substring(_84e)=="");}}return false;},_removeStartingRangeFromRange:function(node,_84f){if(node.nextSibling){_84f.setStart(node.nextSibling,0);}else{var _850=node.parentNode;while(_850&&_850.nextSibling==null){_850=_850.parentNode;}if(_850){_84f.setStart(_850.nextSibling,0);}}return _84f;},_adaptIESelection:function(){var _851=dijit.range.getSelection(this.window);if(_851&&_851.rangeCount&&!_851.isCollapsed){var _852=_851.getRangeAt(0);var _853=_852.startContainer;var _854=_852.startOffset;while(_853.nodeType==3&&_854>=_853.length&&_853.nextSibling){_854=_854-_853.length;_853=_853.nextSibling;}var _855=null;while(this._isNodeEmpty(_853,_854)&&_853!=_855){_855=_853;_852=this._removeStartingRangeFromRange(_853,_852);_853=_852.startContainer;_854=0;}_851.removeAllRanges();_851.addRange(_852);}}});}if(!dojo._hasResource["dijit.ToolbarSeparator"]){dojo._hasResource["dijit.ToolbarSeparator"]=true;dojo.provide("dijit.ToolbarSeparator");dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Toolbar"]){dojo._hasResource["dijit.Toolbar"]=true;dojo.provide("dijit.Toolbar");dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" dojoAttachPoint=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:[dojo.keys.LEFT_ARROW]);},startup:function(){if(this._started){return;}this.startupKeyNavChildren();this.inherited(arguments);}});}if(!dojo._hasResource["dijit._editor._Plugin"]){dojo._hasResource["dijit._editor._Plugin"]=true;dojo.provide("dijit._editor._Plugin");dojo.declare("dijit._editor._Plugin",null,{constructor:function(args,node){this.params=args||{};dojo.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:dijit.form.Button,disabled:false,getLabel:function(key){return this.editor.commands[key];},_initButton:function(){if(this.command.length){var _856=this.getLabel(this.command),_857=this.editor,_858=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var _859=dojo.mixin({label:_856,dir:_857.dir,lang:_857.lang,showLabel:false,iconClass:_858,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(_859);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(dojo.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_85a,_85b;if(!e||!e.isLoaded||!c.length){return;}var _85c=this.get("disabled");if(this.button){try{_85b=!_85c&&e.queryCommandEnabled(c);if(this.enabled!==_85b){this.enabled=_85b;this.button.set("disabled",!_85b);}if(typeof this.button.checked=="boolean"){_85a=e.queryCommandState(c);if(this.checked!==_85a){this.checked=_85a;this.button.set("checked",e.queryCommandState(c));}}}catch(e){}}},setEditor:function(_85d){this.editor=_85d;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",dojo.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_85e){if(this.button){_85e.addChild(this.button);}},set:function(name,_85f){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _860=this._getAttrNames(name);if(this[_860.s]){var _861=this[_860.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(name,_85f);}return _861||this;},get:function(name){var _862=this._getAttrNames(name);return this[_862.g]?this[_862.g]():this[name];},_setDisabledAttr:function(_863){this.disabled=_863;this.updateState();},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_864){var _865=this[name];this[name]=_864;}});}if(!dojo._hasResource["dojox.editor.plugins.ToolbarLineBreak"]){dojo._hasResource["dojox.editor.plugins.ToolbarLineBreak"]=true;dojo.provide("dojox.editor.plugins.ToolbarLineBreak");dojo.declare("dojox.editor.plugins.ToolbarLineBreak",[dijit._Widget,dijit._Templated],{templateString:"<span class='dijit dijitReset'><br></span>",postCreate:function(){dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}var name=o.args.name.toLowerCase();if(name==="||"||name==="toolbarlinebreak"){o.plugin=new dijit._editor._Plugin({button:new dojox.editor.plugins.ToolbarLineBreak(),setEditor:function(_866){this.editor=_866;}});}});}if(!dojo._hasResource["dijit._editor.plugins.FontChoice"]){dojo._hasResource["dijit._editor.plugins.FontChoice"]=true;dojo.provide("dijit._editor.plugins.FontChoice");dojo.declare("dijit._editor.plugins._FontDropDown",[dijit._Widget,dijit._Templated],{label:"",widgetsInTemplate:true,plainText:false,templateString:"<span style='white-space: nowrap' class='dijit dijitReset dijitInline'>"+"<label class='dijitLeft dijitInline' for='${selectId}'>${label}</label>"+"<input dojoType='dijit.form.FilteringSelect' required='false' labelType='html' labelAttr='label' searchAttr='name' "+"tabIndex='-1' id='${selectId}' dojoAttachPoint='select' value=''/>"+"</span>",postMixInProperties:function(){this.inherited(arguments);this.strings=dojo.i18n.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments);},postCreate:function(){var _867=dojo.map(this.values,function(_868){var name=this.strings[_868]||_868;return {label:this.getLabel(_868,name),name:name,value:_868};},this);this.select.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",items:_867}});this.select.set("value","",false);this.disabled=this.select.get("disabled");},_setValueAttr:function(_869,_86a){_86a=_86a!==false?true:false;this.select.set("value",dojo.indexOf(this.values,_869)<0?"":_869,_86a);if(!_86a){this.select._lastValueReported=null;}},_getValueAttr:function(){return this.select.get("value");},focus:function(){this.select.focus();},_setDisabledAttr:function(_86b){this.disabled=_86b;this.select.set("disabled",_86b);}});dojo.declare("dijit._editor.plugins._FontNameDropDown",dijit._editor.plugins._FontDropDown,{generic:false,command:"fontName",postMixInProperties:function(){if(!this.values){this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"];}this.inherited(arguments);},getLabel:function(_86c,name){if(this.plainText){return name;}else{return "<div style='font-family: "+_86c+"'>"+name+"</div>";}},_setValueAttr:function(_86d,_86e){_86e=_86e!==false?true:false;if(this.generic){var map={"Arial":"sans-serif","Helvetica":"sans-serif","Myriad":"sans-serif","Times":"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive","Courier":"monospace","Courier New":"monospace","Papyrus":"fantasy"};_86d=map[_86d]||_86d;}if(_86d.indexOf("Arial")!==-1){_86d="Arial";}this.inherited(arguments,[_86d,_86e]);}});dojo.declare("dijit._editor.plugins._FontSizeDropDown",dijit._editor.plugins._FontDropDown,{command:"fontSize",values:[1,2,3,4,5,6,7],getLabel:function(_86f,name){if(this.plainText){return name;}else{return "<font size="+_86f+"'>"+name+"</font>";}},_setValueAttr:function(_870,_871){_871=_871!==false?true:false;if(_870.indexOf&&_870.indexOf("px")!=-1){var _872=parseInt(_870,10);_870={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[_872]||_870;}this.inherited(arguments,[_870,_871]);}});dojo.declare("dijit._editor.plugins._FormatBlockDropDown",dijit._editor.plugins._FontDropDown,{command:"formatBlock",values:["noFormat","p","h1","h2","h3","pre"],postCreate:function(){this.inherited(arguments);this.set("value","noFormat",false);},getLabel:function(_873,name){if(this.plainText||_873=="noFormat"){return name;}else{return "<"+_873+">"+name+"</"+_873+">";}},_execCommand:function(_874,_875,_876){if(_876==="noFormat"){var _877;var end;var sel=dijit.range.getSelection(_874.window);if(sel&&sel.rangeCount>0){var _878=sel.getRangeAt(0);var node,tag;if(_878){_877=_878.startContainer;end=_878.endContainer;while(_877&&_877!==_874.editNode&&_877!==_874.document.body&&_877.nodeType!==1){_877=_877.parentNode;}while(end&&end!==_874.editNode&&end!==_874.document.body&&end.nodeType!==1){end=end.parentNode;}var _879=dojo.hitch(this,function(node,_87a){if(node.childNodes&&node.childNodes.length){var i;for(i=0;i<node.childNodes.length;i++){var c=node.childNodes[i];if(c.nodeType==1){if(dojo.withGlobal(_874.window,"inSelection",dijit._editor.selection,[c])){var tag=c.tagName?c.tagName.toLowerCase():"";if(dojo.indexOf(this.values,tag)!==-1){_87a.push(c);}_879(c,_87a);}}}}});var _87b=dojo.hitch(this,function(_87c){if(_87c&&_87c.length){_874.beginEditing();while(_87c.length){this._removeFormat(_874,_87c.pop());}_874.endEditing();}});var _87d=[];if(_877==end){var _87e;node=_877;while(node&&node!==_874.editNode&&node!==_874.document.body){if(node.nodeType==1){tag=node.tagName?node.tagName.toLowerCase():"";if(dojo.indexOf(this.values,tag)!==-1){_87e=node;break;}}node=node.parentNode;}_879(_877,_87d);if(_87e){_87d=[_87e].concat(_87d);}_87b(_87d);}else{node=_877;while(dojo.withGlobal(_874.window,"inSelection",dijit._editor.selection,[node])){if(node.nodeType==1){tag=node.tagName?node.tagName.toLowerCase():"";if(dojo.indexOf(this.values,tag)!==-1){_87d.push(node);}_879(node,_87d);}node=node.nextSibling;}_87b(_87d);}_874.onDisplayChanged();}}}else{_874.execCommand(_875,_876);}},_removeFormat:function(_87f,node){if(_87f.customUndo){while(node.firstChild){dojo.place(node.firstChild,node,"before");}node.parentNode.removeChild(node);}else{dojo.withGlobal(_87f.window,"selectElementChildren",dijit._editor.selection,[node]);var html=dojo.withGlobal(_87f.window,"getSelectedHtml",dijit._editor.selection,[null]);dojo.withGlobal(_87f.window,"selectElement",dijit._editor.selection,[node]);_87f.execCommand("inserthtml",html||"");}}});dojo.declare("dijit._editor.plugins.FontChoice",dijit._editor._Plugin,{useDefaultCommand:false,_initButton:function(){var _880={fontName:dijit._editor.plugins._FontNameDropDown,fontSize:dijit._editor.plugins._FontSizeDropDown,formatBlock:dijit._editor.plugins._FormatBlockDropDown}[this.command],_881=this.params;if(this.params.custom){_881.values=this.params.custom;}var _882=this.editor;this.button=new _880(dojo.delegate({dir:_882.dir,lang:_882.lang},_881));this.connect(this.button.select,"onChange",function(_883){this.editor.focus();if(this.command=="fontName"&&_883.indexOf(" ")!=-1){_883="'"+_883+"'";}if(this.button._execCommand){this.button._execCommand(this.editor,this.command,_883);}else{this.editor.execCommand(this.command,_883);}});},updateState:function(){var _884=this.editor;var _885=this.command;if(!_884||!_884.isLoaded||!_885.length){return;}if(this.button){var _886=this.get("disabled");this.button.set("disabled",_886);if(_886){return;}var _887;try{_887=_884.queryCommandValue(_885)||"";}catch(e){_887="";}var _888=dojo.isString(_887)&&(_887.match(/'([^']*)'/)||_887.match(/"([^"]*)"/));if(_888){_887=_888[1];}if(_885==="formatBlock"){if(!_887||_887=="p"){_887=null;var elem;var sel=dijit.range.getSelection(this.editor.window);if(sel&&sel.rangeCount>0){var _889=sel.getRangeAt(0);if(_889){elem=_889.endContainer;}}while(elem&&elem!==_884.editNode&&elem!==_884.document){var tg=elem.tagName?elem.tagName.toLowerCase():"";if(tg&&dojo.indexOf(this.button.values,tg)>-1){_887=tg;break;}elem=elem.parentNode;}if(!_887){_887="noFormat";}}else{if(dojo.indexOf(this.button.values,_887)<0){_887="noFormat";}}}if(_887!==""&&_887!==this.button.get("value")){this.button.set("value",_887,false);}}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}switch(o.args.name){case "fontName":case "fontSize":case "formatBlock":o.plugin=new dijit._editor.plugins.FontChoice({command:o.args.name,plainText:o.args.plainText?o.args.plainText:false});}});}if(!dojo._hasResource["dojo.colors"]){dojo._hasResource["dojo.colors"]=true;dojo.provide("dojo.colors");dojo.getObject("colors",true,dojo);(function(){var _88a=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=function(_88b,obj){var m=_88b.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=dojo.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return dojo.colorFromArray(a,obj);}return dojo.colorFromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_88a(m1,m2,H+1/3)*256,_88a(m1,m2,H)*256,_88a(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return dojo.colorFromArray(a,obj);}}return null;};var _88c=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};dojo.Color.prototype.sanitize=function(){var t=this;t.r=Math.round(_88c(t.r,0,255));t.g=Math.round(_88c(t.g,0,255));t.b=Math.round(_88c(t.b,0,255));t.a=_88c(t.a,0,1);return this;};})();dojo.colors.makeGrey=function(g,a){return dojo.colorFromArray([g,g,g,a]);};dojo.mixin(dojo.Color.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],transparent:[0,0,0,0],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});}if(!dojo._hasResource["dijit._PaletteMixin"]){dojo._hasResource["dijit._PaletteMixin"]=true;dojo.provide("dijit._PaletteMixin");dojo.declare("dijit._PaletteMixin",[dijit._CssStateMixin],{defaultTimeout:500,timeoutChangeRate:0.9,value:null,_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:"",_preparePalette:function(_88d,_88e,_88f){this._cells=[];var url=this._blankGif;_88f=_88f||dojo.getObject(this.dyeClass);for(var row=0;row<_88d.length;row++){var _890=dojo.create("tr",{tabIndex:"-1"},this.gridNode);for(var col=0;col<_88d[row].length;col++){var _891=_88d[row][col];if(_891){var _892=new _88f(_891,row,col);var _893=dojo.create("td",{"class":this.cellClass,tabIndex:"-1",title:_88e[_891]});_892.fillCell(_893,url);this.connect(_893,"ondijitclick","_onCellClick");this._trackMouseState(_893,this.cellClass);dojo.place(_893,_890);_893.index=this._cells.length;this._cells.push({node:_893,dye:_892});}}}this._xDim=_88d[0].length;this._yDim=_88d.length;var _894={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1};for(var key in _894){this._connects.push(dijit.typematic.addKeyListener(this.domNode,{charOrCode:dojo.keys[key],ctrlKey:false,altKey:false,shiftKey:false},this,function(){var _895=_894[key];return function(_896){this._navigateByKey(_895,_896);};}(),this.timeoutChangeRate,this.defaultTimeout));}},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node);},focus:function(){dijit.focus(this._currentFocus);},_onCellClick:function(evt){var _897=evt.currentTarget,_898=this._getDye(_897).getValue();this._setCurrent(_897);setTimeout(dojo.hitch(this,function(){dijit.focus(_897);this._setValueAttr(_898,true);}));dojo.removeClass(_897,"dijitPaletteCellHover");dojo.stopEvent(evt);},_setCurrent:function(node){if("_currentFocus" in this){dojo.attr(this._currentFocus,"tabIndex","-1");}this._currentFocus=node;if(node){dojo.attr(node,"tabIndex",this.tabIndex);}},_setValueAttr:function(_899,_89a){if(this._selectedCell>=0){dojo.removeClass(this._cells[this._selectedCell].node,"dijitPaletteCellSelected");}this._selectedCell=-1;if(_899){for(var i=0;i<this._cells.length;i++){if(_899==this._cells[i].dye.getValue()){this._selectedCell=i;dojo.addClass(this._cells[i].node,"dijitPaletteCellSelected");break;}}}this._set("value",this._selectedCell>=0?_899:null);if(_89a||_89a===undefined){this.onChange(_899);}},onChange:function(_89b){},_navigateByKey:function(_89c,_89d){if(_89d==-1){return;}var _89e=this._currentFocus.index+_89c;if(_89e<this._cells.length&&_89e>-1){var _89f=this._cells[_89e].node;this._setCurrent(_89f);setTimeout(dojo.hitch(dijit,"focus",_89f),0);}},_getDye:function(cell){return this._cells[cell.index].dye;}});}if(!dojo._hasResource["dijit.ColorPalette"]){dojo._hasResource["dijit.ColorPalette"]=true;dojo.provide("dijit.ColorPalette");dojo.declare("dijit.ColorPalette",[dijit._Widget,dijit._Templated,dijit._PaletteMixin],{palette:"7x10",_palettes:{"7x10":[["white","seashell","cornsilk","lemonchiffon","lightyellow","palegreen","paleturquoise","lightcyan","lavender","plum"],["lightgray","pink","bisque","moccasin","khaki","lightgreen","lightseagreen","lightskyblue","cornflowerblue","violet"],["silver","lightcoral","sandybrown","orange","palegoldenrod","chartreuse","mediumturquoise","skyblue","mediumslateblue","orchid"],["gray","red","orangered","darkorange","yellow","limegreen","darkseagreen","royalblue","slateblue","mediumorchid"],["dimgray","crimson","chocolate","coral","gold","forestgreen","seagreen","blue","blueviolet","darkorchid"],["darkslategray","firebrick","saddlebrown","sienna","olive","green","darkcyan","mediumblue","darkslateblue","darkmagenta"],["black","darkred","maroon","brown","darkolivegreen","darkgreen","midnightblue","navy","indigo","purple"]],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:dojo.cache("dijit","templates/ColorPalette.html","<div class=\"dijitInline dijitColorPalette\">\n\t<table class=\"dijitPaletteTable\" cellSpacing=\"0\" cellPadding=\"0\">\n\t\t<tbody dojoAttachPoint=\"gridNode\"></tbody>\n\t</table>\n</div>\n"),baseClass:"dijitColorPalette",buildRendering:function(){this.inherited(arguments);this._preparePalette(this._palettes[this.palette],dojo.i18n.getLocalization("dojo","colors",this.lang),dojo.declare(dijit._Color,{hc:dojo.hasClass(dojo.body(),"dijit_a11y"),palette:this.palette}));}});dojo.declare("dijit._Color",dojo.Color,{template:"<span class='dijitInline dijitPaletteImg'>"+"<img src='${blankGif}' alt='${alt}' class='dijitColorPaletteSwatch' style='background-color: ${color}'/>"+"</span>",hcTemplate:"<span class='dijitInline dijitPaletteImg' style='position: relative; overflow: hidden; height: 12px; width: 14px;'>"+"<img src='${image}' alt='${alt}' style='position: absolute; left: ${left}px; top: ${top}px; ${size}'/>"+"</span>",_imagePaths:{"7x10":dojo.moduleUrl("dijit.themes","a11y/colors7x10.png"),"3x4":dojo.moduleUrl("dijit.themes","a11y/colors3x4.png")},constructor:function(_8a0,row,col){this._alias=_8a0;this._row=row;this._col=col;this.setColor(dojo.Color.named[_8a0]);},getValue:function(){return this.toHex();},fillCell:function(cell,_8a1){var html=dojo.string.substitute(this.hc?this.hcTemplate:this.template,{color:this.toHex(),blankGif:_8a1,alt:this._alias,image:this._imagePaths[this.palette].toString(),left:this._col*-20-5,top:this._row*-20-5,size:this.palette=="7x10"?"height: 145px; width: 206px":"height: 64px; width: 86px"});dojo.place(html,cell);}});}if(!dojo._hasResource["dijit._editor.plugins.TextColor"]){dojo._hasResource["dijit._editor.plugins.TextColor"]=true;dojo.provide("dijit._editor.plugins.TextColor");dojo.declare("dijit._editor.plugins.TextColor",dijit._editor._Plugin,{buttonClass:dijit.form.DropDownButton,useDefaultCommand:false,constructor:function(){this.dropDown=new dijit.ColorPalette();this.connect(this.dropDown,"onChange",function(_8a2){this.editor.execCommand(this.command,_8a2);});},updateState:function(){var _8a3=this.editor;var _8a4=this.command;if(!_8a3||!_8a3.isLoaded||!_8a4.length){return;}if(this.button){var _8a5=this.get("disabled");this.button.set("disabled",_8a5);if(_8a5){return;}var _8a6;try{_8a6=_8a3.queryCommandValue(_8a4)||"";}catch(e){_8a6="";}}if(_8a6==""){_8a6="#000000";}if(_8a6=="transparent"){_8a6="#ffffff";}if(typeof _8a6=="string"){if(_8a6.indexOf("rgb")>-1){_8a6=dojo.colorFromRgb(_8a6).toHex();}}else{_8a6=((_8a6&255)<<16)|(_8a6&65280)|((_8a6&16711680)>>>16);_8a6=_8a6.toString(16);_8a6="#000000".slice(0,7-_8a6.length)+_8a6;}if(_8a6!==this.dropDown.get("value")){this.dropDown.set("value",_8a6,false);}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}switch(o.args.name){case "foreColor":case "hiliteColor":o.plugin=new dijit._editor.plugins.TextColor({command:o.args.name});}});}if(!dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]){dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]=true;dojo.provide("dijit._editor.plugins.EnterKeyHandling");dojo.declare("dijit._editor.plugins.EnterKeyHandling",dijit._editor._Plugin,{blockNodeForEnter:"BR",constructor:function(args){if(args){if("blockNodeForEnter" in args){args.blockNodeForEnter=args.blockNodeForEnter.toUpperCase();}dojo.mixin(this,args);}},setEditor:function(_8a7){if(this.editor===_8a7){return;}this.editor=_8a7;if(this.blockNodeForEnter=="BR"){this.editor.customUndo=true;_8a7.onLoadDeferred.addCallback(dojo.hitch(this,function(d){this.connect(_8a7.document,"onkeypress",function(e){if(e.charOrCode==dojo.keys.ENTER){var ne=dojo.mixin({},e);ne.shiftKey=true;if(!this.handleEnterKey(ne)){dojo.stopEvent(e);}}});return d;}));}else{if(this.blockNodeForEnter){var h=dojo.hitch(this,this.handleEnterKey);_8a7.addKeyHandler(13,0,0,h);_8a7.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},onKeyPressed:function(e){if(this._checkListLater){if(dojo.withGlobal(this.editor.window,"isCollapsed",dijit)){var _8a8=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,["LI"]);if(!_8a8){dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var _8a9=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]);if(_8a9){_8a9.innerHTML=this.bogusHtmlContent;if(dojo.isIE){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{console.error("onKeyPressed: Cannot find the new block node");}}else{if(dojo.isMoz){if(_8a8.parentNode.parentNode.nodeName=="LI"){_8a8=_8a8.parentNode.parentNode;}}var fc=_8a8.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_8a8.insertBefore(fc.ownerDocument.createTextNode(""),fc);var _8aa=dijit.range.create(this.editor.window);_8aa.setStart(_8a8.firstChild,0);var _8ab=dijit.range.getSelection(this.editor.window,true);_8ab.removeAllRanges();_8ab.addRange(_8aa);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&nbsp;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var _8ac,_8ad,_8ae,_8af,_8b0,_8b1,doc=this.editor.document,br,rs,txt;if(e.shiftKey){var _8b2=dojo.withGlobal(this.editor.window,"getParentElement",dijit._editor.selection);var _8b3=dijit.range.getAncestor(_8b2,this.blockNodes);if(_8b3){if(_8b3.tagName=="LI"){return true;}_8ac=dijit.range.getSelection(this.editor.window);_8ad=_8ac.getRangeAt(0);if(!_8ad.collapsed){_8ad.deleteContents();_8ac=dijit.range.getSelection(this.editor.window);_8ad=_8ac.getRangeAt(0);}if(dijit.range.atBeginningOfContainer(_8b3,_8ad.startContainer,_8ad.startOffset)){br=doc.createElement("br");_8ae=dijit.range.create(this.editor.window);_8b3.insertBefore(br,_8b3.firstChild);_8ae.setStartBefore(br.nextSibling);_8ac.removeAllRanges();_8ac.addRange(_8ae);}else{if(dijit.range.atEndOfContainer(_8b3,_8ad.startContainer,_8ad.startOffset)){_8ae=dijit.range.create(this.editor.window);br=doc.createElement("br");_8b3.appendChild(br);_8b3.appendChild(doc.createTextNode(""));_8ae.setStart(_8b3.lastChild,0);_8ac.removeAllRanges();_8ac.addRange(_8ae);}else{rs=_8ad.startContainer;if(rs&&rs.nodeType==3){txt=rs.nodeValue;dojo.withGlobal(this.editor.window,function(){_8af=doc.createTextNode(txt.substring(0,_8ad.startOffset));_8b0=doc.createTextNode(txt.substring(_8ad.startOffset));_8b1=doc.createElement("br");if(_8b0.nodeValue==""&&dojo.isWebKit){_8b0=doc.createTextNode("");}dojo.place(_8af,rs,"after");dojo.place(_8b1,_8af,"after");dojo.place(_8b0,_8b1,"after");dojo.destroy(rs);_8ae=dijit.range.create(dojo.gobal);_8ae.setStart(_8b0,0);_8ac.removeAllRanges();_8ac.addRange(_8ae);});return false;}return true;}}}else{_8ac=dijit.range.getSelection(this.editor.window);if(_8ac.rangeCount){_8ad=_8ac.getRangeAt(0);if(_8ad&&_8ad.startContainer){if(!_8ad.collapsed){_8ad.deleteContents();_8ac=dijit.range.getSelection(this.editor.window);_8ad=_8ac.getRangeAt(0);}rs=_8ad.startContainer;if(rs&&rs.nodeType==3){dojo.withGlobal(this.editor.window,dojo.hitch(this,function(){var _8b4=false;var _8b5=_8ad.startOffset;if(rs.length<_8b5){ret=this._adjustNodeAndOffset(rs,_8b5);rs=ret.node;_8b5=ret.offset;}txt=rs.nodeValue;_8af=doc.createTextNode(txt.substring(0,_8b5));_8b0=doc.createTextNode(txt.substring(_8b5));_8b1=doc.createElement("br");if(!_8b0.length){_8b0=doc.createTextNode("");_8b4=true;}if(_8af.length){dojo.place(_8af,rs,"after");}else{_8af=rs;}dojo.place(_8b1,_8af,"after");dojo.place(_8b0,_8b1,"after");dojo.destroy(rs);_8ae=dijit.range.create(dojo.gobal);_8ae.setStart(_8b0,0);_8ae.setEnd(_8b0,_8b0.length);_8ac.removeAllRanges();_8ac.addRange(_8ae);if(_8b4&&!dojo.isWebKit){dijit._editor.selection.remove();}else{dijit._editor.selection.collapse(true);}}));}else{dojo.withGlobal(this.editor.window,dojo.hitch(this,function(){var _8b6=doc.createElement("br");rs.appendChild(_8b6);var _8b7=doc.createTextNode("");rs.appendChild(_8b7);_8ae=dijit.range.create(dojo.global);_8ae.setStart(_8b7,0);_8ae.setEnd(_8b7,_8b7.length);_8ac.removeAllRanges();_8ac.addRange(_8ae);dijit._editor.selection.collapse(true);}));}}}else{dijit._editor.RichText.prototype.execCommand.call(this.editor,"inserthtml","<br>");}}return false;}var _8b8=true;_8ac=dijit.range.getSelection(this.editor.window);_8ad=_8ac.getRangeAt(0);if(!_8ad.collapsed){_8ad.deleteContents();_8ac=dijit.range.getSelection(this.editor.window);_8ad=_8ac.getRangeAt(0);}var _8b9=dijit.range.getBlockAncestor(_8ad.endContainer,null,this.editor.editNode);var _8ba=_8b9.blockNode;if((this._checkListLater=(_8ba&&(_8ba.nodeName=="LI"||_8ba.parentNode.nodeName=="LI")))){if(dojo.isMoz){this._pressedEnterInBlock=_8ba;}if(/^(\s|&nbsp;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|\xA0)<\/span>)?(<br>)?$/.test(_8ba.innerHTML)){_8ba.innerHTML="";if(dojo.isWebKit){_8ae=dijit.range.create(this.editor.window);_8ae.setStart(_8ba,0);_8ac.removeAllRanges();_8ac.addRange(_8ae);}this._checkListLater=false;}return true;}if(!_8b9.blockNode||_8b9.blockNode===this.editor.editNode){try{dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);}catch(e2){}_8b9={blockNode:dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(_8b9.blockNode){if(_8b9.blockNode!=this.editor.editNode&&(!(_8b9.blockNode.textContent||_8b9.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)){this.removeTrailingBr(_8b9.blockNode);return false;}}else{_8b9.blockNode=this.editor.editNode;}_8ac=dijit.range.getSelection(this.editor.window);_8ad=_8ac.getRangeAt(0);}var _8bb=doc.createElement(this.blockNodeForEnter);_8bb.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(_8b9.blockNode);var _8bc=_8ad.endOffset;var node=_8ad.endContainer;if(node.length<_8bc){var ret=this._adjustNodeAndOffset(node,_8bc);node=ret.node;_8bc=ret.offset;}if(dijit.range.atEndOfContainer(_8b9.blockNode,node,_8bc)){if(_8b9.blockNode===_8b9.blockContainer){_8b9.blockNode.appendChild(_8bb);}else{dojo.place(_8bb,_8b9.blockNode,"after");}_8b8=false;_8ae=dijit.range.create(this.editor.window);_8ae.setStart(_8bb,0);_8ac.removeAllRanges();_8ac.addRange(_8ae);if(this.editor.height){dojo.window.scrollIntoView(_8bb);}}else{if(dijit.range.atBeginningOfContainer(_8b9.blockNode,_8ad.startContainer,_8ad.startOffset)){dojo.place(_8bb,_8b9.blockNode,_8b9.blockNode===_8b9.blockContainer?"first":"before");if(_8bb.nextSibling&&this.editor.height){_8ae=dijit.range.create(this.editor.window);_8ae.setStart(_8bb.nextSibling,0);_8ac.removeAllRanges();_8ac.addRange(_8ae);dojo.window.scrollIntoView(_8bb.nextSibling);}_8b8=false;}else{if(_8b9.blockNode===_8b9.blockContainer){_8b9.blockNode.appendChild(_8bb);}else{dojo.place(_8bb,_8b9.blockNode,"after");}_8b8=false;if(_8b9.blockNode.style){if(_8bb.style){if(_8b9.blockNode.style.cssText){_8bb.style.cssText=_8b9.blockNode.style.cssText;}}}rs=_8ad.startContainer;var _8bd;if(rs&&rs.nodeType==3){var _8be,_8bf;_8bc=_8ad.endOffset;if(rs.length<_8bc){ret=this._adjustNodeAndOffset(rs,_8bc);rs=ret.node;_8bc=ret.offset;}txt=rs.nodeValue;_8af=doc.createTextNode(txt.substring(0,_8bc));_8b0=doc.createTextNode(txt.substring(_8bc,txt.length));dojo.place(_8af,rs,"before");dojo.place(_8b0,rs,"after");dojo.destroy(rs);var _8c0=_8af.parentNode;while(_8c0!==_8b9.blockNode){var tg=_8c0.tagName;var _8c1=doc.createElement(tg);if(_8c0.style){if(_8c1.style){if(_8c0.style.cssText){_8c1.style.cssText=_8c0.style.cssText;}}}if(_8c0.tagName==="FONT"){if(_8c0.color){_8c1.color=_8c0.color;}if(_8c0.face){_8c1.face=_8c0.face;}if(_8c0.size){_8c1.size=_8c0.size;}}_8be=_8b0;while(_8be){_8bf=_8be.nextSibling;_8c1.appendChild(_8be);_8be=_8bf;}dojo.place(_8c1,_8c0,"after");_8af=_8c0;_8b0=_8c1;_8c0=_8c0.parentNode;}_8be=_8b0;if(_8be.nodeType==1||(_8be.nodeType==3&&_8be.nodeValue)){_8bb.innerHTML="";}_8bd=_8be;while(_8be){_8bf=_8be.nextSibling;_8bb.appendChild(_8be);_8be=_8bf;}}_8ae=dijit.range.create(this.editor.window);var _8c2;var _8c3=_8bd;if(this.blockNodeForEnter!=="BR"){while(_8c3){_8c2=_8c3;_8bf=_8c3.firstChild;_8c3=_8bf;}if(_8c2&&_8c2.parentNode){_8bb=_8c2.parentNode;_8ae.setStart(_8bb,0);_8ac.removeAllRanges();_8ac.addRange(_8ae);if(this.editor.height){dijit.scrollIntoView(_8bb);}if(dojo.isMoz){this._pressedEnterInBlock=_8b9.blockNode;}}else{_8b8=true;}}else{_8ae.setStart(_8bb,0);_8ac.removeAllRanges();_8ac.addRange(_8ae);if(this.editor.height){dijit.scrollIntoView(_8bb);}if(dojo.isMoz){this._pressedEnterInBlock=_8b9.blockNode;}}}}return _8b8;},_adjustNodeAndOffset:function(node,_8c4){while(node.length<_8c4&&node.nextSibling&&node.nextSibling.nodeType==3){_8c4=_8c4-node.length;node=node.nextSibling;}var ret={"node":node,"offset":_8c4};return ret;},removeTrailingBr:function(_8c5){var para=/P|DIV|LI/i.test(_8c5.tagName)?_8c5:dijit._editor.selection.getParentOfType(_8c5,["P","DIV","LI"]);if(!para){return;}if(para.lastChild){if((para.childNodes.length>1&&para.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(para.lastChild.nodeValue))||para.lastChild.tagName=="BR"){dojo.destroy(para.lastChild);}}if(!para.childNodes.length){para.innerHTML=this.bogusHtmlContent;}}});}if(!dojo._hasResource["dijit.Editor"]){dojo._hasResource["dijit.Editor"]=true;dojo.provide("dijit.Editor");dojo.declare("dijit.Editor",dijit._editor.RichText,{plugins:null,extraPlugins:null,constructor:function(){if(!dojo.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","|","foreColor","hiliteColor","||","fontName","||","fontSize","||","formatBlock","dijit._editor.plugins.EnterKeyHandling"];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(dojo.isIE){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate");}},setupDefaultShortcuts:function(){},postMixInProperties:function(){this.setValueDeferred=new dojo.Deferred();this.inherited(arguments);},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(dojo.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=dojo.i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new dijit.Toolbar({dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode);}dojo.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.callback(true);dojo.addClass(this.iframe.parentNode,"dijitEditorIFrameContainer");dojo.addClass(this.iframe,"dijitEditorIFrame");dojo.attr(this.iframe,"allowTransparency",true);if(dojo.isWebKit){dojo.style(this.domNode,"KhtmlUserSelect","none");}this.toolbar.startup();this.onNormalizedDisplayChanged();},destroy:function(){dojo.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_8c6,_8c7){var args=dojo.isString(_8c6)?{name:_8c6}:_8c6;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};dojo.publish(dijit._scopeName+".Editor.getPlugin",[o]);if(!o.plugin){var pc=dojo.getObject(args.name);if(pc){o.plugin=new pc(args);}}if(!o.plugin){console.warn("Cannot find plugin",_8c6);return;}_8c6=o.plugin;}if(arguments.length>1){this._plugins[_8c7]=_8c6;}else{this._plugins.push(_8c6);}_8c6.setEditor(this);if(dojo.isFunction(_8c6.setToolbar)){_8c6.setToolbar(this.toolbar);}},startup:function(){},resize:function(size){if(size){dijit.layout._LayoutWidget.prototype.resize.apply(this,arguments);}},layout:function(){var _8c8=(this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+dojo._getPadBorderExtents(this.iframe.parentNode).h+dojo._getMarginExtents(this.iframe.parentNode).h));this.editingArea.style.height=_8c8+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){var _8c9;var b=this.document.body;var _8ca=b.clientWidth;var _8cb=b.clientHeight;var _8cc=b.clientLeft;var _8cd=b.offsetWidth;var _8ce=b.offsetHeight;var _8cf=b.offsetLeft;bodyDir=b.dir?b.dir.toLowerCase():"";if(bodyDir!="rtl"){if(_8ca<_8cd&&e.x>_8ca&&e.x<_8cd){_8c9=true;}}else{if(e.x<_8cc&&e.x>_8cf){_8c9=true;}}if(!_8c9){if(_8cb<_8ce&&e.y>_8cb&&e.y<_8ce){_8c9=true;}}if(!_8c9){delete this._cursorToStart;delete this._savedSelection;if(e.target.tagName=="BODY"){setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0);}this.inherited(arguments);}},onBeforeActivate:function(e){this._restoreSelection();},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}if(e.target.tagName!="BODY"){this._saveSelection();}},customUndo:true,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){clearTimeout(this._editTimer);}this._editTimer=setTimeout(dojo.hitch(this,this.endEditing),this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}var r;var _8d0=/copy|cut|paste/.test(cmd);try{r=this.inherited(arguments);if(dojo.isWebKit&&_8d0&&!r){throw {code:1011};}}catch(e){if(e.code==1011&&_8d0){var sub=dojo.string.substitute,_8d1={cut:"X",copy:"C",paste:"V"};alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[dojo.isMac?"appleKey":"ctrlKey"],[_8d1[cmd]])]));}r=false;}if(this.customUndo){this._endEditing();}return r;}},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited(arguments);}},_moveToBookmark:function(b){var _8d2=b.mark;var mark=b.mark;var col=b.isCollapsed;var r,_8d3,_8d4,sel;if(mark){if(dojo.isIE<9){if(dojo.isArray(mark)){_8d2=[];dojo.forEach(mark,function(n){_8d2.push(dijit.range.getNode(n,this.editNode));},this);dojo.withGlobal(this.window,"moveToBookmark",dijit,[{mark:_8d2,isCollapsed:col}]);}else{if(mark.startContainer&&mark.endContainer){sel=dijit.range.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=dijit.range.create(this.window);_8d3=dijit.range.getNode(mark.startContainer,this.editNode);_8d4=dijit.range.getNode(mark.endContainer,this.editNode);if(_8d3&&_8d4){r.setStart(_8d3,mark.startOffset);r.setEnd(_8d4,mark.endOffset);sel.addRange(r);}}}}}else{sel=dijit.range.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=dijit.range.create(this.window);_8d3=dijit.range.getNode(mark.startContainer,this.editNode);_8d4=dijit.range.getNode(mark.endContainer,this.editNode);if(_8d3&&_8d4){r.setStart(_8d3,mark.startOffset);r.setEnd(_8d4,mark.endOffset);sel.addRange(r);}}}}},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._steps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();delete this._undoRedoActive;ret=true;}delete this._undoRedoActive;}return ret;},redo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();ret=true;}delete this._undoRedoActive;}return ret;},endEditing:function(_8d5){if(this._editTimer){clearTimeout(this._editTimer);}if(this._inEditing){this._endEditing(_8d5);this._inEditing=false;}},_getBookmark:function(){var b=dojo.withGlobal(this.window,dijit.getBookmark);var tmp=[];if(b&&b.mark){var mark=b.mark;if(dojo.isIE<9){var sel=dijit.range.getSelection(this.window);if(!dojo.isArray(mark)){if(sel){var _8d6;if(sel.rangeCount){_8d6=sel.getRangeAt(0);}if(_8d6){b.mark=_8d6.cloneRange();}else{b.mark=dojo.withGlobal(this.window,dijit.getBookmark);}}}else{dojo.forEach(b.mark,function(n){tmp.push(dijit.range.getIndex(n,this.editNode).o);},this);b.mark=tmp;}}try{if(b.mark&&b.mark.startContainer){tmp=dijit.range.getIndex(b.mark.startContainer,this.editNode).o;b.mark={startContainer:tmp,startOffset:b.mark.startOffset,endContainer:b.mark.endContainer===b.mark.startContainer?tmp:dijit.range.getIndex(b.mark.endContainer,this.editNode).o,endOffset:b.mark.endOffset};}}catch(e){b.mark=null;}}return b;},_beginEditing:function(cmd){if(this._steps.length===0){this._steps.push({"text":dijit._editor.getChildrenHtml(this.editNode),"bookmark":this._getBookmark()});}},_endEditing:function(_8d7){var v=dijit._editor.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!dojo.isIE&&!this.iframe&&e.keyCode==dojo.keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode,ks=dojo.keys;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){dojo.stopEvent(e);this.undo();return;}else{if(k==89||k==121){dojo.stopEvent(e);this.redo();return;}}}this.inherited(arguments);switch(k){case ks.ENTER:case ks.BACKSPACE:case ks.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");setTimeout(dojo.hitch(this,this.endEditing),1);}else{this.beginEditing("paste");setTimeout(dojo.hitch(this,this.endEditing),1);}break;}case ks.ALT:this.endEditing();break;case ks.UP_ARROW:case ks.DOWN_ARROW:case ks.LEFT_ARROW:case ks.RIGHT_ARROW:case ks.HOME:case ks.END:case ks.PAGE_UP:case ks.PAGE_DOWN:this.endEditing(true);break;case ks.CTRL:case ks.SHIFT:case ks.TAB:break;default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<dojo.keys.F1||e.keyCode>dojo.keys.F15)){this.beginEditing();break;}}},_onBlur:function(){this.inherited(arguments);this.endEditing(true);},_saveSelection:function(){try{this._savedSelection=this._getBookmark();}catch(e){}},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;if(dojo.withGlobal(this.window,"isCollapsed",dijit)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},onClick:function(){this.endEditing(true);this.inherited(arguments);},replaceValue:function(html){if(!this.customUndo){this.inherited(arguments);}else{if(this.isClosed){this.setValue(html);}else{this.beginEditing();if(!html){html="&nbsp;";}this.setValue(html);this.endEditing();}}},_setDisabledAttr:function(_8d8){var _8d9=dojo.hitch(this,function(){if((!this.disabled&&_8d8)||(!this._buttonEnabledPlugins&&_8d8)){dojo.forEach(this._plugins,function(p){p.set("disabled",true);});}else{if(this.disabled&&!_8d8){dojo.forEach(this._plugins,function(p){p.set("disabled",false);});}}});this.setValueDeferred.addCallback(_8d9);this.inherited(arguments);},_setStateClass:function(){try{this.inherited(arguments);if(this.document&&this.document.body){dojo.style(this.document.body,"color",dojo.style(this.iframe,"color"));}}catch(e){}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}var args=o.args,p;var _8da=dijit._editor._Plugin;var _8db=dijit._editor.plugins._FontNameDropDown;var _8dc=dijit._editor.plugins._FontSizeDropDown;var _8dd=dijit._editor.plugins._FormatBlockDropDown;var _8de=dijit._editor.plugins.TextColor;var name=args.name;switch(name){case "undo":case "redo":case "cut":case "copy":case "paste":case "insertOrderedList":case "insertUnorderedList":case "indent":case "outdent":case "justifyCenter":case "justifyFull":case "justifyLeft":case "justifyRight":case "delete":case "selectAll":case "removeFormat":case "unlink":case "insertHorizontalRule":p=new _8da({command:name});break;case "fontName":p=new _8db({command:name});break;case "fontSize":p=new _8dc({command:name});break;case "formatBlock":p=new _8dd({command:name});break;case "bold":case "italic":case "underline":case "strikethrough":case "subscript":case "superscript":p=new _8da({buttonClass:dijit.form.ToggleButton,command:name});break;case "|":p=new _8da({button:new dijit.ToolbarSeparator(),setEditor:function(_8df){this.editor=_8df;}});break;default:break;}o.plugin=p;});}if(!dojo._hasResource["dojox.grid.cells.dijit"]){dojo._hasResource["dojox.grid.cells.dijit"]=true;dojo.provide("dojox.grid.cells.dijit");(function(){var dgc=dojox.grid.cells;dojo.declare("dojox.grid.cells._Widget",dgc._Base,{widgetClass:dijit.form.TextBox,constructor:function(_8e0){this.widget=null;if(typeof this.widgetClass=="string"){dojo.deprecated("Passing a string to widgetClass is deprecated","pass the widget class object instead","2.0");this.widgetClass=dojo.getObject(this.widgetClass);}},formatEditing:function(_8e1,_8e2){this.needFormatNode(_8e1,_8e2);return "<div></div>";},getValue:function(_8e3){return this.widget.get("value");},setValue:function(_8e4,_8e5){if(this.widget&&this.widget.set){if(this.widget.onLoadDeferred){var self=this;this.widget.onLoadDeferred.addCallback(function(){self.widget.set("value",_8e5===null?"":_8e5);});}else{this.widget.set("value",_8e5);}}else{this.inherited(arguments);}},getWidgetProps:function(_8e6){return dojo.mixin({dir:this.dir,lang:this.lang},this.widgetProps||{},{constraints:dojo.mixin({},this.constraint)||{},value:_8e6});},createWidget:function(_8e7,_8e8,_8e9){return new this.widgetClass(this.getWidgetProps(_8e8),_8e7);},attachWidget:function(_8ea,_8eb,_8ec){_8ea.appendChild(this.widget.domNode);this.setValue(_8ec,_8eb);},formatNode:function(_8ed,_8ee,_8ef){if(!this.widgetClass){return _8ee;}if(!this.widget){this.widget=this.createWidget.apply(this,arguments);}else{this.attachWidget.apply(this,arguments);}this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(_8ef);this.grid.scroller.rowHeightChanged(_8ef,true);this.focus();return undefined;},sizeWidget:function(_8f0,_8f1,_8f2){var p=this.getNode(_8f2),box=dojo.contentBox(p);dojo.marginBox(this.widget.domNode,{w:box.w});},focus:function(_8f3,_8f4){if(this.widget){setTimeout(dojo.hitch(this.widget,function(){dojox.grid.util.fire(this,"focus");}),0);}},_finish:function(_8f5){this.inherited(arguments);dojox.grid.util.removeNode(this.widget.domNode);if(dojo.isIE){dojo.setSelectable(this.widget.domNode,true);}}});dgc._Widget.markupFactory=function(node,cell){dgc._Base.markupFactory(node,cell);var d=dojo;var _8f6=d.trim(d.attr(node,"widgetProps")||"");var _8f7=d.trim(d.attr(node,"constraint")||"");var _8f8=d.trim(d.attr(node,"widgetClass")||"");if(_8f6){cell.widgetProps=d.fromJson(_8f6);}if(_8f7){cell.constraint=d.fromJson(_8f7);}if(_8f8){cell.widgetClass=d.getObject(_8f8);}};dojo.declare("dojox.grid.cells.ComboBox",dgc._Widget,{widgetClass:dijit.form.ComboBox,getWidgetProps:function(_8f9){var _8fa=[];dojo.forEach(this.options,function(o){_8fa.push({name:o,value:o});});var _8fb=new dojo.data.ItemFileReadStore({data:{identifier:"name",items:_8fa}});return dojo.mixin({},this.widgetProps||{},{value:_8f9,store:_8fb});},getValue:function(){var e=this.widget;e.set("displayedValue",e.get("displayedValue"));return e.get("value");}});dgc.ComboBox.markupFactory=function(node,cell){dgc._Widget.markupFactory(node,cell);var d=dojo;var _8fc=d.trim(d.attr(node,"options")||"");if(_8fc){var o=_8fc.split(",");if(o[0]!=_8fc){cell.options=o;}}};dojo.declare("dojox.grid.cells.DateTextBox",dgc._Widget,{widgetClass:dijit.form.DateTextBox,setValue:function(_8fd,_8fe){if(this.widget){this.widget.set("value",new Date(_8fe));}else{this.inherited(arguments);}},getWidgetProps:function(_8ff){return dojo.mixin(this.inherited(arguments),{value:new Date(_8ff)});}});dgc.DateTextBox.markupFactory=function(node,cell){dgc._Widget.markupFactory(node,cell);};dojo.declare("dojox.grid.cells.CheckBox",dgc._Widget,{widgetClass:dijit.form.CheckBox,getValue:function(){return this.widget.checked;},setValue:function(_900,_901){if(this.widget&&this.widget.attributeMap.checked){this.widget.set("checked",_901);}else{this.inherited(arguments);}},sizeWidget:function(_902,_903,_904){return;}});dgc.CheckBox.markupFactory=function(node,cell){dgc._Widget.markupFactory(node,cell);};dojo.declare("dojox.grid.cells.Editor",dgc._Widget,{widgetClass:dijit.Editor,getWidgetProps:function(_905){return dojo.mixin({},this.widgetProps||{},{height:this.widgetHeight||"100px"});},createWidget:function(_906,_907,_908){var _909=new this.widgetClass(this.getWidgetProps(_907),_906);dojo.connect(_909,"onLoad",dojo.hitch(this,"populateEditor"));return _909;},formatNode:function(_90a,_90b,_90c){this.content=_90b;this.inherited(arguments);if(dojo.isMoz){var e=this.widget;e.open();if(this.widgetToolbar){dojo.place(e.toolbar.domNode,e.editingArea,"before");}}},populateEditor:function(){this.widget.set("value",this.content);this.widget.placeCursorAtEnd();}});dgc.Editor.markupFactory=function(node,cell){dgc._Widget.markupFactory(node,cell);var d=dojo;var h=dojo.trim(dojo.attr(node,"widgetHeight")||"");if(h){if((h!="auto")&&(h.substr(-2)!="em")){h=parseInt(h,10)+"px";}cell.widgetHeight=h;}};})();}if(!dojo._hasResource["dojox.grid.enhanced._Plugin"]){dojo._hasResource["dojox.grid.enhanced._Plugin"]=true;dojo.provide("dojox.grid.enhanced._Plugin");dojo.declare("dojox.grid.enhanced._Plugin",null,{name:"plugin",grid:null,option:{},_connects:[],_subscribes:[],privates:{},constructor:function(_90d,_90e){this.grid=_90d;this.option=_90e;this._connects=[];this._subscribes=[];this.privates=dojo.mixin({},dojox.grid.enhanced._Plugin.prototype);this.init();},init:function(){},onPreInit:function(){},onPostInit:function(){},onStartUp:function(){},connect:function(obj,_90f,_910){var conn=dojo.connect(obj,_90f,this,_910);this._connects.push(conn);return conn;},disconnect:function(_911){dojo.some(this._connects,function(conn,i,_912){if(conn==_911){dojo.disconnect(_911);_912.splice(i,1);return true;}return false;});},subscribe:function(_913,_914){var _915=dojo.subscribe(_913,this,_914);this._subscribes.push(_915);return _915;},unsubscribe:function(_916){dojo.some(this._subscribes,function(_917,i,_918){if(_917==_916){dojo.unsubscribe(_916);_918.splice(i,1);return true;}return false;});},onSetStore:function(_919){},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);dojo.forEach(this._subscribes,dojo.unsubscribe);delete this._connects;delete this._subscribes;delete this.option;delete this.privates;}});}if(!dojo._hasResource["dojox.grid.enhanced.plugins.IndirectSelection"]){dojo._hasResource["dojox.grid.enhanced.plugins.IndirectSelection"]=true;dojo.provide("dojox.grid.enhanced.plugins.IndirectSelection");dojo.declare("dojox.grid.enhanced.plugins.IndirectSelection",dojox.grid.enhanced._Plugin,{name:"indirectSelection",constructor:function(){var _91a=this.grid.layout;this.connect(_91a,"setStructure",dojo.hitch(_91a,this.addRowSelectCell,this.option));},addRowSelectCell:function(_91b){if(!this.grid.indirectSelection||this.grid.selectionMode=="none"){return;}var _91c=false,_91d=["get","formatter","field","fields"],_91e={type:dojox.grid.cells.MultipleRowSelector,name:"",width:"30px",styles:"text-align: center;"};if(_91b.headerSelector){_91b.name="";}if(this.grid.rowSelectCell){this.grid.rowSelectCell.destroy();}dojo.forEach(this.structure,function(view){var _91f=view.cells;if(_91f&&_91f.length>0&&!_91c){var _920=_91f[0];if(_920[0]&&_920[0].isRowSelector){_91c=true;return;}var _921,_922=this.grid.selectionMode=="single"?dojox.grid.cells.SingleRowSelector:dojox.grid.cells.MultipleRowSelector;_921=dojo.mixin(_91e,_91b,{type:_922,editable:false,notselectable:true,filterable:false,navigatable:true,nosort:true});dojo.forEach(_91d,function(_923){if(_923 in _921){delete _921[_923];}});if(_91f.length>1){_921.rowSpan=_91f.length;}dojo.forEach(this.cells,function(cell,i){if(cell.index>=0){cell.index+=1;}else{console.warn("Error:IndirectSelection.addRowSelectCell()-  cell "+i+" has no index!");}});var _924=this.addCellDef(0,0,_921);_924.index=0;_920.unshift(_924);this.cells.unshift(_924);this.grid.rowSelectCell=_924;_91c=true;}},this);this.cellCount=this.cells.length;},destroy:function(){if(this.grid&&this.grid.rowSelectCell){this.grid.rowSelectCell.destroy();delete this.grid.rowSelectCell;}this.inherited(arguments);}});dojo.declare("dojox.grid.cells.RowSelector",dojox.grid.cells._Widget,{inputType:"",map:null,disabledMap:null,isRowSelector:true,_connects:null,_subscribes:null,checkedText:"&#8730;",unCheckedText:"O",constructor:function(){this.map={};this.disabledMap={},this.disabledCount=0;this._connects=[];this._subscribes=[];this.inA11YMode=dojo.hasClass(dojo.body(),"dijit_a11y");this.baseClass="dojoxGridRowSelector dijitReset dijitInline dijit"+this.inputType;this.checkedClass=" dijit"+this.inputType+"Checked";this.disabledClass=" dijit"+this.inputType+"Disabled";this.checkedDisabledClass=" dijit"+this.inputType+"CheckedDisabled";this.statusTextClass=" dojoxGridRowSelectorStatusText";this._connects.push(dojo.connect(this.grid,"dokeyup",this,"_dokeyup"));this._connects.push(dojo.connect(this.grid.selection,"onSelected",this,"_onSelected"));this._connects.push(dojo.connect(this.grid.selection,"onDeselected",this,"_onDeselected"));this._connects.push(dojo.connect(this.grid.scroller,"invalidatePageNode",this,"_pageDestroyed"));this._connects.push(dojo.connect(this.grid,"onCellClick",this,"_onClick"));this._connects.push(dojo.connect(this.grid,"updateRow",this,"_onUpdateRow"));},formatter:function(data,_925){var _926=this.baseClass;var _927=this.getValue(_925);var _928=!!this.disabledMap[_925];if(_927){_926+=this.checkedClass;if(_928){_926+=this.checkedDisabledClass;}}else{if(_928){_926+=this.disabledClass;}}if(window.isAccessibilityEnabled){var _929=(_927)?(this.inputType+" "+misys.getLocalization("checked")):(this.inputType+" "+misys.getLocalization("unchecked"));return ["<div tabindex = -1 ","id = '"+this.grid.id+"_rowSelector_"+_925+"' ","name = '"+this.grid.id+"_rowSelector' class = '"+_926+"' ","role = 'presentation' aria-checked = '"+_927+"' aria-disabled = '"+_928+"' aria-label = '"+dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_925+1])+" "+_929+"' >","<span class = '"+this.statusTextClass+"'>"+(_927?this.checkedText:this.unCheckedText)+"</span>","<span class = 'sr-only' aria-live='polite' id='"+this.grid.id+"_rowSelector_"+_925+"live' />","</div>"].join("");}else{return ["<div tabindex = -1 ","id = '"+this.grid.id+"_rowSelector_"+_925+"' ","name = '"+this.grid.id+"_rowSelector' class = '"+_926+"' ","role = 'presentation' aria-pressed = '"+_927+"' aria-disabled = '"+_928+"' aria-label = '"+dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_925+1])+"'>","<span class = '"+this.statusTextClass+"'>"+(_927?this.checkedText:this.unCheckedText)+"</span>","</div>"].join("");}},setValue:function(_92a,_92b){},getValue:function(_92c){return this.grid.selection.isSelected(_92c);},toggleRow:function(_92d,_92e){this._nativeSelect(_92d,_92e);},setDisabled:function(_92f,_930){if(_92f<0){return;}this._toggleDisabledStyle(_92f,_930);},disabled:function(_931){return !!this.disabledMap[_931];},_onClick:function(e){if(e.cell===this){this._selectRow(e);}},_dokeyup:function(e){if(e.cellIndex==this.index&&e.rowIndex>=0&&e.keyCode==dojo.keys.SPACE){this._selectRow(e);}},focus:function(_932){var _933=this.map[_932];if(_933){_933.focus();}},_focusEndingCell:function(_934,_935){var cell=this.grid.getCell(_935);this.grid.focus.setFocusCell(cell,_934);},_nativeSelect:function(_936,_937){this.grid.selection[_937?"select":"deselect"](_936);},_onSelected:function(_938){this._toggleCheckedStyle(_938,true);},_onDeselected:function(_939){this._toggleCheckedStyle(_939,false);},_onUpdateRow:function(_93a){delete this.map[_93a];},_toggleCheckedStyle:function(_93b,_93c){var _93d=this._getSelector(_93b);if(_93d){dojo.toggleClass(_93d,this.checkedClass,_93c);if(this.disabledMap[_93b]){dojo.toggleClass(_93d,this.checkedDisabledClass,_93c);}dijit.setWaiState(_93d,"checked",_93c);if(this.inA11YMode){dojo.attr(_93d.firstChild,"innerHTML",_93c?this.checkedText:this.unCheckedText);}if(dojo.query("#"+this.grid.id+"_rowSelector_"+_93b+"live")&&dojo.query("#"+this.grid.id+"_rowSelector_"+_93b+"live").length>0){var _93e=(_93c)?(this.inputType+" "+misys.getLocalization("checked")):(this.inputType+" "+misys.getLocalization("unchecked"));dojo.attr(dojo.query("#"+this.grid.id+"_rowSelector_"+_93b)[0],"aria-label",dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_93b+1])+" "+_93e);var temp=dojo.query("#"+this.grid.id+"_rowSelector_"+_93b+"live")[0];var _93f="";if(_93c){_93f=this.inputType+" "+misys.getLocalization("checked");_93f=_93f+" "+dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_93b+1])+" "+misys.getLocalization("checked")+".";}else{_93f=this.inputType+" "+misys.getLocalization("unchecked");_93f=_93f+" "+dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_93b+1])+" "+misys.getLocalization("unchecked")+".";}dojo.attr(temp,"innerHTML",_93f);}}},_toggleDisabledStyle:function(_940,_941){var _942=this._getSelector(_940);if(_942){dojo.toggleClass(_942,this.disabledClass,_941);if(this.getValue(_940)){dojo.toggleClass(_942,this.checkedDisabledClass,_941);}dijit.setWaiState(_942,"disabled",_941);}this.disabledMap[_940]=_941;if(_940>=0){this.disabledCount+=_941?1:-1;}},_getSelector:function(_943){var _944=this.map[_943];if(!_944){var _945=this.view.rowNodes[_943];if(_945){_944=dojo.query(".dojoxGridRowSelector",_945)[0];if(_944){this.map[_943]=_944;}}}return _944;},_pageDestroyed:function(_946){var _947=this.grid.scroller.rowsPerPage;var _948=_946*_947,end=_948+_947-1;for(var i=_948;i<=end;i++){if(!this.map[i]){continue;}dojo.destroy(this.map[i]);delete this.map[i];}},destroy:function(){for(var i in this.map){dojo.destroy(this.map[i]);delete this.map[i];}for(i in this.disabledMap){delete this.disabledMap[i];}dojo.forEach(this._connects,dojo.disconnect);dojo.forEach(this._subscribes,dojo.unsubscribe);delete this._connects;delete this._subscribes;}});dojo.declare("dojox.grid.cells.SingleRowSelector",dojox.grid.cells.RowSelector,{inputType:"Radio",_selectRow:function(e){var _949=e.rowIndex;if(this.disabledMap[_949]){return;}this._focusEndingCell(_949,0);this._nativeSelect(_949,!this.grid.selection.selected[_949]);},toggleAllSelection:function(_94a){var grid=this.grid,_94b=grid.selection;if(_94a){_94b.selectRange(0,grid.rowCount-1);}else{_94b.deselectAll();}this.toggleAllTrigerred=true;var _94c=this.grid.rowCount;for(var i=0;i<_94c;i++){var item=this.grid.getItem(i);var flag;if(item){flag=this.grid.store.getValue(item,"disable_selection");}if(flag==="Y"){this.grid.rowSelectCell.toggleRow(i,false);}}}});dojo.declare("dojox.grid.cells.MultipleRowSelector",dojox.grid.cells.RowSelector,{inputType:"CheckBox",swipeStartRowIndex:-1,swipeMinRowIndex:-1,swipeMaxRowIndex:-1,toSelect:false,lastClickRowIdx:-1,toggleAllTrigerred:false,unCheckedText:"&#9633;",constructor:function(){this._connects.push(dojo.connect(dojo.doc,"onmouseup",this,"_domouseup"));this._connects.push(dojo.connect(this.grid,"onRowMouseOver",this,"_onRowMouseOver"));this._connects.push(dojo.connect(this.grid.focus,"move",this,"_swipeByKey"));this._connects.push(dojo.connect(this.grid,"onCellMouseDown",this,"_onMouseDown"));if(this.headerSelector){this._connects.push(dojo.connect(this.grid.views,"render",this,"_addHeaderSelector"));this._connects.push(dojo.connect(this.grid,"onSelectionChanged",this,"_onSelectionChanged"));this._connects.push(dojo.connect(this.grid,"onKeyDown",this,function(e){if(e.rowIndex==-1&&e.cellIndex==this.index&&e.keyCode==dojo.keys.SPACE){this._toggletHeader();}}));}},toggleAllSelection:function(_94d){var grid=this.grid,_94e=grid.selection;if(_94d){_94e.selectRange(0,grid.rowCount-1);}else{_94e.deselectAll();}this.toggleAllTrigerred=true;},_onMouseDown:function(e){if(e.cell==this){this._startSelection(e.rowIndex);dojo.stopEvent(e);}},_onRowMouseOver:function(e){this._updateSelection(e,0);},_domouseup:function(e){if(dojo.isIE){this.view.content.decorateEvent(e);}var _94f=e.cellIndex>=0&&this.inSwipeSelection()&&!this.grid.edit.isEditRow(e.rowIndex);if(_94f){this._focusEndingCell(e.rowIndex,e.cellIndex);}this._finishSelect();},_dokeyup:function(e){this.inherited(arguments);if(!e.shiftKey){this._finishSelect();}},_startSelection:function(_950){this.swipeStartRowIndex=this.swipeMinRowIndex=this.swipeMaxRowIndex=_950;this.toSelect=!this.getValue(_950);},_updateSelection:function(e,_951){if(!this.inSwipeSelection()){return;}var _952=_951!==0;var _953=e.rowIndex,_954=_953-this.swipeStartRowIndex+_951;if(_954>0&&this.swipeMaxRowIndex<_953+_951){this.swipeMaxRowIndex=_953+_951;}if(_954<0&&this.swipeMinRowIndex>_953+_951){this.swipeMinRowIndex=_953+_951;}var min=_954>0?this.swipeStartRowIndex:_953+_951;var max=_954>0?_953+_951:this.swipeStartRowIndex;for(var i=this.swipeMinRowIndex;i<=this.swipeMaxRowIndex;i++){if(this.disabledMap[i]||i<0){continue;}if(i>=min&&i<=max){this._nativeSelect(i,this.toSelect);}else{if(!_952){this._nativeSelect(i,!this.toSelect);}}}},_swipeByKey:function(_955,_956,e){if(!e||_955===0||!e.shiftKey||e.cellIndex!=this.index||this.grid.focus.rowIndex<0){return;}var _957=e.rowIndex;if(this.swipeStartRowIndex<0){this.swipeStartRowIndex=_957;if(_955>0){this.swipeMaxRowIndex=_957+_955;this.swipeMinRowIndex=_957;}else{this.swipeMinRowIndex=_957+_955;this.swipeMaxRowIndex=_957;}this.toSelect=this.getValue(_957);}this._updateSelection(e,_955);},_finishSelect:function(){this.swipeStartRowIndex=-1;this.swipeMinRowIndex=-1;this.swipeMaxRowIndex=-1;this.toSelect=false;},inSwipeSelection:function(){return this.swipeStartRowIndex>=0;},_nativeSelect:function(_958,_959){this.grid.selection[_959?"addToSelection":"deselect"](_958);},_selectRow:function(e){var _95a=e.rowIndex;if(this.disabledMap[_95a]){return;}dojo.stopEvent(e);this._focusEndingCell(_95a,0);var _95b=_95a-this.lastClickRowIdx;var _95c=!this.grid.selection.selected[_95a];if(this.lastClickRowIdx>=0&&!e.ctrlKey&&!e.altKey&&e.shiftKey){var min=_95b>0?this.lastClickRowIdx:_95a;var max=_95b>0?_95a:this.lastClickRowIdx;for(var i=min;i>=0&&i<=max;i++){this._nativeSelect(i,_95c);}}else{this._nativeSelect(_95a,_95c);}this.lastClickRowIdx=_95a;},getValue:function(_95d){if(_95d==-1){var g=this.grid;return g.rowCount>0&&g.rowCount<=g.selection.getSelectedCount();}return this.inherited(arguments);},_addHeaderSelector:function(){var _95e=this.view.getHeaderCellNode(this.index);if(!_95e){return;}dojo.empty(_95e);var g=this.grid;var _95f=_95e.appendChild(dojo.create("div",{"tabindex":-1,"id":g.id+"_rowSelector_-1","class":this.baseClass,"role":"presentation","innerHTML":"<span class = '"+this.statusTextClass+"'></span><span style='height: 0; width: 0; overflow: hidden; display: block;'>"+g._nls["selectAll"]+"</span>"}));this.map[-1]=_95f;var idx=this._headerSelectorConnectIdx;if(idx!==undefined){dojo.disconnect(this._connects[idx]);this._connects.splice(idx,1);}this._headerSelectorConnectIdx=this._connects.length;this._connects.push(dojo.connect(_95f,"onclick",this,"_toggletHeader"));this._onSelectionChanged();},_toggletHeader:function(){if(!!this.disabledMap[-1]){return;}this.grid._selectingRange=true;this.toggleAllSelection(!this.getValue(-1));this._onSelectionChanged();this.grid._selectingRange=false;},_onSelectionChanged:function(){var g=this.grid;if(!this.map[-1]||g._selectingRange){return;}this._toggleCheckedStyle(-1,this.getValue(-1));},_toggleDisabledStyle:function(_960,_961){this.inherited(arguments);if(this.headerSelector){var _962=(this.grid.rowCount==this.disabledCount);if(_962!=!!this.disabledMap[-1]){arguments[0]=-1;arguments[1]=_962;this.inherited(arguments);}}}});dojox.grid.EnhancedGrid.registerPlugin(dojox.grid.enhanced.plugins.IndirectSelection,{"preInit":true});}if(!dojo._hasResource["dojo.NodeList-traverse"]){dojo._hasResource["dojo.NodeList-traverse"]=true;dojo.provide("dojo.NodeList-traverse");dojo.extend(dojo.NodeList,{_buildArrayFromCallback:function(_963){var ary=[];for(var i=0;i<this.length;i++){var _964=_963.call(this[i],this[i],ary);if(_964){ary=ary.concat(_964);}}return ary;},_getUniqueAsNodeList:function(_965){var ary=[];for(var i=0,node;node=_965[i];i++){if(node.nodeType==1&&dojo.indexOf(ary,node)==-1){ary.push(node);}}return this._wrap(ary,null,this._NodeListCtor);},_getUniqueNodeListWithParent:function(_966,_967){var ary=this._getUniqueAsNodeList(_966);ary=(_967?dojo._filterQueryResult(ary,_967):ary);return ary._stash(this);},_getRelatedUniqueNodes:function(_968,_969){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(_969),_968);},children:function(_96a){return this._getRelatedUniqueNodes(_96a,function(node,ary){return dojo._toArray(node.childNodes);});},closest:function(_96b,root){return this._getRelatedUniqueNodes(null,function(node,ary){do{if(dojo._filterQueryResult([node],_96b,root).length){return node;}}while(node!=root&&(node=node.parentNode)&&node.nodeType==1);return null;});},parent:function(_96c){return this._getRelatedUniqueNodes(_96c,function(node,ary){return node.parentNode;});},parents:function(_96d){return this._getRelatedUniqueNodes(_96d,function(node,ary){var pary=[];while(node.parentNode){node=node.parentNode;pary.push(node);}return pary;});},siblings:function(_96e){return this._getRelatedUniqueNodes(_96e,function(node,ary){var pary=[];var _96f=(node.parentNode&&node.parentNode.childNodes);for(var i=0;i<_96f.length;i++){if(_96f[i]!=node){pary.push(_96f[i]);}}return pary;});},next:function(_970){return this._getRelatedUniqueNodes(_970,function(node,ary){var next=node.nextSibling;while(next&&next.nodeType!=1){next=next.nextSibling;}return next;});},nextAll:function(_971){return this._getRelatedUniqueNodes(_971,function(node,ary){var pary=[];var next=node;while((next=next.nextSibling)){if(next.nodeType==1){pary.push(next);}}return pary;});},prev:function(_972){return this._getRelatedUniqueNodes(_972,function(node,ary){var prev=node.previousSibling;while(prev&&prev.nodeType!=1){prev=prev.previousSibling;}return prev;});},prevAll:function(_973){return this._getRelatedUniqueNodes(_973,function(node,ary){var pary=[];var prev=node;while((prev=prev.previousSibling)){if(prev.nodeType==1){pary.push(prev);}}return pary;});},andSelf:function(){return this.concat(this._parent);},first:function(){return this._wrap(((this[0]&&[this[0]])||[]),this);},last:function(){return this._wrap((this.length?[this[this.length-1]]:[]),this);},even:function(){return this.filter(function(item,i){return i%2!=0;});},odd:function(){return this.filter(function(item,i){return i%2==0;});}});}if(!dojo._hasResource["dojox.NodeList.delegate"]){dojo._hasResource["dojox.NodeList.delegate"]=true;dojo.provide("dojox.NodeList.delegate");dojo.extend(dojo.NodeList,{delegate:function(_974,_975,fn){return this.connect(_975,function(evt){var _976=dojo.query(evt.target).closest(_974,this);if(_976.length){fn.call(_976[0],evt);}});}});}if(!dojo._hasResource["misys.widget.Bookmark"]){dojo._hasResource["misys.widget.Bookmark"]=true;dojo.provide("misys.widget.Bookmark");fncSaveBookmarkAction=function(link,_977,_978){var text="";var _979=["<?xml version=\"1.0\" encoding=\"UTF-8\"?><bookmark>"];var _97a=dijit.byId("sendBookmark");dojo.forEach(_97a.getDescendants(),function(_97b){_979.push("<",_97b.get("name"),">",_97b.get("value"),"</",_97b.get("name"),">");});_979.push("<bookmark_id>",link,"</bookmark_id>");_979.push("<action>",link,"</action></bookmark>");var _97c=misys.xhrPost({url:misys.getServletURL("/screen/BookmarkScreen?currentActionCode="+_977+"&currentScreen="+_978),postData:_979.join(""),load:function(_97d){text=_97d;}});_97c.then(function(){var _97e=dojo.byId("favorites");if(!dijit.byId("sendBookmark")){dojo.parser.parse(dojo.byId("favorites"));}misys.animate("wipeOut",_97e,function(){dijit.byId("sendBookmark").destroyRecursive(true);_97e.innerHTML=text.substring(20,text.length-6);misys.animate("wipeIn",_97e);});});return _97c;};fncDeleteBookmarkAction=function(id,_97f,_980,_981){var _982=["<?xml version=\"1.0\" encoding=\"UTF-8\"?><bookmark>"];var _983=dijit.byId("sendBookmark");dojo.forEach(_983.getDescendants(),function(_984){if(_984.id!="bookmark_"+id){_982.push("<",_984.get("name"),">",_984.get("value"),"</",_984.get("name"),">");}});_982.push("<action>",_97f,"</action></bookmark>");var text="";var _985=misys.xhrPost({url:misys.getServletURL("/screen/BookmarkScreen?currentActionCode="+_980+"&currentScreen="+_981),postData:_982.join(""),load:function(_986){text=_986;}});_985.then(function(){var _987=dojo.byId("favorites");if(!dijit.byId("sendBookmark")){dojo.parser.parse(dojo.byId("favorites"));}misys.animate("wipeOut",_987,function(){dijit.byId("sendBookmark").destroyRecursive(true);_987.innerHTML=text.substring(20,text.length-6);misys.animate("wipeIn",_987);});});return _985;};fncDoBookmarkAction=function(type,_988,id,_989,_98a){if(!dijit.byId("sendBookmark")){dojo.parser.parse("favorites");}if(type=="SAVE"){fncSaveBookmarkAction(_988,_989,_98a);}else{fncDeleteBookmarkAction(id,_988,_989,_98a);}};}if(!dojo._hasResource["misys.binding.SessionTimer"]){dojo._hasResource["misys.binding.SessionTimer"]=true;dojo.provide("misys.binding.SessionTimer");(function(d,m){function _98b(){var _98c=dijit.byId("sessionMaxDurationOverDialog");var _98d=dojo.byId("sessionMaxDurationOverDialogButtons"),_98e=dijit.byId("sessionMaxDurationOverButton").domNode;var _98f=dojo.byId("sessionMaxDurationOverDialogContent");dojo.style(_98d,"display","block");dojo.style(_98f,"display","block");dojo.style(_98e,"display","inline-block");dojo.style(_98c.closeButtonNode,"display","none");_98c.set("title",misys.getLocalization("sessionalertMessage"));misys.dialog.connect(_98c,"onKeyPress",function(evt){if(evt.keyCode==dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("sessionMaxDurationOverButton"),"onClick",function(){misys.dialog.disconnect(_98c);_98c.hide();document.location.href=dojo.byId("loginAction").value;},_98c.id);misys.dialog.connect(_98c,"onHide",function(){misys.dialog.disconnect(_98c);});_98c.show();};function _990(){var _991=dijit.byId("idleSessionDialog");var _992=dojo.byId("idleSessionDialogButtons"),_993=dijit.byId("sessionContinueButton").domNode,_994=dijit.byId("sessionlogButton").domNode;var _995=dojo.byId("idleSessionDialogContent");dojo.style(_992,"display","block");dojo.style(_995,"display","block");dojo.style(_993,"display","inline-block");dojo.style(_994,"display","inline-block");dojo.style(_991.closeButtonNode,"display","none");_991.set("title",misys.getLocalization("sessionalertMessage"));misys.dialog.connect(_991,"onKeyPress",function(evt){if(evt.keyCode==dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("sessionContinueButton"),"onClick",function(){var _996=false;misys.xhrGet({url:misys.getServletURL("/screen/AjaxScreen/action/PingAction"),sync:true,handleAs:"text",load:function(_997,args){if(_997.indexOf("SC_UNAUTHORIZED")!==-1){_996=true;}},customError:function(_998,_999){_996=true;}});if(_996){misys.showSessionOverDialog();misys.dialog.disconnect(_991);_991.hide();}else{misys.idleSessionTimer(0);misys.dialog.disconnect(_991);_991.hide();}},_991.id);misys.dialog.connect(dijit.byId("sessionlogButton"),"onClick",function(){misys.dialog.disconnect(_991);_991.hide();if(dojo.byId("_token")&&dojo.byId("logoutAction")){misys.post({action:dojo.byId("logoutAction").value,params:[{name:"commonToken",value:dojo.byId("_token").value}]});}},_991.id);misys.dialog.connect(_991,"onHide",function(){misys.dialog.disconnect(_991);});_991.show();};function _99a(){var _99b=dijit.byId("durationSessionDialog");var _99c=dojo.byId("durationSessionDialogButtons"),_99d=dijit.byId("OkSessionButton").domNode;var _99e=dojo.byId("durationSessionDialogContent");dojo.style(_99c,"display","block");dojo.style(_99e,"display","block");dojo.style(_99d,"display","inline-block");dojo.style(_99b.closeButtonNode,"display","none");_99b.set("title",misys.getLocalization("sessionalertMessage"));misys.dialog.connect(_99b,"onKeyPress",function(evt){if(evt.keyCode==dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("OkSessionButton"),"onClick",function(){var _99f=true;misys.xhrGet({url:misys.getServletURL("/screen/AjaxScreen/action/PingAction"),sync:true,handleAs:"text",load:function(_9a0,args){if(_9a0.indexOf("SC_UNAUTHORIZED")===-1){_99f=false;}},customError:function(_9a1,_9a2){_99f=false;}});if(_99f){misys.showSessionOverDialog();misys.dialog.disconnect(_99b);_99b.hide();}else{misys.dialog.disconnect(_99b);_99b.hide();}},_99b.id);misys.dialog.connect(_99b,"onHide",function(){misys.dialog.disconnect(_99b);});_99b.show();misys.startAutoLogoutCounter(misys._config.sessionMaxDurationTimeAlert);};d.mixin(m,{showSessionOverDialog:function(){var _9a3=dijit.byId("sessionOverDialog");var _9a4=dojo.byId("sessionOverDialogButtons"),_9a5=dijit.byId("sessionOverButton").domNode;var _9a6=dojo.byId("sessionOverDialogContent");dojo.style(_9a4,"display","block");dojo.style(_9a6,"display","block");dojo.style(_9a5,"display","inline-block");dojo.style(_9a3.closeButtonNode,"display","none");_9a3.set("title",misys.getLocalization("sessionalertMessage"));misys.dialog.connect(_9a3,"onKeyPress",function(evt){if(evt.keyCode==dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("sessionOverButton"),"onClick",function(){misys.dialog.disconnect(_9a3);_9a3.hide();if(dojo.byId("customLoginAction")&&dojo.byId("customLoginAction").value){document.location.href=dojo.byId("customLoginAction").value;}else{document.location.href=dojo.byId("loginAction").value;}},_9a3.id);misys.dialog.connect(_9a3,"onHide",function(){misys.dialog.disconnect(_9a3);});_9a3.show();},startAutoLogoutCounter:function(_9a7){var _9a8=dijit.byId("durationSessionDialog");if(_9a7<=misys._config.sessionMaxDurationTime){_9a7=_9a7+1;setTimeout("misys.startAutoLogoutCounter("+_9a7+")",1000);}else{_9a7=0;var _9a9=false;misys.xhrGet({url:misys.getServletURL("/screen/AjaxScreen/action/PingAction"),sync:true,handleAs:"text",load:function(_9aa,args){if(_9aa.indexOf("SC_UNAUTHORIZED")!==-1){_9a9=true;}},customError:function(_9ab,_9ac){_9a9=true;}});if(_9a9){misys.showSessionOverDialog();misys.dialog.disconnect(_9a8);_9a8.hide();}else{_98b();misys.dialog.disconnect(_9a8);_9a8.hide();}}},idleSessionTimer:function(_9ad){if(dojo.byId("idleSessionTimeOutIndicator")){if(_9ad<=(misys._config.idleSessionTimeOutTime)){_9ad=_9ad+1;setTimeout("misys.idleSessionTimer("+_9ad+")",1000);}else{if(!misys._config.stopIdleSessionTimer){_9ad=0;_990();}}}},durationSessionTimer:function(_9ae){if(dojo.byId("sessionMaxDurationIndicator")){var _9af=misys._config.presentTime-misys._config.loginTime;_9af=Math.floor(_9af/1000);var _9b0=misys._config.sessionMaxDurationTimeAlert;var _9b1=_9b0-_9af;if(_9ae<=(_9b1)){_9ae=_9ae+1;setTimeout("misys.durationSessionTimer("+_9ae+")",1000);}else{_9ae=0;_99a();misys._config.stopIdleSessionTimer=true;var _9b2=dijit.byId("idleSessionDialog");if(_9b2){_9b2.hide();}}}}});})(dojo,misys);}if(!dojo._hasResource["dojox.html.entities"]){dojo._hasResource["dojox.html.entities"]=true;dojo.provide("dojox.html.entities");(function(){var _9b3=function(str,map){var _9b4,_9b5;if(map._encCache&&map._encCache.regexp&&map._encCache.mapper&&map.length==map._encCache.length){_9b4=map._encCache.mapper;_9b5=map._encCache.regexp;}else{_9b4={};_9b5=["["];var i;for(i=0;i<map.length;i++){_9b4[map[i][0]]="&"+map[i][1]+";";_9b5.push(map[i][0]);}_9b5.push("]");_9b5=new RegExp(_9b5.join(""),"g");map._encCache={mapper:_9b4,regexp:_9b5,length:map.length};}str=str.replace(_9b5,function(c){return _9b4[c];});return str;};var _9b6=function(str,map){var _9b7,_9b8;if(map._decCache&&map._decCache.regexp&&map._decCache.mapper&&map.length==map._decCache.length){_9b7=map._decCache.mapper;_9b8=map._decCache.regexp;}else{_9b7={};_9b8=["("];var i;for(i=0;i<map.length;i++){var e="&"+map[i][1]+";";if(i){_9b8.push("|");}_9b7[e]=map[i][0];_9b8.push(e);}_9b8.push(")");_9b8=new RegExp(_9b8.join(""),"g");map._decCache={mapper:_9b7,regexp:_9b8,length:map.length};}str=str.replace(_9b8,function(c){return _9b7[c];});return str;};dojox.html.entities.html=[["&","amp"],["\"","quot"],["<","lt"],[">","gt"],["","nbsp"]];dojox.html.entities.map=[["","nbsp"]];dojox.html.entities.latin=[["","iexcl"],["","cent"],["","pound"],["","euro"],["","curren"],["","yen"],["","brvbar"],["","sect"],["","uml"],["","copy"],["","ordf"],["","laquo"],["","not"],["","shy"],["","reg"],["","macr"],["","deg"],["","plusmn"],["","sup2"],["","sup3"],["","acute"],["","micro"],["","para"],["","middot"],["","cedil"],["","sup1"],["","ordm"],["","raquo"],["","frac14"],["","frac12"],["","frac34"],["","iquest"],["","Agrave"],["","Aacute"],["","Acirc"],["","Atilde"],["","Auml"],["","Aring"],["","AElig"],["","Ccedil"],["","Egrave"],["","Eacute"],["","Ecirc"],["","Euml"],["","Igrave"],["","Iacute"],["","Icirc"],["","Iuml"],["","ETH"],["","Ntilde"],["","Ograve"],["","Oacute"],["","Ocirc"],["","Otilde"],["","Ouml"],["","times"],["","Oslash"],["","Ugrave"],["","Uacute"],["","Ucirc"],["","Uuml"],["","Yacute"],["","THORN"],["","szlig"],["","agrave"],["","aacute"],["","acirc"],["","atilde"],["","auml"],["","aring"],["","aelig"],["","ccedil"],["","egrave"],["","eacute"],["","ecirc"],["","euml"],["","igrave"],["","iacute"],["","icirc"],["","iuml"],["","eth"],["","ntilde"],["","ograve"],["","oacute"],["","ocirc"],["","otilde"],["","ouml"],["","divide"],["","oslash"],["","ugrave"],["","uacute"],["","ucirc"],["","uuml"],["","yacute"],["","thorn"],["","yuml"],["","fnof"],["","Alpha"],["","Beta"],["","Gamma"],["","Delta"],["","Epsilon"],["","Zeta"],["","Eta"],["","Theta"],["","Iota"],["","Kappa"],["","Lambda"],["","Mu"],["","Nu"],["","Xi"],["","Omicron"],["","Pi"],["","Rho"],["","Sigma"],["","Tau"],["","Upsilon"],["","Phi"],["","Chi"],["","Psi"],["","Omega"],["","alpha"],["","beta"],["","gamma"],["","delta"],["","epsilon"],["","zeta"],["","eta"],["","theta"],["","iota"],["","kappa"],["","lambda"],["","mu"],["","nu"],["","xi"],["","omicron"],["","pi"],["","rho"],["","sigmaf"],["","sigma"],["","tau"],["","upsilon"],["","phi"],["","chi"],["","psi"],["","omega"],["","thetasym"],["","upsih"],["","piv"],["","bull"],["","hellip"],["","prime"],["","Prime"],["","oline"],["","frasl"],["","weierp"],["","image"],["","real"],["","trade"],["","alefsym"],["","larr"],["","uarr"],["","rarr"],["","darr"],["","harr"],["","crarr"],["","lArr"],["","uArr"],["","rArr"],["","dArr"],["","hArr"],["","forall"],["","part"],["","exist"],["","empty"],["","nabla"],["","isin"],["","notin"],["","ni"],["","prod"],["","sum"],["","minus"],["","lowast"],["","radic"],["","prop"],["","infin"],["","ang"],["","and"],["","or"],["","cap"],["","cup"],["","int"],["","there4"],["","sim"],["","cong"],["","asymp"],["","ne"],["","equiv"],["","le"],["","ge"],["","sub"],["","sup"],["","nsub"],["","sube"],["","supe"],["","oplus"],["","otimes"],["","perp"],["","sdot"],["","lceil"],["","rceil"],["","lfloor"],["","rfloor"],["","lang"],["","rang"],["","loz"],["","spades"],["","clubs"],["","hearts"],["","diams"],["","Elig"],["","oelig"],["","Scaron"],["","scaron"],["","Yuml"],["","circ"],["","tilde"],["","ensp"],["","emsp"],["","thinsp"],["","zwnj"],["","zwj"],["","lrm"],["","rlm"],["","ndash"],["","mdash"],["","lsquo"],["","rsquo"],["","sbquo"],["","ldquo"],["","rdquo"],["","bdquo"],["","dagger"],["","Dagger"],["","permil"],["","lsaquo"],["","rsaquo"]];dojox.html.entities.encode=function(str,m){if(str){if(!m){str=_9b3(str,dojox.html.entities.html);str=_9b3(str,dojox.html.entities.latin);}else{str=_9b3(str,m);}}return str;};dojox.html.entities.decode=function(str,m){if(str){if(!m){str=_9b6(str,dojox.html.entities.html);str=_9b6(str,dojox.html.entities.latin);}else{str=_9b6(str,m);}}return str;};})();}if(!dojo._hasResource["dojox.fx._core"]){dojo._hasResource["dojox.fx._core"]=true;dojo.provide("dojox.fx._core");dojox.fx._Line=function(_9b9,end){this.start=_9b9;this.end=end;var _9ba=dojo.isArray(_9b9),d=(_9ba?[]:end-_9b9);if(_9ba){dojo.forEach(this.start,function(s,i){d[i]=this.end[i]-s;},this);this.getValue=function(n){var res=[];dojo.forEach(this.start,function(s,i){res[i]=(d[i]*n)+s;},this);return res;};}else{this.getValue=function(n){return (d*n)+this.start;};}};}if(!dojo._hasResource["dojox.fx.scroll"]){dojo._hasResource["dojox.fx.scroll"]=true;dojo.provide("dojox.fx.scroll");dojo.experimental("dojox.fx.scroll");dojox.fx.smoothScroll=function(args){if(!args.target){args.target=dojo.position(args.node);}var _9bb=dojo[(dojo.isIE?"isObject":"isFunction")](args["win"].scrollTo),_9bc={x:args.target.x,y:args.target.y};if(!_9bb){var _9bd=dojo.position(args.win);_9bc.x-=_9bd.x;_9bc.y-=_9bd.y;}var _9be=(_9bb)?(function(val){args.win.scrollTo(val[0],val[1]);}):(function(val){args.win.scrollLeft=val[0];args.win.scrollTop=val[1];});var anim=new dojo.Animation(dojo.mixin({beforeBegin:function(){if(this.curve){delete this.curve;}var _9bf=_9bb?dojo._docScroll():{x:args.win.scrollLeft,y:args.win.scrollTop};anim.curve=new dojox.fx._Line([_9bf.x,_9bf.y],[_9bf.x+_9bc.x,_9bf.y+_9bc.y]);},onAnimate:_9be},args));return anim;};}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(name,_9c0,_9c1){var c=document.cookie;if(arguments.length==1){var _9c2=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(name)+"=([^;]*)"));return _9c2?decodeURIComponent(_9c2[1]):undefined;}else{_9c1=_9c1||{};var exp=_9c1.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=_9c1.expires=d;}if(exp&&exp.toUTCString){_9c1.expires=exp.toUTCString();}_9c0=encodeURIComponent(_9c0);var _9c3=name+"="+_9c0,_9c4;for(_9c4 in _9c1){_9c3+="; "+_9c4;var _9c5=_9c1[_9c4];if(_9c5!==true){_9c3+="="+_9c5;}}document.cookie=_9c3;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!dojo._hasResource["dijit.layout.StackController"]){dojo._hasResource["dijit.layout.StackController"]=true;dojo.provide("dijit.layout.StackController");dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span role='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",constructor:function(){this.pane2button={};this.pane2connects={};this.pane2watches={};},buildRendering:function(){this.inherited(arguments);dijit.setWaiRole(this.domNode,"tablist");},postCreate:function(){this.inherited(arguments);this.subscribe(this.containerId+"-startup","onStartup");this.subscribe(this.containerId+"-addChild","onAddChild");this.subscribe(this.containerId+"-removeChild","onRemoveChild");this.subscribe(this.containerId+"-selectChild","onSelectChild");this.subscribe(this.containerId+"-containerKeyPress","onContainerKeyPress");},onStartup:function(info){dojo.forEach(info.children,this.onAddChild,this);if(info.selected){this.onSelectChild(info.selected);}},destroy:function(){for(var pane in this.pane2button){this.onRemoveChild(dijit.byId(pane));}this.inherited(arguments);},onAddChild:function(page,_9c6){var cls=dojo.getObject(this.buttonWidget);var _9c7=new cls({id:this.id+"_"+page.id,label:page.title,dir:page.dir,lang:page.lang,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip});dijit.setWaiState(_9c7.focusNode,"selected","false");var _9c8=["title","showTitle","iconClass","closable","tooltip"],_9c9=["label","showLabel","iconClass","closeButton","title"];this.pane2watches[page.id]=dojo.map(_9c8,function(_9ca,idx){return page.watch(_9ca,function(name,_9cb,_9cc){_9c7.set(_9c9[idx],_9cc);});});this.pane2connects[page.id]=[this.connect(_9c7,"onClick",dojo.hitch(this,"onButtonClick",page)),this.connect(_9c7,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",page))];this.addChild(_9c7,_9c6);this.pane2button[page.id]=_9c7;page.controlButton=_9c7;if(!this._currentChild){_9c7.focusNode.setAttribute("tabIndex","0");dijit.setWaiState(_9c7.focusNode,"selected","true");this._currentChild=page;}if(!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList();}},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}dojo.forEach(this.pane2connects[page.id],dojo.hitch(this,"disconnect"));delete this.pane2connects[page.id];dojo.forEach(this.pane2watches[page.id],function(w){w.unwatch();});delete this.pane2watches[page.id];var _9cd=this.pane2button[page.id];if(_9cd){this.removeChild(_9cd);delete this.pane2button[page.id];_9cd.destroy();}delete page.controlButton;},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _9ce=this.pane2button[this._currentChild.id];_9ce.set("checked",false);dijit.setWaiState(_9ce.focusNode,"selected","false");_9ce.focusNode.setAttribute("tabIndex","-1");}var _9cf=this.pane2button[page.id];_9cf.set("checked",true);dijit.setWaiState(_9cf.focusNode,"selected","true");this._currentChild=page;_9cf.focusNode.setAttribute("tabIndex","0");var _9d0=dijit.byId(this.containerId);dijit.setWaiState(_9d0.containerNode,"labelledby",_9cf.id);},onButtonClick:function(page){var _9d1=dijit.byId(this.containerId);_9d1.selectChild(page);},onCloseButtonClick:function(page){var _9d2=dijit.byId(this.containerId);_9d2.closeChild(page);if(this._currentChild){var b=this.pane2button[this._currentChild.id];if(b){dijit.focus(b.focusNode||b.domNode);}}},adjacent:function(_9d3){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_9d3=!_9d3;}var _9d4=this.getChildren();var _9d5=dojo.indexOf(_9d4,this.pane2button[this._currentChild.id]);var _9d6=_9d3?1:_9d4.length-1;return _9d4[(_9d5+_9d6)%_9d4.length];},onkeypress:function(e){if(this.disabled||e.altKey){return;}var _9d7=null;if(e.ctrlKey||!e._djpage){var k=dojo.keys;switch(e.charOrCode){case k.LEFT_ARROW:case k.UP_ARROW:if(!e._djpage){_9d7=false;}break;case k.PAGE_UP:if(e.ctrlKey){_9d7=false;}break;case k.RIGHT_ARROW:case k.DOWN_ARROW:if(!e._djpage){_9d7=true;}break;case k.PAGE_DOWN:if(e.ctrlKey){_9d7=true;}break;case k.HOME:case k.END:var _9d8=this.getChildren();if(_9d8&&_9d8.length){_9d8[e.charOrCode==k.HOME?0:_9d8.length-1].onClick();}dojo.stopEvent(e);break;case k.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);break;default:if(e.ctrlKey){if(e.charOrCode===k.TAB){this.adjacent(!e.shiftKey).onClick();dojo.stopEvent(e);}else{if(e.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);}}}}if(_9d7!==null){this.adjacent(_9d7).onClick();dojo.stopEvent(e);}}},onContainerKeyPress:function(info){info.e._djpage=info.page;this.onkeypress(info.e);}});dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",buildRendering:function(evt){this.inherited(arguments);dijit.setWaiRole((this.focusNode||this.domNode),"tab");},onClick:function(evt){dijit.focus(this.focusNode);},onClickCloseButton:function(evt){evt.stopPropagation();}});}if(!dojo._hasResource["dijit.layout.StackContainer"]){dojo._hasResource["dijit.layout.StackContainer"]=true;dojo.provide("dijit.layout.StackContainer");dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel");},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeypress",this._onKeyPress);},startup:function(){if(this._started){return;}var _9d9=this.getChildren();dojo.forEach(_9d9,this._setupChild,this);if(this.persist){this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild"));}else{dojo.some(_9d9,function(_9da){if(_9da.selected){this.selectedChildWidget=_9da;}return _9da.selected;},this);}var _9db=this.selectedChildWidget;if(!_9db&&_9d9[0]){_9db=this.selectedChildWidget=_9d9[0];_9db.selected=true;}dojo.publish(this.id+"-startup",[{children:_9d9,selected:_9db}]);this.inherited(arguments);},resize:function(){var _9dc=this.selectedChildWidget;if(_9dc&&!this._hasBeenShown){this._hasBeenShown=true;this._showChild(_9dc);}this.inherited(arguments);},_setupChild:function(_9dd){this.inherited(arguments);dojo.replaceClass(_9dd.domNode,"dijitHidden","dijitVisible");_9dd.domNode.title="";},addChild:function(_9de,_9df){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-addChild",[_9de,_9df]);this.layout();if(!this.selectedChildWidget){this.selectChild(_9de);}}},removeChild:function(page){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-removeChild",[page]);}if(this._beingDestroyed){return;}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _9e0=this.getChildren();if(_9e0.length){this.selectChild(_9e0[0]);}}}if(this._started){this.layout();}},selectChild:function(page,_9e1){page=dijit.byId(page);if(this.selectedChildWidget!=page){var d=this._transition(page,this.selectedChildWidget,_9e1);this._set("selectedChildWidget",page);dojo.publish(this.id+"-selectChild",[page]);if(this.persist){dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id);}}return d;},_transition:function(_9e2,_9e3,_9e4){if(_9e3){this._hideChild(_9e3);}var d=this._showChild(_9e2);if(_9e2.resize){if(this.doLayout){_9e2.resize(this._containerContentBox||this._contentBox);}else{_9e2.resize();}}return d;},_adjacent:function(_9e5){var _9e6=this.getChildren();var _9e7=dojo.indexOf(_9e6,this.selectedChildWidget);_9e7+=_9e5?1:_9e6.length-1;return _9e6[_9e7%_9e6.length];},forward:function(){return this.selectChild(this._adjacent(true),true);},back:function(){return this.selectChild(this._adjacent(false),true);},_onKeyPress:function(e){dojo.publish(this.id+"-containerKeyPress",[{e:e,page:this}]);},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._containerContentBox||this._contentBox);}},_showChild:function(page){var _9e8=this.getChildren();page.isFirstChild=(page==_9e8[0]);page.isLastChild=(page==_9e8[_9e8.length-1]);page._set("selected",true);dojo.replaceClass(page.domNode,"dijitVisible","dijitHidden");return page._onShow()||true;},_hideChild:function(page){page._set("selected",false);dojo.replaceClass(page.domNode,"dijitHidden","dijitVisible");page.onHide();},closeChild:function(page){var _9e9=page.onClose(this,page);if(_9e9){this.removeChild(page);page.destroyRecursive();}},destroyDescendants:function(_9ea){dojo.forEach(this.getChildren(),function(_9eb){this.removeChild(_9eb);_9eb.destroyRecursive(_9ea);},this);}});dojo.extend(dijit._Widget,{selected:false,closable:false,iconClass:"",showTitle:true});}if(!dojo._hasResource["dijit.layout._TabContainerBase"]){dojo._hasResource["dijit.layout._TabContainerBase"]=true;dojo.provide("dijit.layout._TabContainerBase");dojo.declare("dijit.layout._TabContainerBase",[dijit.layout.StackContainer,dijit._Templated],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:dojo.cache("dijit.layout","templates/TabContainer.html","<div class=\"dijitTabContainer\">\n\t<div class=\"dijitTabListWrapper\" dojoAttachPoint=\"tablistNode\"></div>\n\t<div dojoAttachPoint=\"tablistSpacer\" class=\"dijitTabSpacer ${baseClass}-spacer\"></div>\n\t<div class=\"dijitTabPaneWrapper ${baseClass}-container\" dojoAttachPoint=\"containerNode\"></div>\n</div>\n"),postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&dojo.style(this.srcNodeRef,"visibility","hidden");this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);if(!this.doLayout){dojo.addClass(this.domNode,"dijitTabContainerNoLayout");}if(this.nested){dojo.addClass(this.domNode,"dijitTabContainerNested");dojo.addClass(this.tablist.containerNode,"dijitTabContainerTabListNested");dojo.addClass(this.tablistSpacer,"dijitTabContainerSpacerNested");dojo.addClass(this.containerNode,"dijitTabPaneWrapperNested");}else{dojo.addClass(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"));}},_setupChild:function(tab){dojo.addClass(tab.domNode,"dijitTabPane");this.inherited(arguments);},startup:function(){if(this._started){return;}this.tablist.startup();this.inherited(arguments);},layout:function(){if(!this._contentBox||typeof (this._contentBox.l)=="undefined"){return;}var sc=this.selectedChildWidget;if(this.doLayout){var _9ec=this.tabPosition.replace(/-h/,"");this.tablist.layoutAlign=_9ec;var _9ed=[this.tablist,{domNode:this.tablistSpacer,layoutAlign:_9ec},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,_9ed);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,_9ed[2]);if(sc&&sc.resize){sc.resize(this._containerContentBox);}}else{if(this.tablist.resize){var s=this.tablist.domNode.style;s.width="0";var _9ee=dojo.contentBox(this.domNode).w;s.width="";this.tablist.resize({w:_9ee});}if(sc&&sc.resize){sc.resize();}}},destroy:function(){if(this.tablist){this.tablist.destroy();}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.TabController"]){dojo._hasResource["dijit.layout.TabController"]=true;dojo.provide("dijit.layout.TabController");dojo.declare("dijit.layout.TabController",dijit.layout.StackController,{templateString:"<div role='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",tabPosition:"top",buttonWidget:"dijit.layout._TabButton",_rectifyRtlTabList:function(){if(0>=this.tabPosition.indexOf("-h")){return;}if(!this.pane2button){return;}var _9ef=0;for(var pane in this.pane2button){var ow=this.pane2button[pane].innerDiv.scrollWidth;_9ef=Math.max(_9ef,ow);}for(pane in this.pane2button){this.pane2button[pane].innerDiv.style.width=_9ef+"px";}}});dojo.declare("dijit.layout._TabButton",dijit.layout._StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:dojo.cache("dijit.layout","templates/_TabButton.html","<div role=\"presentation\" dojoAttachPoint=\"titleNode\" dojoAttachEvent='onclick:onClick'>\n    <div role=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\n        <div role=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent'>\n        \t<div role=\"presentation\" dojoAttachPoint='focusNode'>\n\t\t        <img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitTabButtonIcon\" dojoAttachPoint='iconNode' />\n\t\t        <span dojoAttachPoint='containerNode' class='tabLabel'></span>\n\t\t        <span class=\"dijitInline dijitTabCloseButton dijitTabCloseIcon\" dojoAttachPoint='closeNode'\n\t\t        \t\tdojoAttachEvent='onclick: onClickCloseButton' role=\"presentation\">\n\t\t            <span dojoAttachPoint='closeText' class='dijitTabCloseText'>[x]</span\n\t\t        ></span>\n\t\t\t</div>\n        </div>\n    </div>\n</div>\n"),scrollOnFocus:false,buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.containerNode,false);},startup:function(){this.inherited(arguments);var n=this.domNode;setTimeout(function(){n.className=n.className;},1);},_setCloseButtonAttr:function(disp){this._set("closeButton",disp);dojo.toggleClass(this.innerDiv,"dijitClosable",disp);this.closeNode.style.display=disp?"":"none";if(disp){var _9f0=dojo.i18n.getLocalization("dijit","common");if(this.closeNode){dojo.attr(this.closeNode,"title",_9f0.itemClose);}var _9f0=dojo.i18n.getLocalization("dijit","common");this._closeMenu=new dijit.Menu({id:this.id+"_Menu",dir:this.dir,lang:this.lang,targetNodeIds:[this.domNode]});this._closeMenu.addChild(new dijit.MenuItem({label:_9f0.itemClose,dir:this.dir,lang:this.lang,onClick:dojo.hitch(this,"onClickCloseButton")}));}else{if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}}},_setLabelAttr:function(_9f1){this.inherited(arguments);if(this.showLabel==false&&!this.params.title){this.iconNode.alt=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}},destroy:function(){if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.ScrollingTabController"]){dojo._hasResource["dijit.layout.ScrollingTabController"]=true;dojo.provide("dijit.layout.ScrollingTabController");dojo.declare("dijit.layout.ScrollingTabController",dijit.layout.TabController,{templateString:dojo.cache("dijit.layout","templates/ScrollingTabController.html","<div class=\"dijitTabListContainer-${tabPosition}\" style=\"visibility:hidden\">\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerMenuButton\"\n\t\t\tclass=\"tabStripButton-${tabPosition}\"\n\t\t\tid=\"${id}_menuBtn\" containerId=\"${containerId}\" iconClass=\"dijitTabStripMenuIcon\"\n\t\t\tdropDownPosition=\"below-alt, above-alt\"\n\t\t\tdojoAttachPoint=\"_menuBtn\" showLabel=\"false\">&#9660;</div>\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t\tclass=\"tabStripButton-${tabPosition}\"\n\t\t\tid=\"${id}_leftBtn\" iconClass=\"dijitTabStripSlideLeftIcon\"\n\t\t\tdojoAttachPoint=\"_leftBtn\" dojoAttachEvent=\"onClick: doSlideLeft\" showLabel=\"false\">&#9664;</div>\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t\tclass=\"tabStripButton-${tabPosition}\"\n\t\t\tid=\"${id}_rightBtn\" iconClass=\"dijitTabStripSlideRightIcon\"\n\t\t\tdojoAttachPoint=\"_rightBtn\" dojoAttachEvent=\"onClick: doSlideRight\" showLabel=\"false\">&#9654;</div>\n\t<div class='dijitTabListWrapper' dojoAttachPoint='tablistWrapper'>\n\t\t<div role='tablist' dojoAttachEvent='onkeypress:onkeypress'\n\t\t\t\tdojoAttachPoint='containerNode' class='nowrapTabStrip'></div>\n\t</div>\n</div>\n"),useMenu:true,useSlider:true,tabStripClass:"",widgetsInTemplate:true,_minScroll:5,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{"class":"containerNode"}),buildRendering:function(){this.inherited(arguments);var n=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();if(!this.tabStripClass){this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None";dojo.addClass(n,"tabStrip-disabled");}dojo.addClass(this.tablistWrapper,this.tabStripClass);},onStartup:function(){this.inherited(arguments);dojo.style(this.domNode,"visibility","visible");this._postStartup=true;},onAddChild:function(page,_9f2){this.inherited(arguments);dojo.forEach(["label","iconClass"],function(attr){this.pane2watches[page.id].push(this.pane2button[page.id].watch(attr,dojo.hitch(this,function(name,_9f3,_9f4){if(this._postStartup&&this._dim){this.resize(this._dim);}})));},this);dojo.style(this.containerNode,"width",(dojo.style(this.containerNode,"width")+200)+"px");},onRemoveChild:function(page,_9f5){var _9f6=this.pane2button[page.id];if(this._selectedTab===_9f6.domNode){this._selectedTab=null;}this.inherited(arguments);},_initButtons:function(){this._btnWidth=0;this._buttons=dojo.query("> .tabStripButton",this.domNode).filter(function(btn){if((this.useMenu&&btn==this._menuBtn.domNode)||(this.useSlider&&(btn==this._rightBtn.domNode||btn==this._leftBtn.domNode))){this._btnWidth+=dojo._getMarginSize(btn).w;return true;}else{dojo.style(btn,"display","none");return false;}},this);},_getTabsWidth:function(){var _9f7=this.getChildren();if(_9f7.length){var _9f8=_9f7[this.isLeftToRight()?0:_9f7.length-1].domNode,_9f9=_9f7[this.isLeftToRight()?_9f7.length-1:0].domNode;return _9f9.offsetLeft+dojo.style(_9f9,"width")-_9f8.offsetLeft;}else{return 0;}},_enableBtn:function(_9fa){var _9fb=this._getTabsWidth();_9fa=_9fa||dojo.style(this.scrollNode,"width");return _9fb>0&&_9fa<_9fb;},resize:function(dim){if(this.domNode.offsetWidth==0){return;}this._dim=dim;this.scrollNode.style.height="auto";this._contentBox=dijit.layout.marginBox2contentBox(this.domNode,{h:0,w:dim.w});this._contentBox.h=this.scrollNode.offsetHeight;dojo.contentBox(this.domNode,this._contentBox);var _9fc=this._enableBtn(this._contentBox.w);this._buttons.style("display",_9fc?"":"none");this._leftBtn.layoutAlign="left";this._rightBtn.layoutAlign="right";this._menuBtn.layoutAlign=this.isLeftToRight()?"right":"left";dijit.layout.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,layoutAlign:"client"}]);if(this._selectedTab){if(this._anim&&this._anim.status()=="playing"){this._anim.stop();}var w=this.scrollNode,sl=this._convertToScrollLeft(this._getScrollForSelectedTab());w.scrollLeft=sl;}this._setButtonClass(this._getScroll());this._postResize=true;return {h:this._contentBox.h,w:dim.w};},_getScroll:function(){var sl=(this.isLeftToRight()||dojo.isIE<8||(dojo.isIE&&dojo.isQuirks)||dojo.isWebKit)?this.scrollNode.scrollLeft:dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width")+(dojo.isIE==8?-1:1)*this.scrollNode.scrollLeft;return sl;},_convertToScrollLeft:function(val){if(this.isLeftToRight()||dojo.isIE<8||(dojo.isIE&&dojo.isQuirks)||dojo.isWebKit){return val;}else{var _9fd=dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width");return (dojo.isIE==8?-1:1)*(val-_9fd);}},onSelectChild:function(page){var tab=this.pane2button[page.id];if(!tab||!page){return;}var node=tab.domNode;if(this._postResize&&node!=this._selectedTab){this._selectedTab=node;var sl=this._getScroll();if(sl>node.offsetLeft||sl+dojo.style(this.scrollNode,"width")<node.offsetLeft+dojo.style(node,"width")){this.createSmoothScroll().play();}}this.inherited(arguments);},_getScrollBounds:function(){var _9fe=this.getChildren(),_9ff=dojo.style(this.scrollNode,"width"),_a00=dojo.style(this.containerNode,"width"),_a01=_a00-_9ff,_a02=this._getTabsWidth();if(_9fe.length&&_a02>_9ff){return {min:this.isLeftToRight()?0:_9fe[_9fe.length-1].domNode.offsetLeft,max:this.isLeftToRight()?(_9fe[_9fe.length-1].domNode.offsetLeft+dojo.style(_9fe[_9fe.length-1].domNode,"width"))-_9ff:_a01};}else{var _a03=this.isLeftToRight()?0:_a01;return {min:_a03,max:_a03};}},_getScrollForSelectedTab:function(){var w=this.scrollNode,n=this._selectedTab,_a04=dojo.style(this.scrollNode,"width"),_a05=this._getScrollBounds();var pos=(n.offsetLeft+dojo.style(n,"width")/2)-_a04/2;pos=Math.min(Math.max(pos,_a05.min),_a05.max);return pos;},createSmoothScroll:function(x){if(arguments.length>0){var _a06=this._getScrollBounds();x=Math.min(Math.max(x,_a06.min),_a06.max);}else{x=this._getScrollForSelectedTab();}if(this._anim&&this._anim.status()=="playing"){this._anim.stop();}var self=this,w=this.scrollNode,anim=new dojo._Animation({beforeBegin:function(){if(this.curve){delete this.curve;}var oldS=w.scrollLeft,newS=self._convertToScrollLeft(x);anim.curve=new dojo._Line(oldS,newS);},onAnimate:function(val){w.scrollLeft=val;}});this._anim=anim;this._setButtonClass(x);return anim;},_getBtnNode:function(e){var n=e.target;while(n&&!dojo.hasClass(n,"tabStripButton")){n=n.parentNode;}return n;},doSlideRight:function(e){this.doSlide(1,this._getBtnNode(e));},doSlideLeft:function(e){this.doSlide(-1,this._getBtnNode(e));},doSlide:function(_a07,node){if(node&&dojo.hasClass(node,"dijitTabDisabled")){return;}var _a08=dojo.style(this.scrollNode,"width");var d=(_a08*0.75)*_a07;var to=this._getScroll()+d;this._setButtonClass(to);this.createSmoothScroll(to).play();},_setButtonClass:function(_a09){var _a0a=this._getScrollBounds();this._leftBtn.set("disabled",_a09<=_a0a.min);this._rightBtn.set("disabled",_a09>=_a0a.max);}});dojo.declare("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:dojo.cache("dijit.layout","templates/_ScrollingTabControllerButton.html","<div dojoAttachEvent=\"onclick:_onButtonClick\">\n\t<div role=\"presentation\" class=\"dijitTabInnerDiv\" dojoattachpoint=\"innerDiv,focusNode\">\n\t\t<div role=\"presentation\" class=\"dijitTabContent dijitButtonContents\" dojoattachpoint=\"tabContent\">\n\t\t\t<img role=\"presentation\" alt=\"\" src=\"${_blankGif}\" class=\"dijitTabStripIcon\" dojoAttachPoint=\"iconNode\"/>\n\t\t\t<span dojoAttachPoint=\"containerNode,titleNode\" class=\"dijitButtonText\"></span>\n\t\t</div>\n\t</div>\n</div>\n"),tabIndex:"",isFocusable:function(){return false;}});dojo.declare("dijit.layout._ScrollingTabControllerButton",[dijit.form.Button,dijit.layout._ScrollingTabControllerButtonMixin]);dojo.declare("dijit.layout._ScrollingTabControllerMenuButton",[dijit.form.Button,dijit._HasDropDown,dijit.layout._ScrollingTabControllerButtonMixin],{containerId:"",tabIndex:"-1",isLoaded:function(){return false;},loadDropDown:function(_a0b){this.dropDown=new dijit.Menu({id:this.containerId+"_menu",dir:this.dir,lang:this.lang});var _a0c=dijit.byId(this.containerId);dojo.forEach(_a0c.getChildren(),function(page){var _a0d=new dijit.MenuItem({id:page.id+"_stcMi",label:page.title,iconClass:page.iconClass,dir:page.dir,lang:page.lang,onClick:function(){_a0c.selectChild(page);}});this.dropDown.addChild(_a0d);},this);_a0b();},closeDropDown:function(_a0e){this.inherited(arguments);if(this.dropDown){this.dropDown.destroyRecursive();delete this.dropDown;}}});}if(!dojo._hasResource["dijit.layout.TabContainer"]){dojo._hasResource["dijit.layout.TabContainer"]=true;dojo.provide("dijit.layout.TabContainer");dojo.declare("dijit.layout.TabContainer",dijit.layout._TabContainerBase,{useMenu:true,useSlider:true,controllerWidget:"",_makeController:function(_a0f){var cls=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout"),_a10=dojo.getObject(this.controllerWidget);return new _a10({id:this.id+"_tablist",dir:this.dir,lang:this.lang,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":cls,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},_a0f);},postMixInProperties:function(){this.inherited(arguments);if(!this.controllerWidget){this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"dijit.layout.ScrollingTabController":"dijit.layout.TabController";}}});}if(!dojo._hasResource["dijit.form.SimpleTextarea"]){dojo._hasResource["dijit.form.SimpleTextarea"]=true;dojo.provide("dijit.form.SimpleTextarea");dojo.declare("dijit.form.SimpleTextarea",dijit.form.TextBox,{baseClass:"dijitTextBox dijitTextArea",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{rows:"textbox",cols:"textbox"}),rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(dojo.isIE&&this.cols){dojo.addClass(this.textbox,"dijitTextAreaCols");}},filter:function(_a11){if(_a11){_a11=_a11.replace(/\r/g,"");}return this.inherited(arguments);},_previousValue:"",_onInput:function(e){if(this.maxLength){var _a12=parseInt(this.maxLength);var _a13=this.textbox.value.replace(/\r/g,"");var _a14=_a13.length-_a12;if(_a14>0){if(e){dojo.stopEvent(e);}var _a15=this.textbox;if(_a15.selectionStart){var pos=_a15.selectionStart;var cr=0;if(dojo.isOpera){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_a13.substring(0,pos-_a14-cr)+_a13.substring(pos-cr);_a15.setSelectionRange(pos-_a14,pos-_a14);}else{if(dojo.doc.selection){_a15.focus();var _a16=dojo.doc.selection.createRange();_a16.moveStart("character",-_a14);_a16.text="";_a16.select();}}}this._previousValue=this.textbox.value;}this.inherited(arguments);}});}if(!dojo._hasResource["misys.form.SimpleTextarea"]){dojo._hasResource["misys.form.SimpleTextarea"]=true;dojo.provide("misys.form.SimpleTextarea");dojo.experimental("misys.form.SimpleTextarea");dojo.declare("misys.form.SimpleTextarea",[dijit.form.ValidationTextBox,dijit.form.SimpleTextarea],{maxSize:this.maxSize,blnNewRow:false,rowCount:0,postCreate:function(){this.inherited(arguments);},regExp:"(.|\\s)*",validate:function(){if(arguments.length===0){return this.validate(false);}return this.inherited(arguments);},isValid:function(_a17){this.invalidMessage=this.messages.invalidMessage;if(!this.validator(this.textbox.value,this.constraints)){return false;}var _a18=(this.state==="Error")?false:true;if(false===_a17||(true===_a17&&!_a18)){_a18=true;if(this.blnNewRow){if(this.rowCount>=this.maxSize){this.invalidMessage=misys.getLocalization("textareaLinesError",[this.maxSize,this.rowCount+1]);_a18=false;}}var _a19=(this.maxSize*this.cols)+this.maxSize;if(this.value.length>_a19){this.invalidMessage=misys.getLocalization("invalidFieldSizeError",[_a19-1,this.value.length]);_a18=false;}}return _a18;},onBlur:function(_a1a){var el=(_a1a==undefined)?this:_a1a;if(el.value!==""){var _a1b="";var _a1c=0;var _a1d=-1;var _a1e=el.get("value");var _a1f=0;var _a20=0;var _a21=false;var cols=el.cols;var _a22=el.maxSize;var _a23=false;var _a24=misys.getLocalization("g_delExtraLinesTextarea");_a1e=_a1e.replace(/(\r\n)+$/,"");_a1e=_a1e.replace(/(\n)+$/,"");for(k=0;k<_a1e.length;k++){strCurrentChar=_a1e.charAt(k);if((strCurrentChar=="\r")||(strCurrentChar=="\n")){_a1b+="\n";_a1c=0;_a1f++;_a21=true;_a1d=-1;if(strCurrentChar=="\r"){k++;}}else{if(_a1c==cols){if(_a1d==-1){_a1b+="\n";_a1c=1;}else{_a1b=_a1b.slice(0,_a1b.length-(k-_a1d)+1)+"\n"+_a1b.slice(_a1b.length-(k-_a1d)+1);_a1c=k-_a1d;}_a1b+=strCurrentChar;_a1f++;_a21=true;_a1d=-1;}else{_a1b+=strCurrentChar;_a1c++;_a21=false;}}if(strCurrentChar==" "){_a1d=k;}if(_a21){if(_a1f>=_a22){_a23=true;el.set("blnNewRow",_a23);el.set("rowCount",_a1f);if(_a24==="true"){el.set("value",_a1b);}el.validate(false);}}}if(el.maxLength!=""&&el.maxLength>0){if(_a1b.length>el.maxLength){_a1b=_a1b.substring(0,el.maxLength);}}el.set("blnNewRow",_a23);el.set("rowCount",_a1f);el.set("value",_a1b);}else{var _a25=0;el.set("rowCount",_a25);}el.validate(false);}});}if(!dojo._hasResource["dijit.form.MultiSelect"]){dojo._hasResource["dijit.form.MultiSelect"]=true;dojo.provide("dijit.form.MultiSelect");dojo.declare("dijit.form.MultiSelect",dijit.form._FormValueWidget,{size:7,templateString:"<select multiple='true' ${!nameAttrSetting} dojoAttachPoint='containerNode,focusNode' dojoAttachEvent='onchange: _onChange'></select>",attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{size:"focusNode"}),reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},addSelected:function(_a26){_a26.getSelected().forEach(function(n){this.containerNode.appendChild(n);this.domNode.scrollTop=this.domNode.offsetHeight;var _a27=_a26.domNode.scrollTop;_a26.domNode.scrollTop=0;_a26.domNode.scrollTop=_a27;},this);},getSelected:function(){return dojo.query("option",this.containerNode).filter(function(n){return n.selected;});},_getValueAttr:function(){return this.getSelected().map(function(n){return n.value;});},multiple:true,_setValueAttr:function(_a28){dojo.query("option",this.containerNode).forEach(function(n){n.selected=(dojo.indexOf(_a28,n.value)!=-1);});},invertSelection:function(_a29){dojo.query("option",this.containerNode).forEach(function(n){n.selected=!n.selected;});this._handleOnChange(this.get("value"),_a29==true);},_onChange:function(e){this._handleOnChange(this.get("value"),true);},resize:function(size){if(size){dojo.marginBox(this.domNode,size);}},postCreate:function(){this._onChange();}});}if(!dojo._hasResource["misys.binding.AsyncMessage"]){dojo._hasResource["misys.binding.AsyncMessage"]=true;dojo.provide("misys.binding.AsyncMessage");(function(d,m){function _a2a(_a2b){var _a2c=dijit.byId("asyncSaveDialog");var _a2d=dojo.byId("asyncSaveDialogButtons");var _a2e=dijit.byId("OkAsyncButton").domNode;var _a2f=dojo.byId("asyncSaveDialogContent");var _a30=dijit.byId("asyncSaveDialog").domNode;var _a31=dojo.byId("asyncSaveDialogMsg");dojo.style(_a2d,"display","block");dojo.style(_a2f,"display","block");dojo.style(_a2e,"display","inline-block");dojo.style(_a30,"display","inline-block");dojo.style(_a31,"display","inline-block");_a2c.set("title",misys.getLocalization("asyncMessage"));_a31.innerHTML=_a2b.asyncMessage;misys.dialog.connect(_a2c,"onKeyPress",function(evt){if(evt.keyCode==dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("OkAsyncButton"),"onMouseUp",function(){misys.dialog.disconnect(_a2c);_a2c.hide();},_a2c.id);misys.dialog.connect(_a2c,"onHide",function(){misys.dialog.disconnect(_a2c);});_a2c.show();};d.mixin(m,{checkAsyncMessage:function(_a32){misys.xhrGet({url:misys.getServletURL("/screen/AjaxScreen/action/PingAction"),sync:true,handleAs:"json",load:function(_a33,args){if(_a33.asyncMessage){_a2a(_a33);}else{_a32++;setTimeout("misys.checkAsyncMessage("+_a32+")",m._config.asyncMessageFreq||5000);}},error:function(_a34){}});}});})(dojo,misys);}if(!dojo._hasResource["dojox.lang.aspect"]){dojo._hasResource["dojox.lang.aspect"]=true;dojo.provide("dojox.lang.aspect");(function(){var d=dojo,aop=dojox.lang.aspect,ap=Array.prototype,_a35=[],_a36;var _a37=function(){this.next_before=this.prev_before=this.next_around=this.prev_around=this.next_afterReturning=this.prev_afterReturning=this.next_afterThrowing=this.prev_afterThrowing=this;this.counter=0;};d.extend(_a37,{add:function(_a38){var dyn=d.isFunction(_a38),node={advice:_a38,dynamic:dyn};this._add(node,"before","",dyn,_a38);this._add(node,"around","",dyn,_a38);this._add(node,"after","Returning",dyn,_a38);this._add(node,"after","Throwing",dyn,_a38);++this.counter;return node;},_add:function(node,_a39,_a3a,dyn,_a3b){var full=_a39+_a3a;if(dyn||_a3b[_a39]||(_a3a&&_a3b[full])){var next="next_"+full,prev="prev_"+full;(node[prev]=this[prev])[next]=node;(node[next]=this)[prev]=node;}},remove:function(node){this._remove(node,"before");this._remove(node,"around");this._remove(node,"afterReturning");this._remove(node,"afterThrowing");--this.counter;},_remove:function(node,_a3c){var next="next_"+_a3c,prev="prev_"+_a3c;if(node[next]){node[next][prev]=node[prev];node[prev][next]=node[next];}},isEmpty:function(){return !this.counter;}});var _a3d=function(){return function(){var self=arguments.callee,_a3e=self.advices,ret,i,a,e,t;if(_a36){_a35.push(_a36);}_a36={instance:this,joinPoint:self,depth:_a35.length,around:_a3e.prev_around,dynAdvices:[],dynIndex:0};try{for(i=_a3e.prev_before;i!=_a3e;i=i.prev_before){if(i.dynamic){_a36.dynAdvices.push(a=new i.advice(_a36));if(t=a.before){t.apply(a,arguments);}}else{t=i.advice;t.before.apply(t,arguments);}}try{ret=(_a3e.prev_around==_a3e?self.target:aop.proceed).apply(this,arguments);}catch(e){_a36.dynIndex=_a36.dynAdvices.length;for(i=_a3e.next_afterThrowing;i!=_a3e;i=i.next_afterThrowing){a=i.dynamic?_a36.dynAdvices[--_a36.dynIndex]:i.advice;if(t=a.afterThrowing){t.call(a,e);}if(t=a.after){t.call(a);}}throw e;}_a36.dynIndex=_a36.dynAdvices.length;for(i=_a3e.next_afterReturning;i!=_a3e;i=i.next_afterReturning){a=i.dynamic?_a36.dynAdvices[--_a36.dynIndex]:i.advice;if(t=a.afterReturning){t.call(a,ret);}if(t=a.after){t.call(a);}}var ls=self._listeners;for(i in ls){if(!(i in ap)){ls[i].apply(this,arguments);}}}finally{for(i=0;i<_a36.dynAdvices.length;++i){a=_a36.dynAdvices[i];if(a.destroy){a.destroy();}}_a36=_a35.length?_a35.pop():null;}return ret;};};aop.advise=function(obj,_a3f,_a40){if(typeof obj!="object"){obj=obj.prototype;}var _a41=[];if(!(_a3f instanceof Array)){_a3f=[_a3f];}for(var j=0;j<_a3f.length;++j){var t=_a3f[j];if(t instanceof RegExp){for(var i in obj){if(d.isFunction(obj[i])&&t.test(i)){_a41.push(i);}}}else{if(d.isFunction(obj[t])){_a41.push(t);}}}if(!d.isArray(_a40)){_a40=[_a40];}return aop.adviseRaw(obj,_a41,_a40);};aop.adviseRaw=function(obj,_a42,_a43){if(!_a42.length||!_a43.length){return null;}var m={},al=_a43.length;for(var i=_a42.length-1;i>=0;--i){var name=_a42[i],o=obj[name],ao=new Array(al),t=o.advices;if(!t){var x=obj[name]=_a3d();x.target=o.target||o;x.targetName=name;x._listeners=o._listeners||[];x.advices=new _a37;t=x.advices;}for(var j=0;j<al;++j){ao[j]=t.add(_a43[j]);}m[name]=ao;}return [obj,m];};aop.unadvise=function(_a44){if(!_a44){return;}var obj=_a44[0],_a45=_a44[1];for(var name in _a45){var o=obj[name],t=o.advices,ao=_a45[name];for(var i=ao.length-1;i>=0;--i){t.remove(ao[i]);}if(t.isEmpty()){var _a46=true,ls=o._listeners;if(ls.length){for(i in ls){if(!(i in ap)){_a46=false;break;}}}if(_a46){obj[name]=o.target;}else{var x=obj[name]=d._listener.getDispatcher();x.target=o.target;x._listeners=ls;}}}};aop.getContext=function(){return _a36;};aop.getContextStack=function(){return _a35;};aop.proceed=function(){var _a47=_a36.joinPoint,_a48=_a47.advices;for(var c=_a36.around;c!=_a48;c=_a36.around){_a36.around=c.prev_around;if(c.dynamic){var a=_a36.dynAdvices[_a36.dynIndex++],t=a.around;if(t){return t.apply(a,arguments);}}else{return c.advice.around.apply(c.advice,arguments);}}return _a47.target.apply(_a36.instance,arguments);};})();}if(!dojo._hasResource["dojox.collections._base"]){dojo._hasResource["dojox.collections._base"]=true;dojo.provide("dojox.collections._base");dojox.collections.DictionaryEntry=function(k,v){this.key=k;this.value=v;this.valueOf=function(){return this.value;};this.toString=function(){return String(this.value);};};dojox.collections.Iterator=function(arr){var a=arr;var _a49=0;this.element=a[_a49]||null;this.atEnd=function(){return (_a49>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_a49++];return this.element;};this.map=function(fn,_a4a){return dojo.map(a,fn,_a4a);};this.reset=function(){_a49=0;this.element=a[_a49];};};dojox.collections.DictionaryIterator=function(obj){var a=[];var _a4b={};for(var p in obj){if(!_a4b[p]){a.push(obj[p]);}}var _a4c=0;this.element=a[_a4c]||null;this.atEnd=function(){return (_a4c>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_a4c++];return this.element;};this.map=function(fn,_a4d){return dojo.map(a,fn,_a4d);};this.reset=function(){_a4c=0;this.element=a[_a4c];};};}if(!dojo._hasResource["dojox.collections.ArrayList"]){dojo._hasResource["dojox.collections.ArrayList"]=true;dojo.provide("dojox.collections.ArrayList");dojox.collections.ArrayList=function(arr){var _a4e=[];if(arr){_a4e=_a4e.concat(arr);}this.count=_a4e.length;this.add=function(obj){_a4e.push(obj);this.count=_a4e.length;};this.addRange=function(a){if(a.getIterator){var e=a.getIterator();while(!e.atEnd()){this.add(e.get());}this.count=_a4e.length;}else{for(var i=0;i<a.length;i++){_a4e.push(a[i]);}this.count=_a4e.length;}};this.clear=function(){_a4e.splice(0,_a4e.length);this.count=0;};this.clone=function(){return new dojox.collections.ArrayList(_a4e);};this.contains=function(obj){for(var i=0;i<_a4e.length;i++){if(_a4e[i]==obj){return true;}}return false;};this.forEach=function(fn,_a4f){dojo.forEach(_a4e,fn,_a4f);};this.getIterator=function(){return new dojox.collections.Iterator(_a4e);};this.indexOf=function(obj){for(var i=0;i<_a4e.length;i++){if(_a4e[i]==obj){return i;}}return -1;};this.insert=function(i,obj){_a4e.splice(i,0,obj);this.count=_a4e.length;};this.item=function(i){return _a4e[i];};this.remove=function(obj){var i=this.indexOf(obj);if(i>=0){_a4e.splice(i,1);}this.count=_a4e.length;};this.removeAt=function(i){_a4e.splice(i,1);this.count=_a4e.length;};this.reverse=function(){_a4e.reverse();};this.sort=function(fn){if(fn){_a4e.sort(fn);}else{_a4e.sort();}};this.setByIndex=function(i,obj){_a4e[i]=obj;this.count=_a4e.length;};this.toArray=function(){return [].concat(_a4e);};this.toString=function(_a50){return _a4e.join((_a50||","));};};}if(!dojo._hasResource["dojo.io.iframe"]){dojo._hasResource["dojo.io.iframe"]=true;dojo.provide("dojo.io.iframe");dojo.getObject("io",true,dojo);dojo.io.iframe={create:function(_a51,_a52,uri){if(window[_a51]){return window[_a51];}if(window.frames[_a51]){return window.frames[_a51];}var _a53=null;var turi=uri;if(!turi){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}turi=(dojo.config["dojoBlankHtmlUrl"]||dojo.moduleUrl("dojo","resources/blank.html"));}var _a53=dojo.place("<iframe id=\""+_a51+"\" name=\""+_a51+"\" onload=\""+_a52+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",dojo.body());window[_a51]=_a53;return _a53;},setSrc:function(_a54,src,_a55){try{if(!_a55){if(dojo.isWebKit){_a54.location=src;}else{frames[_a54.name].location=src;}}else{var idoc;if(dojo.isIE||dojo.isWebKit){idoc=_a54.contentWindow.document;}else{idoc=_a54.contentWindow;}if(!idoc){_a54.location=src;return;}else{idoc.location.replace(src);}}}catch(e){}},doc:function(_a56){var doc=_a56.contentDocument||(((_a56.name)&&(_a56.document)&&(dojo.doc.getElementsByTagName("iframe")[_a56.name].contentWindow)&&(dojo.doc.getElementsByTagName("iframe")[_a56.name].contentWindow.document)))||((_a56.name)&&(dojo.doc.frames[_a56.name])&&(dojo.doc.frames[_a56.name].document))||null;return doc;},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _a57=null;try{var _a58=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _a59=_a58.handleAs;_a57=ifd;if(_a59!="html"){if(_a59=="xml"){if(dojo.isIE<9||(dojo.isIE&&dojo.isQuirks)){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _a5a=(dii._frame.contentWindow.document).documentElement.innerText;_a5a=_a5a.replace(/>\s+</g,"><");_a5a=dojo.trim(_a5a);var _a5b={responseText:_a5a};_a57=dojo._contentHandlers["xml"](_a5b);}}else{_a57=ifd.getElementsByTagName("textarea")[0].value;if(_a59=="json"){_a57=dojo.fromJson(_a57);}else{if(_a59=="javascript"){_a57=dojo.eval(_a57);}}}}}catch(e){_a57=e;}finally{_a58._callNext();}return _a57;},function(_a5c,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _a5c;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}do{var dfd=this._currentDfd=this._dfdQueue.shift();}while(dfd&&dfd.canceled&&this._dfdQueue.length);if(!dfd||dfd.canceled){this._currentDfd=null;return;}var _a5d=dfd.ioArgs;var args=_a5d.args;_a5d._contentToClean=[];var fn=dojo.byId(args["form"]);var _a5e=args["content"]||{};if(fn){if(_a5e){var _a5f=function(name,_a60){dojo.create("input",{type:"hidden",name:name,value:_a60},fn);_a5d._contentToClean.push(name);};for(var x in _a5e){var val=_a5e[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_a5f(x,val[i]);}}else{if(!fn[x]){_a5f(x,val);}else{fn[x].value=val;}}}}var _a61=fn.getAttributeNode("action");var _a62=fn.getAttributeNode("method");var _a63=fn.getAttributeNode("target");if(args["url"]){_a5d._originalAction=_a61?_a61.value:null;if(_a61){_a61.value=args.url;}else{fn.setAttribute("action",args.url);}}if(!_a62||!_a62.value){if(_a62){_a62.value=(args["method"])?args["method"]:"post";}else{fn.setAttribute("method",(args["method"])?args["method"]:"post");}}_a5d._originalTarget=_a63?_a63.value:null;if(_a63){_a63.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;dojo._ioNotifyStart(dfd);fn.submit();}else{var _a64=args.url+(args.url.indexOf("?")>-1?"&":"?")+_a5d.query;dojo._ioNotifyStart(dfd);this.setSrc(this._frame,_a64,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _a65=dfd.ioArgs;var args=_a65.args;var _a66=dojo.byId(args.form);if(_a66){var _a67=_a65._contentToClean;for(var i=0;i<_a67.length;i++){var key=_a67[i];for(var j=0;j<_a66.childNodes.length;j++){var _a68=_a66.childNodes[j];if(_a68.name==key){dojo.destroy(_a68);break;}}}if(_a65["_originalAction"]){_a66.setAttribute("action",_a65._originalAction);}if(_a65["_originalTarget"]){_a66.setAttribute("target",_a65._originalTarget);_a66.target=_a65._originalTarget;}}_a65._finished=true;}};}if(!dojo._hasResource["misys.client.common_client"]){dojo._hasResource["misys.client.common_client"]=true;dojo.provide("misys.client.common_client");(function(d,dj,m){})(dojo,dijit,misys);}if(!dojo._hasResource["misys.common"]){dojo._hasResource["misys.common"]=true;var originalOperationValue="";var consoleMSG="widget invalid: ";var attachmntFile="attachment-file";var tabContainr=".tabcontainer";var colbortionWindow="#collaborationWindow";var ariaDescrib="aria-describedby";var langMenu="#languagesMenu .dijitReset.dijitStretch.dijitButtonContents.dijitDownArrowButton";var bookmrkMenu="#bookmarkMenu .dijitReset.dijitStretch.dijitButtonContents.dijitDownArrowButton";var popuMenuItem=".dijitReset.dijitInline.dijitMenuItem.dijitMenuItemLabel.portalPopupMenuBarItem";var h1portletTitle="h1.portlet-title";var h2portletTitle="h2.portlet-title";var homepagePortlet=".homepage .portlet";var inlneBlock="inline-block";var prductCode="&productcode=";var refrnceId="&referenceid=";var entitlementCod="&entitlementcode=";var entitlementDescp="&entitlementdescription=";var scrhCrieteria="#searchCriteria > div > p";var GTPRootPotlet="#GTPRootPortlet > div.portlet-section-header.portlet-font > h1";var reportingPopup="/screen/ReportingPopup";var footerHtml="footerHtml";dojo.provide("misys.common");dojo.extend(dijit.Editor,{toXML:function(){var _a69=this.get("value").replace("<br _moz_editor_bogus_node=\"TRUE\" />","");_a69=dojo.trim(_a69);return _a69!==""?"<![CDATA["+dojo.trim(dojox.html.entities.encode(_a69,dojox.html.entities.html))+"]]>":"";}});dojo.extend(misys.form.SimpleTextarea,{toXML:function(){var _a6a=this.get("value");_a6a=dojo.trim(_a6a);return _a6a!==""?"<![CDATA["+dojo.trim(_a6a)+"]]>":"";}});dojo.extend(dijit.form.MultiSelect,{_getValueAttr:function(){return dojo.query("option",this.containerNode).map(function(n){return n.value;});}});function getErrorSection(){var _a6b=0,_a6c=0;var _a6d=[];misys._config=misys._config||{};dojo.query(".toplevel-header").forEach(function(_a6e){var _a6f;var i;var _a70;var _a71=_a6e.childNodes;for(i=0;i<_a71.length;i++){_a6f=_a71[i];if(_a6f.className==="toc-item"){_a70=_a6f.firstChild.innerHTML;}else{if(_a6f.className==="fieldset-content"){var _a72=[];dojo.forEach(_a6f.querySelectorAll("*"),function(div){var _a73=dijit.byId(div.id);if(_a73){_a73._hasBeenBlurred=true;var _a74=_a73.disabled||!_a73.validate||_a73.validate();if(!_a74){var _a75={"widget":_a73};var _a76=_a73.declaredClass;_a72.push(_a75);}}});}}if(_a70&&_a72&&_a72.length>0){var _a77={"header":_a70,"widgetArray":_a72,"child":_a6f};_a6d.push(_a77);}}});if(_a6d.length>0){var _a78=dojo.byId("errorContent");if(_a78){_a78.innerHTML="";var _a79=dojo.create("ul");dojo.forEach(_a6d,function(_a7a){_a7a.child.id="mylink"+_a6c++;var _a7b="mylink"+_a6b++;var li=dojo.create("li");var a=dojo.create("a",{href:"#"+_a7b,id:"goto_"+_a7b,innerHTML:_a7a.header},li);dojo.place(li,_a79);});dojo.empty(_a78);dojo.style(dojo.byId("errorSection"),"display","block");dojo.place(_a79,_a78);}}else{if(dojo.byId("errorSection")){dojo.style(dojo.byId("errorSection"),"display","none");}}};dojo.extend(dijit.form.Form,{validate:function(){var _a7c=false;misys._config=misys._config||{};return dojo.every(dojo.map(this.getDescendants(),function(_a7d){_a7d._hasBeenBlurred=true;var _a7e=_a7d.disabled||!_a7d.validate||_a7d.validate();if(!_a7e){}if(!_a7e&&!_a7c){if(_a7d.hasOwnProperty("parentTab")){dijit.byId(_a7d.get("tabContainer")).selectChild(_a7d.get("parentTab"));}var _a7f=_a7d.focus||function(){};if(dojo.isIE<=6||misys._config.popupType){dojo.window.scrollIntoView(_a7d.containerNode||_a7d.domNode);_a7f();}else{dojox.fx.smoothScroll({node:_a7d.containerNode||_a7d.domNode,win:window,onEnd:function(){_a7f();}}).play();}_a7c=true;}return _a7e;}),function(item){return item;});}});(function(d,dj,m){var _a80=".validate",_a81="realform",_a82="transactionDetails",_a83=attachmntFile,_a84="attachment-fileinvoice",_a85="attachment-filepurchaseorder",_a86="attachment-filepurchaseorderupload",_a87="files_master_table",_a88="attachment-fileOTHER",_a89=".swift",_a8a=100,_a8b="popup_fakeform1",_a8c=".subscribeTopic",_a8d="subscribe_topic",_a8e="tabChangeStyle",_a8f=tabContainr,_a90=".dojoxGrid",_a91="TransactionSearchForm",_a92="export_list",_a93="filename",_a94="collaborationWindowContainer",_a95=".toc-item",_a96=5000,_a97=".chartImg",_a98="400px",_a99="600",_a9a="800",_a9b=500,_a9c,_a9d,_a9e,_a9f;function _aa0(type){var _aa1=[function(){return true;}],_aa2=type,_aa3,_aa4,_aa5,_aa6,_aa7,_aa8,_aa9;switch(type){case "VALIDATE":_aa1.push(misys.validateSummitTransaction);_aa3=m.getLocalization("validatingTransactionMessage");break;case "SAVE":_aa1.push(_ae2,m.beforeSaveValidations);if(m.client&&m.client.beforeSaveValidations){_aa1.push(m.client.beforeSaveValidations);}_aa5=m.getLocalization("mandatoryEntityMessage");var _aaa=dj.byId("product_code")?dj.byId("product_code").get("value"):null;if(_aaa!==null){var _aab=dj.byId(_aaa.toLowerCase()+"_cur_code");}var _aac=_aab?_aab.get("value"):"";if(_aab&&_aac!==""&&_aab.state==="Error"){_aab.set("value","");}_aa3=m.getLocalization("savingTransactionMessage");_aa4=function(){dijit.byId("entity")?dijit.byId("entity").focus():null;if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _aad=dijit.byId(m._config.swiftError[i]);_aad.set("state","Error");_aad._setStateClass();dj.setWaiState(_aad.focusNode,"invalid","true");}_aad=dijit.byId(m._config.swiftError[0]);if(_aad.hasOwnProperty("parentTab")){dj.byId(_aad.get("tabContainer")).selectChild(_aad.get("parentTab"));_adc();}dojox.fx.smoothScroll({node:_aad.containerNode||_aad.domNode,win:window}).play();}};break;case "ADD_BULK":_aa1.push(_ae2,_ad5,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_aa1.push(m.client.beforeSubmitValidations);}_aa5=m.getLocalization("mandatoryFieldsToSubmitError");_aa3=m.getLocalization("validatingAndSubmittingMessage");_aa4=function(){if(d.byId(_a82)){m.toggleTransaction(true,false,function(){_ad5(true);});}else{_ad5(true);}if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _aae=dijit.byId(m._config.swiftError[i]);_aae.set("state","Error");_aae._setStateClass();dj.setWaiState(_aae.focusNode,"invalid","true");}_aae=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_aae.containerNode||_aae.domNode,win:window}).play();}};break;case "UPDATE_BULK":_aa1.push(_ae2,_ad5,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_aa1.push(m.client.beforeSubmitValidations);}_aa5=m.getLocalization("mandatoryFieldsToSubmitError");_aa3=m.getLocalization("validatingAndSubmittingMessage");_aa4=function(){if(d.byId(_a82)){m.toggleTransaction(true,false,function(){_ad5(true);});}else{_ad5(true);}if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _aaf=dijit.byId(m._config.swiftError[i]);_aaf.set("state","Error");_aaf._setStateClass();dj.setWaiState(_aaf.focusNode,"invalid","true");}_aaf=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_aaf.containerNode||_aaf.domNode,win:window}).play();}};break;case "SYSTEM_SUBMIT":_aa2="SUBMIT";_aa1.push(_ad5,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_aa1.push(m.client.beforeSubmitValidations);}_aa5=m.getLocalization("mandatoryFieldsToSubmitError");_aa3=m.getLocalization("validatingAndSubmittingMessage");_aa4=function(){setTimeout(function(){_ad5(true);},dj.defaultDuration);};break;case "SUBMIT":_aa1.push(_ae2,_ad5,_add,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_aa1.push(m.client.beforeSubmitValidations);}_aa5=m.getLocalization("mandatoryFieldsToSubmitError");_aa3=m.getLocalization("validatingAndSubmittingMessage");if(dj.byId("return_comments")){dj.byId("return_comments").set("required",false);}getErrorSection();_aa4=function(){_ad5(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _ab0=dijit.byId(m._config.swiftError[i]);_ab0.set("state","Error");_ab0._setStateClass();dj.setWaiState(_ab0.focusNode,"invalid","true");}_ab0=dijit.byId(m._config.swiftError[0]);if(_ab0.hasOwnProperty("parentTab")){dj.byId(_ab0.get("tabContainer")).selectChild(_ab0.get("parentTab"));_adc();}if(d.byId(_a82)){m.toggleTransaction(true,false,function(){dojox.fx.smoothScroll({node:_ab0.containerNode||_ab0.domNode,win:window}).play();});}else{dojox.fx.smoothScroll({node:_ab0.containerNode||_ab0.domNode,win:window}).play();}}};break;case "SAVE_TEMPLATE":var _ab1=dj.byId("template_id"),_ab2=_ab1.get("value");if(_ab2.indexOf("<")!==-1){_ab2=_ab2.replaceAll("<","&lt;");}if(misys._config.isMultiBank){var _ab3=dj.byId("bk_type");var _ab4=dj.byId("bk_type_hidden");var _ab5=dj.byId("payroll_type");var _ab6=dj.byId("payroll_type_hidden");if(_ab3&&_ab3.get("value")===""&&_ab4&&_ab4.get("value")!==""){_ab3.set("value",_ab4.get("value"));}if(_ab5&&_ab5.get("value")===""&&_ab6&&_ab6.get("value")!==""){_ab5.set("value",_ab6.get("value"));}}_aa3=m.getLocalization("savingTemplateMessage",[_ab2]);_aa5=m.getLocalization("mandatoryTemplateFieldError");_aa1.push(function(){if(_ab1.get("value")===""){_aa5=m.getLocalization("mandatoryTemplateFieldError");return false;}return true;});_aa4=function(){_ab1.focus();};break;case "SAVE_REPORT_TEMPLATE":_aa2="SAVE_TEMPLATE";_aa1.push(_ad5);_aa5=m.getLocalization("mandatoryFieldsToSubmitError");_aa3=m.getLocalization("validatingAndSubmittingMessage");_aa4=function(){setTimeout(function(){_ad5(true);},dj.defaultDuration);};break;case "CANCEL":document.location.href=m.onCancelNavigation();return;break;case "CANCEL_BULK_TRANSACTION":var _ab7=dj.byId("ref_id").get("value");var _ab8=["/screen/BulkScreen?referenceid=",_ab7,"&mode=CANCEL"];window.location.href=misys.getServletURL(_ab8.join(""));return;break;case "CANCEL_BULK":var _ab9=dj.byId("bulk_ref_id").get("value");var _aba=dj.byId("bulk_tnx_id").get("value");var _abb=dj.byId("ref_id").get("value");var _abc=dj.byId("tnx_id").get("value");var _abd=["/screen/BulkScreen?referenceid=",_ab9,"&tnxid=",_aba,"&childrefid=",_abb,"&childtnxid=",_abc,"&tnxtype=01&mode=DRAFT"];window.location.href=misys.getServletURL(_abd.join(""));return;break;case "RETURN":_aa6=dj.byId("return_comments");if(_aa6&&dojo.string.trim(_aa6.get("value"))===""){_aa6.set("value","");_aa6.set("required",true);if(dj.byId("fakeform1")){dj.byId("fakeform1").validate();}_aa5=m.getLocalization("requiredToolTip");_aa6.focus();return;}else{if(_aa6&&dojo.string.trim(_aa6.get("value"))!==""){_aa6.set("value",dojo.string.trim(_aa6.get("value")));}}break;case "REJECT":_aa2="REJECT";if(dj.byId("reject_comments")){_aa7=dj.byId("reject_comments");if(_aa7&&dojo.string.trim(_aa7.get("value"))===""){_aa7.set("required",true);_aa5=m.getLocalization("requiredToolTip");_aa7.focus();return;}}if(dj.byId("free_format_text")){_aa8=dj.byId("free_format_text");if(_aa8&&dojo.string.trim(_aa8.get("value"))===""){_aa8.set("required",true);_aa5=m.getLocalization("requiredToolTip");_aa8.focus();return;}}_aa3=m.getLocalization("rejectingTransactionMessage");break;case "RETURN_TRANSACTION":_aa2="RETURN_TRANSACTION";_aa3=m.getLocalization("returningTransactionMessage");_aa6=dj.byId("return_comments");if(_aa6){if(_aa6&&_aa6.get("value")===""){_aa6.set("required",true);dj.byId("fakeform1").validate();_aa5=m.getLocalization("requiredToolTip");_aa6.focus();return;}else{var _abe=dojo.string.trim(dj.byId("return_comments").get("value"));if(_abe===""){dj.byId("return_comments").set("value",_abe);_aa6.set("required",true);dj.byId("fakeform1").validate();_aa5=m.getLocalization("requiredToolTip");_aa6.focus();return;}}}break;case "AUTO_FORWARD_SUBMIT":_aa2="AUTO_FORWARD_SUBMIT";if(m.client&&m.client.beforeSubmitValidations){_aa1.push(m.client.beforeSubmitValidations);}_aa3=m.getLocalization("submitAutoForwardMsg");break;case "LEGAL_TEXT_SUBMIT":_aa2="SUBMIT";if(m.client&&m.client.beforeSubmitValidations){_aa1.push(m.client.beforeSubmitValidations);}_aa3=m.getLocalization("validatingAndSubmittingMessage");break;case "DRAFT":_aa2="DRAFT";_aa1.push(m.beforeSaveValidations);if(m.client&&m.client.beforeSaveValidations){_aa1.push(m.client.beforeSaveValidations);}break;case "MAKER_SUBMIT":_aa2="SUBMIT";_aa1.push(_ae2,_ad5,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_aa1.push(m.client.beforeSubmitValidations);}_aa5=m.getLocalization("mandatoryFieldsToSubmitError");_aa3=m.getLocalization("validatingAndSubmittingMessage");_aa4=function(){_ad5(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _abf=dijit.byId(m._config.swiftError[i]);_abf.set("state","Error");_abf._setStateClass();dj.setWaiState(_abf.focusNode,"invalid","true");}_abf=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_abf.containerNode||_abf.domNode,win:window}).play();}};break;case "RESUBMIT":_aa2="SUBMIT";_aa3=m.getLocalization("resubmitMessage");break;case "MAKER_BENE_FILE_UPLOAD_SUBMIT":_aa2="SUBMIT";_aa1.push(_ae2,_ad5,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_aa1.push(m.client.beforeSubmitValidations);}_aa5=m.getLocalization("mandatoryFieldsToSubmitError");_aa3=m.getLocalization("validatingAndSubmittingMessage");_aa4=function(){_ad5(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _ac0=dijit.byId(m._config.swiftError[i]);_ac0.set("state","Error");_ac0._setStateClass();dj.setWaiState(_ac0.focusNode,"invalid","true");}_ac0=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_ac0.containerNode||_ac0.domNode,win:window}).play();}};break;case "MAKER_BENE_SUBMIT":_aa2="SUBMIT";_aa1.push(_ae2,_ad5,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_aa1.push(m.client.beforeSubmitValidations);}_aa5=m.getLocalization("mandatoryFieldsToSubmitError");_aa3=m.getLocalization("validatingAndSubmittingMessage");_aa4=function(){_ad5(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _ac1=dijit.byId(m._config.swiftError[i]);_ac1.set("state","Error");_ac1._setStateClass();dj.setWaiState(_ac1.focusNode,"invalid","true");}_ac1=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_ac1.containerNode||_ac1.domNode,win:window}).play();}};break;default:break;}if(_aa3&&_aa3!==""){m.dialog.show("PROGRESS",_aa3);}if((d.every(_aa1,function(f){return f();}))||(dj.byId("tnxtype")&&dj.byId("tnxtype").get("value")==="55")){var _ac2=dj.byId("realform_operation");if(_ac2&&_ac2.get("value")===""){_ac2.set("value",_aa2);}else{if(_aa2!==""&&(_aa2==="CHECKER_BENE_SUBMIT"||_aa2==="CHECKER_BENE_FILE_UPLOAD_SUBMIT")){_ac2.set("value","APPROVE_FEATURES");}}_acd();if(type==="SAVE_TEMPLATE"&&!_b56(dijit.byId("template_id"))){m.dialog.show("CONFIRMATION",m.getLocalization("nonUniqueTemplateIDError"),"",function(){if(m.isFormDirty&&m.isFormDirty===true){m.isFormDirty=false;}dj.byId("TransactionData").set("value",m.formToXML());dj.byId("realform").submit();});return;}var _ac3=dj.byId("transaction_confirmation_details");if(_ac3&&_ac3.get("value")==="Y"&&(type==="SUBMIT"||type==="AUTO_FORWARD_SUBMIT")){m.checkAndShowTnxConfirmationDetailsDialog();}else{if(type==="SUBMIT"||type==="MAKER_SUBMIT"||type==="LEGAL_TEXT_SUBMIT"||type==="AUTO_FORWARD_SUBMIT"||type==="APPROVE"||type==="REJECT"||type==="RETURN_TRANSACTION"||type==="REVERT"||type==="RETURN"||type==="DELETE"||type==="SYSTEM_SUBMIT"||type==="RESUBMIT"||type==="CHECKER_BENE_FILE_UPLOAD_SUBMIT"||type==="CHECKER_BENE_SUBMIT"||type==="MAKER_BENE_FILE_UPLOAD_SUBMIT"||type==="MAKER_BENE_SUBMIT"){m.performReauthentication();}else{if(m.isFormDirty&&m.isFormDirty===true){m.isFormDirty=false;}dj.byId("TransactionData").set("value",m.formToXML());dj.byId(_a81).submit();}}}else{var _ac4=m._config.holidayCutOffEnabled;var _ac5=m._config.legalTextEnabled;if(_ac4&&_ac4===true){m._config.holidayCutOffEnabled=false;}else{if(_ac5&&_ac5==true){m._config.legalTextEnabled=false;}else{var _ac6=m._config.onSubmitErrorMsg;_aa5=(_ac6&&_ac6!=="")?_ac6:_aa5;m._config.onSubmitErrorMsg="";if(_aa5&&_aa5!==""){m.dialog.show("ERROR",_aa5,"",_aa4);}}}}};function _ac7(type){var _ac8=[function(){return true;}],_ac9=type,_aca,_acb;_ac8.push(m.beforeSaveValidations);_acb=m.getLocalization("mandatoryEntityMessage");_aca=function(){dijit.byId("entity")?dijit.byId("entity").focus():null;};if(d.every(_ac8,function(f){return f();})){var _acc=dj.byId("realform_operation");if(_acc.get("value")===""){_acc.set("value",_ac9);}_acd();_acb="";dj.byId("TransactionData").set("value",m.formToXML());}else{var _ace=m._config.holidayCutOffEnabled;if(_ace&&_ace===true){m._config.holidayCutOffEnabled=false;}else{var _acf=m._config.onSubmitErrorMsg;_acb=(_acf&&_acf!=="")?_acf:_acb;m._config.onSubmitErrorMsg="";if(_acb&&_acb!==""){m.dialog.show("ERROR",_acb,"",_aca);}}}return _acb;};function _ad0(_ad1,_ad2){m.dialog.show("PROGRESS",m.getLocalization("validatingAndSubmittingMessage"),"",null,function(){setTimeout(function(){m.xhrPost({form:_ad1,load:function(data,_ad3){var _ad4=data.substring(data.indexOf("<div id='GTPRootPortlet' class='portlet'>"));_ad4=_ad4.substring(_ad4.indexOf("<div class='portlet-font portlet-section-body'><p>"));_ad4=_ad4.substring(_ad4.indexOf("<p>"),_ad4.indexOf("</div>"));dj.byId("alertDialog").hide();m.dialog.clear(d.byId(m._config.popupType+"data"),dj.byId("contentPane"),_ad2,_ad4);},contentType:""});},1000);});};function _ad5(_ad6,_ad7){var _ad8=(_ad7||d.query(_a80)).reverse(),_ad9=dj.byId("draft_term"),_ada=true;if(_ad9){_ad9.validate();}d.forEach(_ad8,function(form){var _adb=dj.byId(form.id);if(_adb._getState()!==""||_adb.state!==""){if(_ad6){_adb.validate();}_ada=false;}});if(!_ada&&_ad6){_adc();}return _ada;};function _add(){var _ade=dj.byId(_a83);var _adf=dj.byId("delivery_channel");var _ae0=false;if(_adf&&(_adf.get("value")=="FACT")&&_ade&&_ade.grid.selection&&_ade.fileActVisible){d.forEach(_ade.grid.selection.getSelected(),function(node,_ae1){if(node&&node!=null){_ae0=true;}});}else{_ae0=true;}if(!_ae0){m._config.onSubmitErrorMsg=m.getLocalization("selectAtleastOneFileForFileAct");}return _ae0;};function _ae2(){var _ae3=dj.byId("adv_send_mode");var _ae4,_ae5,_ae6=false,_ae7=false,_ae8=false;var _ae9=false;var _aea=false;var _aeb;if(document.getElementById("_userType")){_aeb=document.getElementById("_userType").getAttribute("value");}misys._config=misys._config||{};misys._config.swiftRelatedSections=misys._config.swiftRelatedSections||[];dojo.mixin(misys._config,{swiftError:new Array()});var _aec=false;var _aed=true;if(m._config.isBank){if(m._config.isBank===true){_aec=true;_aed=false;}}if((_ae3&&_ae3.get("value")==="01")||m._config.forceSWIFTValidation){if(_aed||((_aec&&misys._config.productCode!="SR")&&(_aec&&misys._config.productCode!="EL"))){var _aee=[];misys._config.swiftRelatedSections.forEach(function(_aef){var _af0=dj.byId(_aef.concat("_name"));var _af1=dj.byId(_aef.concat("_address_line_4"));if(_af0){if(!_af9(_af0)){_aee.push(_af0);_ae7=true;}}if(_af1&&_af1.get("value")!==""){if(_aed||((_aec&&misys._config.productCode!="SR")&&(_aec&&misys._config.productCode!="EL"))){_aee.push(_af1);_ae8=true;}}});d.query(_a89).forEach(function(node){var _af2=dj.byId(node.getAttribute("widgetid"));var _af3=misys._config.productCode;var _af4=dj.byId("is798")?dj.byId("is798").get("value"):"";m._config.is798=_af4;if((_af2&&_af2.id!="cust_ref_id")||(_af2&&_af2.id=="cust_ref_id"&&misys._config.is798=="Y")){_af2.onBlur(_af2);if(!_afb(_af2)&&!(_af3!="LC"||_af3!="SI"||_af3!="EL"||_af3!="SR")){m.showTooltip(m.getLocalization("invalidSWIFTFieldSizeError"),node);_aee.push(_af2);m.connect(_af2,"onBlur",function(){m.setFieldState(this,_afb(this));});_ae5=true;}else{if(!_b03(_af2)&&_af2.id!="template_id"){_aee.push(_af2);m.connect(_af2,"onBlur",function(){m.setFieldState(this,_b03(this));});_ae4=true;}else{if(m._config.swift2018Enabled&&_af7(node)&&!_b0b(_af2)){_aee.push(_af2);m.connect(_af2,"onBlur",function(){m.setFieldState(this,_b0b(this));});_ae6=true;}else{if(!(_af2.get("required")&&(_af2.get("value")===""||isNaN(_af2.get("value"))))){m.setFieldState(_af2,true);}}}}}});if(_aee.length>0){d.forEach(_aee,function(_af5,_af6){m.setFieldState(_af5,false);if(m._config.swift2018Enabled&&_af7(_af5)){_ae9=true;}else{_aea=true;}_af5.invalidMessage=m.getLocalization("invalidSWIFTTransactionError");misys._config.swiftError[_af6]=_af5.get("id");});if(_ae5){_adc();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTFieldSizeError");return false;}else{if(_ae7){_adc();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTFieldSizeErrorForTrade");return false;}else{if(_ae4){_adc();var _af8=m.getLocalization("invalidSWIFTTransactionErrorMsg");if(_aea&&!_ae9&&_aeb){_af8=_af8+m.getLocalization("invalidSWIFTTransactionValidValues");}if(!_aea&&_ae9&&_aeb){_af8=_af8+m.getLocalization("invalidSWIFTTransactionValidValuesExt");}if(_aea&&_ae9&&_aeb){if(_aeb=="03"||_aeb=="06"){_af8=_af8+m.getLocalization("invalidSWIFTTransactionValidValuesWithExt");}else{_af8=_af8+m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank");}}m._config.onSubmitErrorMsg=_af8;return false;}else{if(_ae8){_adc();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTAddressFieldErrorForTrade");return false;}else{if(_ae6){_adc();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTFirstCharErrorMsg");return false;}}}}}}}}return true;};function _af9(node){var _afa=dj.byId(node);if(_afa.get("value").length>35){return false;}return true;};function _afb(node){var _afc=dj.byId(node);if(/SimpleTextarea/.test(_afc.declaredClass)){var _afd=1,_afe=_afc.get("value");return d.every(_afe,function(c){if(c==="\n"){return (++_afd<=_a8a);}return true;});}return true;};function _af7(node){if(!m._config.swift2018Enabled){return false;}var _aff=dj.byId("product_code");var _b00="";if(_aff){_b00=_aff.get("value");}if(m._config.swift2023Enabled){var _b01=["ship_from","ship_loading","ship_discharge","ship_to","narrative_delivery_to"];if((_b00==="LC"&&new RegExp(_b01.join("|")).test(node.id))||(_b00==="SI"&&new RegExp(_b01.join("|")).test(node.id))){return true;}}var _b02=["narrative_documents_required","narrative_description_goods","narrative_additional_instructions","narrative_full_details","narrative_charges","narrative_special_beneficiary","narrative_special_recvbank","narrative_sender_to_receiver","narrative_amend_charges_other","free_format_text","narrative_transfer_conditions","narrative_additional_amount","narrative_payment_instructions","narrative_period_presentation","narrative_shipment_period","line_item_product_name","purchase_order","inco_place","ship_name"];if((_b00==="LC"&&new RegExp(_b02.join("|")).test(node.id))||(_b00==="EL"&&new RegExp(_b02.join("|")).test(node.id))||(_b00==="SI"&&new RegExp(_b02.join("|")).test(node.id))||(_b00==="SR"&&new RegExp(_b02.join("|")).test(node.id))||(_b00==="BG"&&new RegExp(_b02.join("|")).test(node.id))){return true;}else{return false;}};function _b03(node){var _b04=dj.byId(node),_b05=_b04.get("value");var _b06=_b04.get("displayedValue");if((_b05!=null&&_b05!="")&&(_b06!=null&&_b06!="")){if(_b05.length>_b06.length){_b05=_b04.get("displayedValue");}}if(_b04.datePackage&&_b04.datePackage==="dojo.date"){_b05=_b04.get("displayedValue");}if(_b05===null||_b05===""){return true;}var _b07=true;try{var _b08=dj.byId("swiftregexValue")?dj.byId("swiftregexValue").get("value"):"";if(m._config.swift2018Enabled&&_af7(node)){_b08=dj.byId("swiftregexzcharValue")?dj.byId("swiftregexzcharValue").get("value"):"";}var _b09=_b05;var _b0a=new RegExp(_b08);_b07=_b0a.test(_b09);}catch(err){return _b07;}return _b07;};function _b0b(node){var _b0c=dj.byId(node),_b0d=_b0c.get("value");if(_b0d===null||_b0d===""){return true;}if(_b0d.indexOf("\n:")!=-1||_b0d.indexOf("\n-")!=-1){return false;}return true;};function _b0e(_b0f,_b10){if(d.isArray(_b0f)){if(/CheckBox/.test(_b10)){if(_b0f.length===1&&_b0f[0]==="on"){return "Y";}return "N";}}if(_b0f===null||_b0f===""||((_b0f+"")==="NaN")){return "";}if(/Date/.test(_b10)){return d.date.locale.format(_b0f,{selector:"date",datePattern:misys.getLocalization("g_strGlobalDateFormat")});}if(/Time/.test(_b10)){return d.date.locale.format(_b0f,{datePattern:"dd/MM/yyyy",timePattern:"HH:mm:ss"});}return dojo.isString(_b0f)?dojox.html.entities.encode(_b0f,dojox.html.entities.html):_b0f;};function _acd(){var _b11=dj.byId("attIds");var _b12=dj.byId("fileActIds");if(_b11){var _b13=[];var _b14=[];if(d.query("table[id^="+_a87+"]").length>0){d.query("table[id^="+_a87+"] tr[id^='file_row_']]").forEach(function(node,i){var _b15=node.id;if(i!==0){_b13.push("|");}_b13.push(_b15.substring(_b15.indexOf("row_")+4,_b15.length));});}else{var _b16=[dj.byId(_a83),dj.byId(_a88),dj.byId(_a84),dj.byId(_a85),dj.byId(_a86)];var _b17=false;d.forEach(_b16,function(_b18){if(_b18&&_b18.grid){var arr=_b18.grid.store._arrayOfAllItems;d.forEach(arr,function(_b19,i){if(_b19&&_b19!=null){if(_b17){_b13.push("|");}else{_b17=true;}_b13.push(_b19.attachment_id);}});}});var _b1a=dj.byId(_a83);if(_b12&&_b1a&&_b1a.grid&&_b1a.grid.selection){_b17=false;d.forEach(_b1a.grid.selection.getSelected(),function(node,_b1b){if(node&&node!=null){if(_b17){_b14.push("|");}else{_b17=true;}_b14.push(node.attachment_id);}});_b12.set("value",_b14.join(""));}}_b11.set("value",_b13.join(""));}};function _adc(_b1c){d.query(_a8f,_b1c).forEach(function(_b1d){var _b1e=dj.byId(_b1d.getAttribute("widgetid"));if(_b1e){d.forEach(_b1e.getChildren(),function(tab){d.some(tab.getChildren(),function(node){if(node.get("state")==="Error"){m.connect(node,"onChange",function(){_b1f(tab,node);});node.onChange();return true;}return false;});});}});};function _b1f(tab,_b20){var _b21=d.create("img",{"class":"errorIcon",src:m.getContextualURL(m._config.imagesSrc+m._config.imageStore.warningIcon),alt:m.getLocalization("tabErrorWarning"),title:m.getLocalization("tabErrorWarning")}),_b22=m._config.requiredFieldPrefix||"*",_b23=tab.get("title"),_b24,_b25;if(_b20.declaredClass){var _b26=_b20.get("value");_b25={"isRequired":_b20.get("required"),"isNonEmpty":_b26!==null&&_b26!=="","isInError":_b20.get("state")==="Error"};}else{_b25=_b20;}if(_b25.isRequired&&(_b23.indexOf(_b22)===-1)){_b22+=" ";_b23=_b22+_b23;}if(_b25.isInError&&_b23.indexOf("<img")===-1){_b24=d.create("div");_b24.innerHTML=_b23;if(!(dojo.isIE&&dojo.isIE===6)){d.place(_b21,_b24);}_b23=_b24.innerHTML;}if(!_b25.isInError&&_b23.indexOf("<img")!==-1){_b23=_b23.substr(0,_b23.indexOf("<img"));}if(_b25.isNonEmpty&&_b23.indexOf(_a8e)===-1){_b24=d.create("div");d.create("span",{"class":_a8e,innerHTML:_b23},_b24);_b23=_b24.innerHTML;}if(_b23!==tab.get("title")){tab.set("title",_b23);}};function _b27(_b28){var _b29=false,_b2a=false,_b2b=false,_b2c,_b2d;d.query(_a8f,_b28).forEach(function(_b2e){var _b2f=dj.byId(_b2e.getAttribute("widgetid"));if(_b2f){_b2d=_b2f.get("id");d.forEach(_b2f.getChildren(),function(tab){_b29=false;_b2a=false;_b2b=false;_b2c=tab.get("id");d.forEach(tab.getChildren(),function(node){var _b30=node.get("value");if(!_b29&&node.get("required")){_b29=true;}if(!_b2a&&(_b30!==null&&_b30!=="")){_b2a=true;}if(!_b2b&&node.get("state")==="Error"){_b2b=true;}m.connect(node,"onChange",function(){_b1f(tab,{"isRequired":node.get("required"),"isNonEmpty":node.get("value")!==null&&node.get("value")!=="","isInError":false});});node.set("parentTab",_b2c);node.set("tabContainer",_b2d);});_b1f(tab,{"isRequired":_b29,"isNonEmpty":_b2a,"isInError":_b2b});});}});};function _b31(){var _b32,_b33;d.query(_a8c).forEach(function(_b34){_b32=dj.byId(dojo.attr(_b34,"widgetid"))||dj.byId(dojo.attr(_b34,"id"));if(_b32){_b33=_b32.get(_a8d);if(_b33){d.forEach(_b33.split(" "),function(_b35){d.subscribe(_b35,_b32,function(_b36){if(this.handleTopicEvent){this.handleTopicEvent(_b36,_b35);}});});}}});};function _b37(){if(d.byId(_a91)){m.connect(_a91,"onSubmit",function(e){var _b38=dj.byId(_a92)?dj.byId(_a92).get("value"):"screen";if(e&&_b38==="screen"){e.preventDefault();}d.forEach(dj.byId("TransactionSearchForm").getDescendants(),function(fld){if(fld.state==="Incomplete"&&fld.required===true){fld._hasBeenBlurred=true;fld.validate(false);}});if(this.isValid()){if(_b38!=="screen"){if(_b38==="pdf"){dj.byId(_a93).set("value","AccountStatement."+_b38);}else{dj.byId(_a93).set("value","inquiry."+_b38);}return true;}else{m.grid.reloadForSearchTerms();m.reloadChartImg();return false;}}else{if(dojo.byId("hugeDiv")){dojo.byId("hugeDiv").style.display="none";}return true;}});}};function _b39(){d.query(_a90).forEach(function(grid){var _b3a;var _b3b=dj.byId(grid.id);if(_b3b){if(d.hasClass(grid,"ischarted")){m.grid.toggleAllGroups(_b3b,false);}if(!window.isTopElementToBeFocussed){_b3b.resize();}}});};function _b3c(){var _b3d=d.byId(_a94),_b3e;if(_b3d){d.parser.parse(_b3d);_b3e=dj.byId("collaborationWindow");_b3e.placeAt(dojo.body());if((!d.isIE||d.isIE>7)&&_b3e.show){d.style(_b3e.domNode,"opacity",0);_b3e.show();}else{d.style(_b3e.domNode,"opacity",1);}}};function _b3f(){var _b40=/ValidationTextBox/;if(!m._config.disableFocusTrap){d.query(".widgetContainer *[id].dijitTextBox:not(.dijitReadOnly):not(.nofocusonerror)").forEach(function(_b41){var _b42=dj.byId(_b41.getAttribute("widgetid"));if(_b40.test(_b42.get("declaredClass"))&&!_b42.focusonerror){}else{m.connect(_b42,"onBlur",_b43);}});}};function _b43(){var _b44=this.get("value")+"";if(this.state==="Error"&&(!m._config.fieldInError||m._config.fieldInError===this.id)&&((typeof _b44==="undefined")||(_b44!==""&&_b44!=="null"&&_b44!=="NaN")||(/Select/.test(this.declaredClass)&&this.get("displayedValue")!==""&&!this.item))){m._config.fieldInError=this.id;var that=this;m.dialog.show("ERROR",m.getLocalization("focusOnErrorAlert"),"",function(){that.focus();});}else{if(misys._config.fieldInError===this.id){delete misys._config.fieldInError;}}};function _b45(_b46,init){_b46.forEach(function(_b47){var _b48=_b47.parentNode.offsetWidth;if(_b48!==0){_a9f=_b48;}if(init){d.attr(_b47,"width",_a9f);d.attr(_b47,"height",_a98);}else{d.attr(_b47,"src",d.attr(_b47,"alt")+"&chartwidth="+_a9f);}});};function _b49(url,key,_b4a){key=encodeURI(key);_b4a=encodeURI(_b4a);var _b4b;if(url.indexOf("?")===-1){_b4b=url+"?"+key+"="+_b4a;}else{var _b4c=url.split("?")[0];var _b4d=url.split("?")[1].split("&");var i=_b4d.length;var x;while(i--){x=_b4d[i].split("=");if(x[0]==key){x[1]=_b4a;_b4d[i]=x.join("=");break;}}if(i<0){_b4d[_b4d.length]=[key,_b4a].join("=");}_b4b=_b4c+"?"+_b4d.join("&");}return _b4b;};function _b4e(_b4f){_b4f.forEach(function(_b50){var grid=dj.byId(_b50.id);if(grid){if(!window.isTopElementToBeFocussed||!window.isToPreventTableHeaderFocusAlways){grid.resize();}grid.update();}});};function _b51(url,name,_b52){var _b53=name||misys.getLocalization("transactionPopupWindowTitle"),_b54=_b52||"width=800,height=500,resizable=yes,scrollbars=yes",_b55=d.global.open(url,_b53,_b54);if(!_b55.opener){_b55.opener=self;}_b55.focus();};function _b56(node){var _b57=dj.byId(node),_b58=_b57.get("value"),_b59=true;var _b5a;if(dj.byId("sub_product_code")){_b5a=dj.byId("sub_product_code").get("value");}else{_b5a="*";}if(_b58!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateTemplateId"),handleAs:"text",content:{productcode:m._config.productCode,templateid:_b58,companyid:dj.byId("company_id").get("value"),subproductcode:_b5a},sync:true,load:function(_b5b,_b5c){_b59=(_b5b.toLowerCase()==="true");},customError:function(_b5d,_b5e){console.error("[misys.common] _isUniqueTemplateId error",_b5d,_b5e);_b59=false;}});}return _b59;};function _b5f(){if(d.query(".cancelButton").length>0||d.query(".cancelBkButton").length>0){d.query(".saveButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SAVE");});});d.query(".systemSaveButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SYSTEM_SUBMIT");});});d.query(".saveTemplateButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SAVE_TEMPLATE");});});d.query(".submitButton").forEach(function(btn){var _b60=dj.byId("transaction_confirmation_details");var _b61=function(){if(m.commonclient&&m.commonclient.submit){m.commonclient.submit("SUBMIT");}else{m.submit("SUBMIT");}};if(_b60&&_b60.get("value")==="Y"){_b61=function(){window.onbeforeunload=null;m.beforeSubmit();_aa0("SUBMIT");};}m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",_b61);});d.query(".validateButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("VALIDATE");});});d.query(".forwardButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("FORWARD");});});d.query(".rejectButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("REJECT");});});d.query(".returnTransactionButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("RETURN_TRANSACTION");});});d.query(".cancelButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("CANCEL");});});d.query(".cancelBkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("CANCEL_BULK_TRANSACTION");});});d.query(".helpButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("HELP");});});d.query(".resubmitButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("RESUBMIT");});});d.query(".submitBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SUBMITBULK");});});}if(d.query(".cancelBulkButton").length>0){dj.byId("realform").set("action",m.getServletURL("/screen/BulkScreen"));d.query(".addBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("ADD_BULK");});});d.query(".updateBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("UPDATE_BULK");});});d.query(".saveTemplateBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SAVE_TEMPLATE_BULK");});});d.query(".cancelBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("CANCEL_BULK");});});d.query(".helpButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("HELP");});});}d.query("#toc").delegate("a","onclick",function(evt){if(this.id==="toggleTocLink"){m.toggleTOC();return;}if(this.id&&this.id.indexOf("_")!==-1){var _b62=this.id.substr(this.id.indexOf("_")+1),_b63=d.byId(_b62),_b64=d.byId("transactionDetails"),fnc=function(){if(d.isIE<=6){d.window.scrollIntoView(_b63);}else{dojox.fx.smoothScroll({node:_b63,win:window}).play();}};if(_b64&&d.isDescendant(_b63,_b64)&&(d.style(_b64,"display")==="none"||d.style(_b64,"position")==="absolute")){m.toggleTransaction(true,false,fnc);}else{fnc();}}});d.query("#errorSection").delegate("a","onclick",function(evt){if(this.id==="errorLink"){m.toggleErrorSection();return;}});if(dj.byId("editTransactionDetails")){m.connect("editTransactionDetails","onclick",function(){m.toggleTransaction(true,true);});}if(dj.byId("hideTransactionDetails")){m.connect("hideTransactionDetails","onclick",function(){m.toggleTransaction(false);});}};function _b65(){d.query(".savePopupButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.dialog.submit("SUBMIT");});});d.query(".cancelPopupButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.dialog.submit("CANCEL");});});d.query(".helpPopupButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.dialog.submit("HELP");});});};function _b66(){if(m.unloadListener){window.onbeforeunload=m.unloadListener;}dojo.forEach(m.excludedMethods,function(item,idx){dojox.lang.aspect.advise(item.object,item.method,{before:function(){m.isSystemButtonClicked=true;window.onbeforeunload=null;}});});if(dijit.byId(attachmntFile)){dojox.lang.aspect.advise(dijit.byId(attachmntFile).grid.store,["onSet","onNew","onDelete"],{after:function(){m.isFormDirty=true;}});}dojox.lang.aspect.advise(m.dialog,"show",{before:function(){window.onbeforeunload=null;}});dojox.lang.aspect.advise(m,["addTransactionAddon","deleteTransactionAddon","editTransactionAddon"],{after:function(){m.isFormDirty=true;}});d.query("#fakeform0, #fakeform1").forEach(function(node){var form=dj.byId(node.id);d.forEach(form.getDescendants(),function(_b67){m.connect(_b67,"onChange",m.markFormDirty);});});d.query("#fakeform0 a, #fakeform1 a, #fakeform0 img[onclick], #fakeform1 img[onclick]").forEach(function(node){dojox.lang.aspect.advise(node,"onclick",{before:function(){m.isSystemButtonClicked=true;window.onbeforeunload=null;setTimeout(function(){window.onbeforeunload=m.unloadListener;},50);}});});dojox.lang.aspect.advise(misys,"downloadFile",{before:function(){m.isSystemButtonClicked=true;window.onbeforeunload=null;setTimeout(function(){window.onbeforeunload=m.unloadListener;},50);}});dojo.query(".header a, .footer a, .portalMenuItem *").forEach(function(node,idx){m.connect(node,"onClick",function(_b68){if(m.isPopupRequired()){var evt=_b68;var _b69=_b73(evt);if(_b69!==""){dojo.stopEvent(evt);m.showUnsavedDataDialog();}var _b6a=dojo.connect(m,"setUnsavedDataOption",function(){if(m.unsavedDataOption!=="notset"){var _b6b="";if(m.unsavedDataOption==="save"){m.saveAsync(_b69);}else{if(_b69!==""&&_b6b===""&&m.unsavedDataOption==="nosave"){location.href=_b69;}}}dojo.disconnect(_b6a);});}});});var _b6c=dj.byId("menu_tree");if(_b6c){d.connect(_b6c,"onOpen",function(item,node,_b6d){d.forEach(dojo.query("#"+node.id+" span.dijitTreeLabel"),function(_b6e,idx){m.connect(_b6e,"onClick",function(_b6f){if(m.isPopupRequired()){var evt=_b6f;var _b70=_b73(evt);if(_b70!==""){dojo.stopEvent(evt);m.showUnsavedDataDialog();}var _b71=dojo.connect(m,"setUnsavedDataOption",function(){if(m.unsavedDataOption!=="notset"){var _b72="";if(m.unsavedDataOption==="save"){m.saveAsync(_b70);}else{if(_b70!==""&&_b72===""&&m.unsavedDataOption==="nosave"){location.href=_b70;}}}dojo.disconnect(_b71);});}});});});}};function _b73(evt){var _b74=evt.target;var _b75="";if(_b74.nodeName==="IMG"&&_b74.parentNode.nodeName==="A"){if(_b74.parentNode.href){_b75=_b74.parentNode.href;}}else{if(_b74.href){_b75=_b74.href;}else{if(dojo.hasClass(_b74,"dijitTreeLabel")){var _b76=dijit.byId("menu_tree");var _b77=_b76.attr("path");var _b78=dojo.filter(_b77,function(_b79){return _b79.hasOwnProperty("url");});if(_b78.length===1&&_b78[0].url){_b75=_b78[0].url;}}}}return _b75;};function _b7a(){var _b7b="";var path=misys._config.homeUrl;if(misys._config.homeUrl.indexOf("?")!=-1){path=misys._config.homeUrl.split("?")[0];}_b7b=path.substr(path.lastIndexOf("/")+1);return _b7b;};function _b7c(_b7d){var _b7e=["LC","BG","EC","EL","IC","BR","TF","SG","SI","SR","IR","FT","BK","SE","LN","TD","LI"];if(_b7e.indexOf(_b7d)!==-1){if(_b7d==="FT"||_b7d==="BK"){return m.formToXML({ignoreDisabled:true});}return m.formToXML();}else{return "";}};d.mixin(m,{performReauthentication:function(){var _b7f=dj.byId("reauth_perform");if(_b7f&&_b7f.get("value")==="Y"){var _b80={};if(d.isFunction(m._config.initReAuthParams)){_b80=m._config.initReAuthParams();m.checkAndShowReAuthDialog(_b80);}else{m.setContentInReAuthDialog("ERROR","");dj.byId("reauth_dialog").show();}}else{if(m.isFormDirty&&m.isFormDirty===true){m.isFormDirty=false;}dj.byId("TransactionData").set("value",m.formToXML());dj.byId(_a81).submit();}},submitCommon:function(type){_aa0(type);},validateFormsCommon:function(){return _ad5(true);},openPopupCommon:function(url,name,_b81){_b51(url,name,_b81);},setContentInReAuthDialog:function(_b82,_b83){var _b84;switch(_b82){case "01":if(d.isFunction(m._config.nonReauthSubmit)){m._config.nonReauthSubmit();}else{if(dj.byId("TransactionData")){dj.byId("TransactionData").set("value",m.formToXML());}dj.byId(_a81).submit();}break;case "ERROR":if(d.byId("reauth_dialog_content")){_b84=dj.findWidgets(d.byId("reauth_dialog_content"));d.forEach(_b84,function(w){w.destroyRecursive(false);});d.empty("reauth_dialog_content");}d.byId("reauth_dialog_content").innerHTML=m.getLocalization("technicalErrorReauth");d.parser.parse("reauth_dialog_content");dj.byId("reauth_password").set("required",false);m.animate("wipeOut",d.byId("reauth_otp_response_sb"));m.toggleClassInlineBlock("reauth_sb",false);break;case "EXCHANGE_RATE_ERROR":if(d.byId("reauth_dialog_content")){_b84=dj.findWidgets(d.byId("reauth_dialog_content"));d.forEach(_b84,function(w){w.destroyRecursive(false);});d.empty("reauth_dialog_content");}d.byId("reauth_dialog_content").innerHTML=m.getLocalization("technicalErrorExchangeRate");d.parser.parse("reauth_dialog_content");dj.byId("reauth_password").set("required",false);m.animate("wipeOut",d.byId("reauth_otp_response_sb"));m.toggleClassInlineBlock("reauth_dialog_password",false);m.toggleClassInlineBlock("reauth_sb",false);break;default:if(d.byId("reauth_dialog_content")){_b84=dj.findWidgets(dojo.byId("reauth_dialog_content"));d.forEach(_b84,function(w){w.destroyRecursive(false);});d.empty("reauth_dialog_content");}d.byId("reauth_dialog_content").innerHTML=_b82;d.parser.parse("reauth_dialog_content");m.toggleClassInlineBlock("reauth_sb",true);break;}},checkAndShowReAuthDialog:function(_b85){if(misys.commonclient&&misys.commonclient.checkAndShowReAuthDialog){misys.commonclient.checkAndShowReAuthDialog(_b85);return;}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ReAuthenticationAjax"),handleAs:"text",sync:true,preventCache:true,content:{productCode:_b85.productCode,subProductCode:_b85.subProductCode,transactionTypeCode:_b85.transactionTypeCode,subTransactionTypeCode:(_b85.subTransactionTypeCode)?_b85.subTransactionTypeCode:"",entity:(_b85.entity)?_b85.entity:"",currency:(_b85.currency)?_b85.currency:"",amount:(_b85.amount)?_b85.amount:"",tnxAmt:(_b85.tnxAmt)?_b85.tnxAmt:"",bank_abbv_name:(_b85.bankAbbvName)?_b85.bankAbbvName:"",xml:_b7c(_b85.productCode),mode:dj.byId("mode")?dj.byId("mode").get("value"):"",operation:dj.byId("realform_operation")?dj.byId("realform_operation").get("value"):"",option:_b85.option?_b85.option:""},load:function(_b86,_b87){if(!(_b86.indexOf("SC_UNAUTHORIZED")===-1)){misys.showSessionOverDialog();}else{m.setContentInReAuthDialog(_b86,_b87);if(""+_b86+""!="01"){dj.byId("reauth_dialog").show();}}},customError:function(_b88,_b89){console.error(_b88);m.setContentInReAuthDialog("ERROR",_b89);dj.byId("reauth_dialog").show();}});},getQueryParameterByName:function(name,url){name=name.replace(/[\[\]]/g,"\\$&");var _b8a=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),_b8b=_b8a.exec(url);if(!_b8b){return null;}if(!_b8b[2]){return "";}return decodeURIComponent(_b8b[2].replace(/\+/g," "));},isAngularProductUrl:function(_b8c,_b8d){if(!_b8d||_b8d==="null"||_b8d===""){var ret=misys._config.angularProducts&&misys._config.angularProducts.indexOf(_b8c)>-1;var _b8e=[];if(typeof misys._config["restrictedangularscreen"]!="undefined"&&misys._config.restrictedangularscreen!=null){_b8e=misys._config.restrictedangularscreen.replace(/[\[\]']+/g,"").split(", ");}var _b8f=false;for(var i=0;i<_b8e.length;i++){if(window.location.href.indexOf(_b8e[i])>-1){_b8f=true;}}if(ret&&_b8c&&_b8c!==""&&((typeof misys._config["restrictedangularproductcode"]!="undefined")&&misys._config.restrictedangularproductcode!=null&&misys._config.restrictedangularproductcode.indexOf(_b8c)>-1)&&((_b8f)||(window.location.href.indexOf("MessageCenterScreen")>-1)||(window.location.href.indexOf("classicUXHome")>-1))){ret=false;}return ret;}else{return misys._config.angularSubProducts&&misys._config.angularProducts&&misys._config.angularProducts.indexOf(_b8c)>-1&&m.isSubProductCodeValidForAngularUrl(misys._config.angularSubProducts,_b8d);}},isSubProductCodeValidForAngularUrl:function contains(_b90,_b91){var _b92=_b90.replace("[","").replace("]","");var _b93=_b92.split(", ");if(_b93.includes(_b91)){return true;}return false;},setTnxConfirmationDetailsInDialog:function(_b94,_b95){switch(_b94){case "ERROR":undefined;m.dialog.show("ERROR",m.getLocalization("technicalErrorTnxConfirmationDetails"));break;default:undefined;var _b96=function(){m.performReauthentication();};var _b97=function(){var _b98=dj.byId("realform_operation");_b98.set("value","");m.dialog.hide();};m.dialog.show("CONFIRMATION",_b94,"",null,null,"",_b96,_b97,null);break;}},checkAndShowTnxConfirmationDetailsDialog:function(){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/TransactionConfirmationDetailsAction"),handleAs:"text",sync:true,preventCache:true,content:{transactionData:m.formToXML()},load:function(_b99,_b9a){if(!(_b99.indexOf("SC_UNAUTHORIZED")===-1)){misys.showSessionOverDialog();}else{m.setTnxConfirmationDetailsInDialog(_b99,_b9a);}},customError:function(_b9b,_b9c){console.error(_b9b);m.setTnxConfirmationDetailsInDialog("ERROR",_b9c);}});},angularMenuReSize:function(){var _b9d=document.querySelector(".ui-menubar-root-list").offsetHeight;var _b9e=document.querySelector(".colmask");if(_b9e&&_b9e!=="undefined"){if(_b9d>=42){_b9e.style.top="80px";}}},_setupFocus:function(_b9f){m.hideCollabWindow();if(_b9f){m.setAccessibilityFlags();}if(window.isTopElementToBeFocussed){m.focusTopElement();}if(window.isTopElementToBeFocussed&&_b9f){setTimeout(function(){window.isTopElementToBeFocussed=false;},window.topElementFocusTimeout);}},hideCollabWindow:function(){if(!window.isFloatingFormSummaryMenuEnabled){if(dojo.query(colbortionWindow)&&dojo.query(colbortionWindow)[0]!=undefined){dojo.style(dojo.query(colbortionWindow)[0],"display","none");}if(dojo.query("#toc")&&dojo.query("#toc")[0]!=undefined){dojo.style(dojo.query("#toc")[0],"display","none");}}},skipToMenuLink:function(){if(!dojo.byId("portalMenuBar")){dojo.style(dojo.byId("skipToMenu"),"display","none");}else{dojo.style(dojo.byId("skipToMenu"),"display","inline");}},skipToContentLink:function(){if(!dojo.byId("GTPRootPortlet")){var _ba0=dojo.query(".portlet-title")[0];var _ba1=dojo.attr(_ba0,"id");if(_ba1){dojo.attr(dojo.byId("skipToContent"),"href","#"+_ba1);dojo.style(dojo.byId("skipToContent"),"display","block");}else{dojo.style(dojo.byId("skipToContent"),"display","none");}}},setAccessibilityFlags:function(){dojo.query("label").forEach(function(_ba2){try{if(dojo.hasAttr(_ba2,"for")&&dojo.attr(_ba2,"for")===""){dojo.removeAttr(_ba2,"for");}}catch(exe){}});var _ba3=["validateButton","validateButton2","saveButton","saveButton2","submitButton","submitButton2","forwardButton","forwardButton2","rejectButton","rejectButton2","returnTransactionButton","returnTransactionButton2","templateButton","templateButton2","menuCancelButton","cancelButton2","helpButton","helpButton2","previewButton","previewButton2","submitBulkButton","submitBulkButton2","addBulkButton","addBulkButton2","updateBulkButton","updateBulkButton2","templateBulkButton","templateBulkButton2","cancelBulkButton","cancelBulkButton2","helpButton","helpButton2","uploadFormButton","uploadFormButton2","resubmitButton","resubmitButton2","sySubmitButton"];dojo.forEach(_ba3,function(_ba4,i){if(dojo.query("#"+_ba4)[0]){dojo.attr(dojo.query("#"+_ba4)[0],ariaDescrib,"mainScreenHeadingText");}});if(dojo.query(langMenu)&&dojo.query(langMenu)[0]!==undefined){dojo.attr(dojo.query(langMenu)[0],"role","menu");dojo.attr(dojo.query(langMenu)[0],ariaDescrib,"language-menu-instructions");}if(dojo.query(bookmrkMenu)&&dojo.query(bookmrkMenu)[0]!==undefined){dojo.attr(dojo.query(bookmrkMenu)[0],ariaDescrib,"bookmark-menu-instructions");dojo.attr(dojo.query(langMenu)[0],"role","listbox");}dojo.query("#bookmarkToolTipDialog .bookmark").forEach(function(_ba5){var _ba6=dojo.query("a",_ba5)[0];var _ba7=dojo.query("a",_ba5)[1];var _ba8=dojo.attr(dojo.query("img",_ba7)[0],"title")+" "+dojo.attr(_ba6,"innerHTML")+" "+misys.getLocalization("bookmark");dojo.style(_ba7,"display","inline");dojo.attr(_ba7,"aria-label",_ba8);});dojo.query(".dojoxGridHeader table.dojoxGridRowTable").forEach(function(_ba9){try{dojo.attr(dojo.query("tbody>tr>th",_ba9)[0],ariaDescrib,"table-head-instructions");}catch(exc){}});dojo.query(".dojoxGridContent ").forEach(function(_baa){try{if(dojo.query("div>div.dojoxGridRow>table>tbody>tr>td",_baa)[0]){dojo.attr(dojo.query("div>div.dojoxGridRow>table>tbody>tr>td",_baa)[0],ariaDescrib,"table-body-instructions");}}catch(exc){}});if(dojo.query(popuMenuItem)&&dojo.query(popuMenuItem)[0]!=undefined){try{dojo.attr(dojo.query(popuMenuItem)[0],ariaDescrib,"top-menu-instructions");}catch(exc){}}dojo.query(".collapsingImgSpan, .collapsingImgSpanLeftSide").forEach(function(_bab){var _bac="toggle-box-inst";if(dojo.attr(_bab,"onclick")==="javascript:misys.toggleSearchGrid();"){if(dojo.query(scrhCrieteria)&&dojo.query(scrhCrieteria)[0]!==undefined){var _bad;var _bae=dojo.query(scrhCrieteria)[0];if(dojo.attr(_bae,"id")){_bad=dojo.attr(_bae,"id");}else{dojo.attr(_bae,"id","searchHelpText");_bad=dojo.attr(_bae,"id");}_bac=_bac+" "+_bad;}}dojo.attr(_bab,ariaDescrib,_bac);});dojo.query("#GTPRootPortlet img, #GTPRootPortlet a, #GTPRootPortlet button, #GTPRootPortlet span, #GTPRootPortlet div ").forEach(function(_baf){try{var _bb0="";if(dojo.attr(_baf,"onClick")){_bb0=dojo.attr(_baf,"onClick");}else{if(dojo.attr(_baf,"href")){_bb0=dojo.attr(_baf,"href");}}if(_bb0&&_bb0.length>0){if(_bb0.indexOf("misys.showSearchDialog")!==-1||_bb0.indexOf("misys.popup.showReporting")!==-1||_bb0.indexOf("misys.popup.showPreview")!==-1||_bb0.indexOf("misys.showBankTypeDialog")!==-1||_bb0.indexOf("misys.showSearchUserAccountsDialog")!==-1||_bb0.indexOf("misys.showEntityDialog")!==-1){dojo.attr(_baf,ariaDescrib,"dialog-link-inst");}}else{var _bb1="";if(dojo.attr(_baf,"src")){_bb1=dojo.attr(_baf,"src");if(_bb1.indexOf("open_dialog.png")!==-1||_bb1.indexOf("search.png")!==-1){var _bb2=_baf.parentNode;if(dojo.attr(_bb2,"dojoattachpoint")&&(dojo.attr(_bb2,"dojoattachpoint")==="containerNode")&&!(dojo.attr(_bb2,"onClick"))){_bb2=_bb2.parentNode;}dojo.attr(_bb2,ariaDescrib,"dialog-link-inst");}}}}catch(exc){}});},focusTopElement:function(){var _bb3="";var _bb4;if(window.isTopElementFirstH1&&dojo.query(GTPRootPotlet)){try{dojo.query(GTPRootPotlet)[0].focus();_bb3=dojo.attr(dojo.query(GTPRootPotlet)[0],"innerHTML");dojo.attr(dojo.query(GTPRootPotlet)[0],"id","mainScreenHeadingText");}catch(exc){if(dojo.query(h1portletTitle)&&dojo.query(h1portletTitle)[0]!==undefined){dojo.query(h1portletTitle)[0].focus();}else{if(dojo.query(h2portletTitle)&&dojo.query(h2portletTitle)[0]!==undefined){dojo.query(h2portletTitle)[0].focus();_bb4=dojo.query(h2portletTitle)[0];}}}}else{if(dojo.byId("skipToMenu")){dojo.byId("skipToMenu").focus();}else{if(dojo.byId("helpDesk")){dojo.byId("helpDesk").focus();}else{if(dojo.byId("manageProfile")){dojo.byId("manageProfile").focus();}}}}if(_bb4&&_bb4!==undefined){dojo.attr(_bb4,ariaDescrib,"welcome userId lastLoginSpanID");}},onLoad:function(){m.onBeforeLoad();var _bb5=function(elem,_bb6){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){var _bb7=(this.document||this.ownerDocument).querySelectorAll(s),i=_bb7.length;while(--i>=0&&_bb7.item(i)!==this){}return i>-1;};}for(;elem&&elem!==document;elem=elem.parentNode){if(elem.matches(_bb6)){return elem;}}return null;};function _bb8(n1,n2){var p1=n1.parentNode;var p2=n2.parentNode;var i1,i2;if(!p1||!p2||p1.isEqualNode(n2)||p2.isEqualNode(n1)){return;}for(var i=0;i<p1.children.length;i++){if(p1.children[i].isEqualNode(n1)){i1=i;}}for(i=0;i<p2.children.length;i++){if(p2.children[i].isEqualNode(n2)){i2=i;}}if(p1.isEqualNode(p2)&&i1<i2){i2++;}p1.insertBefore(n2,p1.children[i1]);p2.insertBefore(n1,p2.children[i2]);};window.onresize=function(){var _bb9=document.getElementsByClassName("dijitPopup dijitComboBoxMenuPopup");for(var i=0;i<_bb9.length;i++){_bb9[i].style.display="none";}};window.setTimeout(function(){if(dojo.byId("saveDashboard")){dojo.byId("saveDashboard").addEventListener("click",function(){var _bba={"level1":[],"level2":[],"level3":[]};for(var i=0;i<d.query(homepagePortlet).length;i++){var obj={};var ele=d.query(homepagePortlet)[i];if(ele&&!_bb5(d.query(homepagePortlet)[i],".colmid")){if(ele&&_bb5(d.query(homepagePortlet)[i],".colLeft")){obj["position"]=ele.getAttribute("position");obj["id"]=ele.id;_bba.level1.push(obj);}else{if(ele&&_bb5(d.query(homepagePortlet)[i],".colRight")){obj["position"]=ele.getAttribute("position");obj["id"]=ele.id;_bba.level2.push(obj);}}}else{obj["position"]=ele.getAttribute("position");obj["id"]=ele.id;_bba.level3.push(obj);}}document.getElementById("_dashboardpositions").value=JSON.stringify(_bba);m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/UserPreferencesAction"),handleAs:"text",sync:true,preventCache:true,content:{portletPositions:document.getElementById("_dashboardpositions").value,PSML:document.getElementById("DashboardPSML").value,operation:"SAVE",themeColor:document.documentElement.style.getPropertyValue("--main-bg-color"),textColor:document.documentElement.style.getPropertyValue("--main-text-color"),fontType:document.documentElement.style.getPropertyValue("--main-font-family"),fontSize:document.documentElement.style.getPropertyValue("--main-font-size")},load:function(_bbb,_bbc){window.location.href=m.getServletURL("");},customError:function(_bbd,_bbe){console.error(_bbd);}});},false);}},100);var _bbf=function(e){var _bc0=_bb5(e.target,".portlet");_bc0.style.display="none";};if(d.query(".delIcon")[0]){for(var i=0;i<d.query(".delIcon").length;i++){d.query(".delIcon")[i].addEventListener("click",_bbf,true);}}if(dojo.byId("saveDashboard")&&d.query(homepagePortlet)[0]){for(i=0;i<d.query(homepagePortlet).length;i++){var dEle=d.query(homepagePortlet)[i];dEle.setAttribute("draggable","true");dEle.setAttribute("position",i);dEle.addEventListener("dragstart",function(e){e.dataTransfer.effectAllowed="copy";e.dataTransfer.setData("Text",this.id);});}if(d.query(".colContainer")[0]){var _bc1=d.query(".colContainer")[0];_bc1.addEventListener("dragover",function(e){if(e.preventDefault){e.preventDefault();}this.className="over";e.dataTransfer.dropEffect="copy";return false;});_bc1.addEventListener("dragenter",function(e){this.className="over";return false;});_bc1.addEventListener("dragleave",function(){this.className="";});_bc1.addEventListener("drop",function(e){if(e.stopPropagation){e.stopPropagation();}var _bc2=document.getElementById(e.dataTransfer.getData("Text"));var _bc3=_bb5(e.target,".homepage .portlet");var _bc4=_bc2.getAttribute("position");var _bc5=_bc3.getAttribute("position");_bb8(_bc2,_bc3);_bc2.setAttribute("position",_bc5);_bc3.setAttribute("position",_bc4);});}}if(dojo.query(".maincontent.homepage")&&dojo.query(".maincontent.homepage")[0]!==undefined){var _bc6=dojo.byId("CustomerOngoingTasksList")?true:false;var _bc7=dojo.byId("InternalNewsPortlet")?true:false;var _bc8=dojo.byId("OutstandingPerProductChartPortlet")?true:false;var _bc9=dojo.byId("TradeEventsGridPortlet")?true:false;var _bca=dojo.byId("HomeAccountSummaryListPortlet")?true:false;var _bcb=dojo.byId("ActionRequiredPortlet")?true:false;var _bcc=dojo.byId("OpicsAccountListPortletPlusBalance")?true:false;if(!_bc6&&!_bc7&&!_bc8&&!_bc9&&!_bca&&!_bcb&&!_bcc){if(dojo.byId("RatePortlet")){dojo.style("RatePortlet","width",10);dojo.style("RatePortlet","position","relative");dojo.style("RatePortlet","left","100%");}if(dojo.byId("ratesGrid")){dojo.style("ratesGrid","width",10);dojo.style("ratesGrid","position","relative");}}}var p1=function(){try{if(dojo.byId("footerMain")&&dojo.byId("footerHtml")){dojo.byId("footerHtml").style.cssText="display:none !important";}if(dojo.query(".homepage")&&window.dontShowRouter&&window.dontShowRouter===true){dojo.style(dojo.query(".colContainer")[0],"padding-top","70px");dojo.byId("layout").style.cssText="padding:0px 24px 0px 24px !important";if(dojo.query(".colMask")[0]){dojo.style(dojo.query(".colMask")[0],"position","static");}}}catch(err){}m._setupFocus(false);_b39();_b37();if(m._config.saveUnsavedData&&m._config.saveUnsavedData===true){_b66();}var _bcd=document.querySelector(".ui-menubar-root-list");if(_bcd&&_bcd!=="undefined"){m.angularMenuReSize();window.addEventListener("resize",m.angularMenuReSize());}},p2=function(){_b31();_b27();_b3f();m.resizeCharts();_b3c();_b5f();m._setupFocus(true);};return this._onLoad(p1,p2);},onBeforeLoad:function(){if(window.isAccessibilitySkiptoLinksEnabled){m.skipToMenuLink();m.skipToContentLink();}},submit:function(type){if(misys.commonclient&&misys.commonclient.submit){misys.commonclient.submit(type);}else{var _bce=m.getLocalization("saveTransactionConfirmation"),_bcf=function(){if(type==="SUBMITBULK"){m.submitBulk(_ad5);}else{m.beforeSubmit();_aa0(type);}};if(dj.byId("realform_operation")&&(dj.byId("realform_operation").get("_resetValue")!=="")){originalOperationValue=dj.byId("realform_operation").get("_resetValue");}switch(type){case "VALIDATE":_aa0(type);return;break;case "SUBMITBULK":case "SUBMIT":m.setCustomConfirmMessage();var _bd0=m._config.globalSubmitConfirmationMsg;var _bd1=misys._config.warningMessages?misys._config.warningMessages.length:0;if(_bd1>0){var i;var _bd2="<b><ol>";for(i=0;i<_bd1;i++){_bd2+=("<li>"+misys._config.warningMessages[i]+"</li>");}_bd2+="</ol></b>";_bd0=misys.getLocalization("submitTransactionConfirmationWithWarning",[_bd2]);}_bce=(_bd0&&_bd0!=="")?_bd0:m.getLocalization("submitTransactionConfirmation");var eucp=dj.byId("eucp_flag");if(eucp&&!eucp.get("disabled")){_bce=m.getLocalization("submitEUCPTransactionConfirmation");}break;case "SYSTEM_SUBMIT":var _bd3=m.formApplicableWarningMsg();_bce=_bd3?_bd3:_bce;_bcf=function(){_aa0(type);};break;case "SAVE_TEMPLATE":_bce=m.getLocalization("saveTemplateConfirmation");_bcf=function(){_aa0(type);};break;case "SAVE_REPORT_TEMPLATE":_bce=m.getLocalization("saveTemplateConfirmation");_bcf=function(){_aa0(type);};break;case "CANCEL":_bce=m.getLocalization("cancelTransactionConfirmation");_bcf=function(){_aa0(type);};break;case "CANCEL_BULK_TRANSACTION":_bce=m.getLocalization("cancelTransactionConfirmation");_bcf=function(){_aa0(type);};break;case "REJECT":_bce=m.getLocalization("rejectTransactionConfirmation");_bcf=function(){_aa0(type);};break;case "RETURN_TRANSACTION":_bce=m.getLocalization("returnTransactionConfirmation");_bcf=function(){_aa0(type);};break;case "HELP":_b51(m._config.onlineHelpUrl,m.getLocalization("onlineHelpWindowTitle"),"width=1000,height=700,resizable=yes,scrollbars=yes");return;break;case "APPROVE":_bce=m.getLocalization("submitTransactionConfirmation");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_bcf=function(){_aa0(type);};break;case "DELETE":_bce=m.getLocalization("deleteMCTransactionsConfirmation");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_bcf=function(){_aa0(type);};break;case "CHECKER_WARN_DELETE_ROLE_SUBMIT":var _bd4=dijit.byId("featureid").get("value");var _bd5=dijit.byId("roletype").get("value");var _bd6=false;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckRoleMapping"),handleAs:"json",preventCache:true,sync:true,content:{role_name:_bd4,role_type:_bd5},load:function(_bd7,args){_bd6=_bd7.isRoleMapped;},error:function(_bd8,args){_bd6=false;console.error("Checking Role mapping  error ",_bd8);}});if(_bd6){_bce=m.getLocalization("deleteMappedRoleConfirmation");}else{_bce=m.getLocalization("deleteRoleConfirmation");}dj.byId("realform_operation").set("value","APPROVE_FEATURES");_bcf=function(){_aa0(type);};break;case "REVERT":_bce=m.getLocalization("revertMCTransactionsConfirmation");dj.byId("realform_operation").set("value","REVERT_FEATURES");_bcf=function(){_aa0(type);};break;case "RETURN":_bce=m.getLocalization("returnMCTransactionsConfirmation");dj.byId("realform_operation").set("value","RETURN_FEATURES");_bcf=function(){_aa0(type);};break;case "DRAFT":dj.byId("realform_operation").set("value","DRAFT_FEATURES");_bcf=function(){_aa0(type);};break;case "MAKER_SUBMIT":m.setCustomConfirmMessage();_bd0=m._config.globalSubmitConfirmationMsg;_bce=m.getLocalization("submitTransactionConfirmation");_bce=_bd0?_bd0:_bce;_bcf=function(){_aa0(type);};break;case "MAKER_BENE_SUBMIT":_bce=m.getLocalization("submitTransactionConfirmationForMasterBeneficiary");_bcf=function(){_aa0("MAKER_SUBMIT");};break;case "MAKER_BENE_FILE_UPLOAD_SUBMIT":_bce=m.getLocalization("submitTransactionConfirmationForBeneficiaryFileUpload");_bcf=function(){_aa0("MAKER_SUBMIT");};break;case "CHECKER_BENE_SUBMIT":_bce=m.getLocalization("submitTransactionConfirmationForMasterBeneficiary");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_bcf=function(){_aa0("APPROVE");};break;case "CHECKER_BENE_FILE_UPLOAD_SUBMIT":_bce=m.getLocalization("submitTransactionConfirmationForBeneficiaryFileUpload");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_bcf=function(){_aa0("APPROVE");};break;case "AUTO_FORWARD_SUBMIT":_bce=m.getLocalization("submitAutoForwardTransactionConfirmation");_bcf=function(){_aa0(type);};break;case "ADD_BULK":_bce=m.getLocalization("addBulkConfirmation");_bcf=function(){_aa0(type);};break;case "UPDATE_BULK":_bce=m.getLocalization("updateBulkConfirmation");_bcf=function(){_aa0("ADD_BULK");};break;case "CANCEL_BULK":_bce=m.getLocalization("cancelBulkConfirmation");_bcf=function(){_aa0(type);};break;case "SAVE_TEMPLATE_BULK":_bce=m.getLocalization("saveTemplateBulkConfirmation");_bcf=function(){_aa0(type);};break;case "RESUBMIT":_bce=m.getLocalization("resubmitConfirmation");_bcf=function(){_aa0(type);};break;default:break;}var _bd9=function(){if(originalOperationValue!==""){dj.byId("realform_operation").set("value",originalOperationValue);}if(m.unloadListener){window.onbeforeunload=m.unloadListener;}};m.dialog.show("CONFIRMATION",_bce,"",_bcf,"","","",_bd9);}},acceptLegalText:function(){_aa0("LEGAL_TEXT_SUBMIT");},submitBulkNoAutoForward:function(type){_aa0(type);},saveAsync:function(_bda){var type;if(d.query("#draftButton").length>0){type="DRAFT";dj.byId("realform_operation").set("value","DRAFT_FEATURES");}else{type="SAVE";}var _bdb=_ac7(type);if(_bdb!==""){m.unsavedDataOption="notset";var _bdc=function(){dijit.byId("entity")?dijit.byId("entity").focus():null;};m.dialog.show("ERROR",_bdb,"",_bdc);}else{var _bdd=d.byId("realform");d.attr(_bdd,"action",m.getServletURL("/screen/AsyncScreen"));var _bde={realscreen:_b7a()};m.xhrPost({url:m.getServletURL("/screen/AsyncScreen")+"?"+d.objectToQuery(_bde),preventCache:true,sync:true,form:_bdd,handleAs:"json",load:function(_bdf,args){if(_bdf.status==="success"){location.href=_bda;m.isFormDirty=false;}else{if(_bdf.status==="failure"){m.unsavedDataOption="notset";m.dialog.show("ERROR",m.getLocalization(_bdf.message));}}},error:function(_be0,args){console.error("Error during Save");m.dialog.show("ERROR",m.getLocalization("technicalError"));}});}},formToXML:function(init){var _be1={selector:".validate",xmlRoot:m._config.xmlTagName,ignoreDisabled:false},xml=[];d.mixin(_be1,init);if(_be1.xmlRoot){xml=["<",_be1.xmlRoot,">"];}if(!_be1.ignoreDisabled){d.query(".dijitDisabled").forEach(function(w){var _be2=dj.byId(d.attr(w,"widgetid"));if(_be2){_be2.set("disabled",false);}});}d.query(_be1.selector).forEach(function(node){var form=dj.byId(node.id),_be3={},_be4,_be5,_be6,_be7;d.forEach(form.getDescendants(),function(_be8){if(!_be8.name||_be3[_be8.name]){return;}_be3[_be8.name]=_be8;});_be4=form.get("value");for(var name in _be4){if(_be3.hasOwnProperty(name)){_be5=_be3[name];_be6=_be5.declaredClass;if(_be5.toXML){_be7=_be5.toXML();_be7=(!_be7)?"":_be7;}else{if(name==="org_narrative_description_goods"||name==="org_narrative_documents_required"||name==="org_narrative_additional_instructions"||name==="org_narrative_special_beneficiary"||name==="org_narrative_special_recvbank"){_be7=dojox.html.entities.decode(_be5.value,dojox.html.entities.map);}else{_be7=_b0e(_be4[name],_be6);}}if(_be5.xmlTagName){xml.push(_be7);}else{xml.push("<",name,">",_be7,"</",name,">");}}}});if(_be1.xmlRoot){xml.push("</",_be1.xmlRoot,">");}var _be9=false;if(dj.byId("xhrDialog")&&dj.byId("xhrDialog").open){_be9=true;}if(m._config.hasOwnProperty("xmlTransform")&&d.isFunction(m._config.xmlTransform)){if(m.e2ee_transaction&&m.e2ee_transaction.enabled===true&&!_be9){return m.e2ee_transaction.encryptData(m._config.xmlTransform(xml.join("")));}else{return m._config.xmlTransform(xml.join(""));}}if(m.e2ee_transaction&&m.e2ee_transaction.enabled===true&&!_be9){return m.e2ee_transaction.encryptData(xml.join(""));}else{return xml.join("");}},fieldToXML:function(node){var _bea=dj.byId(node),_beb=_bea.get("name"),tag=[];if(_beb){tag.push("<",_beb,">",d.trim(dojox.html.entities.encode(_bea.get("value"),dojox.html.entities.html)),"</",_beb,">");}return tag.join("");},getDomNode:function(dom,_bec){var _bed=dom.getElementsByTagName(_bec),xml=[],node;if(_bed.length>0){xml.push("<",_bec,">");node=_bed[0].childNodes[0];if(node&&node.nodeValue){xml.push(dojo.isString(node.nodeValue)?dojox.html.entities.encode(node.nodeValue,dojox.html.entities.html):node.nodeValue);}xml.push("</",_bec,">");}return xml.join("");},getDomValue:function(dom,_bee){var _bef=dom.getElementsByTagName(_bee),xml=[],node;if(_bef.length>0){node=_bef[0].childNodes[0];if(node&&node.nodeValue){xml.push(dojo.isString(node.nodeValue)?dojox.html.entities.encode(node.nodeValue,dojox.html.entities.html):node.nodeValue);}}return xml.join("");},toggleFields:function(_bf0,_bf1,_bf2,_bf3,_bf4){var _bf5=m._config.requiredFieldPrefix||"*",_bf6=_bf2,_bf7=0,_bf8=/Check/,_bf9=/Date/,_bfa=/Time/;if(_bf1&&d.isArray(_bf1)){if(_bf2&&d.isArray(_bf2)){_bf6=_bf1.concat(_bf2);}else{_bf6=_bf1;}_bf7=_bf1.length;}d.forEach(_bf6,function(id,i){var _bfb=dj.byId(id);if(_bfb){if(!_bf0&&!_bf3){var _bfc=_bfb.declaredClass;var _bfd="";if(_bf8.test(_bfc)){_bfd=false;}else{if(_bf9.test(_bfc)||(_bfa.test(_bfc))){_bfd=null;}}_bfb.set("value",_bfd);}if(_bf4){_bfb.set("readOnly",false);_bfb.set("disabled",false);}else{_bfb.set("readOnly",!_bf0);_bfb.set("disabled",!_bf0);}if(i>=_bf7){_bfb.set("required",_bf0);if(!_bf0&&_bfb.validate){_bfb.validate(false);}var row=d.byId(id+"_row");if(row){var _bfe=d.query("label[for="+id+"]")[0];d.toggleClass(row,"required",_bf0);var _bff="";if(_bf0){if(_bfe&&_bfe.innerHTML.indexOf(_bf5)===-1){if(!(_bf8.test(_bfc))){d.place(d.create("span",{"class":"required-field-symbol",innerHTML:_bf5}),_bfe,"first");}}}else{if(_bfe&&_bfe.innerHTML.indexOf(_bf5)!=-1){d.query("span",_bfe).orphan();}}}}}});},toggleRequired:function(node,_c00){var _c01=dj.byId(node);if(_c01){_c01.set("required",_c00);var _c02=d.query("#"+_c01.id+"_row > label");_c02.forEach(function(_c03){d.query("span",_c03).orphan();if(_c00){d.create("span",{innerHTML:"*","class":"required-field-symbol"},_c03,"first");}});}},setFieldState:function(node,_c04){node.state=(_c04)?"":"Error";node._setStateClass();dj.setWaiState(node.focusNode,"invalid",!_c04);},confirmDelete:function(_c05,args){if(_c05.indexOf("<")!==-1){_c05=_c05.replaceAll("<","&lt;");}if(_c05!==""){this.dialog.show("CONFIRMATION",this.getLocalization("deleteTransactionConfirmation",[_c05]),"",function(){m.post(args);});}else{this.dialog.show("CONFIRMATION",this.getLocalization("deleteTransactionConfirmationforEmptyTitle"),"",function(){m.post(args);});}},warnDeleteRole:function(_c06,args){if(_c06.indexOf("<")!==-1){_c06=_c06.replaceAll("<","&lt;");}if(_c06!==""){var _c07=false;var _c08=null;for(var arg=0;arg<args.params.length;arg++){var arr=args.params[arg].name;if(arr=="Role_Type"){_c08=args.params[arg].value;break;}}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckRoleMapping"),handleAs:"json",preventCache:true,sync:true,content:{role_name:_c06,role_type:_c08},load:function(_c09,args){_c07=_c09.isRoleMapped;},error:function(_c0a,args){_c07=false;console.error("Checking Role mapping  error ",_c0a);}});if(_c07){this.dialog.show("CONFIRMATION",this.getLocalization("deleteMappedRoleConfirmation",[_c06]),"",function(){m.post(args);});}else{this.dialog.show("CONFIRMATION",this.getLocalization("deleteRoleConfirmation",[_c06]),"",function(){m.post(args);});}}else{this.dialog.show("CONFIRMATION",this.getLocalization("deleteTransactionConfirmationforEmptyTitle"),"",function(){m.post(args);});}},showTooltip:function(_c0b,node,_c0c,_c0d){var _c0e=d.byId(node);if(_c0e){setTimeout(function(){dj.hideTooltip(_c0e);},(_c0d||_a96));return dj.showTooltip(_c0b,_c0e,_c0c);}},toggleTransaction:function(show,_c0f,_c10){var _c11=d.byId("transactionDetails"),_c12=d.byId("editTransactionDetails"),_c13=d.byId("hideTransactionDetails"),_c14=_c10||function(){},_c15=dojo.fx.chain([]);if(d.style(_c11,"position")==="absolute"){d.style(_c11,"position","inherit");d.style(_c11,"display","none");if(d.isIE!==6){d.style(_c11,"left",0);}else{d.style(_c11,"right","auto");}}if(show){var _c16=function(){if(_c12){return m.animate("fadeOut",_c12,function(){dojo.style(_c11,"display","none");dojo.removeClass(_c11,"offscreen");m.animate("wipeIn",_c11,function(){m.animate("fadeIn",_c13,_c14);dojo.query(tabContainr).forEach(function(t){var tabc=dijit.byId(t.id);if(tabc.resize&&d.isFunction(tabc.resize)){tabc.resize();}});});});}else{return _c14();}};if(_c0f){m.dialog.show("CONFIRMATION",m.getLocalization("editTransactionConfirmation"),null,_c16);}else{return _c16();}}else{return m.animate("wipeOut",_c11,function(){dojo.addClass(_c11,"offscreen");m.animate("fadeOut",_c13,function(){m.animate("fadeIn",_c12,_c14);});});}return _c15;},toggleAmdDetails:function(show,_c17,_c18){var _c19=d.byId("amdDetails"),_c1a=d.byId("showAmdDetails"),_c1b=d.byId("hideAmdDetails"),_c1c=_c18||function(){},_c1d=dojo.fx.chain([]);if(d.style(_c19,"position")==="absolute"){d.style(_c19,"position","inherit");d.style(_c19,"display","none");if(d.isIE!==6){d.style(_c19,"left",0);}else{d.style(_c19,"right","auto");}}if(show){var _c1e=function(){if(_c1a){return m.animate("fadeOut",_c1a,function(){dojo.style(_c19,"display","none");dojo.removeClass(_c19,"offscreen");m.animate("wipeIn",_c19,function(){m.animate("fadeIn",_c1b,_c1c);dojo.query(tabContainr).forEach(function(t){var tabc=dijit.byId(t.id);if(tabc.resize&&d.isFunction(tabc.resize)){tabc.resize();}});});});}else{return _c1c();}};if(_c17){m.dialog.show("CONFIRMATION",m.getLocalization("editTransactionConfirmation"),null,_c1e);}else{return _c1e();}}else{return m.animate("wipeOut",_c19,function(){dojo.addClass(_c19,"offscreen");m.animate("fadeOut",_c1b,function(){m.animate("fadeIn",_c1a,_c1c);});});}return _c1d;},createTOC:function(){var toc=d.byId("toccontent");if(toc){if(d.style(toc,"display")==="block"){m.toggleTOC();}var _c1f=0,_c20=d.create("ul");d.query(_a95).forEach(function(_c21){var _c22=_c21.id||"link"+_c1f++;_c21.id=_c22;var _c23;try{var _c24=_c21.firstChild;if(_c24){_c23=_c24.innerHTML;}}catch(err){console.error("[m.form.common] There was an error building the TOC!");console.error(err);}if(_c23&&_c23!==""){var li=d.create("li");var a=d.create("a",{href:"javascript:void(0)",id:"goto_"+_c22,innerHTML:_c23},li);d.place(li,_c20);}});d.empty(toc);d.place(_c20,toc);}},toggleTOC:function(_c25){var _c26=d.byId("toccontent");if(_c26){if(_c26.innerHTML===""){m.createTOC();}var _c27=d.byId("toggleTocLink"),_c28=d.byId("toc"),show=(d.style(_c26,"display")==="none"),_c29=(show)?d.style(d.byId("toc"),"width")+6:d.style(d.byId("toc"),"width")-6,_c2a=(show)?0.9:1,_c2b=(show)?"wipeIn":"wipeOut",_c2c=(show)?m.getLocalization("hideFormSummaryMessage"):m.getLocalization("showFormSummaryMessage"),_c2d=[],_c2e=[];_c2d.push(d.animateProperty({node:_c28,properties:{width:_c29}}));_c2e=_c2e.concat(m.animate(_c2b,_c26,null,true)._animations);_c2e.push(d.animateProperty({node:_c28,properties:{opacity:_c2a}}));_c2d=dojo.fx.chain(_c2d.concat(_c2e));d.connect(_c2d,"onBegin",function(){setTimeout(function(){_c27.innerHTML=_c2c;},500);});d.connect(_c2d,"onEnd",function(){if(_c25&&d.isFunction(_c25)){_c25();}});return _c2d.play();}},trim:function(str){var _c2f=str+"",_c30=[];d.forEach(_c2f,function(c){if((c!=="\r")&&(c!=="\n")){_c30.push(c);}});return d.trim(_c30.join(""));},addMultiSelectItems:function(_c31,_c32){var _c33=dijit.byId(_c31),_c34=dijit.byId(_c32);_c33.addSelected(_c34);_c34.focus();_c33.focus();},insertAtCursor:function(_c35,text){var _c36=_c35.domNode,_c37=_c35.get("value");if(document.selection){_c35.focus();var sel=window.getSelection();sel.text=text;_c35.set("value",_c37+text);}else{if(_c36.selectionStart||_c36.selectionStart=="0"){_c35.set("value",_c37+text);}else{_c35.set("value",_c37+text);}}},resizeCharts:function(){var _c38=d.query(_a97);if(_c38.length>0){if(_a9d){clearTimeout(_a9d);}_a9d=setTimeout(function(){_b45(_c38);},_a9b);}},resizeGrids:function(){var _c39=d.query(_a90),_c3a=(d.isIE<=6)?2000:200;if(_c39.length>0){if(_a9c){clearTimeout(_a9c);}_a9c=setTimeout(function(){_b4e(_c39);},_c3a);}},getChartImageMap:function(url,_c3b,_c3c,_c3d){m.xhrGet({url:m.getServletURL("/screen/AjaxScreen/action/"+url),handleAs:"text",contentType:"text/html; charset=utf-8",content:{getmap:"true",dealID:_c3c,borrowerID:_c3d},load:function(_c3e){d.byId(_c3b).innerHTML=_c3e;}});},showChartDialog:function(id){var _c3f=d.create("img",{src:d.attr(d.byId(id),"alt")+"&chartwidth="+_a9a+"&chartheight="+_a99,width:_a9a,height:_a99,alt:"Chart"});if(!_a9e){_a9e=new misys.widget.Dialog({onLoad:function(){var that=this;setTimeout(function(){that.show();},dj.defaultDuration);}});}_a9e.set("width",_a9a+50);_a9e.set("height",_a99+50);_a9e.set("content",_c3f);_a9e.show();},isVisible:function(node){if(!node){return false;}var p;if(node.domNode){node=node.domNode;}return (dojo.style(node,"display")!="none")&&(dojo.style(node,"visibility")!="hidden")&&(p=dojo.position(node),(p.y+p.h>=0)&&(p.x+p.w>=0)&&(p.h&&p.w));},beforeSubmitValidations:function(){return true;},beforeSaveValidations:function(){return true;},onCancelNavigation:function(){return m._config.homeUrl;},setCustomConfirmMessage:function(){},localizeDate:function(_c40){var _c41=_c40.get("value");if(_c40.get("type")==="hidden"){return d.date.locale.parse(_c41,{selector:"date",datePattern:m.getLocalization("g_strGlobalDateFormat")});}return _c41;},validateSearchStartEndDates:function(){var _c42=dj.byId("dttm_begin"),end=dj.byId("dttm_end");if(end&&end.get("value")===null){return true;}if(_c42&&end){if(!m.compareDateFields(_c42,end)){this.invalidMessage=m.getLocalization("dateRangeValidityMessage");return false;}}return true;},compareDateFields:function(_c43,_c44){var _c45,_c46,_c47,_c48;if(_c43&&_c44){_c46=_c43.get("value");_c45=_c44.get("value");if(_c46&&_c45){_c47=m.localizeDate(_c43);_c48=m.localizeDate(_c44);if(d.date.compare(_c48,_c47)<0){return false;}}}return true;},confirmMCCancel:function(_c49,args){this.dialog.show("CONFIRMATION",this.getLocalization("cancelMCTransactionConfirmation",[_c49]),"",function(){m.post(args);});},trimAmount:function(_c4a){var _c4b=(""+_c4a+"").replace(/[^\d.]/g,"");var _c4c=_c4b.indexOf(".");var _c4d=_c4b.length;var _c4e=_c4b;if(_c4c!==-1){for(var v=_c4d;v>_c4c;v--){var n=_c4b.charAt(v-1);if(n==="0"||n==="."){_c4e=_c4e.substring(0,v-1);}else{break;}}}return _c4e;},exportListToFormat:function(_c4f){if(d.byId(_a91)){dj.byId("export_list").set("value",_c4f);d.create("input",{type:"hidden",name:"searchFlag",value:"true"},TransactionSearchForm);dj.byId("TransactionSearchForm").submit();dj.byId("export_list").set("value","screen");}},exportListFormat:function(_c50){if(d.byId(_a91)){dj.byId("export_list").set("value",_c50);var form=dj.byId("TransactionSearchForm");var _c51=dj.byId("account_no");var _c52=dj.byId("account_no").get("value");var _c53=dj.byId("entity");var _c54;if(dj.byId("operation")&&dj.byId("operation").get("value")==="LIST_BALANCES"){if(_c53&&_c53.get("value")===""){m.dialog.show("ERROR",m.getLocalization("entityNotSelectedError"));return;}}else{if(dj.byId("operation")&&dj.byId("operation").get("value")==="LIST_STATEMENTS"){if(_c53&&_c53.get("value")===""){m.dialog.show("ERROR",m.getLocalization("entityNotSelectedError"));dj.byId("export_list").set("value","");return;}if(_c51.get("value")===""){m.dialog.show("ERROR","Please select an account.");dj.byId("export_list").set("value","");return;}}}if(dijit.byId("is_acc_mandatory")&&_c52==""){m.dialog.show("ERROR",m.getLocalization("EmptyAccountError"));}else{if(dijit.byId("account_id")&&dijit.byId("account_id").get("value")){dijit.byId("account_no").set("required",false);dijit.byId("account_no").set("value","");}var _c55;var _c56;var _c57;var _c58;var _c59;if(_c50==="swift941"||_c50==="swift942"){if(dijit.byId("owner_type").get("value")=="05"){m.dialog.show("ERROR",m.getLocalization("ExternalAccountError"));}else{var _c5a=dj.byId("Current Day").get("value");_c55=dj.byId("dateRange").get("value");_c56=dj.byId("create_date").get("value");_c57=dj.byId("create_date2").get("value");_c58=dj.byId("today").get("value");_c59=dojo.date.locale.format(_c57,{datePattern:misys.getLocalization("g_strGlobalDateFormat"),selector:"date"});if((_c5a==="1")||((_c55==="5")&&(dojo.date.compare(_c56,_c57)==0)&&(_c58===_c59))){if(_c50==="swift942"){dj.byId("export_list").set("value","swift");}form.submit();}else{m.dialog.show("ERROR",m.getLocalization("MT941942ExportError"));}}}else{form.submit();}}if(dijit.byId("account_id")&&dijit.byId("account_id").get("value")){dijit.byId("account_no").set("value",_c52);dijit.byId("account_no").set("required",true);}dj.byId("export_list").set("value","screen");}},exportListToFormatInXsl:function(_c5b){var _c5c=dijit.byId("facility_id")?dijit.byId("facility_id").value:"";dojo.io.iframe._currentDfd=null;dojo.io.iframe.send({url:m.getServletURL("/screen/AjaxScreen/action/GetLimitData"),handleAs:"json",sync:true,content:{option:_c5b,facility_id:_c5c,token:document.getElementById("_token").getAttribute("value")}});},exportListToFormatInXslPdfRpmntSc:function(_c5d,_c5e){dojo.io.iframe._currentDfd=null;var form=document.createElement("FORM");form.setAttribute("id","dummyform");document.body.appendChild(form);dojo.io.iframe.send({url:m.getServletURL("/screen/AjaxScreen/action/LoanRepaymentScheduleAction"),handleAs:"json",form:"dummyform",method:"POST",sync:true,content:{option:_c5d,allColumn:_c5e,token:document.getElementById("_token").getAttribute("value")}});},getFrequencyCodeData:function(_c5f){var _c60;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetFrequencyCodeData"),handleAs:"json",sync:true,content:{frequencyValue:_c5f},load:function(_c61){_c60=_c61.items.long_desc;},error:function(){_c60=_c5f;}});return _c60;},getBalanceTypeCodeData:function(_c62){var _c63;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetBalanceTypeCodeData"),handleAs:"json",sync:true,content:{balance_type_Value:_c62},load:function(_c64){_c63=_c64.items.long_desc;},error:function(){_c63=_c62;}});return _c63;},getsubGroupTypeData:function(_c65){var _c66;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetSubGrpTypeCodeData"),handleAs:"json",sync:true,content:{subGrp_type_Value:_c65},load:function(_c67){_c66=_c67.items.long_desc;},error:function(){_c66=_c65;}});return _c66;},preDisplayAssigneeType:function(_c68){var _c69=m._config.task_mode||"userandbank";dojo.forEach(_c68,function(_c6a){if(_c6a.description==="user_to_bank"&&dj.byId(_c6a.id)){if(_c69==="userandbank"){if(dj.byId(_c6a.id)){dj.byId(_c6a.id).set("disabled",false);}else{console.error("Could not find widget with id "+_c6a.id);}}else{if(dj.byId(_c6a.id)){dj.byId(_c6a.id).set("disabled",true);}else{console.error("Could not find widget with id "+_c6a.id);}}}});},isFormDirty:false,isSystemButtonClicked:false,unsavedDataOption:"notset",excludedMethods:[{object:m,method:"submit"}],markFormDirty:function(){m.isFormDirty=true;},isPopupRequired:function(){var _c6b=false;if(m.isFormDirty&&m.unsavedDataOption==="notset"){if(dojo.query(".saveButton").length>0){_c6b=true;}}return _c6b;},unloadListener:function(){if(misys.isFormDirty&&misys.isFormDirty===true&&m._config.saveUnsavedData&&m._config.saveUnsavedData===true){if(m.unsavedDataOption==="save"){return undefined;}else{if(m.unsavedDataOption==="nosave"){return undefined;}else{return m.getLocalization("unsavedData");}}}},setUnsavedDataOption:function(val){misys.unsavedDataOption=val;},showUnsavedDataDialog:function(){var _c6c=dijit.byId("unsavedDataDialog");var _c6d=dojo.byId("unsavedDataDialogButtons");var _c6e=dijit.byId("SaveContButton").domNode;var _c6f=dijit.byId("ContButton").domNode;var _c70=dijit.byId("CancelButton").domNode;var _c71=dijit.byId("unsavedDataDialog").domNode;dojo.style(_c6d,"display","block");dojo.style(_c6e,"display",inlneBlock);dojo.style(_c6f,"display",inlneBlock);dojo.style(_c70,"display",inlneBlock);dojo.style(_c71,"display",inlneBlock);_c6c.set("title",misys.getLocalization("unsavedDataPreUnload"));misys.dialog.connect(_c6c,"onKeyPress",function(evt){if(evt.keyCode===dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("SaveContButton"),"onMouseUp",function(){misys.dialog.disconnect(_c6c);_c6c.hide();},_c6c.id);misys.dialog.connect(dijit.byId("ContButton"),"onMouseUp",function(){misys.dialog.disconnect(_c6c);_c6c.hide();},_c6c.id);misys.dialog.connect(dijit.byId("CancelButton"),"onMouseUp",function(){misys.dialog.disconnect(_c6c);_c6c.hide();},_c6c.id);misys.dialog.connect(_c6c,"onHide",function(){misys.dialog.disconnect(_c6c);});_c6c.show();},reloadChartImg:function(){var _c72=dojo.query("#GTPRootPortlet > .portlet-section-body > div.widgetContainer");var form=dj.byId("TransactionSearchForm");var _c73=/Date/;var _c74=/Time/;if(form&&_c72&&_c72[0]&&_c72[0].id){var _c75=_c72[0].id.split("id")[1];var _c76=dojo.query("#chart"+_c75)[0];if(_c76&&_c76.src&&_c76.alt){var _c77=_c76.alt;form.getDescendants().forEach(function(_c78,i){if(_c78.name){var _c79;if(_c78.declaredClass=="dijit.form.RadioButton"){var _c7a=dojo.query("[name='"+_c78.name+"']",form.domNode);d.some(_c7a,function(_c7b){var _c7c=dj.byNode(_c7b.parentNode);if(_c7c.checked){_c79=_c7c.params.value;}});}else{_c79=_c78.get("value");}if(_c73.test(_c78.declaredClass)||(_c74.test(_c78.declaredClass))){_c79=_c78.get("displayedValue");}if(_c79===" "){_c79="";}if(_c78.type!=="hidden"){_c77=_b49(_c77,_c78.get("name"),_c79);}}});_c76.alt=_c77;m.resizeCharts();}}},formApplicableWarningMsg:function(){var _c7d=m._config.globalSubmitConfirmationMsg;var _c7e=misys._config.warningMessages?misys._config.warningMessages.length:0;if(_c7e>0){var i;var _c7f="<b><ol>";for(i=0;i<_c7e;i++){_c7f+=("<li>"+misys._config.warningMessages[i]+"</li>");}_c7f+="</ol></b>";_c7d=misys.getLocalization("submitTransactionConfirmationWithWarning",[_c7f]);}return (_c7d&&_c7d!=="")?_c7d:"";},toggleErrorSection:function(_c80){var _c81=d.byId("errorContent");if(_c81){var _c82=d.byId("errorLink"),_c83=d.byId("errorSection"),show=(d.style(_c81,"display")==="none"),_c84=(show)?d.style(d.byId("errorSection"),"width")+6:d.style(d.byId("errorSection"),"width")-6,_c85=(show)?0.9:1,_c86=(show)?"wipeIn":"wipeOut",_c87=(show)?m.getLocalization("hideErrorSectionMessage"):m.getLocalization("showErrorSectionMessage"),_c88=[],_c89=[];_c88.push(d.animateProperty({node:_c83,properties:{width:_c84}}));_c89=_c89.concat(m.animate(_c86,_c81,null,true)._animations);_c89.push(d.animateProperty({node:_c83,properties:{opacity:_c85}}));_c88=dojo.fx.chain(_c88.concat(_c89));d.connect(_c88,"onBegin",function(){setTimeout(function(){_c82.innerHTML=_c87;},500);});d.connect(_c88,"onEnd",function(){if(_c80&&d.isFunction(_c80)){_c80();}});return _c88.play();}},encryptText:function(_c8a){if(misys._config.clientSideEncryption){var rsa=new RSAKey();var _c8b=misys._config.htmlUsedModulus;var _c8c=misys._config.cr_seq;rsa.setPublic(_c8b,"10001");return rsa.encrypt(_c8a)+_c8c;}else{return _c8a;}}});m.popup=m.popup||{};d.mixin(m.popup,{showPreview:function(type,_c8d,_c8e,_c8f,_c90,_c91,_c92){var _c93="ReportingPopup",url=[];if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&m.isAngularProductUrl(_c8d,"")){url.push("/view?");url.push("referenceid=",_c8e);url.push("&tnxid=",_c8f);url.push("&productCode=",_c8d);url.push("&subProductCode=","");url.push("&mode=","view");url.push("&operation=","PREVIEW");url.push("&tnxTypeCode=",_c90);url.push("&subTnxTypeCode=",_c91);url.push("&eventTnxStatCode=","");var _c94=window.open(m.getServletURL("").replace(/.$/,"#")+url.join(""),"_blank","top=100,left=200,height=400,width=900,toolbar=no,resizable=no");_c94.onload=function(){var _c95=misys.getLocalization("mainTitle");var _c96=misys.getLocalization(_c8d);_c94.document.title=_c95+" - "+_c96;};}else{var _c97="",_c98="",_c99="",_c9a="";if(_c8f){_c97="&tnxid="+_c8f;}if(_c90&&_c90!==""){_c98="&tnxtype="+_c90;}if(_c91&&_c91!==""){_c99="&subtnxtype="+_c91;}if(_c92){_c93=_c92;}url=["/screen/",_c93];url.push("?option=",type,"&titlecode=INFO_MSG_PREVIEW_UNCONTROLLED&referenceid=",_c8e,_c97);url.push(_c98);url.push(_c99);url.push(prductCode,_c8d);if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){url.push("&parenttitle=",window.document.title);}_b51(m.getServletURL(url.join("")));}},showSummary:function(type,_c9b,_c9c,_c9d,_c9e){switch(type.toLowerCase()){case "print":d.global.print();break;case "close":d.global.close();break;case "export":if(_c9b){_c9b=_c9b.toLowerCase();var _c9f=_c9b;if(_c9b==="summary"){_c9f="EXPORT_PDF_SUMMARY";}else{if(_c9b==="full"){_c9f="EXPORT_PDF_FULL";}else{if(_c9b==="details"){_c9f="EXPORT_PDF_DETAILS";}else{if(_c9b==="pdf_ec_details"){_c9f="PDF_EC_DETAILS";}else{if(_c9b==="csv_bk_details"){_c9f="CSV_BK_DETAILS";}else{if(_c9b==="snapshot_pdf"){_c9f="SNAPSHOT_PDF";}else{if(_c9b==="updated"){_c9f="EXPORT_PDF_FULL";}}}}}}}_c9f=_c9f.toUpperCase();var url=[reportingPopup];url.push("?option=",_c9f);url.push(refrnceId,_c9c);if(_c9d&&_c9d!==""){url.push("&tnxid=",_c9d);}url.push(prductCode,_c9e);_b51(misys.getServletURL(url.join("")));}break;default:break;}},showPDF:function(url){_b51(misys.getServletURL(url));},showReporting:function(type,_ca0,_ca1,_ca2,_ca3,_ca4,_ca5,_ca6,_ca7){var _ca8,_ca9=[],_caa=[],_cab=[],_cac=[],_cad="ReportingPopup",url=[],_cae=[],_caf=[],_cb0=[];var _cb1=m.isAngularProductUrl(_ca0,_ca7);if(_ca0==="SE"&&_ca7!=null&&_ca7!=undefined&&_ca7!=""&&_ca7==="OTHER"){_cb1=false;}if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&_cb1){url.push("/view?");url.push("referenceid=",_ca1);url.push("&tnxid=",_ca2);url.push("&productCode=",_ca0);url.push("&subProductCode=",_ca7);url.push("&mode=","view");url.push("&operation=","PREVIEW");url.push("&tnxTypeCode=",_ca3);url.push("&subTnxTypeCode=",_ca4);url.push("&eventTnxStatCode=",_ca5);var _cb2=window.open(m.getServletURL("").replace(/.$/,"#")+url.join(""),"_blank","top=100,left=200,height=400,width=900,toolbar=no,resizable=no");_cb2.onload=function(){var _cb3=misys.getLocalization("mainTitle");var _cb4=misys.getLocalization(_ca0);_cb2.document.title=_cb3+" - "+_cb4;};}else{if(_ca0&&_ca0!==""){_ca9.push(prductCode,_ca0);}if(_ca1&&_ca1!==""){_caa.push(refrnceId,_ca1);}if(_ca2&&_ca2!==""){_cab.push("&tnxid=",_ca2);}if(_ca3&&_ca3!==""){_cae.push("&tnxtype=",_ca3);}if(_ca4&&_ca4!==""){_caf.push("&subtnxtype=",_ca4);}if(_ca5&&_ca5!==""){_cb0.push("&tnxstatus=",_ca5);}if(_ca6&&_ca6!==""){_cad=_ca6;}url.push("/screen/",_cad);url.push("?option=",type);url.push(_caa.join(""),_cab.join(""),_ca9.join(""),_cae.join(""),_caf.join(""),_cb0.join(""));if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){_cac.push("&parentTitle=",window.document.title);url.push(_cac.join(""));}_b51(m.getServletURL(url.join("")));}},openIframePopup:function(type,_cb5,_cb6,_cb7){var _cb8=[],_cb9=[],_cba=[],_cbb=[],_cbc="IframePopup",url=[];if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&m.isAngularProductUrl(prodCode,subProductCode)){url.push("/view?");url.push("entitlementcode=",_cb5);url.push("&companyabbvname=",_cb7);url.push("&entitlementdescription=",entitlementdescription);url.push("&mode=","view");url.push("&operation=","PREVIEW");window.open(m.getServletURL("").replace(/.$/,"#")+url.join(""),"_blank","top=100,left=200,height=400,width=900,toolbar=no,resizable=no");}else{if(_cb5&&_cb5!==""){_cb8.push(entitlementCod,_cb5);}if(_cb6&&_cb6!==""){_cb9.push(entitlementDescp,_cb6);}if(_cb7&&_cb7!==""){_cba.push("&companyAbbvName=",_cb7);}url.push("/screen/",_cbc);url.push("?option=",type);url.push(_cb9.join(""),_cba.join(""),_cb8.join(""));if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){_cbb.push("&parentTitle=",window.document.title);url.push(_cbb.join(""));}_b51(m.getServletURL(url.join("")));}},showPopup:function(_cbd,_cbe){var url=[];url.push("/screen/","ReportingPopup");url.push("?option=",_cbe);var _cbf=misys.getLocalization("transactionPopupWindowTitle");var _cc0=document.createElement("form");_cc0.target=_cbf;_cc0.method="POST";_cc0.action=m.getServletURL(url.join(""));if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){_cbd=_cbd+"&parenttitle="+window.document.title;}if(_cbd){var _cc1=_cbd.split("&");for(var i=0;i<_cc1.length;i++){if(_cc1[i]){if(_cc1[i].indexOf("=")==-1){_cc1[i-1]=_cc1[i-1]+"&"+_cc1[i];var _cc2=Array.from(_cc1);_cc2.splice(i,1);_cc1=_cc2;}}}for(i=0;i<_cc1.length;i++){if(_cc1[i]){var _cc3=_cc1[i].split("=");var _cc4=document.createElement("input");_cc4.type="hidden";_cc4.name=_cc3[0];var _cc5=_cc3[1];if(_cc3.length>2){for(var j=2;j<_cc3.length;j++){_cc5=_cc5+"="+_cc3[j];}}_cc4.value=_cc5;_cc0.appendChild(_cc4);}}}document.body.appendChild(_cc0);var _cc6;if(misys._config.showAddressBarInPopup&&misys._config.showAddressBarInPopup==true){_cc6=d.global.open("",_cbf,"width=800,height=500,resizable=yes,scrollbars=yes,location=yes");}else{_cc6=d.global.open("",_cbf,"width=800,height=500,resizable=yes,scrollbars=yes");}if(!_cc6.opener){_cc6.opener=self;}_cc6.focus();if(_cc6){_cc0.submit();}},generateDocument:function(type,_cc7,_cc8,_cc9,_cca,_ccb,_ccc){switch(type.toLowerCase()){case "bg-document":var url=[reportingPopup];url.push("?option=",_cc7);if(_cc8&&_cc8!==""){url.push(refrnceId,_cc8);}if(_cc9&&_cc9!==""){url.push("&tnxid=",_cc9);}url.push(prductCode,_cca);if(_ccb&&!(_ccb==="")){url.push("&featureid=",_ccb);}if(_ccc&&!(_ccc==="")){url.push("&companyId=",_ccc);}_b51(m.getServletURL(url.join(""),null,m.getLocalization("pdfSummaryWindowTitle")));break;case "si-document":var _ccd=[reportingPopup];_ccd.push("?option=",_cc7);if(_cc8&&_cc8!==""){_ccd.push(refrnceId,_cc8);}if(_cc9&&_cc9!==""){_ccd.push("&tnxid=",_cc9);}_ccd.push(prductCode,_cca);if(_ccb&&!(_ccb==="")){_ccd.push("&featureid=",_ccb);}if(_ccc&&!(_ccc==="")){_ccd.push("&companyId=",_ccc);}_b51(m.getServletURL(_ccd.join(""),null,m.getLocalization("pdfSummaryWindowTitle")));break;default:break;}},showBulkSummary:function(type,_cce,_ccf,_cd0,_cd1,_cd2){var _cd3;if(!_cd2){if(dj.byId("export_field")){_cd3=dj.byId("export_field").get("value");m.popup.showSummary(type,_cd3,_ccf,_cd0,_cd1);}}else{if(_cd2){if(dj.byId("export_field_bottom")){_cd3=dj.byId("export_field_bottom").get("value");m.popup.showSummary(type,_cd3,_ccf,_cd0,_cd1);}}}}});m.dialog=m.dialog||{};d.mixin(m.dialog,{populate:function(type,url,_cd4,_cd5){var _cd6=_cd4||"misys.binding.dialog";m._config.popupType=type;d["require"](_cd6+"."+type);var _cd7=d.byId(type+"data");if(!_cd7){console.error("[misys.common] Cannot populate the dialog with content for URL",url);console.error("[misys.common] Check that the dialog content has an element with","ID equal to",(type+"data"));return;}var dim=d.coords(_cd7),_cd8=d.create("div",{id:"contentPaneContainer"});var _cd9;if(!dj.byId("contentPane")){_cd9=new dijit.layout.ContentPane({id:"contentPane",style:{height:dim.h+"px",width:dim.w+"px",overflow:"auto",position:"relative"}});}else{_cd9=dj.byId("contentPane");}_cd9.placeAt(_cd8,"first");d.style(_cd8,"visibility","hidden");d.style(_cd8,"height","0px");d.place(_cd8,_cd7,"after");m.animate("wipeOut",_cd7,function(){m.animate("wipeIn",_cd8,function(){m.connect(_cd9.get("id"),"onLoad",function(){m.dialog.bind();_b65();_b27(_a8b);});if(_cd5){_cd9.set("ioMethod",m.xhrPost);_cd9.set("ioArgs",{content:_cd5});}_cd9.set("href",url);_cd9.startup();_cd9.resize();},null,null,true);},null,null,true);},clear:function(_cda,_cdb,_cdc,_cdd){var _cde=d.byId("contentPaneContainer");if(_cdd){if(d.byId("responseXHRDialogDiv")){d.destroy(d.byId("responseXHRDialogDiv"));}var _cdf=dojo.create("div");_cdf.id="responseXHRDialogDiv";dojo.addClass(_cdf,"responseXHRDialogDiv");d.place(_cdd,_cdf,"first");}m.animate("wipeOut",_cde,function(){d.place(_cde,d.body(),"last");if(_cdd){d.place(_cdf,_cda,"first");}m.animate("wipeIn",_cda,function(){_cdb.destroyRecursive();d.destroy(_cde);if(_cdc&&d.isFunction(_cdc)){_cdc();}delete m._config.popupType;});});},submit:function(_ce0){switch(_ce0){case "SUBMIT":undefined;var _ce1=dj.byId("product_code")?dj.byId("product_code").get("value"):null;var _ce2=false;if(_ce1==="LC"||_ce1==="EL"||_ce1==="SI"||_ce1==="SR"){_ce2=true;}var _ce3=d.query("#"+_a8b);if(_ad5(false,_ce3)){var _ce4=m.getLocalization("submitTransactionConfirmation");m.dialog.show("CONFIRMATION",_ce4,"",function(){var _ce5=dj.byId("popup_realform_operation");if(_ce5.get("value")===""){_ce5.set("value","SUBMIT");}dj.byId("popup_TransactionData").set("value",m.formToXML({ignoreDisabled:_ce2,selector:"#"+_a8b,xmlRoot:dj.byId("node_name").get("value")}));_ad0("popup_realform",function(){m.grid.setStoreURL(dj.byId(m._config.popupType+"data_grid"));});});}else{_adc(_a8b);m.dialog.show("ERROR",m.getLocalization("mandatoryFieldsToSubmitError"),"",function(){_ad5(true,_ce3);});}break;case "CANCEL":m.dialog.clear(d.byId(m._config.popupType+"data"),dj.byId("contentPane"));break;case "HELP":_b51(m._config.onlineHelpUrl,m.getLocalization("onlineHelpWindowTitle"),"width=1000,height=700,resizable=yes,scrollbars=yes");return;break;default:break;}},passBack:function(_ce6,_ce7,_ce8,type){var _ce9=null;var _cea=null;var _ceb=null;var _cec=null;var _ced=null;var _cee=null;var _cef=null;var _cf0=_ce6.indexOf("applicant_act_nickname")!==-1?_ce6.indexOf("applicant_act_nickname"):_ce6.indexOf("applicant_collection_act_nickname");var _cf1=_ce6.indexOf("beneficiary_account_nickname");var _cf2=_ce6.indexOf("beneficiary_nickname");_ceb=_ce6.indexOf("customer_associated_bank");_cec=_ce7[_cf0];_cee=_ce7[_cf2];_ced=_ce7[_cf1];var _cf3=_ce7[_ceb];if(_cf3!==""&&_cf3!==null){m._config.customerBankName=_cf3;}if(_cec!==undefined&&_cec!==""&&_cec!==null&&dj.byId("applicant_act_nickname")){dj.byId("applicant_act_nickname").set("value",_cec);}if(_cee!==undefined&&_cee!==""&&_cee!==null&&dj.byId("beneficiary_nickname")){dj.byId("beneficiary_nickname").set("value",_cee);}if(_ced!==undefined&&_ced!==""&&_ced!==null&&dj.byId("beneficiary_act_nickname")){dj.byId("beneficiary_act_nickname").set("value",_ced);}var _cf4=dj.byId("childXhrDialog"),_cf5=/SimpleTextArea/,_cf6=/SimpleTextarea/,_cf7=/FilteringSelect/,obj;if(type==="swift_bic"){m._config.isBankDetailsPopulated=true;}else{if(type==="beneficiary_accounts"){m._config.isBeneficiaryAccountsPopulated=true;}}d.forEach(_ce6,function(id,_cf8){var _cf9=["seller_account_type"];obj=dj.byId(id);if(obj){var _cfa=_ce7[_cf8];if(_cf5.test(obj.declaredClass)||_cf6.test(obj.declaredClass)){if(obj.get("value")!==""){_cfa="\n"+_cfa;}m.insertAtCursor(obj,_cfa);}else{if(_cf7.test(obj.declaredClass)){if(_cf9.indexOf(obj.id)>-1){obj.set("value",_cfa);}else{if(type==="treasury_beneficiary_accounts"){obj.set("value",_cfa);obj.set("displayedValue",_cfa);}else{obj.set("value","");obj.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_cfa}});}}}else{obj.set("value",_cfa);}}obj.onChange();obj.onFocus();obj.onBlur();}});var _cfb="false";if(dj.byId("show_bic_code")){_cfb=dj.byId("show_bic_code").get("value");}if(_cfb==="true"){if(type==="treasury_beneficiary_accounts"&&dj.byId("beneficiary_bank_bic")&&dj.byId("beneficiary_bank_bic").get("value")!==""){dj.byId("beneficiary_bank").set("value","");dj.byId("beneficiary_bank_branch").set("value","");dj.byId("beneficiary_bank_address").set("value","");dj.byId("beneficiary_bank_city").set("value","");dj.byId("beneficiary_bank_country").set("value","");dj.byId("beneficiary_bank_bic").set("disabled",true);}}if(_cf4){if(_ce8){m.dialog.connect(_cf4,"onHide",function(){setTimeout(function(){dj.byId("xhrDialog").hide();},dj.defaultDuration);});}_cf4.hide();}else{if(dj.byId("xhrDialog")){dj.byId("xhrDialog").hide();}}var _cfc=dj.byId("01entity");var _cfd=dj.byId("02entity");var _cfe=dj.byId("03entity");if(_cfc){_cfc.set("value",_ce7[0]);}if(_cfd){_cfd.set("value",_ce7[0]);}if(_cfe){_cfe.set("value",_ce7[0]);}var _cff=_ce7[_ce6.indexOf("swift_charges_type")];if(_cff){if(_cff==="01"){document.getElementById("swift_charges_type_1").click();}else{if(_cff==="02"){document.getElementById("swift_charges_type_2").click();}else{if(_cff==="05"){document.getElementById("swift_charges_type_3").click();}}}}if(d.isFunction(m._config.passBack)){return m._config.passBack(_ce6,_ce7,_ce8);}}});d.subscribe("ready",function(){if(d.query(_a97).length>0){m.connect(window,"onresize",m.resizeCharts);}if(d.query(_a90).length>0){m.connect(window,"onresize",m.resizeGrids);}});})(dojo,dijit,misys);}if(!dojo._hasResource["misys.form.SortedFilteringSelect"]){dojo._hasResource["misys.form.SortedFilteringSelect"]=true;dojo.provide("misys.form.SortedFilteringSelect");dojo.experimental("misys.form.SortedFilteringSelect");dojo.declare("misys.form.SortedFilteringSelect",dijit.form.FilteringSelect,{postCreate:function(){this.inherited(arguments);this.fetchProperties={sort:[{attribute:"name"}]};}});}if(!dojo._hasResource["misys.client.form.common_client"]){dojo._hasResource["misys.client.form.common_client"]=true;dojo.provide("misys.client.form.common_client");(function(d,dj,m){})(dojo,dijit,misys);}if(!dojo._hasResource["misys.form.common"]){dojo._hasResource["misys.form.common"]=true;dojo.provide("misys.form.common");(function(d,dj,m){var _d00="tab title:";var _d01="label[for=tenor_period_label]";var _d02="Advising Bank";var _d03="requested-conf-party-bank-details";var _d04="view-narrative-swift";var _d05="&productcode=";var _d06="[misys.form.common] Opening a child dialog at URL";var _d07="/screen/AjaxScreen/action/";var _d08="AjaxScreen/action/GetStaticDataPopup";var _d09="[misys.form.common] Retrieving grid content from URL";var _d0a="excluded-value";var _d0b="attachment-file";var _d0c="13",_d0d="40",_d0e="300",_d0f=0,_d10=0,_d11=0,_d12=0,_d13=true,_d14=true;function _d15(msg){var re=new RegExp(/^[a-zA-Z]{1}[).#+-]|^[1-9]{1,2}[).#+-]|^[\+#-]/);var _d16=msg.split(/\n/);var _d17="<pre style=\"background-color:#ffffff;border-width:0px; white-space: pre-wrap;\">";for(var i=0;i<_d16.length;i++){_d16[i]=_d16[i]+"\n";var len=_d16[i].length;var temp="";if(_d16[i][len-1]==="\n"&&_d16[i+1]!=undefined&&(re.test(_d16[i+1].trim())||_d16[i+1].trim()===""||_d16[i+1].trim()==="\n")){temp=_d16[i].replace(/\n/g,"");temp=temp+"<br/>";}else{temp=_d16[i].replace(/\n/g," ");}_d17+=temp;}_d17+="</pre>";return _d17;};function _d18(msg){var _d19=msg;_d19=_d19.replace(/&#xa;/g,"\n");_d19=_d19.replace(/&#xa;/g,"\t");_d19=_d19.replace(/&#x29;/g,")");_d19=_d19.replace(/&#x2b;/g,"+");_d19=_d19.replace(/&#x23;/g,"#");_d19=_d19.replace(/&#x2d;/g,"-");_d19=_d19.replace(/&#x3e;/g,">");_d19=_d19.replace(/&#x3c;/g,"<");_d19=_d19.replace(/&#x2f;/g,"/");_d19=_d19.replace(/&#x9;/g,"");_d19=_d19.replace(/&#x26;nbsp&#x3b;/g," ");_d19=_d19.replace(/&#x26;amp&#x3b;/g,"&");return _d15(_d19);};function _d1a(node){var _d1b=m._config.productCode.toLowerCase(),_d1c=dj.byId(_d1b+"_amt"),_d1d=dj.byId("org_"+_d1b+"_amt"),_d1e=d.number.parse(_d1d.get("displayedValue")),_d1f=d.number.parse(node.get("displayedValue"));_d1e=!isNaN(_d1e)?_d1e:0;_d1f=!isNaN(_d1f)?_d1f:null;if(node.id==="inc_amt"||node.id==="inc_amt_value"){_d1c.set("value",_d1e+_d1f);m.setTnxAmt(_d1f);}else{if(_d1f<=_d1e){_d1c.set("value",_d1e-_d1f);m.setTnxAmt(_d1f);}else{m.setFieldState(node,false);}}};function _d20(_d21){m.setTnxAmt("");var _d22=_d21.get("value");dj.byId("ft_cur_code").set("value",_d22);dj.byId("counterparty_details_ft_cur_code_nosend").set("value",_d22);m.setCurrency(_d21,["ft_amt","counterparty_details_ft_amt_nosend"]);d.query(".widgetContainer #counterparty_fields "+"[id^='counterparty_details_document_id_']").forEach(function(_d23){if(_d23.id.indexOf("nosend")===-1){var w=dj.byId(_d23.id);if(w){m.deleteTransactionAddon("counterparty",w.get("value"));}}});};function _d24(_d25,_d26){var _d27=dj.byId("drawee_details_bank_name");var _d28=(dj.byId("tnxtype")&&dj.byId("tnxtype").get("value")==="03")||(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")==="03")||(dj.byId("prod_stat_code")&&(dj.byId("prod_stat_code").get("value")==="08"||dj.byId("prod_stat_code").get("value")==="31"));if(!(_d28)){switch(_d26){case m._config.issuingBank:_d27.set("value",m._config.issuingBank);break;case m._config.advisingBank:if(_d25!=="03"){_d27.set("value",m._config.advisingBank);}else{_d27.set("value",m._config.issuingBank);}break;case m._config.anyBank:_d27.set("value",m._config.issuingBank);break;default:if(_d25==="01"||_d25==="02"||_d25==="04"||_d25==="05"||_d25==="03"){}else{_d27.set("value",m._config.issuingBank);}break;}}};function _d29(url,_d2a){var _d2b=[{field:"REFIDLINK",name:"ref_id",width:"100px",styles:"text-align: center;",formatter:m.grid.formatHTML},{field:"CURCODE",name:"cur_code",width:"auto"},{field:"TNXID",name:"tnx_id",width:"auto"},{field:"TYPE",name:"type",width:"auto",formatter:m.grid.formatHTML},{field:"STATUS",name:"status",width:"auto"},{field:"AMOUNT",name:"tnx_amt",width:"auto"}],json="items: ''",_d2c=new dojo.data.ItemFileReadStore({data:json}),grid=new dojox.grid.DataGrid({query:{id:"*"},id:"transaction_Grid",structure:_d2b,height:"100px",noDataMessage:m.getLocalization("noTransactionsFound"),onSelected:function(_d2d){_d2e(_d2d);},selectionMode:"single"},document.createElement("div"));d.byId(_d2a).appendChild(grid.domNode);grid.startup();_d2c.url=url;grid.setStore(_d2c);};function _d2e(_d2f){var _d30=dj.byId("transaction_Grid").get("store")._arrayOfAllItems[_d2f];dj.byId("imp_bill_ref_id").set("value",_d30.TNXID);d.byId("TransactionLink").innerHTML="<a id='javascriptLink' href='javascript:void(0)'>"+m.getLocalization("TransactionLink")+"</a>";d.attr("javascriptLink","onclick","misys.popup.showReporting('FULL','"+_d30.PRODUCTCODE+"','"+_d30.REFID+"','"+_d30.TNXID+"');");dj.byId("linkedTransaction_dialog").hide();};function _d31(){var _d32=m._config.limitFieldIdCollection;d.forEach(_d32,function(id,_d33){var obj=dj.byId(id);if(obj){obj.set("displayedValue","");}});};function _d34(_d35){m._config.limitFieldIdCollection=_d35.fields;m._config.limitCollection=_d35.items;m._config.limitStore=_d35.store;var _d36=dj.byId("limit_id");if(_d36){_d36.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:m._config.limitStore}});}};function _d37(_d38){var _d39;if(_d38.items!==""){_d39=_d38.items.widget;var _d3a=dj.byId(_d39);var _d3b=_d3a.get("value");if(_d3b===""){_d3a.set("value",_d3b+_d38.items.text);}else{_d3a.set("value",_d3b+"\n"+_d38.items.text);}}dj.byId("xhrDialog")?dj.byId("xhrDialog").hide():"";};function _d3c(_d3d){if(_d3d.message!==""){var _d3e=dj.byId("first_name"),_d3f=dj.byId("last_name"),_d40=dj.byId("legal_country"),_d41=dj.byId("legal_type"),_d42=dj.byId("legal_no"),_d43=dj.byId("address_line_1"),_d44=dj.byId("address_line_2"),_d45=dj.byId("country_sub_div"),_d46=dj.byId("county"),_d47=dj.byId("country_name"),_d48=dj.byId("phone"),fax=dj.byId("fax"),_d49=dj.byId("email"),dom=dj.byId("dom"),_d4a=dj.byId("time_zone"),_d4b=dj.byId("correspondence_language"),_d4c=dj.byId("actv_flag"),_d4d=dj.byId("base_cur_code"),_d4e=dj.byId("employee_department");var _d4f=_d3d.message.static_user.group_record.length;var _d50;var _d51;var _d52=_d3d.message.static_user.first_name,_d53=_d3d.message.static_user.last_name,_d54=_d3d.message.static_user.address_line_1,_d55=_d3d.message.static_user.address_line_2,_d56=_d3d.message.static_user.country_sub_div,_d57=_d3d.message.static_user.county,_d58=_d3d.message.static_user.country_name,_d59=_d3d.message.static_user.phone,_d5a=_d3d.message.static_user.fax,_d5b=_d3d.message.static_user.email,_d5c=_d3d.message.static_user.dom,_d5d=_d3d.message.static_user.time_zone,_d5e=_d3d.message.static_user.correspondence_language,_d5f=_d3d.message.static_user.cur_code;if(_d3d.message.static_user.company_type=="03"){_d50=dojo.byId("company_role_list");_d51=dojo.byId("company_avail_list_nosend");var _d60=_d3d.message.static_user.pending_trans_notify,_d61=_d3d.message.static_user.legal_country,_d62=_d3d.message.static_user.legal_type,_d63=_d3d.message.static_user.legal_no;_d40.set("value",_d61);_d41.set("value",_d62);_d42.set("value",_d63);if(_d60=="Y"){dj.byId("pending_trans_notify").set("checked",true);dj.byId("email").set("required",true);}if(_d3d.message.static_user.group_record.length>0){for(var m=1;m<=_d4f-1;m++){dj.byId("company_auth_level_"+m).set("value","");dj.byId("company_limit_amt_"+m).set("value","");dj.byId("company_limit_cur_code_"+m).set("value","");if(_d3d.message.static_user.group_record[m-1].existing_roles){var _d64=_d3d.message.static_user.group_record[m-1].existing_roles.role.name;var _d65=_d3d.message.static_user.group_record[m-1].existing_roles.role.limit_amt;var _d66=_d3d.message.static_user.group_record[m-1].existing_roles.role.limit_cur_code;dj.byId("company_auth_level_"+m).set("value",_d64);dj.byId("company_limit_amt_"+m).set("value",_d65);dj.byId("company_limit_cur_code_"+m).set("value",_d66);misys.animate("wipeIn","grp_rec_"+_d3d.message.static_user.group_record[m-1].group_abbv_name);}}}}if(_d3d.message.static_user.company_type=="01"||_d3d.message.static_user.company_type=="02"){_d50=dojo.byId("bank_role_list");_d51=dojo.byId("bank_avail_list_nosend");var _d67;if(_d3d.message.static_user.group_record.existing_roles!=""){var _d68=null;if(_d3d.message.static_user.group_record.existing_roles.role.length>0){for(var x=0;x<_d3d.message.static_user.group_record.existing_roles.role.length;x++){if(_d3d.message.static_user.group_record.existing_roles.role[x].roletype=="02"){_d68=_d3d.message.static_user.group_record.existing_roles.role[x].role_description;_d67=document.createElement("OPTION");_d67.innerHTML=_d68;_d67.value=_d3d.message.static_user.group_record.existing_roles.role[x].name;dj.byId("bank_auth_level_1").set("item",_d67);}}}else{if(_d3d.message.static_user.group_record.existing_roles.role.roletype=="02"){_d68=_d3d.message.static_user.group_record.existing_roles.role.role_description;_d67=document.createElement("OPTION");_d67.innerHTML=_d68;_d67.value=_d3d.message.static_user.group_record.existing_roles.role[x].name;dj.byId("bank_auth_level_1").set("item",_d67);}}}var _d69=_d3d.message.static_user.employee_department;_d4e.set("value",_d69);}_d3e.set("value",_d52);_d3f.set("value",_d53);_d43.set("value",_d54);_d44.set("value",_d55);_d45.set("value",_d56);_d46.set("value",_d57);_d47.set("value",_d58);_d48.set("value",_d59);fax.set("value",_d5a);_d49.set("value",_d5b);dom.set("value",_d5c);_d4a.set("value",_d5d);_d4b.set("value",_d5e);_d4d.set("value",_d5f);var _d6a;var _d6b;if(_d51){_d51.innerHTML="";}if(_d50){_d50.innerHTML="";}if(_d3d.message.static_user.company_type=="03"&&_d3d.message.static_user.static_company.owner_id!="2"&&_d3d.message.static_user.group_record[1].group_abbv_name=="global"){if(_d3d.message.static_user.group_record[1].existing_roles){if(_d3d.message.static_user.group_record[1].existing_roles.role.length>0){for(var j=0;j<_d3d.message.static_user.group_record[1].existing_roles.role.length;j++){_d6a=_d3d.message.static_user.group_record[1].existing_roles.role[j].role_description;_d6b=_d3d.message.static_user.group_record[1].existing_roles.role[j].name;dojo.create("option",{text:_d6a,value:_d6b,innerHTML:_d6a,textValue:_d6a},_d50);}}else{dojo.byId("company_role_list").add(dojo.create("option",{text:_d3d.message.static_user.group_record[1].existing_roles.role.role_description,innerHTML:_d3d.message.static_user.group_record[1].existing_roles.role.role_description,value:_d3d.message.static_user.group_record[1].existing_roles.role.name}));}}}var _d6c;var val3;if(_d3d.message.static_user.company_type=="01"||_d3d.message.static_user.company_type=="02"){if(_d3d.message.static_user.group_record.existing_roles){if(_d3d.message.static_user.group_record.existing_roles.role.length>0){for(var y=0;y<_d3d.message.static_user.group_record.existing_roles.role.length;y++){if(_d3d.message.static_user.group_record.existing_roles.role[y].roletype=="01"){_d6c=_d3d.message.static_user.group_record.existing_roles.role[y].role_description;val3=_d3d.message.static_user.group_record.existing_roles.role[y].name;dojo.create("option",{text:_d6c,value:val3,innerHTML:_d6c,textValue:_d6c},_d50);}}}else{if(_d3d.message.static_user.group_record.existing_roles.role.roletype=="01"){dojo.byId("bank_role_list").add(dojo.create("option",{text:_d3d.message.static_user.group_record.existing_roles.role.role_description,innerHTML:_d3d.message.static_user.group_record.existing_roles.role.role_description,value:_d3d.message.static_user.group_record.existing_roles.role.name}));}}}}if(_d3d.message.static_user.company_type=="03"&&_d3d.message.static_user.static_company.owner_id=="2"){var len=_d3d.message.static_user.group_record.length;if(_d3d.message.static_user.group_record.length>0){if(_d3d.message.static_user.group_record[len-1].existing_roles){if(_d3d.message.static_user.group_record[len-1].existing_roles.role.length>0){for(var z=0;z<_d3d.message.static_user.group_record[len-1].existing_roles.role.length;z++){_d6a=_d3d.message.static_user.group_record[len-1].existing_roles.role[z].role_description;_d6b=_d3d.message.static_user.group_record[len-1].existing_roles.role[z].name;dojo.create("option",{text:_d6a,value:_d6b,innerHTML:_d6a,textValue:_d6a},_d50);}}else{dojo.byId("company_role_list").add(dojo.create("option",{text:_d3d.message.static_user.group_record[len-1].existing_roles.role.role_description,innerHTML:_d3d.message.static_user.group_record.existing_roles.role.role_description,value:_d3d.message.static_user.group_record.existing_roles.role.name}));}}}else{if(_d3d.message.static_user.group_record.existing_roles){if(_d3d.message.static_user.group_record.existing_roles.role.length>0){for(var zn=0;zn<_d3d.message.static_user.group_record.existing_roles.role.length;zn++){_d6a=_d3d.message.static_user.group_record.existing_roles.role[zn].role_description;_d6b=_d3d.message.static_user.group_record.existing_roles.role[zn].name;dojo.create("option",{text:_d6a,value:_d6b,innerHTML:_d6a,textValue:_d6a},_d50);}}else{dojo.byId("company_role_list").add(dojo.create("option",{text:_d3d.message.static_user.group_record.existing_roles.role.role_description,innerHTML:_d3d.message.static_user.group_record.existing_roles.role.role_description,value:_d3d.message.static_user.group_record.existing_roles.role.name}));}}}}var _d6d;var val1;if(_d3d.message.static_user.company_type=="03"&&_d3d.message.static_user.static_company.owner_id!="2"&&_d3d.message.static_user.group_record[1].group_abbv_name=="global"){if(_d3d.message.static_user.group_record[1].avail_roles!=""){if(_d3d.message.static_user.group_record[1].avail_roles.role.length>0){_d3d.message.static_user.group_record[1].avail_roles.role.sort(_d6e("role_description"));for(var k=0;k<_d3d.message.static_user.group_record[1].avail_roles.role.length;k++){if(_d3d.message.static_user.group_record[1].avail_roles.role[k].roledest=="03"&&_d3d.message.static_user.group_record[1].avail_roles.role[k].roletype=="01"){_d6d=_d3d.message.static_user.group_record[1].avail_roles.role[k].role_description;val1=_d3d.message.static_user.group_record[1].avail_roles.role[k].name;dojo.create("option",{text:_d6d,value:val1,innerHTML:_d6d,textValue:_d6d},_d51);}}}else{if(_d3d.message.static_user.group_record[1].avail_roles.role.roledest=="03"&&_d3d.message.static_user.group_record[1].avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{text:_d3d.message.static_user.group_record[1].avail_roles.role.role_description,innerHTML:_d3d.message.static_user.group_record[1].avail_roles.role.role_description,value:_d3d.message.static_user.group_record[1].avail_roles.role.name}));}}}}if(_d3d.message.static_user.company_type=="03"&&_d3d.message.static_user.static_company.owner_id=="2"){var ln=_d3d.message.static_user.group_record.length;if(_d3d.message.static_user.group_record.length>0){if(_d3d.message.static_user.group_record[ln-1].avail_roles!=""){if(_d3d.message.static_user.group_record[ln-1].avail_roles.role.length>0){_d3d.message.static_user.group_record[ln-1].avail_roles.role.sort(_d6e("role_description"));for(var mor=0;mor<_d3d.message.static_user.group_record[ln-1].avail_roles.role.length;mor++){if(_d3d.message.static_user.group_record[ln-1].avail_roles.role[mor].roledest=="03"&&_d3d.message.static_user.group_record[ln-1].avail_roles.role[mor].roletype=="01"){_d6d=_d3d.message.static_user.group_record[ln-1].avail_roles.role[mor].role_description;val1=_d3d.message.static_user.group_record[ln-1].avail_roles.role[mor].name;dojo.create("option",{value:val1,innerHTML:_d6d},_d51);}}}else{if(_d3d.message.static_user.group_record[ln-1].avail_roles.role.roledest=="03"&&_d3d.message.static_user.group_record[ln-1].avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{innerHTML:_d3d.message.static_user.group_record[ln-1].avail_roles.role.role_description,value:_d3d.message.static_user.group_record[ln-1].avail_roles.role.name}));}}}}else{if(_d3d.message.static_user.group_record.avail_roles!=""){if(_d3d.message.static_user.group_record.avail_roles.role.length>0){_d3d.message.static_user.group_record.avail_roles.role.sort(_d6e("role_description"));for(var mr=0;mr<_d3d.message.static_user.group_record.avail_roles.role.length;mr++){if(_d3d.message.static_user.group_record.avail_roles.role[mr].roledest=="03"&&_d3d.message.static_user.group_record.avail_roles.role[mr].roletype=="01"){_d6d=_d3d.message.static_user.group_record.avail_roles.role[mr].role_description;val1=_d3d.message.static_user.group_record.avail_roles.role[mr].name;dojo.create("option",{value:val1,innerHTML:_d6d},_d51);}}}else{if(_d3d.message.static_user.group_record.avail_roles.role.roledest=="03"&&_d3d.message.static_user.group_record.avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{innerHTML:_d3d.message.static_user.group_record.avail_roles.role.role_description,value:_d3d.message.static_user.group_record.avail_roles.role.name}));}}}}}if(_d3d.message.static_user.company_type=="02"){if(_d3d.message.static_user.group_record.avail_roles){if(_d3d.message.static_user.group_record.avail_roles.role.length>0){_d3d.message.static_user.group_record.avail_roles.role.sort(_d6e("role_description"));for(var n=0;n<_d3d.message.static_user.group_record.avail_roles.role.length;n++){if(_d3d.message.static_user.group_record.avail_roles.role[n].roledest=="02"&&_d3d.message.static_user.group_record.avail_roles.role[n].roletype=="01"){_d6d=_d3d.message.static_user.group_record.avail_roles.role[n].role_description;val1=_d3d.message.static_user.group_record.avail_roles.role[n].name;dojo.create("option",{text:_d6d,value:val1,innerHTML:_d6d,textValue:_d6d},_d51);}}}else{if(_d3d.message.static_user.group_record.avail_roles.role[n].roledest=="02"&&_d3d.message.static_user.group_record.avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{text:_d3d.message.static_user.group_record[i].avail_roles.role.role_description,innerHTML:_d3d.message.static_user.group_record.avail_roles.role.role_description,value:_d3d.message.static_user.group_record.avail_roles.role.name}));}}}}if(_d3d.message.static_user.company_type=="01"){if(_d3d.message.static_user.group_record.avail_roles){if(_d3d.message.static_user.group_record.avail_roles.role.length>0){_d3d.message.static_user.group_record.avail_roles.role.sort(_d6e("role_description"));for(var p=0;p<_d3d.message.static_user.group_record.avail_roles.role.length;p++){if(_d3d.message.static_user.group_record.avail_roles.role[p].roledest=="01"&&_d3d.message.static_user.group_record.avail_roles.role[p].roletype=="01"){_d6d=_d3d.message.static_user.group_record.avail_roles.role[p].role_description;val1=_d3d.message.static_user.group_record.avail_roles.role[p].name;dojo.create("option",{text:_d6d,value:val1,innerHTML:_d6d,textValue:_d6d},_d51);}}}else{if(_d3d.message.static_user.group_record.avail_roles.role[p].roledest=="01"&&_d3d.message.static_user.group_record.avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{text:_d3d.message.static_user.group_record[i].avail_roles.role.role_description,innerHTML:_d3d.message.static_user.group_record.avail_roles.role.role_description,value:_d3d.message.static_user.group_record.avail_roles.role.name}));}}}}if(_d3d.message.static_user.company_type=="03"){if(_d3d.message.static_user.entity_record){var _d6f,_d70,_d71,_d72,_d73,_d74,_d75=dj.byId("default_entity");var _d76=document.createElement("OPTION");_d76.innerHTML="";_d76.value="";if(_d75){_d75.set("item",_d76);}if(_d3d.message.static_user.entity_record.length>0){for(var x1 in _d3d.message.static_user.entity_record){if(_d3d.message.static_user.entity_record[x1].default_entity=="Y"){var temp=_d3d.message.static_user.entity_record[x1].entity_name;var opt=document.createElement("OPTION");opt.innerHTML=temp;opt.value=temp;_d75.set("item",opt);break;}}for(var a=0;a<_d3d.message.static_user.entity_record.length;a++){_d71=_d3d.message.static_user.entity_record[a].entity_id;_d72=dijit.byId("entity_flag_nosend_"+_d71);_d73=dojo.byId("entity_roles_exist_nosend_"+_d71);_d73.innerHTML="";_d74=_d3d.message.static_user.entity_record[a].entity_flag;_d72.set("value",_d74);if(_d74=="Y"){if(_d3d.message.static_user.entity_record[a].existing_roles){if(_d3d.message.static_user.entity_record[a].existing_roles.role.length>0){for(var q=0;q<_d3d.message.static_user.entity_record[a].existing_roles.role.length;q++){_d6f=_d3d.message.static_user.entity_record[a].existing_roles.role[q].role_description;_d70=_d3d.message.static_user.entity_record[a].existing_roles.role[q].name;dojo.create("option",{text:_d6f,value:_d70,innerHTML:_d6f,textValue:_d6f},_d73);}}else{dojo.byId("entity_roles_exist_nosend_"+_d71).add(dojo.create("option",{text:_d3d.message.static_user.entity_record[a].existing_roles.role.role_description,innerHTML:_d3d.message.static_user.entity_record[a].existing_roles.role.role_description,value:_d3d.message.static_user.entity_record[a].existing_roles.role.name}));}dj.byId("entity_flag_nosend_"+_d71).set("checked",true);misys.animate("wipeIn","entity_roles_div_"+_d71);}}else{dj.byId("entity_flag_nosend_"+_d71).set("checked",false);misys.animate("wipeOut","entity_roles_div_"+_d71);}}}else{if(_d3d.message.static_user.entity_record.default_entity=="Y"){var _d77=_d3d.message.static_user.entity_record.entity_name;var opt1=document.createElement("OPTION");opt1.innerHTML=_d77;opt1.value=_d77;_d75.set("item",opt1);}_d71=_d3d.message.static_user.entity_record.entity_id;_d73=dojo.byId("entity_roles_exist_nosend_"+_d71);_d73.innerHTML="";_d74=_d3d.message.static_user.entity_record.entity_flag;if(_d74=="Y"){if(_d3d.message.static_user.entity_record.existing_roles){if(_d3d.message.static_user.entity_record.existing_roles.role.length>0){for(var r=0;r<_d3d.message.static_user.entity_record.existing_roles.role.length;r++){_d6f=_d3d.message.static_user.entity_record.existing_roles.role[r].role_description;_d70=_d3d.message.static_user.entity_record.existing_roles.role[r].name;dojo.create("option",{text:_d6f,value:_d70,innerHTML:_d6f,textValue:_d6f},_d73);}dj.byId("entity_flag_nosend_"+_d71).set("checked",true);misys.animate("wipeIn","entity_roles_div_"+_d71);}else{dojo.byId("entity_roles_exist_nosend_"+_d71).add(dojo.create("option",{text:_d3d.message.static_user.entity_record.existing_roles.role.role_description,innerHTML:_d3d.message.static_user.entity_record.existing_roles.role.role_description,value:_d3d.message.static_user.entity_record.existing_roles.role.name}));}}}else{dj.byId("entity_flag_nosend_"+_d71).set("checked",false);misys.animate("wipeOut","entity_roles_div_"+_d71);}}var _d78,_d79,_d7a,_d7b,_d7c=dj.byId("default_entity");if(_d3d.message.static_user.entity_record.length>0){for(var b=0;b<_d3d.message.static_user.entity_record.length;b++){_d71=_d3d.message.static_user.entity_record[b].entity_id;_d72=dijit.byId("entity_flag_nosend_"+_d71);_d7a=dojo.byId("entity_roles_avail_nosend_"+_d71);_d7b=_d3d.message.static_user.entity_record[b].entity_flag;_d72.set("value",_d7b);if(_d7b=="Y"){_d7a.innerHTML="";if(_d3d.message.static_user.entity_record[b].avail_roles){if(_d3d.message.static_user.entity_record[b].avail_roles.role.length>0){_d3d.message.static_user.entity_record[b].avail_roles.role.sort(_d6e("role_description"));for(var s=0;s<_d3d.message.static_user.entity_record[b].avail_roles.role.length;s++){_d78=_d3d.message.static_user.entity_record[b].avail_roles.role[s].role_description;_d79=_d3d.message.static_user.entity_record[b].avail_roles.role[s].name;dojo.create("option",{text:_d78,value:_d79,innerHTML:_d78,textValue:_d78},_d7a);}}else{dojo.byId("entity_roles_avail_nosend_"+_d71).add(dojo.create("option",{text:_d3d.message.static_user.entity_record[b].avail_roles.role.role_description,innerHTML:_d3d.message.static_user.entity_record[b].avail_roles.role.role_description,value:_d3d.message.static_user.entity_record[b].avail_roles.role.name}));}dj.byId("entity_flag_nosend_"+_d71).set("checked",true);misys.animate("wipeIn","entity_roles_div_"+_d71);}}else{dj.byId("entity_flag_nosend_"+_d71).set("checked",false);misys.animate("wipeOut","entity_roles_div_"+_d71);}}}else{if(_d3d.message.static_user.entity_record.default_entity=="Y"){var tmp=_d3d.message.static_user.entity_record.entity_name;var op=document.createElement("OPTION");op.innerHTML=tmp;op.value=tmp;_d7c.set("item",op);}_d71=_d3d.message.static_user.entity_record.entity_id;_d7a=dojo.byId("entity_roles_avail_nosend_"+_d71);_d7b=_d3d.message.static_user.entity_record.entity_flag;if(_d7b=="Y"){_d7a.innerHTML="";if(_d3d.message.static_user.entity_record.avail_roles){if(_d3d.message.static_user.entity_record.avail_roles.role.length>0){_d3d.message.static_user.entity_record.avail_roles.role.sort(_d6e("role_description"));for(var t=0;t<_d3d.message.static_user.entity_record.avail_roles.role.length;t++){_d78=_d3d.message.static_user.entity_record.avail_roles.role[t].role_description;_d79=_d3d.message.static_user.entity_record.avail_roles.role[t].name;dojo.create("option",{text:_d78,value:_d79,innerHTML:_d78,textValue:_d78},_d7a);}dj.byId("entity_flag_nosend_"+_d71).set("checked",true);}else{dojo.byId("entity_roles_avail_nosend_"+_d71).add(dojo.create("option",{text:_d3d.message.static_user.entity_record.avail_roles.role.role_description,innerHTML:_d3d.message.static_user.entity_record.avail_roles.role.role_description,value:_d3d.message.static_user.entity_record.avail_roles.role.name}));}}}else{dj.byId("entity_flag_nosend_"+_d71).set("checked",false);misys.animate("wipeOut","entity_roles_div_"+_d71);}}}}if(_d3d.message.static_user.company_type=="03"){if(_d3d.message.static_user.entitlement_record){var _d7d;var _d7e=false;for(var t2=0;t2<_d3d.message.static_user.entitlement_record.length;t2++){_d7d=_d3d.message.static_user.entitlement_record[t2].entitlement_id;if(_d3d.message.static_user.entitlement_code!==null&&_d3d.message.static_user.entitlement_code!==undefined&&_d3d.message.static_user.entitlement_code===_d3d.message.static_user.entitlement_record[t2].entitlement_code&&dj.byId("entitlement_flag_nosend_"+_d7d)!==null&&dj.byId("entitlement_flag_nosend_"+_d7d)!==undefined){_d7e=true;}}for(var t1=0;t1<_d3d.message.static_user.entitlement_record.length;t1++){_d7d=_d3d.message.static_user.entitlement_record[t1].entitlement_id;var _d7f;var _d80=_d3d.message.static_user.entitlement_record[t1].entitlement_code;var _d81=_d3d.message.static_user.entitlement_record[t1].default_subsidiary;var _d82=_d3d.message.static_user.entitlement_record[t1].subsidiary_List;if(_d82!==undefined&&_d82.length>0){_d7f=_d82.substring(1,_d82.length-1);}if(_d3d.message.static_user.entitlement_code!==null&&_d3d.message.static_user.entitlement_code!==undefined&&_d3d.message.static_user.entitlement_code===_d3d.message.static_user.entitlement_record[t1].entitlement_code&&dj.byId("entitlement_flag_nosend_"+_d7d)!==null&&dj.byId("entitlement_flag_nosend_"+_d7d)!==undefined){dj.byId("entitlement_flag_nosend_"+_d7d).set("checked",true);misys.animate("wipeIn","userSubsidiaryTable_"+_d7d);if(_d7f!==""&&_d7f!==undefined){if(dijit.byId("subsidiary_flag_nosend_".concat(_d7f))){dijit.byId("subsidiary_flag_nosend_".concat(_d7f)).set("checked",true);dijit.byId("subsidiary_radio_flag_nosend_".concat(_d7f)).set("checked",true);dijit.byId("default_subsidiary").set("value",_d81);}dijit.byId("entitlement_code").set("value",_d80);}}else{if(_d3d.message.static_user.entitlement_code===""){dj.byId("entitlement_flag_nosend_"+_d7d).set("checked",false);dj.byId("entitlement_flag_nosend_"+_d7d).set("disabled",false);misys.animate("wipeOut","userSubsidiaryTable_"+_d7d);if(_d7f!==""&&_d7f!==undefined){dijit.byId("subsidiary_flag_nosend_".concat(_d7f)).set("checked",false);dijit.byId("subsidiary_radio_flag_nosend_".concat(_d7f)).set("checked",false);}}else{if(_d3d.message.static_user.entitlement_code!==_d3d.message.static_user.entitlement_record[t1].entitlement_code&&!_d7e){dj.byId("entitlement_flag_nosend_"+_d7d).set("disabled",false);}else{if(dj.byId("entitlement_flag_nosend_"+_d7d)!==null&&dj.byId("entitlement_flag_nosend_"+_d7d)){dj.byId("entitlement_flag_nosend_"+_d7d).set("disabled",true);}}}}}}}if(d.byId("clone_user")){d.byId("clone_user").checked=true;}}dj.byId("xhrDialog")?dj.byId("xhrDialog").hide():"";};function _d6e(prop){return function(a,b){if(a[prop]>b[prop]){return 1;}else{if(a[prop]<b[prop]){return -1;}}return 0;};};function _d83(_d84){if(_d84&&_d84.items!==""){var _d85=_d84.store_id;var _d86=dj.byId(_d85);if(_d86&&_d86.store){var _d87=new dojo.data.ItemFileWriteStore({data:{"identifier":"id","items":[]}});var ctr=0;dojo.forEach(_d84.items,function(item){var _d88=item;_d88.id=ctr++;_d87.newItem(_d88);});_d86.setStore(_d87);_d86.resize();}}};d.mixin(m,{selectEntityBeforeBank:function(){if(dj.byId("entity")&&dj.byId("entity").get("value")==""&&Object.keys(misys._config.entityBankMap).length>1){var id=this.id;var _d89=function(){dj.byId(id).set("value","");dojox.fx.smoothScroll({node:document.getElementById("entity"),win:window}).play();};m.dialog.show("ERROR",m.getLocalization("selectEntityBeforeBank"),"",_d89);}},populateBankAsPerEntity:function(_d8a){var _d8b=dj.byId(_d8a);var _d8c=Object.keys(misys._config.entityBankMap).map(function(itm){return misys._config.entityBankMap[itm];});var _d8d={"identifier":"value","items":[]},_d8e=new d.data.ItemFileWriteStore({data:_d8d});if(_d8b){_d8b.store=null;for(var i=0;i<_d8c.length;i++){if(dj.byId("entity")&&_d8c[i].indexOf(dj.byId("entity").get("value"))>-1){_d8e.newItem({"value":Object.keys(misys._config.entityBankMap).map(function(itm){return misys._config.entityBankMap[itm];})[i][0],"name":Object.keys(misys._config.entityBankMap)[i]});}}}_d8b.store=_d8e;var _d8f=dj.byId(_d8a)?dj.byId(_d8a).get("value"):"";var _d90=_d8b.store._arrayOfAllItems;var flag=false;for(i=0;i<_d90.length;i++){if(_d90[i]&&_d90[i].value!=""&&_d90[i].value==_d8f){flag=true;break;}}if(!flag){dj.byId(_d8a).set("value","");}},populateReferences:function(){var _d91=this.get("displayedValue"),_d92="_",_d93=this.id.split(_d92),_d94=_d93[0]+_d92+_d93[1],_d95=dj.byId(_d94+"_customer_reference"),_d96=dj.byId("applicant_reference")||dj.byId("applicant_reference_hidden")||dj.byId("seller_reference")||dj.byId("drawer_reference")||dj.byId("buyer_reference"),_d97=dj.byId("entity")?dj.byId("entity").get("value"):"",_d98=this.get("value")+"_"+_d97,_d99=(m._config.customerReferences&&m._config.customerReferences[_d98])?m._config.customerReferences[_d98]:"",_d9a={"identifier":"id","items":[]},_d9b=new d.data.ItemFileWriteStore({data:_d9a});if(dj.byId(_d94+"_name")){dj.byId(_d94+"_name").set("value",_d91);}if(_d95){_d95.store=null;if(_d99&&_d99.length!==0){for(var i=0,_d0f=(_d99.length)/2;i<_d0f;i++){_d9b.newItem({"id":_d99[2*i+1],"name":_d99[2*i]});}}_d95.store=_d9b;if(_d9b._arrayOfAllItems.length===1){_d95.set("displayedValue",_d9b._arrayOfAllItems[0].name[0]);}else{if(_d96){if(_d96.get("value")!==""&&_d99.indexOf(_d96.get("value"))!==-1){_d95.set("value",_d96.get("value"));}else{_d95.item=null;_d96.set("value","");_d95.set("displayedValue","");}}}}if(dj.byId("product_code")&&dj.byId("product_code").get("value")==="IO"&&dj.byId("buyer_bank_bic")){dj.byId("buyer_bank_bic").set("value",m._config.isoCodes[this.get("value")]);}if(dj.byId("product_code")&&dj.byId("product_code").get("value")==="EA"&&dj.byId("seller_bank_bic")){dj.byId("seller_bank_bic").set("value",m._config.isoCodes[this.get("value")]);}},updateBusinessDate:function(){var _d9c=m._config.bankBusinessDate;var _d9d;var _d9e;if(this.get("value")!=""){var _d9f=parseInt(misys._config.businessDateForBank[this.get("value")][0].value.substring(0,4),10);var _da0=parseInt(misys._config.businessDateForBank[this.get("value")][0].value.substring(5,7),10);var _da1=parseInt(misys._config.businessDateForBank[this.get("value")][0].value.substring(8,10),10);_d9e=new Date(_d9f,_da0-1,_da1);_d9d=d.date.locale.format((_d9e),{selector:"date"});m._config.bankBusinessDate=misys._config.businessDateForBank[this.get("value")][0].name;if(m._config.bankBusinessDate!=_d9c){m.dialog.show("CUSTOM-NO-CANCEL",m.getLocalization("changeInBusinessDates"),"Warning",function(){});if(dj.byId("appl_date")){dj.byId("appl_date").set("value",_d9d);dojo.byId("appl_date_view_row").childNodes[1].innerHTML=dj.byId("appl_date").get("value");}}}},checkBeneficiaryNicknameDiv:function(){if(misys._config.beneficiarynickname==="true"){if(dj.byId("beneficiary_nickname")&&dj.byId("beneficiary_nickname").get("value")!==""&&d.byId("beneficiarynickname")&&d.byId("beneficiary_nickname_row")){d.style("ben_label","display","inline-block");d.byId("beneficiarynickname").innerHTML=dj.byId("beneficiary_nickname").get("value");d.byId("beneficiarynickname").value=dj.byId("beneficiary_nickname").get("value");d.style("beneficiarynickname","display","inline");m.animate("fadeIn",d.byId("beneficiary_nickname_row"));}else{if(d.byId("beneficiarynickname")){d.style("beneficiarynickname","display","none");m.animate("fadeOut",d.byId("beneficiary_nickname_row"));}}}},checkBeneficiaryNicknameOnFormLoad:function(){if(misys._config.beneficiarynickname==="true"&&dj.byId("beneficiary_nickname")&&dj.byId("beneficiary_nickname").get("value")!==""&&dj.byId("beneficiary_nickname").get("value")!=="null"&&d.byId("beneficiarynickname")){m.animate("fadeIn",d.byId("beneficiarynickname"));d.style("beneficiarynickname","display","inline");d.byId("beneficiarynickname").innerHTML=dj.byId("beneficiary_nickname").get("value");}else{m.animate("wipeOut",d.byId("beneficiary_nickname_row"));}},setCurrency:function(node,arr,_da2){var _da3=dj.byId(node),_da4=d.isArray(arr)?arr:[arr],_da5,_da6,_da7;if(_da3&&_da3.get("value")!==""&&_da3.state!=="Error"){_da5=_da3.get("value");d.forEach(_da4,function(id){_da6=dj.byId(id);if(_da6){_da7=d.cldr.monetary.getData(_da5);if(dj.byId("product_code")&&((dj.byId("product_code").get("value")==="IP")||(dj.byId("product_code").get("value")==="IN")||(dj.byId("product_code").get("value")==="PO")||(dj.byId("product_code").get("value")==="SO"))){_da3.set("readOnly",true);}var _da8={round:_da7.round,places:_da7.places,max:999999999999.99,min:0.01};if(_da7.places===2){_da8={round:_da7.round,places:_da7.places,min:0,max:999999999999.99};}else{if(_da7.places===3){_da8={round:_da7.round,places:_da7.places,min:0,max:99999999999.999};}else{if(_da7.places===0){_da8={round:_da7.round,places:_da7.places,min:0,max:999999999999};}}}d.mixin(_da8,_da2);_da6.set("constraints",_da8);_da6.set("value",_da6.get("value"));}});}},setTnxAmt:function(amt){var _da9=dj.byId("tnx_amt");if(_da9){_da9.set("value",amt);}},setTnxCurCode:function(_daa){var _dab=dj.byId("tnx_cur_code");if(_dab){_dab.set("value",_daa);}},amendTransaction:function(){var _dac=("inc_amt"===this.get("id"))?dj.byId("dec_amt"):dj.byId("inc_amt");if(!isNaN(this.get("value"))){_dac.set("disabled",true);}else{this.set("disabled",false);_dac.set("disabled",false);}_d1a(this);},amendTransactionBank:function(){var _dad=("inc_amt_value"===this.get("id"))?dj.byId("dec_amt_value"):dj.byId("inc_amt_value");if(!isNaN(this.get("value"))){_dad.set("disabled",true);}else{this.set("disabled",false);_dad.set("disabled",false);}_d1a(this);},amendTransactionLiabAmt:function(){dj.byId("lc_liab_amt").set("value",dj.byId("org_lc_cur_code_liab_amt").value);},setPaymentDescriptionForCAD:function(){if(dojo.byId("date-value_description").innerHTML!==""&&dojo.byId("request_value_code").value==="SPOT"&&dojo.byId("payment_cur_code").value==="CAD"&&dojo.byId("applicant_cur_code").value==="USD"){dojo.byId("date-value_description").innerText=m.getLocalization("valueOneBusinessDayCADdeal");}else{if(dojo.byId("date-value_description").innerHTML!==""&&dojo.byId("request_value_code").value==="SPOT"&&(dojo.byId("payment_cur_code").value!=="CAD"||dojo.byId("applicant_cur_code").value!=="USD")){dojo.byId("date-value_description").innerText=m.getLocalization("valueTwoBusinessDay");}}},toggleAmendmentFields:function(){var _dae=dj.byId("inc_amt"),_daf=dj.byId("dec_amt");if(this.get("checked")){_dae.set("value","");_dae.set("disabled",true);_daf.set("disabled",false);_d1a(_daf);}else{_dae.onBlur();_daf.onBlur();}},updateSubTnxTypeCode:function(){var _db0=misys._config.productCode.toLowerCase(),_db1=dj.byId("inc_amt"),_db2=dj.byId("dec_amt"),_db3=dj.byId(_db0+"_release_flag"),_db4=dj.byId("sub_tnx_type_code"),_db5="03",_db6=_db1?dojo.number.parse(_db1.get("value")):"",_db7=_db2?dojo.number.parse(_db2.get("value")):"";if(_db3&&_db3.get("checked")){_db5="05";}else{if(_db1&&!isNaN(_db6)&&_db6!==""){_db5="01";}else{if(_db2&&!isNaN(_db7)&&_db7!==""){_db5="02";}}}if(_db4){_db4.set("value",_db5);}},enableBeneficiaryFields:function(){var ids=["beneficiary_address_line_1","beneficiary_address_line_2","beneficiary_dom","beneficiary_address_line_4"];d.forEach(ids,function(id){var _db8=dj.byId(id);if(_db8){_db8.set("disabled",false);_db8.set("readOnly",false);}});},toggleProdStatCodeFields:function(){var _db9=dj.byId("prod_stat_code").get("value"),_dba=dj.byId("action_req_code"),_dbb=["tnx_amt"],_dbc=["tnx_amt","latest_answer_date"];if(_dba){if(_db9==="01"||_db9==="18"){_dba.set("readOnly",true);_dba.reset();}else{if(_db9==="12"){_dba.set("value","12");_dba.set("readOnly",true);m.toggleFields(false,["latest_answer_date"],_dbb,true);_dbb=["tnx_amt"];}else{if(_db9==="26"){_dba.set("value","26");_dba.set("readOnly",true);m.toggleFields(false,["latest_answer_date"],_dbb,true);_dbb=["tnx_amt"];}else{if(_db9==="78"||_db9==="79"||(_db9==="98"&&dj.byId("product_code")&&dj.byId("product_code").get("value")==="TF")){_dba.set("value","07");_dba.set("readOnly",true);}else{if(_db9==="A9"){_dba.reset();_dba.set("readOnly",false);_dbc=["tnx_amt"];_dbb=[];}else{if(_db9==="31"){var _dbd=dj.byId("product_code").get("value");if(dj.byId("product_code")&&(_dbd==="LC"||_dbd==="SI"||_dbd==="BG"||_dbd==="SG")){_dba.set("value","");_dba.set("readOnly",true);}else{_dba.set("value","03");_dba.set("readOnly",true);}}else{if(_db9==="81"){_dba.set("value","05");_dba.set("readOnly",true);}else{_dba.set("readOnly",false);_dbc=["latest_answer_date"];}}}}}}}}var _dbe=(_db9==="08"&&dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")==="03")?true:!(_db9!=="01"&&_db9!=="07"&&_db9!=="04"&&_db9!=="05"&&_db9!=="12"&&_db9!=="26"&&_db9!=="13"&&_db9!=="14"&&_db9!=="15"&&_db9!=="A9");m.toggleFields(_dbe,_dbc,_dbb);},toggleGuaranteeText:function(){var _dbf=this.get("value"),_dc0=d.byId("document-editor"),_dc1=dj.byId("bg_document");m.toggleFields(_dbf==="03",null,["bg_text_type_details"]);if(_dbf==="04"){m.animate("fadeIn",_dc0,function(){if(!_dc1){var _dc2=d.byId("bg_document");_dc1=new dj.Editor({id:"bg_document",name:"bg_document",rows:_d0c,cols:_d0d,maxSize:_d0e,plugins:["undo","redo","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","|","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","||",{name:"dijit._editor.plugins.FontChoice",command:"fontName"},{name:"m.editor.plugins.ProductFieldChoice",command:"misysEditorPluginsProductFieldChoice",product:"BG"}]},_dc2);var _dc3=d.byId("rteContent");var _dc4=_dc3.innerHTML;_dc4.replaceAll("&lt;","<");_dc4.replaceAll("&gt;",">");_dc4.replaceAll("&amp;","&");_dc1.set("value",(_dc4||""));}});}else{m.animate("fadeOut",_dc0,function(){if(_dc1){_dc1.set("value","");}});}},setBuyerReference:function(){var _dc5=dj.byId("buyer_reference")||dj.byId("buyer_reference_hidden");if(_dc5){_dc5.set("value",this.get("value"));}},setSellerReference:function(){var _dc6=dj.byId("seller_reference")||dj.byId("seller_reference_hidden");if(_dc6){_dc6.set("value",this.get("value"));}},setApplicantReference:function(){var _dc7=dj.byId("applicant_reference")||dj.byId("applicant_reference_hidden");if(_dc7){_dc7.set("value",this.get("value"));}},getMaturityDate:function(){var _dc8=dj.byId("tenor"),_dc9=_dc8.get("value"),_dca=dj.byId("iss_date").get("value"),_dcb=dj.byId("maturity_date"),_dcc="";if(this.id==="maturity_date"){_dcc=_dca?d.date.difference(_dca,this.get("value"),"day"):_dc9;_dc8.set("value",_dcc);}else{if(_dc9!==""&&_dca){_dcb.set("value",d.date.add(_dca,"day",_dc9));}}},initFTCounterparties:function(){var _dcd=this.get("value"),that;if(_dcd!==dj.byId("ft_cur_code").get("value")){if(d.query(".widgetContainer *[id^='counterparty_details_document_id_']").length>0){that=this;m.dialog.show("CONFIRMATION",m.getLocalization("modifyFundTransferCurrencyConfirmation"),"",function(){_d20(that);});}else{_d20(this);}}},disableNonAcceptanceFields:function(){if(dj.byId("term_code").get("value")==="01"){this.set("checked",false);}},setCreditAvailBy:function(){var _dce=this.get("value"),_dcf=dj.byId("credit_available_with_bank_name"),_dd0=dj.byId("fakeform1").get("value").cr_avl_by_code,_dd1,_dd2,_dd3=dj.byId("credit_available_with_bank_address_line_1");m.toggleFields(_dce===m._config.other,["credit_available_with_bank_address_line_1","credit_available_with_bank_address_line_2","credit_available_with_bank_dom","credit_available_with_bank_address_line_4"]);_dd1=_dcf.get("value");_dd2=_dd3.get("value");if((!(_dd1!=""&&_dd2!="")&&(dj.byId("formLoad")&&dj.byId("formLoad").get("value")==="false")||!dj.byId("formLoad"))||(dj.byId("template_id")&&dj.byId("template_id").getValue()!=="")){_dcf.set("value",this.get("displayedValue"));}var _dd4=(!_dd1&&!dj.byId("tenor_maturity_date").get("value")&&!dj.byId("tenor_days").get("value")&&!dj.byId("tenor_period").get("value")&&!dj.byId("tenor_from_after").get("value")&&!dj.byId("tenor_days_type").get("value")&&!m._config.firstPageLoad);if(_dd4){if(_dd0){_d24(_dd0,_dce);}}},getSwiftBankDetails:function(_dd5,_dd6,_dd7,_dd8,_dd9,_dda,_ddb,_ddc,_ddd,_dde){var _ddf=false;if(!_dde){_dde="";}if(!_dd8){_dd8=[_dda+"name",_dda+"address_line_1",_dda+"address_line_2",_dda+"dom",_dda+"contact_name",_dda+"phone",_dda+"country"];}if(!_dd9){_dd9=[_dda+"name",_dda+"address_line_1",_dda+"country"];}var _de0=dj.byId(_dd6);var _de1=dj.byId(_dd7);if(_de0&&(_de0.get("value")!=="")){d.forEach(_dd8,function(node){if(dj.byId(node)){if(_ddb){dj.byId(node).set("value","",false);}if(_ddd){dj.byId(node).set("readOnly",true);}}});if(_ddc){d.forEach(_dd9,function(node){if(dj.byId(node)){m.toggleRequired(node,true);}});}if(_ddb&&(_de0.validate())){var _de2="";var _de3="";if(_de0.get("value")){_de2=_de0.get("value");}if(_de1&&(_de1.get("value"))){_de3=_de1.get("value");}m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetSwiftBankDetails"),content:{bicCode:_de2,brchCode:_de3,country:_dde,customerBanks:_dd5},sync:true,handleAs:"json",load:function(_de4,args){var _de5=_de4;_ddf=_de4.valid;if(_ddf){var _de6=[_de5.bankName,_de5.bankAddressLine1,_de5.bankAddressLine2,_de5.bankDom,_de5.bankContactName,_de5.bankPhone,_de5.bankCountry];d.forEach(_dd8,function(node,i){if(dj.byId(node)){if(i<7){dj.byId(node).set("value",_de6[i],false);}}});}else{var _de7="";if((_de0&&(_de0.get("value")!==""))){_de0.focus();_de7=m.getLocalization("swiftValidationFailed",[_de0.get("value")]);_de0.set("value","");_de0.set("state","Error");dijit.hideTooltip(_de0.domNode);dijit.showTooltip(_de7,_de0.domNode,0);}}},customError:function(_de8,args){console.warn("getSwiftBankDetails error");}});}else{if(dijit.byId("bank_iso_code")){setTimeout(function(){dijit.byId("bank_iso_code").set("readOnly",false);},600);}}}else{d.forEach(_dd8,function(node){if(dj.byId(node)){if(_ddd){dj.byId(node).set("readOnly",false);}}});if(_ddc){d.forEach(_dd9,function(node){if(dj.byId(node)){m.toggleRequired(node,false);}});}if(d.byId(_dda+"iso_code_row")&&d.byId(_dda+"iso_code_row").parentNode&&d.byId(_dda+"iso_code_row").parentNode.id){var _de9=d.byId(_dda+"iso_code_row").parentNode.id;if(dj.byId(_de9)){var _dea=dj.byId(_de9).get("title");if(_dea.indexOf("*")!==-1){_dea=_dea.substring(_dea.indexOf(">")+1,_dea.lastIndexOf("<"));if(_dea.indexOf("*")!==-1){_dea=_dea.substring(_dea.indexOf("*")+1);dj.byId(_de9).set("title",_dea);}else{dj.byId(_de9).set("title",_dea);}}}}}},getIFSCCodeDetails:function(_deb,_dec,_ded,_dee,_def,_df0,_df1){var _df2=false;if(!_dec){_dec=[_dee+"ifsc_name",_dee+"ifsc_address_line_1",_dee+"ifsc_address_line_2",_dee+"ifsc_city"];}if(!_ded){_ded=[_dee+"ifsc_code",_dee+"ifsc_name"];}var _df3=dj.byId(_deb);if(_df3&&(_df3.get("value")!=="")){d.forEach(_dec,function(node){if(dj.byId(node)){if(_def){dj.byId(node).set("value","",false);}if(_df1){dj.byId(node).set("readOnly",true);}}});if(_df0){d.forEach(_ded,function(node){if(dj.byId(node)){m.toggleRequired(node,true);}});}if(_def&&(_df3.validate())){var _df4="";if(_df3.get("value")){_df4=_df3.get("value");}m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetIFSCCodeDetails"),content:{ifscCode:_df4,paramId:"P701"},sync:true,handleAs:"json",load:function(_df5,args){var _df6=_df5;_df2=_df5.valid;if(_df2){var _df7=[_df6.bankName,_df6.bankAddressLine1,_df6.bankAddressLine2,_df6.city];d.forEach(_dec,function(node,i){if(dj.byId(node)){if(i<7){dj.byId(node).set("value",_df7[i],false);}}});_df3.set("value",_df6.bankIFSCCode);}else{var _df8="";if((_df3&&(_df3.get("value")!==""))){_df3.focus();_df8=m.getLocalization("ifscCodeValidationFailed",[_df3.get("value")]);_df3.set("value","");_df3.set("state","Error");dijit.hideTooltip(_df3.domNode);dijit.showTooltip(_df8,_df3.domNode,0);}}},customError:function(_df9,args){console.warn("getSwiftBankDetails error");}});}else{setTimeout(function(){dijit.byId("bank_iso_code").set("readOnly",false);},600);}}else{d.forEach(_dec,function(node){if(dj.byId(node)){if(_df1){dj.byId(node).set("readOnly",false);}}});if(_df0){d.forEach(_ded,function(node){if(dj.byId(node)){m.toggleRequired(node,false);}});}if(d.byId(_dee+"ifsc_code_row")&&d.byId(_dee+"ifsc_code_row").parentNode&&d.byId(_dee+"ifsc_code_row").parentNode.id){var _dfa=d.byId(_dee+"ifsc_code_row").parentNode.id;if(dj.byId(_dfa)){var _dfb=dj.byId(_dfa).get("title");if(_dfb.indexOf("*")!==-1){_dfb=_dfb.substring(_dfb.indexOf(">")+1,_dfb.lastIndexOf("<"));if(_dfb.indexOf("*")!==-1){_dfb=_dfb.substring(_dfb.indexOf("*")+1);dj.byId(_dfa).set("title",_dfb);}else{dj.byId(_dfa).set("title",_dfb);}}}}}},setSwiftBankDetailsForOnBlurEvent:function(_dfc,_dfd,_dfe,_dff,_e00,_e01,_e02,_e03,_e04,_e05){if(m._config.isBankDetailsPopulated){m.getSwiftBankDetails(_dfc,_dfd,_dfe,_dff,_e00,_e01,false,_e03,_e04,_e05);}else{m.getSwiftBankDetails(_dfc,_dfd,_dfe,_dff,_e00,_e01,_e02,_e03,_e04,_e05);}m._config.isBankDetailsPopulated=false;},setIFSCCodeDetailsForOnBlurEvent:function(_e06,_e07,_e08,_e09,_e0a,_e0b,_e0c){m.getIFSCCodeDetails(_e06,_e07,_e08,_e09,_e0a,_e0b,_e0c);},toggleDraftTerm:function(_e0d){var _e0e=(!dj.byId("tenor_maturity_date").get("value")&&!dj.byId("tenor_days").get("value")&&!dj.byId("tenor_period").get("value")&&!dj.byId("tenor_from_after").get("value")&&!dj.byId("tenor_days_type").get("value")&&!m._config.firstPageLoad);if(!d.isString(_e0d)){_e0d=this.get("value");}m.toggleFields(_e0d==="02",null,["tenor_maturity_date"],_e0e);m.toggleFields(_e0d==="03",null,["tenor_days","tenor_period","tenor_from_after","tenor_days_type"],_e0e);m.toggleFields(_e0d==="05",null,["draft_term"],_e0e);if(dj.byId("tenor_days_type").get("value")!=="99"){dj.byId("tenor_type_details").set("value","");}if(dj.byId("tenor_days_type")){var _e0f=dj.byId("tenor_days_type").get("value")==="99";m.toggleFields((_e0f),null,["tenor_type_details"]);}},initDraweeFields:function(){var _e10=false;if(dj.byId("cr_avl_by_code_2")){_e10=dj.byId("cr_avl_by_code_2").get("checked");}var _e11=false;if(dj.byId("cr_avl_by_code_3")){_e11=dj.byId("cr_avl_by_code_3").get("checked");}if(!_e10&&!_e11){dj.byId("drawee_details_bank_name").set("value","");if(dj.byId("drawee_details_bank_iso_code")){dj.byId("drawee_details_bank_iso_code").set("value","");}if(dj.byId("drawee_details_bank_address_line_1")){dj.byId("drawee_details_bank_address_line_1").set("value","");dj.byId("drawee_details_bank_address_line_2").set("value","");dj.byId("drawee_details_bank_dom").set("value","");dj.byId("drawee_details_bank_address_line_4").set("value","");}if(d.byId("drawee_details_bank_img")){m.animate("fadeOut","drawee_details_bank_img");}}else{if(d.byId("drawee_details_bank_img")){m.animate("fadeIn","drawee_details_bank_img");}}m.toggleFields(_e10||_e11,["drawee_details_bank_address_line_2","drawee_details_bank_dom","drawee_details_bank_address_line_4"],["drawee_details_bank_name","drawee_details_bank_address_line_1","drawee_details_bank_iso_code"],true);if(dj.byId("mode")&&dj.byId("mode").get("value")==="RELEASE"){m.toggleRequired("drawee_details_bank_address_line_1",false);}var _e12=dj.byId("product_code").get("value");var _e13=!JSON.parse(misys._config.drawee_details_nonmandatory);if(dj.byId("product_code")&&(_e12==="LC"||_e12==="SI")&&(_e10||_e11)){if(dj.byId("drawee_details_bank_iso_code")&&dj.byId("drawee_details_bank_name")&&dj.byId("drawee_details_bank_address_line_1")){m.toggleRequired("drawee_details_bank_iso_code",_e13);m.toggleRequired("drawee_details_bank_name",false);m.toggleRequired("drawee_details_bank_address_line_1",_e13);}}},togglePaymentDraftAt:function(){var _e14=dj.byId("tenor_type_1"),_e15=dj.byId("tenor_type_2"),_e16=dj.byId("tenor_type_3"),_e17=dj.byId("draft_term"),_e18=this.get("value"),_e19=d.byId("payment-draft"),_e1a=d.byId("draft-term"),_e1b=dj.byId("credit_available_with_bank_type");if(!_e14||!_e15||!_e16){return;}_e14.set("disabled",true);_e15.set("disabled",true);_e16.set("disabled",true);if(m._config.firstPageLoad&&_e18!=="05"){_e17.set("value","");}if(_e18!=="05"&&d.style(_e19,"opacity")!==1){m.animate("fadeOut",_e1a);m.animate("fadeIn",_e19);}switch(_e18){case "01":_e14.set("disabled",false);_e14.set("checked",true);m.toggleDraftTerm("01");break;case "02":_e15.set("disabled",false);_e16.set("disabled",false);if(dj.byId("tenor_maturity_date").get("displayedValue")!==""){_e15.set("checked",true);m.toggleDraftTerm("02");_e17.set("value",dj.byId("tenor_maturity_date").get("displayedValue"));break;}else{_e16.set("checked",true);m.toggleDraftTerm("03");break;}break;case "03":_e14.set("disabled",false);_e15.set("disabled",false);_e16.set("disabled",false);if(_e14.get("checked")){_e14.set("checked",true);m.toggleDraftTerm("01");break;}else{if(dj.byId("tenor_maturity_date").get("displayedValue")!==""){_e15.set("checked",true);m.toggleDraftTerm("02");break;}else{_e16.set("checked",true);m.toggleDraftTerm("03");break;}}break;case "06":_e14.set("disabled",true);_e15.set("disabled",true);_e16.set("disabled",true);m.toggleDraftTerm("01");break;case "04":_e15.set("disabled",false);_e16.set("disabled",false);if(dj.byId("tenor_maturity_date").get("displayedValue")!==""){_e15.set("checked",true);m.toggleDraftTerm("02");break;}else{_e16.set("checked",true);m.toggleDraftTerm("03");break;}break;case "05":m.animate("fadeOut",_e19);m.animate("fadeIn",_e1a);_e14.set("checked",false);_e15.set("checked",false);_e16.set("checked",false);m.toggleDraftTerm("05");break;default:break;}var _e1c="01";if(dj.byId("tnx_type_code")){_e1c=dj.byId("tnx_type_code").get("value");}if(_e1b&&!(_e1c==="03")){_d24(_e18,_e1b.get("value"));}m.initDraweeFields();},calcMaturityDate:function(){if(dj.byId("tenor_days").get("value")!==""&&!isNaN(dj.byId("tenor_days").get("value"))&&dj.byId("tenor_period").get("value")!==""&&dj.byId("tenor_from_after").get("value")!==""){var _e1d=dj.byId("tenor_base_date").get("value");var _e1e=dj.byId("tenor_days").get("value");var _e1f=dj.byId("tenor_period").get("value");var _e20,_e21=null;var _e22;switch(_e1f){case "D":_e20="day";break;case "W":_e20="week";break;case "M":_e20="month";break;case "Y":_e20="year";break;default:break;}var _e23=dj.byId("tenor_from_after").get("value");if(dj.byId("tenor_base_date").get("displayedValue")!==""){_e21=d.date.add(_e1d,_e20,_e1e);if(_e23==="F"){_e21=d.date.add(_e21,"day",-1);}_e22=new Date(_e21.getTime());_e22=d.date.locale.format(_e22,{selector:"date"});dj.byId("tenor_maturity_date").set("displayedValue",_e22);dj.byId("tenor_maturity_date").set("disabled",true);}else{dj.byId("tenor_maturity_date").set("displayedValue","");}}},toggleAllTenorFields:function(){var _e24=["tenor_days","tenor_period","tenor_from_after","tenor_base_date","tenor_maturity_date","tenor_days_type"];if(m._config.isBank){_e24=["tenor_days","tenor_period","tenor_from_after","tenor_base_date","tenor_maturity_date","tenor_days_type"];}var _e25=dj.byId("tenor_type_2").get("checked");var _e26;if(dj.byId("tenor_type_3")){_e26=dj.byId("tenor_type_3").get("checked");}var _e27=dj.byId("term_code")?dj.byId("term_code").get("value"):"";if(_e25){m.toggleFields(_e25,["tenor_days_type"],_e24,_e25,_e25);if(dojo.query(_d01)[0].innerHTML.indexOf("*")===-1){dojo.query(_d01)[0].innerHTML="<span class='required-field-symbol'>*</span>"+dojo.query(_d01)[0].innerHTML;}m.toggleRequired("tenor_days_type",true);m.toggleRequired("tenor_days",true);m.toggleRequired("tenor_period",true);m.toggleRequired("tenor_from_after",true);m.toggleRequired("tenor_maturity_date",true);m.toggleRequired("tenor_maturity_date",false);m.toggleRequired("tenor_base_date",false);if(_e27==="03"||(_e27==="02"&&!dj.byId("tenor_type_3"))){m.animate("fadeIn",d.byId("boe"));}}else{if(_e26){m.toggleFields(_e26,["tenor_days_type"],_e24,_e26,_e26);if(dojo.query(_d01)[0].innerHTML.indexOf("*")===-1){dojo.query(_d01)[0].innerHTML="<span class='required-field-symbol'>*</span>"+dojo.query(_d01)[0].innerHTML;}m.toggleRequired("tenor_days_type",true);m.toggleRequired("tenor_days",true);m.toggleRequired("tenor_period",true);m.toggleRequired("tenor_from_after",true);if(dj.byId("tenor_type_2").get("checked")){m.toggleRequired("tenor_base_date",false);m.toggleRequired("tenor_maturity_date",false);}else{m.toggleRequired("tenor_base_date",true);m.toggleRequired("tenor_maturity_date",true);}if(_e27==="03"||(_e27==="02"&&!dj.byId("tenor_type_3"))){m.animate("fadeIn",d.byId("boe"));}}else{dojo.query(_d01)[0].innerHTML=m.getLocalization("tenorPeriod");m.toggleRequired("tenor_days_type",false);m.toggleRequired("tenor_days",false);m.toggleRequired("tenor_period",false);m.toggleRequired("tenor_from_after",false);m.toggleRequired("tenor_maturity_date",false);dj.byId("tenor_type_details").set("displayedValue","");dj.byId("tenor_type_details").set("disabled",true);dj.byId("tenor_maturity_date").set("displayedValue","");dj.byId("tenor_days").set("displayedValue","");dj.byId("tenor_days").set("disabled",true);dj.byId("tenor_period").set("displayedValue","");dj.byId("tenor_period").set("disabled",true);dj.byId("tenor_from_after").set("displayedValue","");dj.byId("tenor_from_after").set("disabled",true);dj.byId("tenor_days_type").set("displayedValue","");dj.byId("tenor_days_type").set("disabled",true);dj.byId("tenor_base_date").set("displayedValue","");dj.byId("tenor_base_date").set("disabled",true);if(_e27==="03"||(_e27==="02"&&!dj.byId("tenor_type_3"))){m.animate("fadeOut",d.byId("boe"));if(dj.byId("boe_flag")){dj.byId("boe_flag").set("checked",false);}}}}},toggleBankPaymentDraftAt:function(){var _e28,_e29=["draft_term","drawee_details_bank_name","drawee_details_bank_address_line_1","drawee_details_bank_address_line_2","drawee_details_bank_dom","drawee_details_bank_address_line_4","drawee_details_bank_iso_code","drawee_details_bank_reference"];d.forEach(_e29,function(id){_e28=dj.byId(id);if(_e28){_e28.reset();}});},setDraftTerm:function(){var _e2a=dj.byId("draft_term"),_e2b=misys._config.tenorPeriodLabels,_e2c=misys._config.tenorFromAfterLabels,_e2d=misys._config.tenorDaysTypeLabels,_e2e,_e2f,days,_e30;if(_e2a){if(!(dj.byId("cr_avl_by_code_5")&&dj.byId("cr_avl_by_code_5").get("checked"))){_e2a.set("value","");}if(dj.byId("tenor_type_1")&&dj.byId("tenor_type_1").get("checked")){_e2a.set("value",m.getLocalization("tenorSight"));}else{if((dj.byId("tenor_type_2")&&dj.byId("tenor_type_2").get("checked"))&&dj.byId("tenor_maturity_date").get("displayedValue")!==""){_e2a.set("value",dj.byId("tenor_maturity_date").get("displayedValue"));}else{_e2e=dj.byId("tenor_period").get("value");_e2f=dj.byId("tenor_from_after").get("value");days=dj.byId("tenor_days").get("value");_e30=dj.byId("tenor_days_type").get("value");if(!isNaN(days)&&days!==0||(days===0&&_e30==="07")){if(_e30!=="99"){_e2a.set("value",days+" "+_e2b[_e2e]+" "+_e2c[_e2f]+" "+_e2d[_e30]);}else{_e2a.set("value",days+" "+_e2b[_e2e]+" "+_e2c[_e2f]+" "+dj.byId("tenor_type_details").get("value"));}}}}}},setDraftDaysReadOnly:function(){this.set("readOnly",!dj.byId("tenor_type_3").get("checked"));},checkIrrevocableFlag:function(){var _e31=dj.byId("ntrf_flag"),_e32=dj.byId("stnd_by_lc_flag");if(!this.get("checked")&&_e31&&_e32&&!_e31.get("checked")&&_e32.get("checked")){this.set("checked",true);m.showTooltip(m.getLocalization("irrevocableStandByError"),this.domNode,["before"]);}},checkNonTransferableFlag:function(){var _e33=dj.byId("irv_flag"),_e34=dj.byId("stnd_by_lc_flag");if(!this.get("checked")&&_e33&&_e34&&!_e33.get("checked")&&_e34.get("checked")){this.set("checked",false);_e33.set("checked",true);m.showTooltip(m.getLocalization("irrevocableStandByError"),_e33.domNode,["before"]);}},checkStandByFlag:function(){var _e35=dj.byId("irv_flag"),_e36=dj.byId("ntrf_flag");if(this.get("checked")&&_e36&&_e35&&!_e36.get("checked")&&!_e35.get("checked")){_e35.set("checked",true);m.showTooltip(m.getLocalization("irrevocableStandByError"),_e35.domNode,["before"]);}},resetConfirmationCharges:function(){if(m._config.charge_splitting_lc){if(dj.byId("open_chrg_brn_by_code_3")){if(!dj.byId("cfm_chrg_brn_by_code_3").get("checked")){dj.byId("cfm_chrg_brn_by_code_1").set("checked",false);dj.byId("cfm_chrg_brn_by_code_2").set("checked",this.get("value")!=="03");dj.byId("cfm_chrg_brn_by_code_3").set("checked",false);}if(dj.byId("cfm_inst_code_3").get("checked")){dj.byId("cfm_chrg_brn_by_code_1").set("checked",false);dj.byId("cfm_chrg_brn_by_code_2").set("checked",this.get("value")!=="03");dj.byId("cfm_chrg_brn_by_code_3").set("checked",false);dj.byId("cfm_chrg_applicant").set("disabled",true).set("value","").set("required",false);dj.byId("cfm_chrg_beneficiary").set("disabled",true).set("value","").set("required",false);}}}else{if(dj.byId("cfm_chrg_brn_by_code_1")){dj.byId("cfm_chrg_brn_by_code_1").set("checked",false);}if(dj.byId("cfm_chrg_brn_by_code_2")){dj.byId("cfm_chrg_brn_by_code_2").set("checked",this.get("value")!=="03");}}var _e37=(this.get("value")==="01"||this.get("value")==="02")?"fadeIn":"fadeOut";m.animate(_e37,d.byId("cfm_chrg_brn_by_code_div"));if(m._config.swift2018Enabled){if(this.get("value")==="01"||this.get("value")==="02"){m.animate("fadeIn",d.byId("requested-conf-party"));m.toggleFields(true,["req_conf_party_flag"],null,null,true);dj.byId("req_conf_party_flag").set("value",_d02);}else{m.animate("fadeOut",d.byId("requested-conf-party"));m.toggleFields(false,["req_conf_party_flag","requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,false);}}},resetConfirmationChargesLC:function(){var _e38;var _e39;if(document.getElementById("_userType")){_e38=document.getElementById("_userType").getAttribute("value");}var _e3a=(_e38!=="03"&&_e38!=="06")?"bank":"customer";if(dj.byId("cfm_chrg_brn_by_code_1")){dj.byId("cfm_chrg_brn_by_code_1").set("checked",false);}if(dj.byId("cfm_chrg_brn_by_code_2")){dj.byId("cfm_chrg_brn_by_code_2").set("checked",this.get("value")!=="03");}var _e3b=(this.get("value")==="01"||this.get("value")==="02")?"fadeIn":"fadeOut";m.animate(_e3b,d.byId("cfm_chrg_brn_by_code_div"));var _e3c=dj.byId("req_conf_party_flag");var _e3d=dj.byId("req_conf_party_flag_filtered");var _e3e="01";if(dj.byId("tnx_type_code")){_e3e=dj.byId("tnx_type_code").get("value");}var _e3f="01";if(dj.byId("prod_stat_code")){_e3f=dj.byId("prod_stat_code").get("value");}if(_e3d&&((_e3e==="15"&&_e3f==="08")||_e3e==="03")){_e3c=_e3d;}if(this.get("value")==="01"||this.get("value")==="02"){_e3c.set("disabled",false);_e3c.set("value","");}else{if(_e3a==="bank"){m.toggleRequired(_e3c,false);if((_e3e==="15"&&_e3f==="08")||_e3e==="03"){var _e40=dj.byId("req_conf_party_flag");m.toggleRequired(_e40,false);}_e39=dj.byId("req_conf_party_flag").parentTab;m.resetTabState(dijit.byId(_e39));}_e3c.set("disabled",true);_e3c.set("value","");d.byId(_d03).style.display="none";}},validateBankEntry:function(_e41){var _e42=dj.byId(_e41+"_name");var _e43=dj.byId(_e41+"_address_line_1");var _e44=dj.byId(_e41+"_iso_code");if(_e42.get("value")==""&&_e44.get("value")==""&&_e43.get("value")==""){m.setRequiredFields([_e42,_e43],true);_e42.focus();_e43.focus();return false;}else{if(_e44.get("value")==""&&(_e42.get("value")==""||_e43.get("value")=="")){var _e45=_e42.get("value")==""?_e42:_e43;m.setRequiredFields([_e45],true);_e45.focus();return false;}else{return true;}}},resetBankRequiredFields:function(){var _e46=this.get("value");var _e47;var _e48;if(_e46==="Other"){_e47=dj.byId("advising_bank_name").parentTab;m.resetTabState(dijit.byId(_e47));_e47=dj.byId("advise_thru_bank_name").parentTab;m.resetTabState(dijit.byId(_e47));m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1","advise_thru_bank_name","advise_thru_bank_address_line_1"],false);d.byId(_d03).style.display="block";m.toggleFields(true,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,true);}else{if(_e46===_d02){_e48=dj.byId("advising_bank_iso_code").get("value");_e47=dj.byId("advise_thru_bank_name").parentTab;m.resetTabState(dijit.byId(_e47));if(_e48!=="null"&&_e48.length>0){m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1"],false);}else{m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1"],true);}m.setRequiredFields(["advise_thru_bank_name","advise_thru_bank_address_line_1"],false);d.byId(_d03).style.display="none";m.toggleFields(false,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,false);}else{if(_e46==="Advise Thru Bank"){_e48=dj.byId("advise_thru_bank_iso_code").get("value");_e47=dj.byId("advising_bank_name").parentTab;m.resetTabState(dijit.byId(_e47));if(_e48!=="null"&&_e48.length>0){m.setRequiredFields(["advise_thru_bank_name","advise_thru_bank_address_line_1"],false);}else{m.setRequiredFields(["advise_thru_bank_name","advise_thru_bank_address_line_1"],true);}m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1"],false);d.byId(_d03).style.display="none";m.toggleFields(false,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,false);}else{_e47=dj.byId("advising_bank_name").parentTab;m.resetTabState(dijit.byId(_e47));_e47=dj.byId("advise_thru_bank_name").parentTab;m.resetTabState(dijit.byId(_e47));m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1","advise_thru_bank_name","advise_thru_bank_address_line_1"],false);d.byId(_d03).style.display="none";m.toggleFields(false,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,false);}}}},resetTabState:function(tab){if(tab){var _e49=tab.get("title");if(_e49.indexOf("<img")!==-1&&_e49.indexOf("*")!==-1){_e49=_e49.replace("*","");_e49=_e49.substring(0,_e49.indexOf("<img"));}else{if(_e49.indexOf("*")!==-1){_e49=_e49.replace("*","");}}tab.set("title",_e49);}},resetRequestedConfirmationParty:function(){var _e4a;var _e4b;if(document.getElementById("_userType")){_e4a=document.getElementById("_userType").getAttribute("value");}var _e4c=(_e4a!=="03"&&_e4a!=="06")?"bank":"customer";if(dijit.byId("cfm_inst_code_1")&&!dijit.byId("cfm_inst_code_1").get("value")&&!dijit.byId("cfm_inst_code_2").get("value")){if(dj.byId("req_conf_party_flag")){dj.byId("req_conf_party_flag").set("disabled",true);}if(dj.byId("req_conf_party_flag_filtered")){dj.byId("req_conf_party_flag_filtered").set("disabled",true);m.toggleRequired(dj.byId("req_conf_party_flag_filtered"),false);_e4b=dj.byId("req_conf_party_flag_filtered").parentTab;m.resetTabState(dijit.byId(_e4b));}if(_e4c==="bank"&&dj.byId("req_conf_party_flag")){m.toggleRequired(dj.byId("req_conf_party_flag"),false);_e4b=dj.byId("req_conf_party_flag").parentTab;m.resetTabState(dijit.byId(_e4b));}}else{if(dj.byId("req_conf_party_flag")){dj.byId("req_conf_party_flag").set("disabled",false);}if(dj.byId("req_conf_party_flag_filtered")){dj.byId("req_conf_party_flag_filtered").set("disabled",false);}}var _e4d=(dijit.byId("cfm_inst_code_1").get("value")||dijit.byId("cfm_inst_code_2").get("value"))?"fadeIn":"fadeOut";m.animate(_e4d,d.byId("cfm_chrg_brn_by_code_div"));},refreshUIforBGAmendment:function(){var _e4e=dj.byId("prod_stat_code").get("value");var _e4f=dj.byId("tnx_type_code").get("value");if((_e4f==="15"&&_e4e==="08")||(_e4f==="15"&&_e4e==="31")||_e4f==="03"){if(_e4f==="03"){if(d.byId("amd_no_date_display_div")){d.byId("amd_no_date_display_div").style.display="none";dj.byId("amd_date").set("disabled",false);}}if((_e4f==="15"&&_e4e==="08")||(_e4f==="15"&&_e4e==="31")||(_e4f==="03"&&_e4e==="08")){if(d.byId("amd_no_date_display_div")){d.byId("amd_no_date_display_div").style.display="block";dj.byId("amd_date").set("disabled",false);}if(d.byId("amd_no_date_bg_display_div")){d.byId("amd_no_date_bg_display_div").style.display="block";dj.byId("amd_date").set("disabled",false);}}}else{if(d.byId("amd_no_date_bg_display_div")){d.byId("amd_no_date_bg_display_div").style.display="none";dj.byId("amd_date").set("disabled",false);}}},refreshUIforAmendment:function(){var _e50=dj.byId("prod_stat_code").get("value");var _e51=dj.byId("tnx_type_code").get("value");var _e52=dj.byId("sub_tnx_type_code")?dj.byId("sub_tnx_type_code").get("value"):"";if((_e51==="15"&&_e50==="08")||(_e51==="15"&&_e50==="31")){if(d.byId("amd_chrg_brn_by_code_div")){d.byId("amd_chrg_brn_by_code_div").style.display="block";}if(d.byId("cfm_chrg_brn_by_code_div")){d.byId("cfm_chrg_brn_by_code_div").style.display="block";}if(_e51==="03"){if(d.byId("amd_no_date_display_div")){d.byId("amd_no_date_display_div").style.display="none";dj.byId("amd_date").set("disabled",false);}}if((_e51==="15"&&_e50==="08")||(_e51==="15"&&_e50==="31")||(_e51==="03"&&_e50==="08")){if(d.byId("amd_no_date_display_div")){d.byId("amd_no_date_display_div").style.display="block";dj.byId("amd_date").set("disabled",false);}}m.toggleFields(false,["advising_bank_name","advising_bank_address_line_1","advising_bank_address_line_2","advising_bank_dom","advising_bank_address_line_4","advising_bank_iso_code","advising_bank_reference"],null,true,null);m.toggleFields(false,["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4","advise_thru_bank_iso_code","advise_thru_bank_reference"],null,true,null);if(d.byId("req_conf_party_flag_filtered_div")){d.byId("req_conf_party_flag_filtered_div").style.display="block";}if(dj.byId("req_conf_party_flag_filtered")){dj.byId("req_conf_party_flag_filtered").set("value",dj.byId("req_conf_party_flag").getValue());}if(d.byId("req_conf_party_flag_div")){d.byId("req_conf_party_flag_div").style.display="none";}m.resetRequestedConfirmationParty();if(dj.byId("req_conf_party_flag_filtered")){m.setRequiredFields(["req_conf_party_flag_filtered"],true);}if(dj.byId("amd_chrg_brn_by_code_1")&&!dj.byId("amd_chrg_brn_by_code_1").get("value")&&!dj.byId("amd_chrg_brn_by_code_2").get("value")&&!dj.byId("amd_chrg_brn_by_code_4").get("value")&&(dj.byId("amd_chrg_brn_by_code_5")&&!dj.byId("amd_chrg_brn_by_code_5").get("value"))&&!dj.byId("amd_chrg_brn_by_code_9").get("value")){dj.byId("amd_chrg_brn_by_code_2").set("checked",true);}if(d.byId("advising_bank_name_img")){m.animate("wipeOut",d.byId("advising_bank_name_img"));}if(d.byId("advise_thru_bank_name_img")){m.animate("wipeOut",d.byId("advise_thru_bank_name_img"));}m.resetFormFields(["advising_bank_name","advising_bank_address_line_1","advising_bank_address_line_2","advising_bank_dom","advising_bank_address_line_4","advising_bank_iso_code","advising_bank_reference"]);m.resetFormFields(["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4","advise_thru_bank_iso_code","advise_thru_bank_reference"]);if(m._config.narrativeDescGoodsDataStore||m._config.narrativeDocsReqDataStore||m._config.narrativeAddInstrDataStore||m._config.narrativeSpBeneDataStore||m._config.narrativeSpRecvbankDataStore){m._config.currentNarrativeDescGoodsDataStore=m._config.narrativeDescGoodsDataStore;m._config.currentNarrativeDocsReqDataStore=m._config.narrativeDocsReqDataStore;m._config.currentNarrativeAddInstrDataStore=m._config.narrativeAddInstrDataStore;m._config.currentNarrativeSpBeneDataStore=m._config.narrativeSpBeneDataStore;m._config.currentNarrativeSpRecvbankDataStore=m._config.narrativeSpRecvbankDataStore;}if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="block";}if(d.byId(_d04)){d.byId(_d04).style.display="none";}}else{if(_e51==="15"){if(d.byId("amd_chrg_brn_by_code_div")){d.byId("amd_chrg_brn_by_code_div").style.display="none";}if(d.byId("cfm_chrg_brn_by_code_div")){d.byId("cfm_chrg_brn_by_code_div").style.display="none";}if(d.byId("amd_no_date_display_div")){dj.byId("amd_date").set("disabled",true);d.byId("amd_no_date_display_div").style.display="none";}m.toggleFields(true,["advising_bank_name","advising_bank_address_line_1","advising_bank_address_line_2","advising_bank_dom","advising_bank_address_line_4","advising_bank_iso_code","advising_bank_reference"],null,true,null);m.toggleFields(true,["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4","advise_thru_bank_iso_code","advise_thru_bank_reference"],null,true,null);if(d.byId("req_conf_party_flag_filtered_div")){d.byId("req_conf_party_flag_filtered_div").style.display="none";}if(d.byId("req_conf_party_flag_div")){d.byId("req_conf_party_flag_div").style.display="block";}if(d.byId("advising_bank_name_img")){m.animate("wipeIn",d.byId("advising_bank_name_img"));}if(d.byId("advise_thru_bank_name_img")){m.animate("wipeIn",d.byId("advise_thru_bank_name_img"));}m.resetRequestedConfirmationParty();if(dj.byId("req_conf_party_flag_filtered")){m.setRequiredFields(["req_conf_party_flag_filtered"],false);}if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="none";}if(d.byId(_d04)){d.byId(_d04).style.display="block";}if(m._config.currentNarrativeDescGoodsDataStore){m._config.narrativeDescGoodsDataStore=m._config.currentNarrativeDescGoodsDataStore;m._config.narrativeDocsReqDataStore=m._config.currentNarrativeDocsReqDataStore;m._config.narrativeAddInstrDataStore=m._config.currentNarrativeAddInstrDataStore;m._config.narrativeSpBeneDataStore=m._config.currentNarrativeSpBeneDataStore;m._config.narrativeSpRecvbankDataStore=m._config.currentNarrativeSpRecvbankDataStore;}else{m._config.narrativeDescGoodsDataStore="";m._config.narrativeDocsReqDataStore="";m._config.narrativeAddInstrDataStore="";m._config.narrativeSpBeneDataStore="";m._config.narrativeSpRecvbankDataStore="";if(document.getElementById("narrativeDescriptionGoods")){document.getElementById("narrativeDescriptionGoods").innerHTML="";}if(document.getElementById("narrativeDocumentsRequired")){document.getElementById("narrativeDocumentsRequired").innerHTML="";}if(document.getElementById("narrativeAdditionalInstructions")){document.getElementById("narrativeAdditionalInstructions").innerHTML="";}if(document.getElementById("narrativeSpecialBeneficiary")){document.getElementById("narrativeSpecialBeneficiary").innerHTML="";}if(document.getElementById("narrativeSpecialReceivingBank")){document.getElementById("narrativeSpecialReceivingBank").innerHTML="";}}}else{if((_e51==="13"&&!(_e52==="12"||_e52==="19"))||_e51!=="13"){if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="none";}if(d.byId(_d04)){d.byId(_d04).style.display="block";}}}}},refreshUIforAmendmentMO:function(){var _e53=dj.byId("prod_stat_code")?dj.byId("prod_stat_code").get("value"):null;var _e54=dj.byId("tnx_type_code")?dj.byId("tnx_type_code").get("value"):null;if((_e54==="15"&&_e53==="08")||(_e54==="15"&&_e53==="31")||_e54==="03"){if(d.byId("amd_chrg_brn_by_code_div")){d.byId("amd_chrg_brn_by_code_div").style.display="block";}if(d.byId("cfm_chrg_brn_by_code_div")){d.byId("cfm_chrg_brn_by_code_div").style.display="block";}if(d.byId("amd_no_date_display_mo_div")){d.byId("amd_no_date_display_mo_div").style.display="block";}if(d.byId("amd_date_display_mo_div")){d.byId("amd_date_display_mo_div").style.display="block";}if(dj.byId("amd_chrg_brn_by_code_1")&&!dj.byId("amd_chrg_brn_by_code_1").get("value")&&!dj.byId("amd_chrg_brn_by_code_2").get("value")&&!dj.byId("amd_chrg_brn_by_code_4").get("value")&&(dj.byId("amd_chrg_brn_by_code_5")&&!dj.byId("amd_chrg_brn_by_code_5").get("value"))&&!dj.byId("amd_chrg_brn_by_code_9").get("value")){dj.byId("amd_chrg_brn_by_code_2").set("checked",true);}if(m._config.narrativeDescGoodsDataStore||m._config.narrativeDocsReqDataStore||m._config.narrativeAddInstrDataStore||m._config.narrativeSpBeneDataStore||m._config.narrativeSpRecvbankDataStore){m._config.currentNarrativeDescGoodsDataStore=m._config.narrativeDescGoodsDataStore;m._config.currentNarrativeDocsReqDataStore=m._config.narrativeDocsReqDataStore;m._config.currentNarrativeAddInstrDataStore=m._config.narrativeAddInstrDataStore;m._config.currentNarrativeSpBeneDataStore=m._config.narrativeSpBeneDataStore;m._config.currentNarrativeSpRecvbankDataStore=m._config.narrativeSpRecvbankDataStore;}if(document.getElementById("amd_no")){document.getElementById("amd_no").value=m._config.amendmentNumber;}if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="block";}if(d.byId(_d04)){d.byId(_d04).style.display="none";}}else{if(_e54==="15"||_e54==="13"){if(d.byId("amd_chrg_brn_by_code_div")){d.byId("amd_chrg_brn_by_code_div").style.display="none";}if(d.byId("cfm_chrg_brn_by_code_div")){d.byId("cfm_chrg_brn_by_code_div").style.display="none";}if(d.byId("amd_no_date_display_mo_div")){d.byId("amd_no_date_display_mo_div").style.display="none";}if(d.byId("amd_date_display_mo_div")){d.byId("amd_date_display_mo_div").style.display="none";}if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="none";}if(d.byId(_d04)){d.byId(_d04).style.display="block";}if(document.getElementById("amd_no")){document.getElementById("amd_no").value="";}if(m._config.currentNarrativeDescGoodsDataStore){m._config.narrativeDescGoodsDataStore=m._config.currentNarrativeDescGoodsDataStore;m._config.narrativeDocsReqDataStore=m._config.currentNarrativeDocsReqDataStore;m._config.narrativeAddInstrDataStore=m._config.currentNarrativeAddInstrDataStore;m._config.narrativeSpBeneDataStore=m._config.currentNarrativeSpBeneDataStore;m._config.narrativeSpRecvbankDataStore=m._config.currentNarrativeSpRecvbankDataStore;}else{m._config.narrativeDescGoodsDataStore="";m._config.narrativeDocsReqDataStore="";m._config.narrativeAddInstrDataStore="";m._config.narrativeSpBeneDataStore="";m._config.narrativeSpRecvbankDataStore="";if(document.getElementById("narrativeDescriptionGoods")){document.getElementById("narrativeDescriptionGoods").innerHTML="";}if(document.getElementById("narrativeDocumentsRequired")){document.getElementById("narrativeDocumentsRequired").innerHTML="";}if(document.getElementById("narrativeAdditionalInstructions")){document.getElementById("narrativeAdditionalInstructions").innerHTML="";}if(document.getElementById("narrativeSpecialBeneficiary")){document.getElementById("narrativeSpecialBeneficiary").innerHTML="";}if(document.getElementById("narrativeSpecialReceivingBank")){document.getElementById("narrativeSpecialReceivingBank").innerHTML="";}}}}},resetFormFields:function(_e55){d.forEach(_e55,function(id,_e56){var item=dj.byId(id);if(item){item.reset();}});},setRequiredFields:function(_e57,_e58){d.forEach(_e57,function(id,_e59){var item=dj.byId(id);item.set("required",_e58);});},compareTransactionMaster:function(_e5a,type){var _e5b=false;for(var i=0;i<_e5a.length;i++){var _e5c=dj.byId(_e5a[i]);var _e5d=dj.byId("org_"+_e5a[i]);if((_e5d&&!_e5c)||(_e5c&&!_e5d)){_e5b=true;break;}else{if(type==="TXT"){if(m.trim(_e5d.get("value"))!==m.trim(_e5c.get("value"))){_e5b=true;break;}}else{if(type==="CHECK"){var _e5e=(_e5c.get("checked")===true)?"Y":"N";if(_e5d.get("value")!==_e5e){_e5b=true;break;}}}}}return _e5b;},compareTransactionMasterRadio:function(_e5f){var _e60=false;for(var i=0;i<_e5f.length;i++){var _e61=dj.byId(_e5f[i]);if(_e61&&_e61.get("value")!==false){var _e62=dj.byId("org_"+_e5f[i]);if(!_e62||(_e62.get("value")!==_e61.get("value"))){_e60=true;break;}}}return _e60;},amendChargesLC:function(){var _e63=dj.byId("narrative_amend_charges_other");var _e64=this.get("id");if(_e63){if(_e64==="amd_chrg_brn_by_code_4"||_e64==="amd_chrg_brn_by_code_5"){_e63.set("value","");_e63.set("disabled",false);}else{_e63.set("value","");_e63.set("disabled",true);}}},calculateAmendTransactionAmount:function(){var _e65=(dj.byId("tnxtype")&&dj.byId("tnxtype").get("value")==="03")||(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")==="03")||(dj.byId("prod_stat_code")&&(dj.byId("prod_stat_code").get("value")==="08"||dj.byId("prod_stat_code").get("value")==="31"));var _e66=dj.byId("tnx_amt");if(_e65){var _e67=dj.byId("inc_amt");if(_e67){_e67.set("value","");}var _e68=dj.byId("dec_amt");if(_e68){_e68.set("value","");}var _e69=dj.byId("lc_amt"),_e6a=dj.byId("org_lc_amt"),_e6b=d.number.parse(_e6a.get("displayedValue")),_e6c=d.number.parse(_e69.get("displayedValue"));_e6b=!isNaN(_e6b)?_e6b:0;_e6c=!isNaN(_e6c)?_e6c:0;var _e6d=_e6c-_e6b;if(_e6d>0){if(_e66){_e66.set("value",_e6d);}if(_e67){_e67.set("value",_e6d);}}else{if(_e6d<0){if(_e66){_e66.set("value",(-1*_e6d));}if(_e68){_e68.set("value",(-1*_e6d));}}}}else{_e66.set("value",d.number.parse(dj.byId("lc_amt").get("value")));}},checkConfirmationCharges:function(){if(dj.byId("cfm_inst_code_3").get("checked")){this.set("checked",false);m.showTooltip(m.getLocalization("confirmationInstructionsError"),d.byId("cfm_chrg_brn_by_code_1"),["before"]);}if(m._config.charge_splitting_lc){if(dj.byId("open_chrg_brn_by_code_3")){if(dj.byId("cfm_chrg_brn_by_code_3").get("checked")){dj.byId("cfm_chrg_applicant").set("disabled",false).set("required",true);dj.byId("cfm_chrg_beneficiary").set("disabled",false).set("required",true);}else{dj.byId("cfm_chrg_applicant").set("disabled",true).set("value","").set("required",false);dj.byId("cfm_chrg_beneficiary").set("disabled",true).set("value","").set("required",false);}}}},checkApplBeneCharges:function(){if(dj.byId("open_chrg_brn_by_code_3")){if(dj.byId("open_chrg_brn_by_code_3").get("checked")){dj.byId("open_chrg_applicant").set("disabled",false).set("required",true);dj.byId("open_chrg_beneficiary").set("disabled",false).set("required",true);}else{dj.byId("open_chrg_applicant").set("disabled",true).set("value","").set("required",false);dj.byId("open_chrg_beneficiary").set("disabled",true).set("value","").set("required",false);}}if(dj.byId("corr_chrg_brn_by_code_3")){if(dj.byId("corr_chrg_brn_by_code_3").get("checked")){dj.byId("corr_chrg_applicant").set("disabled",false).set("required",true);dj.byId("corr_chrg_beneficiary").set("disabled",false).set("required",true);}else{dj.byId("corr_chrg_applicant").set("disabled",true).set("value","").set("required",false);dj.byId("corr_chrg_beneficiary").set("disabled",true).set("value","").set("required",false);}}},toggleRenewalDetails:function(_e6e){if(dj.byId("is_bank")&&dj.byId("is_bank").get("value")==="N"){m.toggleFields(this.get("checked"),["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2","final_expiry_date"],["renew_on_code","renew_for_nb","renew_for_period"],_e6e);}else{m.toggleFields(this.get("checked"),["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2","projected_expiry_date","final_expiry_date"],["renew_on_code","renew_for_nb","renew_for_period"],_e6e);}if(!this.get("checked")){dj.byId("renew_on_code").set("value","");dj.byId("renew_for_nb").set("value","");dj.byId("renew_for_period").set("value","");dj.byId("advise_renewal_flag").set("checked",false);dj.byId("rolling_renewal_flag").set("checked",false);dj.byId("renew_amt_code_1").set("checked",false);dj.byId("renew_amt_code_2").set("checked",false);if(dj.byId("projected_expiry_date")){dj.byId("projected_expiry_date").set("value",null);}dj.byId("final_expiry_date").set("value",null);}},resetRenewalDetails:function(_e6f,node){if(dj.byId("is_bank")&&dj.byId("is_bank").get("value")==="N"){m.toggleFields(node.get("checked"),["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2","final_expiry_date"],["renew_on_code","renew_for_nb","renew_for_period"],_e6f);}else{m.toggleFields(node.get("checked"),["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2","projected_expiry_date","final_expiry_date"],["renew_on_code","renew_for_nb","renew_for_period"],_e6f);}if(!node.get("checked")){dj.byId("renew_on_code").set("value","");dj.byId("renew_for_nb").set("value","");dj.byId("renew_for_period").set("value","");dj.byId("advise_renewal_flag").set("checked",false);dj.byId("rolling_renewal_flag").set("checked",false);dj.byId("renew_amt_code_2").set("checked",true);if(dj.byId("projected_expiry_date")){dj.byId("projected_expiry_date").set("value",null);}dj.byId("final_expiry_date").set("value",null);}},toggleDependentFields:function(node,_e70,_e71){var _e72=dj.byId(node),_e73=dj.byId(_e70);if(_e73.get("displayedValue")!==""&&_e72.get("displayedValue")!==""){_e72.set("displayedValue","");_e72.set("readOnly",true);if(_e71){m.setFieldState(_e72,false);m.showTooltip(_e71,_e72.domNode);}}else{_e72.set("readOnly",false);_e73.set("readOnly",false);}},updateOutstandingAmount:function(_e74,_e75,_e76){var _e77=dj.byId("prod_stat_code").get("value");if(_e76==null||_e76==undefined){var _e78=dj.byId("product_code").get("value").toLowerCase();_e76=dj.byId(_e78+"_amt");}var _e79=dojo.number.parse(_e75.get("value"))||(_e76?_e76.get("value"):0);var _e7a;if(dj.byId("tnx_amt")&&dj.byId("tnx_amt").get("value")){_e7a=isNaN(dojo.number.parse(dj.byId("tnx_amt").get("value")))?0:dj.byId("tnx_amt").get("value");}else{_e7a=0;}var _e7b,_e7c=dj.byId("tnx_type_code"),_e7d=dj.byId("sub_tnx_type_code");if(_e74&&(_e77==="04"||_e77==="14"||_e77==="15"||_e77==="13"||_e77==="05")){_e7b=_e79-_e7a;_e7b=(_e7b>0)?_e7b:0;_e74.set("value",_e7b);}else{if(_e7c&&_e7d&&_e7c.get("value")!="03"&&_e7d.get("value")!="05"&&_e74&&isNaN(_e74.get("value"))){_e74.set("value",_e79);}else{if((_e77=="07"||_e77==="03")&&_e74&&!isNaN(_e74.get("value"))){}else{if(_e74){_e74.set("value",_e79);}}}}},confirmAccountDelete:function(_e7e,url,type){var mess=(type==="bill")?"deleteBillPayeeConfirmation":"deleteTransactionConfirmation";m.dialog.show("CONFIRMATION",m.getLocalization(mess,[_e7e]),"",function(){document.location.href=url;});},populateStaticDataDialog:function(_e7f,_e80,_e81,_e82,_e83){var url="/screen/AjaxScreen/action/GetStaticDataPopup",_e84={};_e84.option=_e7f;_e84.operation=_e80;_e84.fields=_e81;_e84.popupType="ADD_DATA";if(_e83){_e84.productcode=_e83;}m.dialog.populate(_e7f,m.getServletURL(url),null,_e84);},getStaticDataURL:function(_e85,_e86,_e87,_e88,_e89,_e8a){var url=["/screen/"],_e8b=_e89||"StaticDataListPopup";url.push(_e8b,"?option=",_e85,"&operation=",_e86,"&fields=",_e88,"&formname=",_e87);if(_e8a){url.push(_d05,_e8a);}return m.getServletURL(url.join(""));},showEntityDialog:function(_e8c,_e8d,_e8e,_e8f,_e90,_e91,_e92,_e93,_e94,_e95,_e96,_e97,_e98,_e99){var url="/screen/EntityListPopup",_e9a={},_e9b="/screen/AjaxScreen/action/GetEntities",_e9c={},grid,_e9d,_e9e,_e9f;if(_e97){_e9c.closeParent=_e97;_e9a.closeParent=_e97;}if(_e99){_e9a.wildcard=_e99;_e9c.wildcard=_e99;}if(_e8d){_e9c.fields=_e8d;_e9a.fields=_e8d;}if(_e8e){_e9a.productcode=_e8e;_e9c.productcode=_e8e;}else{_e9a.productcode="*";_e9c.productcode=_e8e;}if(_e95){_e9a.subproductcode=_e95;_e9c.subproductcode=_e95;}if(_e90){_e9a.company=_e90;_e9c.company=_e90;}if(_e8f){_e9a.entitycontext=_e8f;_e9c.entitycontext=_e8f;}if(_e91){_e9a.featureid=_e91;_e9c.featureid=_e91;}if(_e92){_e9a.option=_e92;_e9c.option=_e92;}if(_e98){_e9a.popupPrefix=_e98;_e9c.popupPrefix=_e98;}_e9a.dimensions=_e93;_e9d=_e8f+"entities_grid";_e9f=function(){if(_e98){_e9d=_e98+_e9d;}grid=dj.byId(_e9d);grid.showMessage(grid.loadingMessage);if(!_e8f||_e8f!=="CUSTOMER"){m.grid.setStoreURL(grid,m.getServletURL(_e9b),_e9c);}m.connect("sy_name","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("USERentities_grid"),["NAME"],["sy_name"]);}});m.connect("sy_abbvname","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("USERentities_grid"),["ABBVNAME"],["sy_abbvname"]);}});m.connect("sy_name","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("USER_WITH_ENTITY_WILDCARDentities_grid"),["NAME"],["sy_name"]);}});m.connect("sy_abbvname","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("USER_WITH_ENTITY_WILDCARDentities_grid"),["ABBVNAME"],["sy_abbvname"]);}});m.connect("sy_abbvname","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("CUSTOMERentities_grid"),["ABBVNAME"],["sy_abbvname"]);}});m.connect("sy_name","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("CUSTOMERentities_grid"),["NAME"],["sy_name"]);}});m.connect("sy_prefixentity","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("prefixCUSTOMERentities_grid"),["ENTITY_ABBV_NAME"],["sy_prefixentity"]);}});m.connect("sy_prefixname","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("prefixCUSTOMERentities_grid"),["NAME"],["sy_prefixname"]);}});};if(_e96){_e9e=dj.byId("childXhrDialog")||new dj.Dialog({title:_e94,id:"childXhrDialog",href:m.getServletURL(url),ioMethod:misys.xhrPost,ioArgs:{content:_e9a}});m.dialog.connect(_e9e,"onLoad",_e9f);m.dialog.connect(_e9e,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_e9e);_e9e.destroyRecursive();},2000);});var co=d.coords("xhrDialog");_e9e._relativePosition={x:co.x+30,y:co.y+30};_e9e.show();}else{m.dialog.show("URL","",_e94,null,_e9f,m.getServletURL(url),null,null,_e9a);}},showBankTypeDialog:function(type,_ea0,_ea1,_ea2,_ea3){if(dj.byId("credit_available_with_bank_type").get("value")==="Other"){m.showSearchDialog(type,_ea0,"","",_ea1,_ea2,_ea3);}},showDraweeDialog:function(type,_ea4,_ea5,_ea6){if((dj.byId("cr_avl_by_code_2")&&dj.byId("cr_avl_by_code_2").get("checked"))||(dj.byId("cr_avl_by_code_3")&&dj.byId("cr_avl_by_code_3").get("checked"))){m.showSearchDialog(type,_ea5,"","","EL","width:580px;height:auto;",_ea6);}},showUsersDialog:function(type,_ea7,_ea8,_ea9,_eaa,_eab,_eac,_ead,_eae,_eaf,_eb0,_eb1){var url=[],_eb2={},_eb3=[_d07],_eb4={},_eb5=_eaf||"GetStaticData",_eb6=_eab||_d08,_eb7,_eb8;if(_eac.slice(_eac.length-1)!==";"){_eac+=";";}_eb3.push(_eb5);_eb4.option=type;_eb4.fields=_ea7;_eb4.companyName=_ea8;_eb4.userId=_ea9;_eb4.entity=_eb7;_eb4.user_action=_eb1;d.mixin(_eb4,_eaa);url.push("/screen/",_eb6);_eb2.option=type;_eb2.fields=_ea7;_eb2.companyName=_ea8;_eb2.userId=_ea9;_eb2.companyId=_eae;_eb2.dimensions=_eac;d.mixin(_eb2,_eaa);_eb2.popupType="LIST_DATA";if(_eae){_eb2.companyid=_eae;_eb4.companyid=_eae;}_eb8=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_eb3.join("")),_eb4);};m.dialog.show("URL","",_ead,null,_eb8,m.getServletURL(url.join("")),null,null,_eb2);m.connect("lastname","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("userdata_grid"),["LAST_NAME"],["last_name"]);}});m.connect("firstname","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("userdata_grid"),["FIRST_NAME"],["first_name"]);}});m.connect("loginId","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("userdata_grid"),["LOGIN_ID"],["login_id"]);}});},showSearchExtAccountDialog:function(type,_eb9,_eba,_ebb,_ebc,_ebd,_ebe,_ebf,_ec0,_ec1,_ec2,_ec3){var url=[],_ec4={},_ec5=[_d07],_ec6={},_ec7=_ec1||"GetStaticData",_ec8=_ebb||_d08,_ec9,_eca;if(_ebd.slice(_ebd.length-1)!==";"){_ebd+=";";}if(dj.byId(_ebf)){_ec9=dj.byId(_ebf).get("value");}_ec5.push(_ec7);_ec6.option=type;_ec6.fields=_eb9;_ec6.entity=_ec9;_ec6.user_action=_ec3;d.mixin(_ec6,_eba);url.push("/screen/",_ec8);_ec4.option=type;_ec4.fields=_eb9;_ec4.dimensions=_ebd;d.mixin(_ec4,_eba);_ec4.popupType="LIST_DATA";if(_ebc){_ec4.productcode=_ebc;_ec6.productcode=_ebc;}if(_ec0){_ec4.companyid=_ec0;_ec6.companyid=_ec0;}if(!_ec2){_eca=function(){var grid=dj.byId(type+"data_grid");if(grid){grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_ec5.join("")),_ec6);}};}m.dialog.show("URL","",_ebe,null,_eca,m.getServletURL(url.join("")),null,null,_ec4);},showSearchDialog:function(type,_ecb,_ecc,_ecd,_ece,_ecf,_ed0,_ed1,_ed2,_ed3,_ed4,_ed5,_ed6){var url=[],_ed7={},_ed8=[_d07],_ed9={},_eda=_ed2||"GetStaticData",_edb=_ecd||_d08,_edc,_edd,_ede,_edf=dj.byId("product_type")?dj.byId("product_type").get("value"):"",_ee0=dj.byId("customer_bank")?dj.byId("customer_bank").get("value"):"",_ee1=dijit.byId("issuing_bank_abbv_name")?dijit.byId("issuing_bank_abbv_name").get("value"):"";var _ee2=dj.byId("program_id");if(dj.byId(_ed5)){_edc=dj.byId(_ed5).get("value");if(_edc===""){return;}}if(_ecf.slice(_ecf.length-1)!==";"){_ecf+=";";}_ed8.push(_eda);_ed9.option=type;_ed9.fields=_ecb;_ed9.user_action=_ed4;_ed9[_d0a]=_edc;d.mixin(_ed9,_ecc);url.push("/screen/",_edb);_ed7.option=type;_ed7.fields=_ecb;_ed7.dimensions=_ecf;d.mixin(_ed7,_ecc);_ed7.popupType="LIST_DATA";if(_ece){_ed7.productcode=_ece;_ed9.productcode=_ece;}if(_ed1){_ed7.companyid=_ed1;_ed9.companyid=_ed1;}if(_ecc&&_ecc.entity_name===""){_ed9.entity_name=dj.byId("entity")?dj.byId("entity").get("value"):"";_ed7.entity_name=dj.byId("entity")?dj.byId("entity").get("value"):"";}if(_ee0){_ede=_ee0;}else{if(dj.byId("bank_abbv_name")&&dj.byId("bank_abbv_name").get("value")!==""){_ede=dj.byId("bank_abbv_name").get("value");}else{if(_ee1){_ede=_ee1;}}}_ed9.bank_abbv_name=_ede;if(_ee2){_ed7.fcmPgmId=_ee2.get("value");_ed9.fcmPgmId=_ee2.get("value");}if(_edf){_ed7.product_type=_edf;_ed9.product_type=_edf;}if(_ed6){_ed7.subproductcode=_ed6;_ed9.subproductcode=_ed6;}if(!_ed3){_edd=function(){var grid=dj.byId(type+"data_grid");if(grid){grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_ed8.join("")),_ed9);m.connect("CurrencyName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["NAME"],["CurrencyName"]);}});m.connect("ISOCode","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["ISOCODE"],["ISOCode"]);}});m.connect("abbv_name","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("beneficiarydata_grid"),["ABBVNAME"],["abbv_name"]);}});m.connect("name","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("beneficiarydata_grid"),["NAME"],["name"]);}});m.connect("abbv_name","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("bankdata_grid"),["ABBVNAME"],["abbv_name"]);}});m.connect("name","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("bankdata_grid"),["NAME"],["name"]);}});m.connect("abbv_name","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("phrasedata_grid"),["ABBVNAME"],["abbv_name"]);}});m.connect("descriptionField","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("phrasedata_grid"),["DESCRIPTION"],["descriptionField"]);}});m.connect("description","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("accountdata_grid"),["DESCRIPTION"],["description"]);}});m.connect("account_no","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("accountdata_grid"),["ACCOUNTNO"],["account_no"]);}});}};}m.dialog.show("URL","",_ed0,null,_edd,m.getServletURL(url.join("")),null,null,_ed7);},showProgramCptyDialog:function(type,_ee3,_ee4,_ee5,_ee6,_ee7,_ee8){var _ee9="";if(dj.byId("gridPC")&&dj.byId("gridPC").store&&dj.byId("gridPC").store._arrayOfAllItems&&dj.byId("gridPC").store._arrayOfAllItems.length){var _eea=dj.byId("gridPC").store._arrayOfAllItems;for(var i=0;i<_eea.length;i++){if(_eea[i]&&_eea[i]["ABBVNAME"]){_ee9=_ee9+_eea[i]["ABBVNAME"]+",";}}}var url=[],_eeb={},_eec=_d07,_eed={},_eee="GetStaticData",_eef=_ee5||_d08,_ef0,_ef1;if(_ee6.slice(_ee6.length-1)!==";"){_ee6+=";";}_eec+=_eee;_eed.option=type;_eed.fields=_ee3;_eed.benAbbvNameList=_ee9;url.push("/screen/",_eef);_eeb.option=type;_eeb.fields=_ee3;if(_ee4){_eeb.program_id=_ee4;_eed.program_id=_ee4;}_eeb.dimensions=_ee6;_eeb.popupType="LIST_DATA";_ef0=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_eec),_eed);m.connect("prgm_cpty_popup","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("programCounterpartydata_grid"),["ABBVNAME"],["prgm_cpty_popup"]);}});};if(_ee8){_ef1=dj.byId("childXhrDialog")||new dj.Dialog({title:_ee7,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_eeb}});m.dialog.connect(_ef1,"onLoad",_ef0);m.dialog.connect(_ef1,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_ef1);_ef1.destroyRecursive();},2000);});var co=d.coords("xhrDialog");_ef1._relativePosition={x:co.x+30,y:co.y+30};_ef1.show();}else{m.dialog.show("URL","",_ee7,null,_ef0,m.getServletURL(url.join("")),null,null,_eeb);}},showBankBranchCodeDialog:function(type,_ef2,_ef3,_ef4,_ef5,_ef6,_ef7,_ef8,_ef9){var url=[],_efa={},_efb=_d07,_efc={},_efd="GetStaticData",_efe=_ef6||_d08,_eff,_f00,co;if(_ef7.slice(_ef7.length-1)!==";"){_ef7+=";";}_efb+=_efd;_efc.option=type;_efc.fields=_ef2;_efc.parameter=_ef3;_efc.branchindicators=_ef4;_efc.internal=_ef5;url.push("/screen/",_efe);_efa.option=type;_efa.fields=_ef2;_efa.parameter=_ef3;_efa.branchindicators=_ef4;_efa.internal=_ef5;_efa.dimensions=_ef7;_efa.popupType="LIST_DATA";_eff=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_efb),_efc);};if(_ef9){_f00=dj.byId("childXhrDialog")||new dj.Dialog({title:_ef8,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_efa}});m.dialog.connect(_f00,"onLoad",_eff);m.dialog.connect(_f00,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_f00);_f00.destroyRecursive();},2000);});co=d.coords("xhrDialog");_f00._relativePosition={x:co.x+30,y:co.y+30};_f00.show();}else{m.dialog.show("URL","",_ef8,null,_eff,m.getServletURL(url.join("")),null,null,_efa);}},showSearchUserAccountsDialog:function(type,_f01,_f02,_f03,drCr,_f04,_f05,_f06,_f07,_f08,_f09,_f0a,_f0b,_f0c,_f0d,_f0e,_f0f){var url=[],_f10={},_f11=_d07,_f12={},_f13="GetStaticData",_f14=_d08,_f15,_f16,_f17,_f18;if(dj.byId(_f03)){_f16=dj.byId(_f03).get("value");if(_f16===""){if(dj.byId("applicant_abbv_name")){var _f19=dj.byId("applicant_abbv_name").get("value");if(_f19===""){m.showTooltip(m.getLocalization("entitynotselected"),document.activeElement,["after"]);return;}}else{if(_f0f&&_f0f===true){}else{m.showTooltip(m.getLocalization("entitynotselected"),document.activeElement,["after"]);return;}}}}else{if(misys._config.isEntityRequired){m.showTooltip(m.getLocalization("entitynotselected"),document.activeElement,["after"]);return;}}if(dj.byId(_f02)){_f18=dj.byId(_f02).get("value");if(_f18===""){return;}}var _f1a=[];if(_f0c){var _f1b=_f0c.split(",");for(var i in _f1b){if(dj.byId(_f1b[i])){_f1a.push(dj.byId(_f1b[i]).get("value"));}}}if(dj.byId("customer_bank")&&dj.byId("customer_bank").get("value")!==""){_f17=dj.byId("customer_bank").get("value");}else{if(dj.byId("bank_abbv_name")&&dj.byId("bank_abbv_name").get("value")!==""){_f17=dj.byId("bank_abbv_name").get("value");}else{if(dj.byId("issuing_bank")&&dj.byId("issuing_bank").get("value")!==""){_f17=dj.byId("issuing_bank").get("value");}}}if(_f05.slice(_f05.length-1)!==";"){_f05+=";";}_f11+=_f13;_f12.option=type;_f12.user_action=_f0b;_f12.fields=_f01;_f12.entity=_f16;_f12.bank_abbv_name=_f17;_f12[_d0a]=_f18;_f12["dr-cr"]=drCr;_f12["product-types"]=_f04;_f12.parameter=_f07;_f12.companyId=_f08;_f12.accountType=_f0d;_f12.isSearchScreen=_f0f;if(dj.byId("issuing_bank_customer_reference")&&dj.byId("issuing_bank_customer_reference").get("value")!==""&&_f04.length>0&&(("FT:TRTPT"===_f04)||("FT:TRINT"===_f04))){_f12["issuing_bank_customer_reference"]=dj.byId("issuing_bank_customer_reference").get("value");}if(_f04.length>0&&"FX"===_f04&&_f07.indexOf("ownerType:")>-1){_f12.ownerType=_f07.substring(10);}if(_f1a.length>0){_f12.ccy_codes=_f1a.join(",");}url.push("/screen/",_f14);_f10.option=type;_f10.dimensions=_f05;_f10.bank_abbv_name=_f17;_f10.entity=_f16;_f10.popupType="LIST_DATA";_f10.pageType=_f07;if(_f08){_f10.companyid=_f08;}if(!_f0a){_f15=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_f11),_f12);};}m.dialog.show("URL","",_f06,null,_f15,m.getServletURL(url.join("")),null,null,_f10);m.connect("accountNo","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("useraccountdata_grid"),["ACCOUNTNOTEMP"],["accountNo"]);}});m.connect("curCode","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("useraccountdata_grid"),["CURCODE"],["curCode"]);}});m.connect("descriptionDialog","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("useraccountdata_grid"),["DESCRIPTION"],["descriptionDialog"]);}});if(_f17!==""){m.connect("bankName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("useraccountdata_grid"),["BANKNAME"],["bankName"]);}});}},showSearchFSCMProgramDialog:function(type,_f1c,_f1d,_f1e,_f1f,_f20,_f21){var url=[],_f22={},_f23=_d07,_f24={},_f25="GetStaticData",_f26=_d08,_f27,_f28,_f29;if(_f1d.slice(_f1d.length-1)!==";"){_f1d+=";";}_f23+=_f25;_f24.option=type;_f24.user_action=_f21;_f24.fields=_f1c;_f24.entity=_f28;_f24[_d0a]=_f29;d.mixin(_f24,_f1f);url.push("/screen/",_f26);_f22.option=type;_f22.dimensions=_f1d;d.mixin(_f22,_f1f);_f22.popupType="LIST_DATA";if(!_f20){_f27=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_f23),_f24);};}m.dialog.show("URL","",_f1e,null,_f27,m.getServletURL(url.join("")),null,null,_f22);m.connect("programCode","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("fscmprogramdata_grid"),["PROGRAM_CODE"],["programCode"]);}});m.connect("programName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("fscmprogramdata_grid"),["PROGRAM_NAME"],["programName"]);}});m.connect("programId","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("fscmprogramdata_grid"),["PROGRAM_ID"],["programId"]);}});},showFSCMProgramFinanceRequestDialog:function(type,_f2a,_f2b,_f2c,_f2d,_f2e,_f2f){var url=[],_f30={},_f31=_d07,_f32={},_f33="GetStaticData",_f34=_f2c||_d08,_f35,_f36;if(_f2d.slice(_f2d.length-1)!==";"){_f2d+=";";}_f31+=_f33;_f32.option=type;_f32.fields=_f2a;d.mixin(_f32,_f2b);url.push("/screen/",_f34);_f30.option=type;_f30.fields=_f2a;d.mixin(_f30,_f2b);_f30.dimensions=_f2d;_f30.popupType="LIST_DATA";_f35=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_f31),_f32);m.connect("CurrencyName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["NAME"],["CurrencyName"]);}});};if(_f2f){_f36=dj.byId("childXhrDialog")||new dj.Dialog({title:_f2e,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_f30}});m.dialog.connect(_f36,"onLoad",_f35);m.dialog.connect(_f36,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_f36);_f36.destroyRecursive();},2000);});var co=d.coords("xhrDialog");_f36._relativePosition={x:co.x+30,y:co.y+30};_f36.show();}else{m.dialog.show("URL","",_f2e,null,_f35,m.getServletURL(url.join("")),null,null,_f30);}},showCountryCodeDialog:function(type,_f37,_f38,_f39,_f3a,_f3b,_f3c,_f3d,_f3e){var url=[],_f3f={},_f40=_d07,_f41={},_f42="GetStaticData",_f43=_f39||_d08,_f44,_f45;if(_f3c.slice(_f3c.length-1)!==";"){_f3c+=";";}_f40+=_f42;_f41.option=type;_f41.fields=_f37;_f41.parameter=_f38;url.push("/screen/",_f43);_f3f.option=type;_f3f.fields=_f37;_f3f.parameter=_f38;_f3f.dimensions=_f3c;_f3f.popupType="LIST_DATA";if(_f3a){_f3f.productcode=_f3a;_f41.productcode=_f3a;}if(_f3b){_f3f.subproductcode=_f3b;_f41.subproductcode=_f3b;}_f44=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_f40),_f41);m.connect("country_name_popup","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("codevaluedata_grid"),["DESCRIPTION"],["country_name_popup"]);}});};if(_f3e){_f45=dj.byId("childXhrDialog")||new dj.Dialog({title:_f3d,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_f3f}});m.dialog.connect(_f45,"onLoad",_f44);m.dialog.connect(_f45,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_f45);_f45.destroyRecursive();},200);});var co=d.coords("xhrDialog");_f45._relativePosition={x:co.x+30,y:co.y+30};_f45.show();}else{m.dialog.show("URL","",_f3d,null,_f44,m.getServletURL(url.join("")),null,null,_f3f);}},showCurrencyCodeDialog:function(type,_f46,_f47,_f48,_f49,_f4a,_f4b,_f4c,_f4d){var url=[],_f4e={},_f4f=_d07,_f50={},_f51="GetStaticData",_f52=_f48||_d08,_f53,_f54;if(_f4b.slice(_f4b.length-1)!==";"){_f4b+=";";}_f4f+=_f51;_f50.option=type;_f50.fields=_f46;_f50.parameter=_f47;url.push("/screen/",_f52);_f4e.option=type;_f4e.fields=_f46;_f4e.parameter=_f47;_f4e.dimensions=_f4b;_f4e.popupType="LIST_DATA";if(_f49){_f4e.productcode=_f49;_f4f.push(_d05,_f49);}if(_f4a){_f4e.subproductcode=_f4a;_f4f.push("&subproductcode=",_f4a);}_f53=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_f4f),_f50);m.connect("CurrencyName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["NAME"],["CurrencyName"]);}});};if(_f4d){_f54=dj.byId("childXhrDialog")||new dj.Dialog({title:_f4c,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_f4e}});m.dialog.connect(_f54,"onLoad",_f53);m.dialog.connect(_f54,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_f54);_f54.destroyRecursive();},200);});var co=d.coords("xhrDialog");_f54._relativePosition={x:co.x+30,y:co.y+30};_f54.show();}else{m.dialog.show("URL","",_f4c,null,_f53,m.getServletURL(url.join("")),null,null,_f4e);}},isGridEmpty:function(){var _f55=true;if(dijit.byId("amendments").store){for(var i=0;i<dijit.byId("amendments").store._arrayOfAllItems.length;i++){if(dijit.byId("amendments").store._arrayOfAllItems[i]!=null){_f55=false;}}}return _f55;},toggleADR:function(){if(dj.byId("adr_1").get("value")||dj.byId("adr_2").get("value")){var adr3=dj.byId("adr_3");if(!m.isGridEmpty()){adr3.set("disabled",true);}dj.byId("narrative_description_goods_popup").set("value","");if(dj.byId("adr_1").get("value")){dj.byId("narrative_description_goods_popup").set("value","/ADD/");}else{if(dj.byId("adr_2").get("value")){dj.byId("narrative_description_goods_popup").set("value","/DELETE/");}}}if(dj.byId("adr_3").get("value")){dj.byId("narrative_description_goods_popup").set("value","");if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]!="REPALL"){dj.byId("adr_3").set("disabled",true);dj.byId("narrative_description_goods_popup").set("disabled",true);dj.byId("adr_3").set("value",false);}dj.byId("narrative_description_goods_popup").set("value","/REPALL/");}if(dj.byId("adr_1").get("value")==="ADD"||dj.byId("adr_2").get("value")==="DELETE"||dj.byId("adr_3").get("value")==="REPALL"){dj.byId("narrative_description_goods_popup").set("disabled",false);}if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]=="REPALL"){dj.byId("adr_1").set("disabled",true);dj.byId("adr_2").set("disabled",true);dj.byId("adr_3").set("disabled",false);dj.byId("adr_3").set("value","REPALL");dj.byId("narrative_description_goods_popup").set("disabled",true);}},consolidateGridData:function(){var _f56;var verb,text;if(m.isGridEmpty()){m.dialog.show("CONFIRMATION",m.getLocalization("saveEmptyDataConfirmation"),"",_f57);_f56="<table><tr><span style='height: 1px;'></span></tr>";}else{if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems){_f56="<table><tr><b><span style='color: blue;' class='indented-header;'>Current Amendment</span></b></tr>";for(var u=0;u<dijit.byId("amendments").store._arrayOfAllItems.length;u++){if(dijit.byId("amendments").store._arrayOfAllItems[u]!=null){_f56+="<tr><td style='white-space: pre-wrap;'>";var _f58=dijit.byId("amendments").store._arrayOfAllItems[u].verb[0];var _f59="";if(_f58==="ADD"){_f59=misys.getLocalization("add");}else{if(_f58==="DELETE"){_f59=misys.getLocalization("delete");}else{if(_f58==="REPALL"){_f59=misys.getLocalization("repall");}}}verb="<b>/"+_f59+"/</b>";text=dijit.byId("amendments").store._arrayOfAllItems[u].content[0];_f56+=verb+" "+text;_f56+="</td></tr>";}}}}_f56+="</table>";var _f57=function(){var _f5a;if(dijit.byId("amendments").store&&!m.isGridEmpty()){_f5a=dijit.byId("amendments").store._arrayOfAllItems;if(m._config.narrativeId==="narrative_amend_goods"){m._config.narrativeDescGoodsDataStore=_f5a;document.getElementById("narrativeDescriptionGoods").innerHTML=_f56;}if(m._config.narrativeId==="narrative_amend_docs"){m._config.narrativeDocsReqDataStore=_f5a;document.getElementById("narrativeDocumentsRequired").innerHTML=_f56;}if(m._config.narrativeId==="narrative_amend_instructions"){m._config.narrativeAddInstrDataStore=_f5a;document.getElementById("narrativeAdditionalInstructions").innerHTML=_f56;}if(m._config.narrativeId==="narrative_amend_sp_beneficiary"){m._config.narrativeSpBeneDataStore=_f5a;document.getElementById("narrativeSpecialBeneficiary").innerHTML=_f56;}if(m._config.narrativeId==="narrative_amend_sp_recvbank"){m._config.narrativeSpRecvbankDataStore=_f5a;document.getElementById("narrativeSpecialReceivingBank").innerHTML=_f56;}}else{if(m.isGridEmpty()){if(m._config.narrativeId==="narrative_amend_goods"){m._config.narrativeDescGoodsDataStore.length=0;document.getElementById("narrativeDescriptionGoods").innerHTML=_f56;}if(m._config.narrativeId==="narrative_amend_docs"){m._config.narrativeDocsReqDataStore.length=0;document.getElementById("narrativeDocumentsRequired").innerHTML=_f56;}if(m._config.narrativeId==="narrative_amend_instructions"){m._config.narrativeAddInstrDataStore.length=0;document.getElementById("narrativeAdditionalInstructions").innerHTML=_f56;}if(m._config.narrativeId==="narrative_amend_sp_beneficiary"){m._config.narrativeSpBeneDataStore.length=0;document.getElementById("narrativeSpecialBeneficiary").innerHTML=_f56;}if(m._config.narrativeId==="narrative_amend_sp_recvbank"){m._config.narrativeSpRecvbankDataStore.length=0;document.getElementById("narrativeSpecialReceivingBank").innerHTML=_f56;}}}if(dj.byId("narrative_description_goods_popup").state===""&&!dj.byId("narrative_description_goods_popup").disabled){m.toggleNarrativeDivStatus(true);}m.dialog.hide();m.initDivMouseOver();};if(!m.isGridEmpty()){if(m.hasTextBoxLogicalValue()){m.dialog.show("CONFIRMATION",m.getLocalization("unsavedDataExistInTextBox"),"",_f57);}else{m.dialog.show("CONFIRMATION",m.getLocalization("saveDataConfirmation"),"",_f57);}}else{m.dialog.show("CONFIRMATION",m.getLocalization("saveEmptyDataConfirmation"),"",_f57);}},closeAmendmentPopup:function(){var _f5b=function(){m._config.narrativeId="";var _f5c=[m._config.narrativeDescGoodsDataStore,m._config.narrativeDocsReqDataStore,m._config.narrativeAddInstrDataStore,m._config.narrativeSpBeneDataStore,m._config.narrativeSpRecvbankDataStore];var i=0,_f5d=0,_f5e=0;for(var itr=0;itr<5;itr++){if(_f5c[itr]){d.forEach(_f5c[itr],function(){if(_f5c[itr][i]&&_f5c[itr][i]!==null){_f5c[itr][i].content[0].replace(/&#xa;/g,"\n");_f5e+=_f5c[itr][i].content[0].length;_f5d+=_f5c[itr][i].text_size[0];}i++;});}}if(_f5d<=(misys._config.is798=="Y"?792:800)){m.toggleNarrativeDivStatus(true);}else{m.initDivMouseOver();}m.dialog.hide();};if(!m.hasTextBoxLogicalValue()){m.dialog.show("CONFIRMATION",m.getLocalization("cancelTransactionConfirmation"),"",_f5b);}else{if(dj.byId("narrative_description_goods_popup").get("value")!="/ADD/"&&dj.byId("narrative_description_goods_popup").get("value")!="/DELETE/"&&dj.byId("narrative_description_goods_popup").get("value")!="/REPALL/"){m.dialog.show("CONFIRMATION",m.getLocalization("unsavedDataExistInTextBox"),"",_f5b);}}},viewNarrativeInPopUp:function(type,_f5f,_f60,_f61,_f62,_f63,_f64){var url=[],_f65={},_f66=[_d07],_f67="GetStaticData",_f68=_d08,_f69;if(_f62.slice(_f62.length-1)!==";"){_f62+=";";}var _f6a;m._config.amendmentNumber=_f64;m._config.narrativeId=_f60;if(_f60==="narrative_amend_goods"){if(dj.byId("org_narrative_description_goods")&&dj.byId("org_narrative_description_goods").get("value")!=""){_f6a=dj.byId("org_narrative_description_goods").get("value");}else{_f6a=dj.byId("original_narrative_description_goods")?dj.byId("original_narrative_description_goods").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeDescGoodsDataStore&&misys._config.narrativeDescGoodsDataStore.length!=0){_f6a=_f6a.concat(m.customXMLForCurrentAmend(misys._config.narrativeDescGoodsDataStore));}}else{if(_f60==="narrative_amend_docs"){if(dj.byId("org_narrative_documents_required")&&dj.byId("org_narrative_documents_required").get("value")!=""){_f6a=dj.byId("org_narrative_documents_required").get("value");}else{_f6a=dj.byId("original_narrative_documents_required")?dj.byId("original_narrative_documents_required").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeDocsReqDataStore&&misys._config.narrativeDocsReqDataStore.length!=0){_f6a=_f6a.concat(m.customXMLForCurrentAmend(misys._config.narrativeDocsReqDataStore));}}else{if(_f60==="narrative_amend_instructions"){if(dj.byId("org_narrative_additional_instructions")&&dj.byId("org_narrative_additional_instructions").get("value")!=""){_f6a=dj.byId("org_narrative_additional_instructions").get("value");}else{_f6a=dj.byId("original_narrative_additional_instructions")?dj.byId("original_narrative_additional_instructions").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeAddInstrDataStore&&misys._config.narrativeAddInstrDataStore.length!=0){_f6a=_f6a.concat(m.customXMLForCurrentAmend(misys._config.narrativeAddInstrDataStore));}}else{if(_f60==="narrative_amend_sp_beneficiary"){if(dj.byId("org_narrative_special_beneficiary")&&dj.byId("org_narrative_special_beneficiary").get("value")!=""){_f6a=dj.byId("org_narrative_special_beneficiary").get("value");}else{_f6a=dj.byId("original_narrative_special_beneficiary")?dj.byId("original_narrative_special_beneficiary").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeSpBeneDataStore&&misys._config.narrativeSpBeneDataStore.length!=0){_f6a=_f6a.concat(m.customXMLForCurrentAmend(misys._config.narrativeSpBeneDataStore));}}else{if(_f60==="narrative_amend_sp_recvbank"){if(dj.byId("org_narrative_special_recvbank")&&dj.byId("org_narrative_special_recvbank").get("value")!=""){_f6a=dj.byId("org_narrative_special_recvbank").get("value");}else{_f6a=dj.byId("original_narrative_special_recvbank")?dj.byId("original_narrative_special_recvbank").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeSpRecvbankDataStore&&misys._config.narrativeSpRecvbankDataStore.length!=0){_f6a=_f6a.concat(m.customXMLForCurrentAmend(misys._config.narrativeSpRecvbankDataStore));}}}}}}_f66.push(_f67);_f65.option=type;_f65.dimensions=_f62;_f65.messageValue=_f5f;_f65.node=type;_f65.rundataXML=_f6a;url.push("/screen/",_f68);m.dialog.show("URL","",_f63,null,_f69,m.getServletURL(url.join("")),null,null,_f65);},customXMLForCurrentAmend:function(_f6b){var i=0;var _f6c="<amendments>";_f6c=_f6c.concat("<amendment>");_f6c=_f6c.concat("<sequence>");_f6c=_f6c.concat(m._config.amendmentNumber);_f6c=_f6c.concat("</sequence>");_f6c=_f6c.concat("<data>");for(i=0;i<_f6b.length;i++){if(_f6b[i]!=null){_f6c=_f6c.concat("<datum>");_f6c=_f6c.concat("<id>");_f6c=_f6c.concat(i);_f6c=_f6c.concat("</id>");_f6c=_f6c.concat("<verb>");_f6c=_f6c.concat(_f6b[i].verb[0]);_f6c=_f6c.concat("</verb>");_f6c=_f6c.concat("<text>");_f6c=_f6c.concat(dojox.html.entities.encode(_f6b[i].content[0],dojox.html.entities.html));_f6c=_f6c.concat("</text>");_f6c=_f6c.concat("</datum>");}}_f6c=_f6c.concat("</data>");_f6c=_f6c.concat("</amendment>");_f6c=_f6c.concat("</amendments>");return _f6c;},initDivMouseOver:function(){var _f6d=document.getElementById("tabNarrativeDescriptionGoods");var _f6e=dj.byId("adv_send_mode")?dj.byId("adv_send_mode").get("value"):"";_f6d.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&(_f6e==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[0]){_d14?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_d0f,_d11]),_f6d,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d10,_d12]),_f6d,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[0]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_f6d,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[0]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d10,_d12]),_f6d,["after"]);}}}};_f6d.onmouseout=function(){dijit.hideTooltip(_f6d);};var _f6f=document.getElementById("tabNarrativeDocumentsRequired");_f6f.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&_f6f.status==false&&(_f6e==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[1]){_d14?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_d0f,_d11]),_f6f,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d10,_d12]),_f6f,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[1]&&document.getElementById("tabNarrativeDocumentsRequired").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_f6f,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[1]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d10,_d12]),_f6d,["after"]);}}}};_f6f.onmouseout=function(){dijit.hideTooltip(_f6f);};var _f70=document.getElementById("tabNarrativeAdditionalInstructions");_f70.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&_f70.status==false&&(_f6e==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[2]){_d14?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_d0f,_d11]),_f70,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d10,_d12]),_f70,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[2]&&document.getElementById("tabNarrativeAdditionalInstructions").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_f70,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[2]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d10,_d12]),_f6d,["after"]);}}}};_f70.onmouseout=function(){dijit.hideTooltip(_f70);};var _f71=document.getElementById("tabNarrativeSpecialBeneficiary");_f71.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&_f71==false&&(_f6e==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[3]){_d14?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_d0f,_d11]),_f71,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d10,_d12]),_f71,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[3]&&document.getElementById("tabNarrativeSpecialBeneficiary").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_f71,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[3]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d10,enteredtSingle]),_f6d,["after"]);}}}};_f71.onmouseout=function(){dijit.hideTooltip(_f71);};if(document.getElementById("tabNarrativeSpecialReceivingBank")){var _f72=document.getElementById("tabNarrativeSpecialReceivingBank");_f72.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&_f72.status==false&&(_f6e==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[4]){_d14?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_d0f,_d11]),_f72,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d10,_d12]),_f72,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[4]&&document.getElementById("tabNarrativeSpecialReceivingBank").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_f72,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[4]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d10,_d12]),_f6d,["after"]);}}}};_f71.onmouseout=function(){dijit.hideTooltip(_f71);};}},editNarrativeInPopUp:function(type,_f73,_f74,_f75,_f76,_f77,_f78){var url=[],_f79={},_f7a=[_d07],_f7b="GetStaticData",_f7c=_d08,_f7d;if(_f76.slice(_f76.length-1)!==";"){_f76+=";";}var _f7e,_f7f=dj.byId("is798")?dj.byId("is798").get("value"):(dj.byId("issuing_bank_abbv_name")?(m._config.customerBanksMT798Channel[dj.byId("issuing_bank_abbv_name").get("value")]==true?"Y":"N"):(dj.byId("advising_bank_abbv_name")?(m._config.customerBanksMT798Channel[dj.byId("advising_bank_abbv_name").get("value")]==true?"Y":"N"):"N"));m._config.is798=_f7f;m._config.amendmentNumber=_f78;m._config.narrativeId=_f74;if(_f74==="narrative_amend_goods"){_f7e=dj.byId("org_narrative_description_goods")?dj.byId("org_narrative_description_goods").get("value"):"";}else{if(_f74==="narrative_amend_docs"){_f7e=dj.byId("org_narrative_documents_required")?dj.byId("org_narrative_documents_required").get("value"):"";}else{if(_f74==="narrative_amend_instructions"){_f7e=dj.byId("org_narrative_additional_instructions")?dj.byId("org_narrative_additional_instructions").get("value"):"";}else{if(_f74==="narrative_amend_sp_beneficiary"){_f7e=dj.byId("org_narrative_special_beneficiary")?dj.byId("org_narrative_special_beneficiary").get("value"):"";}else{if(_f74==="narrative_amend_sp_recvbank"){_f7e=dj.byId("org_narrative_special_recvbank")?dj.byId("org_narrative_special_recvbank").get("value"):"";}}}}}_f7a.push(_f7b);_f79.option=type;_f79.dimensions=_f76;_f79.messageValue=_f73;_f79.node=type;_f79.rundataXML=_f7e;_f79.is798=_f7f;url.push("/screen/",_f7c);var _f80="";_f7d=function(){if(m._config.codeword_enabled==true){dj.byId("narrative_description_goods_popup").set("disabled",true);var _f81=function(){m.toggleADR();};var _f82=function(){dj.byId(_f80).set("value",true);};m.connect("adr_1","onClick",function(){if(!m.hasTextBoxLogicalValue()){m.toggleADR();}else{m.dialog.show("Warning",m.getLocalization("textboxDataLossOnToggle"),"","","","",_f81,_f82);}});m.connect("adr_1","onChange",function(){_f80="adr_1";});m.connect("adr_2","onClick",function(){if(!m.hasTextBoxLogicalValue()){m.toggleADR();}else{m.dialog.show("Warning",m.getLocalization("textboxDataLossOnToggle"),"","","","",_f81,_f82);}});m.connect("adr_2","onChange",function(){_f80="adr_2";});m.connect("adr_3","onClick",function(){if(!m.hasTextBoxLogicalValue()){m.toggleADR();}else{m.dialog.show("Warning",m.getLocalization("textboxDataLossOnToggle"),"","","","",_f81,_f82);}});m.connect("adr_3","onChange",function(){_f80="adr_3";});m.connect("narrative_description_goods_popup","onKeyPress",function(evnt){var _f83;_f83=dj.byId("adr_1").get("value")=="ADD"?5:8;if((evnt.keyCode!==dojo.keys.LEFT_ARROW&&(evnt.keyCode!==dojo.keys.RIGHT_ARROW))&&((this.domNode.selectionStart<_f83)||((this.domNode.selectionEnd==_f83)&&(evnt.keyCode===dojo.keys.BACKSPACE)))){evnt.preventDefault();}});}if(misys._config.swiftExtendedNarrativeEnabled){m.setValidation("narrative_description_goods_popup",m.validatePopupDataLength);}else{m.setValidation("narrative_description_goods_popup",m.validatePopupData);}m.connect("addAmendmentButton","onClick",function(){if(m.hasTextBoxLogicalValue()){m.onSaveSizeAndSwiftValidation();}});};m.dialog.show("URL","",_f77,null,_f7d,m.getServletURL(url.join("")),null,null,_f79);},hasTextBoxLogicalValue:function(){if(dj.byId("narrative_description_goods_popup").disabled||dj.byId("narrative_description_goods_popup").get("value")==="/ADD/"||dj.byId("narrative_description_goods_popup").get("value")==="/DELETE/"||dj.byId("narrative_description_goods_popup").get("value")==="/REPALL/"){return false;}return true;},onSaveSizeAndSwiftValidation:function(){var _f84=dj.byId("narrative_description_goods_popup").get("value");var _f85="";if(dj.byId("adv_send_mode")){_f85=dj.byId("adv_send_mode").get("value");}var _f86=dj.byId("swiftregexzcharValue").get("value");if(_f85!=="01"||_f84===null||_f84===""){m._config.isZCharValid=true;m.toggleNarrativeDivStatus(true);}else{var _f87=_f84;var _f88=new RegExp(_f86);m._config.isZCharValid=_f88.test(_f87);}dj.byId("narrative_description_goods_popup").set("value",dojox.html.entities.encode(dj.byId("narrative_description_goods_popup").get("value"),dojox.html.entities.html));var _f89=function(){dj.byId("amendments").createDataGrid();if(m._config.codeword_enabled==true){m.toggleADR();}else{if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]=="REPALL"){dj.byId("narrative_description_goods_popup").set("disabled",true);}}};var _f8a=function(){var _f8b=dj.byId("narrative_description_goods_popup").get("value");if(m.validatePopupData()){dj.byId("amendments").createDataGrid();}if(m._config.codeword_enabled==true){m.toggleADR();m._config.swiftExtendedNarrativeEnabled?"":dj.byId("narrative_description_goods_popup").set("value",_f8b);}else{if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]=="REPALL"){dj.byId("narrative_description_goods_popup").set("disabled",true);}}};if(!m._config.isZCharValid){if(m.validatePopupData()){var _f8c;if(document.getElementById("_userType")){_f8c=document.getElementById("_userType").getAttribute("value");}if(_f8c=="03"||_f8c=="06"){m.dialog.show("CONFIRMATION",m.getLocalization("invalidSWIFTTransactionValidValuesWithExt"),"","","","",_f89);}else{m.dialog.show("Warning",m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),"","","","",_f89);}m.toggleNarrativeDivStatus(true);}else{m.dialog.show("ERROR",m.getLocalization("invalidSWIFTTPopupValueLength"),"","","","",_f8a);}}else{if(m._config.isZCharValid){if(dj.byId("narrative_description_goods_popup").state==="Error"){m.toggleNarrativeDivStatus(false);if(m._config.swiftExtendedNarrativeEnabled){m.dialog.show("Warning",m.getLocalization("invalidSWIFTTPopupValueSize"),"","","","",_f89);}else{m.dialog.show("ERROR",m.getLocalization("invalidSWIFTTPopupValueLength"),"","","","",_f8a);}}else{dj.byId("amendments").createDataGrid();if(m._config.codeword_enabled==true){m.toggleADR();}else{if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]=="REPALL"){dj.byId("narrative_description_goods_popup").set("disabled",true);}}m.toggleNarrativeDivStatus(true);}}}},toggleNarrativeDivStatus:function(_f8d,_f8e){var _f8f=["tabNarrativeDescriptionGoods","tabNarrativeDocumentsRequired","tabNarrativeAdditionalInstructions","tabNarrativeSpecialBeneficiary","tabNarrativeSpecialReceivingBank"];var _f90=_f8d?"solid 1px #B8B8B8":"solid 1px #d46464";if(_f8e==""||_f8e==undefined){for(var itr=0;itr<_f8f.length;itr++){if(document.getElementById(_f8f[itr])!=null){document.getElementById(_f8f[itr]).status=_f8d;document.getElementById(_f8f[itr]).style.border=_f90;}}}else{document.getElementById(_f8e).status=_f8d;document.getElementById(_f8e).style.border=_f90;}if(document.getElementById("tabNarrativeDescriptionGoods")!=null||document.getElementById("tabNarrativeDocumentsRequired")!=null||document.getElementById("tabNarrativeAdditionalInstructions")!=null||document.getElementById("tabNarrativeSpecialBeneficiary")!=null||document.getElementById("tabNarrativeSpecialReceivingBank")!=null){m.initDivMouseOver();}},validatePopupDataLength:function(){var _f91=0,_f92=0,_f93=0,i=0,_f94=0,_f95=0;var _f96=[m._config.narrativeDescGoodsDataStore,m._config.narrativeDocsReqDataStore,m._config.narrativeAddInstrDataStore,m._config.narrativeSpBeneDataStore,m._config.narrativeSpRecvbankDataStore];var _f97=["narrative_amend_goods","narrative_amend_docs","narrative_amend_instructions","narrative_amend_sp_beneficiary","narrative_amend_sp_recvbank"];var _f98=_f97.indexOf(m._config.narrativeId);var _f99=dj.byId("adv_send_mode")?dj.byId("adv_send_mode").get("value"):"";if(_f99!=="01"){return true;}for(var itr=0;itr<5;itr++){if(_f96[itr]&&(itr!=_f98&&_f98!=-1)){i=0;d.forEach(_f96[itr],function(){if(_f96[itr][i]&&_f96[itr][i]!==null){_f96[itr][i].content[0].replace(/&#xa;/g,"\n");_f92+=_f96[itr][i].content[0].length;_f94+=_f96[itr][i].text_size[0];}i++;});}}if(dijit.byId("amendments")&&!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems){for(var v=0;v<dijit.byId("amendments").store._arrayOfAllItems.length;v++){if(dijit.byId("amendments").store._arrayOfAllItems[v]!==null){_f93+=dijit.byId("amendments").store._arrayOfAllItems[v].content?dijit.byId("amendments").store._arrayOfAllItems[v].content[0].length:0;_f93+=dijit.byId("amendments").store._arrayOfAllItems[v].verb?("/"+dijit.byId("amendments").store._arrayOfAllItems[v].verb[0]+"/").length:0;_f95+=dijit.byId("amendments").store._arrayOfAllItems[v].text_size[0];}}}if(dj.byId("narrative_description_goods_popup")){_f91=(!m.hasTextBoxLogicalValue())?0:dj.byId("narrative_description_goods_popup").get("value").length;_d10=(misys._config.is798=="Y"?792:800)*65;_d12=_f93+_f91;_d14=m.validateExtendedNarrativeSwift2018(dj.byId("narrative_description_goods_popup").get("value"),_f95,misys._config.is798,true);}_d13=m.validateExtendedNarrativeSwift2018(dj.byId("narrative_description_goods_popup").get("value"),(_f95+_f94),misys._config.is798,false);_d0f=(misys._config.is798=="Y"?992:1000)*65;_d11=(_f93+_f92+_f91);if(!_d14){this.invalidMessage=m.getLocalization("invalidSingleFieldLength",[_d10,_d12]);}else{this.invalidMessage=m.getLocalization("invalidFieldSizeError",[_d0f,_d11]);}return _d14&&_d13;},validatePopupData:function(){var _f9a=true;if(m._config.swiftExtendedNarrativeEnabled){return _f9a;}var _f9b=0,_f9c=0,_f9d=0;if(dijit.byId("amendments")&&!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems){for(var w=0;w<dijit.byId("amendments").store._arrayOfAllItems.length;w++){if(dijit.byId("amendments").store._arrayOfAllItems[w]!==null){_f9c+=dijit.byId("amendments").store._arrayOfAllItems[w].content?dijit.byId("amendments").store._arrayOfAllItems[w].content[0].length:0;_f9c+=dijit.byId("amendments").store._arrayOfAllItems[w].verb?("/"+dijit.byId("amendments").store._arrayOfAllItems[w].verb[0]+"/").length:0;_f9d+=dijit.byId("amendments").store._arrayOfAllItems[w].text_size[0];}}}if(dj.byId("narrative_description_goods_popup")){_f9b=(!m.hasTextBoxLogicalValue())?0:dj.byId("narrative_description_goods_popup").get("value").length;}_d0f=100*65;_d11=_f9b+_f9c;this.invalidMessage=m.getLocalization("invalidFieldSizeError",[_d0f,_d11]);return m.validateExtendedNarrativeSwift2018(dj.byId("narrative_description_goods_popup").get("value"),_f9d,false);},showTruncatedGridData:function(_f9e,_f9f){var _fa0=null;if(_f9e!==""&&_f9e!==null){_fa0="<p style=\"white-space: pre-wrap;\">";var _fa1=_f9e.split(/\n/);var _fa2=_fa1.length>_f9f?_f9f:_fa1.length;for(var i=0;i<_fa2;i++){_fa0=_fa0+_fa1[i]+"\n";}if(_fa1.length>_f9f){var tail=".....";_fa0=_fa0.trim()+tail;}_fa0+="</p>";}return _fa0;},showExtendedNarrativeView:function(type,_fa3,_fa4,_fa5,_fa6){if(dj.byId(_fa6)){var msg=dojox.html.entities.encode(dj.byId(_fa6).get("value"),dojox.html.entities.html);msg=_d15(msg);msg="<div style='width: auto; height: 400px;  overflow:auto'>"+msg+"</div>";}else{if(_fa5!="gridPreviewOverlay"){msg=_fa5;msg=_d18(msg);msg="<div style='height: 400px;width: auto; overflow:auto'>"+msg+"</div>";}else{if(_fa5=="gridPreviewOverlay"){msg="";_fa4="Current Amendment";if(dijit.byId("amendments").store){for(var i=0;i<dijit.byId("amendments").store._arrayOfAllItems.length;i++){if(dijit.byId("amendments").store._arrayOfAllItems[i]){var _fa7=dijit.byId("amendments").store._arrayOfAllItems[i].verb[0];var _fa8="";if(_fa7==="ADD"){_fa8=misys.getLocalization("add");}else{if(_fa7==="DELETE"){_fa8=misys.getLocalization("delete");}else{if(_fa7==="REPALL"){_fa8=misys.getLocalization("repall");}}}msg+="<b>"+"/"+_fa8+"/"+"</b>";msg+=_d18(dijit.byId("amendments").store._arrayOfAllItems[i].content[0]);}msg+="<div style='height: 8px; background-color: #FFFFFF'><div style='height: 1px; background-color: ##808080'></div></div>";}}else{msg=m.getLocalization("emptyAmendmentGrid");}msg="<div style='width: auto; height: 400px; overflow:auto'>"+msg+"</div>";}}}m.dialog.show("EXTENDED-VIEW",msg,_fa4);},showLocalizationDialog:function(id,_fa9){dj.byId("xsl_name").value=id;dj.byId("new_title").set("value",_fa9);dj.byId("localizationDialog").show();},undoLocalization:function(){dj.byId("new_title").set("value","");m.submitLocalization();},submitLocalization:function(){var _faa=dj.byId("xsl_name").value;var _fab=dj.byId("new_title").value;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/UpdateLocalizationAction"),sync:true,handleAs:"json",content:{XSLNAME:_faa,NEWNAME:_fab},load:function(_fac,args){},error:function(_fad,args){console.error("[misys.grid._base] Country Validation error",_fad);}});dj.byId("localizationDialog").hide();location.reload();},showSearchTransactionsDialog:function(_fae,_faf,_fb0){var url=[m.getServletURL("/screen/AjaxScreen/action/ListOfTransactionsAction")];url.push("?companyid=",_fae,_d05,_faf,"&referenceid=",_fb0);d.style("linkedTransaction_dialog","width","650px");d.create("div",{id:"transaction_div"},"linkedTransaction_div");if(!dj.byId("transaction_Grid")){_d29(url.join(""),"transaction_div");}dj.byId("linkedTransaction_dialog").show();d.style("linkedTransaction_dialog","height","225px");},deleteTransactions:function(){dj.byId("imp_bill_ref_id").set("value","");dj.byId("transaction_Grid").selection.clear();d.byId("TransactionLink").innerHTML=m.getLocalization("NoTransactionLink");},createRteEditor:function(_fb1,_fb2){var _fb3=dj.byId(_fb2);if(!_fb3){var _fb4=d.byId(_fb2);var _fb5=d.byId("rteContent").innerHTML;_fb3=new dj.Editor({id:_fb2,name:_fb2,rows:"13",cols:"40",maxSize:"300",plugins:["undo","redo","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","|","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","||",{name:"dijit._editor.plugins.FontChoice",command:"fontName"},{name:"misys.editor.plugins.ProductFieldChoice",command:"misysEditorPluginsProductFieldChoice",product:_fb1}]},_fb4);_fb5=_fb5.replace(/&lt;/g,"<");_fb5=_fb5.replace(/&gt;/g,">");_fb5=_fb5.replace(/&amp;/g,"&");_fb5=_fb5.replace(/&quot;/g,"\"");_fb3.set("value",_fb5?_fb5:"");}},toggleBankGrids:function(){var _fb6=dj.byId("bankRadioId");if(_fb6.checked){m.animate("wipeOut",d.byId("bank_swift_data"),function(){m.animate("wipeIn",d.byId("bankdata"));dijit.byId("bankdata_grid").resize();});}else{m.animate("wipeOut",d.byId("bankdata"),function(){m.animate("wipeOut",d.byId("contentPaneContainer"));m.animate("wipeIn",d.byId("bank_swift_data"));d.query("#bankTypeContainer .dojoxGrid").forEach(function(grid){var _fb7=dj.byId(grid.id);if(_fb7){_fb7.resize();}});});}},toggleFieldSetContent:function(_fb8,_fb9,_fba){var _fbb=d.byId(_fb9+"_img_down");var _fbc=d.byId(_fb9+"_img_up");if(_fba==="down"){m.animate("wipeIn",_fb8);d.style(_fbb,"display","none");d.style(_fbc,"display","block");d.style(_fbc,"cursor","pointer");}else{m.animate("wipeOut",_fb8);d.style(_fbc,"display","none");d.style(_fbb,"display","block");d.style(_fbb,"cursor","pointer");}},toggleEyeSetContent:function(_fbd,_fbe,_fbf,_fc0,_fc1){var _fc2=d.byId(_fbe+"_eye_down");var _fc3=d.byId(_fbe+"_eye_up");if(_fbf==="down"){d.style(_fc2,"display","none");d.style(_fc3,"display","inline");d.style(_fc3,"cursor","pointer");document.getElementById(_fc1).getElementsByClassName("content")[0].innerHTML=_fc0;}else{d.style(_fc3,"display","none");d.style(_fc2,"display","inline");d.style(_fc2,"cursor","pointer");document.getElementById(_fc1).getElementsByClassName("content")[0].innerHTML="************";}},toggleClassInlineBlock:function(_fc4,show){if(show===true){d.removeClass(_fc4,"hide");d.addClass(_fc4,"inlineBlock");}else{d.removeClass(_fc4,"inlineBlock");d.addClass(_fc4,"hide");}},toggleFieldsReadOnly:function(_fc5,_fc6,_fc7){d.forEach(_fc5,function(node){if(dj.byId(node)){if(_fc7){dj.byId(node).set("value","");}dj.byId(node).set("readOnly",_fc6);}});},disableFields:function(_fc8,_fc9){d.forEach(_fc8,function(node){if(dj.byId(node)){dj.byId(node).set("disabled",_fc9);}});},generateEsignRequestTransaction:function(_fca,_fcb){var _fcc=function(){_fcb=_fcb+"&prodCode="+m._config.productCode;dj.byId("realform_operation").set("value",_fca);dj.byId("option").set("value","");dj.byId("tnxtype").set("value","");dj.byId("realform").set("action",_fcb);dj.byId("realform").submit();};m.dialog.show("CONFIRMATION",m.getLocalization("generateEsignRequest"),"",_fcc);},proxyAuthoriseTransaction:function(_fcd,_fce){var _fcf=function(){_fce=_fce+"&prodCode="+m._config.productCode;dj.byId("realform_operation").set("value",_fcd);dj.byId("option").set("value","");dj.byId("tnxtype").set("value","");dj.byId("realform").set("action",_fce);dj.byId("realform").submit();};m.dialog.show("CONFIRMATION",m.getLocalization("proxyAuthorise"),"",_fcf);},toggleGuaranteeType:function(){var _fd0=d.byId("bgtypedetails-editor");if(this.get("value")==="99"){m.animate("fadeIn",_fd0);}else{m.animate("fadeOut",_fd0);}},getIncoYear:function(){var _fd1=null;var _fd2=dj.byId("inco_term_year");var _fd3=dj.byId("issuing_bank_abbv_name")?dj.byId("issuing_bank_abbv_name").get("value"):"";var _fd4=dj.byId("remitting_bank_abbv_name")?dj.byId("remitting_bank_abbv_name").get("value"):"";var _fd5=dj.byId("advising_bank_abbv_name")?dj.byId("advising_bank_abbv_name").get("value"):"";if(_fd3!=""){_fd1=misys._config.incoTermYearMap[_fd3];}else{if(_fd4!=""){_fd1=misys._config.incoTermYearMap[_fd4];}else{if(_fd5!=""){_fd1=misys._config.incoTermYearMap[_fd5];}else{_fd1=misys._config.incoTermYearMap[misys._config.bankAbbvNamePrefix];}}}var _fd6={"identifier":"id","items":[]};var _fd7=new dojo.data.ItemFileWriteStore({data:_fd6});if(_fd1!=undefined&&_fd1!=""){for(var j=0;j<_fd1.length;j++){_fd7.newItem({"id":_fd1[j].value,"name":_fd1[j].name});}if(_fd2){_fd2.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_fd7}});_fd2.store=_fd7;_fd2.set("disabled",false);_fd2.fetchProperties={sort:[{attribute:"name"}]};}}else{_fd2.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_fd7}});}var _fd8=dijit.byId("inco_term_year")?dijit.byId("inco_term_year").get("value"):"";var _fd9=_fd2.store._arrayOfAllItems;var flag=false;for(var i=0;i<_fd9.length;i++){if(_fd9[i]&&_fd9[i].name!=""&&_fd9[i].name==_fd8){flag=true;break;}}if(!flag){dijit.byId("inco_term_year").set("value","");dj.byId("inco_term").set("value","");}},getDeliveryTo:function(){var _fda=null;var _fdb=dj.byId("delivery_to");var _fdc=dj.byId("issuing_bank_abbv_name")?dj.byId("issuing_bank_abbv_name").get("value"):"";var _fdd=dj.byId("remitting_bank_abbv_name")?dj.byId("remitting_bank_abbv_name").get("value"):"";var _fde=dj.byId("advising_bank_abbv_name")?dj.byId("advising_bank_abbv_name").get("value"):"";if(_fdc!=""){_fda=misys._config.deliveryToMap[_fdc];}else{if(_fdd!=""){_fda=misys._config.deliveryToMap[_fdd];}else{if(_fde!=""){_fda=misys._config.deliveryToMap[_fde];}else{_fda=misys._config.deliveryToMap[misys._config.bankAbbvNamePrefix];}}}var _fdf={"identifier":"id","items":[]};var _fe0=new dojo.data.ItemFileWriteStore({data:_fdf});if(_fda!=undefined&&_fda!=""){for(var j=0;j<_fda.length;j++){_fe0.newItem({"id":_fda[j].value,"name":_fda[j].name});}if(_fdb){_fdb.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_fe0}});_fdb.store=_fe0;_fdb.set("disabled",false);_fdb.fetchProperties={sort:[{attribute:"name"}]};}}else{_fdb.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_fe0}});}var _fe1=dijit.byId("delivery_to")?dijit.byId("delivery_to").get("value"):"";var _fe2=_fdb.store._arrayOfAllItems;var flag=false;for(var i=0;i<_fe2.length;i++){if(_fe2[i]&&_fe2[i].id!=""&&_fe2[i].id==_fe1){flag=true;break;}}if(!flag){dijit.byId("delivery_to").set("value","");dj.byId("delivery_to").set("value","");}},getIncoTerm:function(){var _fe3=null;var _fe4=dj.byId("inco_term");var _fe5;var _fe6=dj.byId("issuing_bank_abbv_name")?dj.byId("issuing_bank_abbv_name").get("value"):"";var _fe7=dj.byId("remitting_bank_abbv_name")?dj.byId("remitting_bank_abbv_name").get("value"):"";var _fe8=dj.byId("advising_bank_abbv_name")?dj.byId("advising_bank_abbv_name").get("value"):"";if(_fe6!=""){_fe5=_fe6+":"+dj.byId("inco_term_year").get("value");}else{if(_fe7!=""){_fe5=_fe7+":"+dj.byId("inco_term_year").get("value");}else{if(_fe8!=""){_fe5=_fe8+":"+dj.byId("inco_term_year").get("value");}else{_fe5=misys._config.bankAbbvNamePrefix+":"+dj.byId("inco_term_year").get("value");}}}_fe3=misys._config.incoTermProductMap[_fe5];var _fe9={"identifier":"id","items":[]};var _fea=new dojo.data.ItemFileWriteStore({data:_fe9});if(_fe3!=undefined&&_fe3!=""){for(var j=0;j<_fe3.length;j++){_fea.newItem({"id":_fe3[j].value,"name":_fe3[j].name});}_fe4.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_fea}});if(_fe4){_fe4.store=_fea;}_fe4.set("disabled",false);_fe4.fetchProperties={sort:[{attribute:"name"}]};}else{_fe4.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_fea}});}if(dj.byId("inco_term_year").get("value")!==dj.byId("org_term_year").get("value")){dj.byId("inco_term").set("value","");dj.byId("org_term_year").set("value",dj.byId("inco_term_year").get("value"));}},checkForAttachments:function(){var _feb=dj.byId("attIds");var _fec=false;var _fed=0;if(_feb){var _fee=[dj.byId(_d0b)];d.forEach(_fee,function(_fef){if(_fef&&_fef.grid){var arr=_fef.grid.store._arrayOfAllItems;d.forEach(arr,function(_ff0,i){if(_ff0!=null){_fec=true;_fed++;}});}});}if(dj.byId(_d0b)&&dj.byId(_d0b).store){if(dj.byId(_d0b).store._arrayOfAllItems.length>0){return true;}}m._config.onSubmitErrorMsg=m.getLocalization("mandatoryMinimumFileUploadTypeError");return _fec;},hasAttachments:function(){var _ff1=dj.byId("attIds");var _ff2=false;var _ff3=0;if(_ff1){var _ff4=[dj.byId(_d0b)];d.forEach(_ff4,function(_ff5){if(_ff5&&_ff5.grid){var arr=_ff5.grid.store._arrayOfAllItems;d.forEach(arr,function(_ff6,i){if(_ff6!=null){_ff2=true;_ff3++;}});}});}return _ff2;},toggleMT798Fields:function(_ff7){var _ff8=dj.byId(_ff7).get("value");var _ff9="";if(dj.byId("adv_send_mode")){_ff9=dj.byId("adv_send_mode").get("value");}var _ffa=m._config.customerBanksMT798Channel[_ff8]===true&&_ff9==="01";m.toggleFields(_ffa,["delivery_channel","transport_mode_nosend","transport_mode"],null,false,false);m.toggleFields(_ffa&&m.hasAttachments(),null,["delivery_channel"],false,false);if(_ffa){if(dj.byId("delivery_channel")){m.animate("fadeIn","delivery_channel_row");m.connect("delivery_channel","onChange",function(){if(dj.byId(_d0b)){if(dj.byId("delivery_channel").get("value")==="FACT"){dj.byId(_d0b).displayFileAct(true);}else{dj.byId(_d0b).displayFileAct(false);}}});dj.byId("delivery_channel").onChange();}if(dj.byId("transport_mode")){m.animate("fadeIn","transport_mode_nosend_row");m.animate("fadeIn","transport_mode_text_nosend_row");}}else{if(dj.byId("delivery_channel")){m.animate("fadeOut","delivery_channel_row");}if(dj.byId("transport_mode")){m.animate("fadeOut","transport_mode_nosend_row");m.animate("fadeOut","transport_mode_text_nosend_row");}}},setRenewalFinalExpiryDate:function(){var _ffb=calculateRenewalFinalExpiryDate();if(_ffb){dj.byId("final_expiry_date").set("value",_ffb);}if(!isPreCondStsfd){var _ffc=dj.byId("final_expiry_date");if(_ffc&&_ffc.get("value")!==""){_ffc.set("value",new Date().getHours());}}},calculateRenewalFinalExpiryDate:function(){var _ffd=dj.byId("renew_on_code")?dj.byId("renew_on_code").get("value"):"";var _ffe=dj.byId("renewal_calendar_date")?dj.byId("renewal_calendar_date").get("value"):"";var _fff=dj.byId("renew_for_nb")?dj.byId("renew_for_nb").get("value"):"";var _1000=dj.byId("renew_for_period")?dj.byId("renew_for_period").get("value"):"";var _1001=dj.byId("rolling_renewal_nb")?dj.byId("rolling_renewal_nb").get("value"):"";var _1002=null;var _1003=null;var _1004=true;var _1005=null;if(_ffd==="01"){_1003=dj.byId("exp_date")?dj.byId("exp_date").get("value"):"";var _1006=dj.byId("org_exp_date")?dj.byId("org_exp_date"):"";if(!_1003&&_1006){_1003=dojo.date.locale.parse(_1006.get("value"),{locale:dojo.config.locale,formatLength:"short",selector:"date"});}if(_1003==null){_1004=false;}}else{if(_ffd==="02"){_1003=_ffe;if(_1003==null){_1004=false;}}else{_1004=false;}}if(_fff==null||_fff===""||isNaN(_fff)){_1004=false;}if(_1000==null||_1000===""){_1004=false;}if(_1001==null||_1001===""||isNaN(_1001)){_1004=false;}if(_1004&&_1001){switch(_1000){case "D":_1002=d.date.add(_1003,"day",_1001*_fff);break;case "W":_1002=d.date.add(_1003,"week",_1001*_fff);break;case "M":_1002=d.date.add(_1003,"month",_1001*_fff);break;case "Y":_1002=d.date.add(_1003,"year",_1001*_fff);break;default:break;}if(_1002){_1005=new Date(_1002.getTime());_1005=_1005.getDate()+"/"+(_1005.getMonth()+1)+"/"+_1005.getFullYear();var _1007=new Date(_1002.getTime());dj.byId("final_expiry_date").set("value",_1007);}}return _1005;},calculateFinalExpiryDate:function(){var _1008=dj.byId("renew_on_code")?dj.byId("renew_on_code").get("value"):"";var _1009=dj.byId("renewal_calendar_date")?dj.byId("renewal_calendar_date").get("value"):"";var _100a=dj.byId("renew_for_nb")?dj.byId("renew_for_nb").get("value"):"";var _100b=dj.byId("renew_for_period")?dj.byId("renew_for_period").get("value"):"";var _100c=dj.byId("rolling_renewal_nb")?dj.byId("rolling_renewal_nb").get("value"):"";var _100d=null;var _100e=null;var _100f=true;if(_1008==="01"){_100e=dj.byId("exp_date")?dj.byId("exp_date").get("value"):"";var _1010=dj.byId("org_exp_date")?dj.byId("org_exp_date"):"";if(!_100e&&_1010){_100e=dojo.date.locale.parse(_1010.get("value"),{locale:dojo.config.locale,formatLength:"short",selector:"date"});}if(_100e==null){_100f=false;}}else{if(_1008==="02"){_100e=_1009;if(_100e==null){_100f=false;}}else{_100f=false;}}if(_100a==null||_100a===""||isNaN(_100a)){_100f=false;}if(_100b==null||_100b===""){_100f=false;}if(_100c==null||_100c===""||isNaN(_100c)){_100f=false;}if(_100f&&_100c){switch(_100b){case "D":_100d=d.date.add(_100e,"day",_100c*_100a);break;case "W":_100d=d.date.add(_100e,"week",_100c*_100a);break;case "M":_100d=d.date.add(_100e,"month",_100c*_100a);break;case "Y":_100d=d.date.add(_100e,"year",_100c*_100a);break;default:break;}if(_100d){var _1011=new Date(_100d.getTime());}}return _1011;},markWidgetAsLoading:function(_1012,_1013){var _1014=_1012+"_id_loading_span";if(dj.byId(_1012)){var _1015;if(_1013){if(!d.byId(_1014)){dj.byId(_1012).set("disabled",true);var _1016="<img src=\""+m._config["context"]+m._config["imagesSrc"]+"loading.gif\"/>";_1015=d.create("span",{innerHTML:_1016,id:_1014},dj.byId(_1012).domNode,"after");dj.byId(_1012).set("loadingIconDomNode",_1015);}}else{_1015=dj.byId(_1012).get("loadingIconDomNode");dj.byId(_1012).set("loadingIconDomNode",null);d.destroy(_1015);dj.byId(_1012).set("disabled",false);}}},populateFacilityReference:function(_1017){var _1018=_1017.get("value"),_1019="_",_101a=_1017.id.split(_1019),_101b=_101a[0]+_1019+_101a[1],_101c=dj.byId(_101b+"_abbv_name")?dj.byId(_101b+"_abbv_name").get("value"):"",_101d=dj.byId("entity")?dj.byId("entity").get("value"):"",_101e=dj.byId("facility_id"),_101f=[],_1020=d.byId("facilityLimitDetail");if(_1018+"S"!=="S"&&m._config.facilityReferenceCollection&&m._config.facilityReferenceCollection[_1018]&&_101e&&_1020&&m._config.facilityReferenceCollection[_1018][_101c+"_"+_101d]){_101e.set("displayedValue","");_101f=m._config.facilityReferenceCollection[_1018][_101c+"_"+_101d];if(_101f){_101e.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_101f}});m.animate("wipeIn",_1020);if(dj.byId("facility_mandatory")&&dj.byId("facility_mandatory").get("value")==="true"){m.toggleRequired("facility_id",true);}if(m._config.limitFieldIdCollection){_d31();dj.byId("limit_id").set("displayedValue","");if(!m._config.isLoading&&dj.byId("limit_reference")&&dj.byId("limit_reference").get("value")+"S"!=="S"){dj.byId("limit_reference").set("value","");}}}}else{m.animate("wipeOut",_1020);m.toggleRequired("facility_id",false);}},getLimitDetails:function(_1021){var _1022=dj.byId("facility_date"),_1023=dj.byId("facility_reference"),_1024=dj.byId("facility_id");if(_1022&&_1024){if(m._config.facilityReviewDateCollection&&m._config.facilityReviewDateCollection[_1024.get("displayedValue")]){_1022.set("displayedValue",m._config.facilityReviewDateCollection[_1024.get("displayedValue")]);}else{_1022.set("displayedValue","");}}if(_1023){_1023.set("value",dj.byId("facility_id").get("displayedValue"));}var _1025=dj.byId("entity")?dj.byId("entity").get("value"):"",_1026=m._config.productCode.toLowerCase()+"_type_code",_1027=_1024?_1024.get("value"):"",_1028=_1023?_1023.get("displayedValue"):"",_1029=dj.byId(_1026)?dj.byId(_1026).get("value"):"",_102a=dj.byId("beneficiary_country")?dj.byId("beneficiary_country").get("value"):"";if(_1021||(_102a!=="")){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetLimitsJSONDataAction"),handleAs:"json",sync:true,content:{facility:_1028,facilityId:_1027,productCode:m._config.productCode,entity:_1025,subProduct:"",productTypeCode:_1029,beneficiary:"",beneficiaryCountry:_102a},load:_d34});var _102b=dj.byId("limit_id"),_102c=dj.byId("limit_reference");if(_102c&&_102b&&_102b.get("value")+"S"==="S"){_102b.set("displayedValue",_102c.get("value"));}else{if(_102b){_102b.set("displayedValue","");}}_d31();}},setLimitFieldsValue:function(){var _102d=this.get("displayedValue"),_102e=m._config.limitFieldIdCollection,_102f=m._config.limitCollection[_102d];if(dj.byId("limit_reference")){dj.byId("limit_reference").set("value",this.get("displayedValue"));}d.forEach(_102e,function(id,index){var obj=dj.byId(id);if(obj&&_102f){if(obj.declaredClass==="dijit.form.DateTextBox"){obj.set("displayedValue",_102f[index]);}else{obj.set("value",_102f[index]);}}else{if(obj){obj.set("displayedValue","");}}});},validateLimitBookingAmount:function(event){var _1030=dj.byId(m._config.productCode.toLowerCase()+"_amt"),_1031=dj.byId(m._config.productCode.toLocaleLowerCase()+"_cur_code"),_1032=dj.byId("limit_outstanding_cur_code"),_1033=dj.byId("limit_outstanding_amount"),_1034=dj.byId("facility_outstanding_cur_code"),_1035=dj.byId("facility_outstanding_amount"),_1036=dj.byId("booking_amt"),_1037="";if(!m._config.isLoading){if(this.id&&this.id!=="booking_amt"&&_1036){_1036.set("value","");}if(_1030&&_1031&&_1032&&_1033&&_1034&&_1035&&_1036){var _1038=_1030.get("value"),_1039=_1033.get("value"),_103a=_1035.get("value"),_103b=_1032.get("value"),_103c=_1031.get("value"),_103d=_1034.get("value"),_103e=_1036.get("value"),_103f=true,_1040=true,_1041="";if(_103b!==""&&_103c!==""&&_103d!==""){if(_103b!==_103c){_1037=_103c+"_"+_103b+"_limit,";}if(_103d!==_103b){_1037=_1037+_103d+"_"+_103b+"_facility";}if(_1037+"S"!=="S"){m.getCurrencyRateForFacility(_1037);if(isNaN(_103e)||_103e===""||(event!==undefined&&event==="true")){if(m._config.limitRate){_103e=_1038*m._config.limitRate;_1036.attr("value",_103e,false);dj.byId("tol_booking_amt").attr("value",_103e,false);}if(isNaN(_103e)||_103e===""||(event!==undefined&&event==="true"&&_1038<_103e)){_1036.attr("value",_103e,false);dj.byId("tol_booking_amt").attr("value",_103e,false);}if(dj.byId("pstv_tol_pct")&&(!isNaN(dj.byId("pstv_tol_pct").get("value")))){_103e=_103e+_103e*(dj.byId("pstv_tol_pct").get("value")/100);_1036.attr("value",_103e,false);dj.byId("tol_booking_amt").attr("value",_103e,false);}}if(_103e>dj.byId("tol_booking_amt")?dj.byId("tol_booking_amt").get("value"):0){_103f=false;_1041=m.getLocalization("invalidBookingAmountTnx");}if(_103f&&_103e>_1039){_103f=false;if(m._config.limitRate!==1){_1041=m.getLocalization("invalidBookingAmountCurrency",["Limit",_103c+"/"+_103b]);}else{_1041=m.getLocalization("invalidBookingAmount",["Limit"]);}}if(_103f&&_103e>_103a*m._config.facilityRate){_103f=false;if(m._config.facilityRate!==1){_1041=m.getLocalization("invalidBookingAmountCurrency",["Facility",_103d+"/"+_103b]);}else{_1041=m.getLocalization("invalidBookingAmount",["Limit"]);}}if(m._config.validate_tnxamt_with_limit_outstanding){if(_103f&&dj.byId("tol_booking_amt").get("value")>_1039){_103f=false;_1040=false;_1041=m.getLocalization("invalidTnxAmount");}}}else{if(isNaN(_103e)||_103e===""||(event!==undefined&&event==="true")){if(isNaN(_103e)||_103e===""||(event!==undefined&&event==="true"&&_1038<_103e)){_103e=_1038;if(dj.byId("pstv_tol_pct")&&(!isNaN(dj.byId("pstv_tol_pct").get("value")))){_103e=_103e+_103e*(dj.byId("pstv_tol_pct").get("value")/100);}_1036.attr("value",_103e,false);dj.byId("tol_booking_amt").attr("value",_103e,false);}if(dj.byId("pstv_tol_pct")&&(!isNaN(dj.byId("pstv_tol_pct").get("value")))){_103e=_1038;_103e=_103e+_103e*(dj.byId("pstv_tol_pct").get("value")/100);_1036.attr("value",_103e,false);dj.byId("tol_booking_amt").attr("value",_103e,false);}}if(_103e>dj.byId("tol_booking_amt")?dj.byId("tol_booking_amt").get("value"):0){_103f=false;_1041=m.getLocalization("invalidBookingAmountTnx");}if(_103f&&_103e>_1039){_103f=false;_1041=m.getLocalization("invalidBookingAmount",["Limit"]);}if(_103f&&_103e>_103a){_103f=false;_1041=m.getLocalization("invalidBookingAmount",["Facility"]);}if(m._config.validate_tnxamt_with_limit_outstanding){if(_103f&&dj.byId("tol_booking_amt").get("value")>_1039){_103f=false;_1040=false;_1041=m.getLocalization("invalidTnxAmount");}}}}if(!_103f){var _1042;if(!_1040){dj.hideTooltip(_1030.domNode);_1042=function(){_1030.focus();_1030.set("state","Error");dj.showTooltip(_1041,_1030.domNode,0);};}else{dj.hideTooltip(_1036.domNode);_1042=function(){_1036.focus();_1036.set("state","Error");dj.showTooltip(_1041,_1036.domNode,0);};}m.dialog.show("ERROR",_1041,"",_1042);return false;}}}else{if(this.id==="limit_id"){m._config.isLoading=false;}}return true;},getCurrencyRateForFacility:function(_1043){var _1044=dijit.byId("recipient_bank_abbv_name");m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetMidRateForLimitAction"),handleAs:"json",sync:true,content:{currency:_1043,bank_abbv_name:_1044},load:function(_1045,args){m._config.limitRate=_1045.limit?_1045.limit:1;m._config.facilityRate=_1045.facility?_1045.facility:1;m._config.rateType=_1045.rateType?_1045.rateType:1;}});},getUserDetails:function(_1046,_1047){var _1048=m.formToXML({selector:".validate",xmlRoot:m._config.xmlTagName,ignoreDisabled:true});m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetUserDetails"),handleAs:"json",sync:true,content:{login_id:_1046,user_id:_1047,xmlString:_1048},load:_d3c});},getDynamicNarrativeText:function(_1049,_104a){var _104b=m.formToXML({selector:".validate",xmlRoot:m._config.xmlTagName,ignoreDisabled:true});var _104c=dijit.byId("product_code")?dijit.byId("product_code").get("value"):"";m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetDynamicNarrativeText"),handleAs:"json",sync:true,content:{phrase_id:_104a,field:_1049,xmlString:_104b,product_code:_104c},load:_d37});},togglePhraseProducts:function(){var _104d=dj.byId("phrase_type")?dj.byId("phrase_type").get("value"):dj.byId("type").get("value"),_104e=dj.byId("productcode")?dj.byId("productcode"):dj.byId("product"),_104f=m._config.phraseTypesProductMap[_104d];if(!misys._config.isModified){_104e.set("value","");}if(_104f){_104e.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_104f}});_104e.fetchProperties={sort:[{attribute:"name"}]};_104e.set("value","");_104e.focus();}},togglePhraseCategory:function(){var _1050=dj.byId("productcode")?dj.byId("productcode").get("value"):dj.byId("product").get("value"),_1051=dj.byId("category"),_1052=m._config.productCategoryMap[_1050];if(_1050!==""){if(_1052){_1051.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_1052}});_1051.fetchProperties={sort:[{attribute:"value"}]};_1051.set("value","");_1051.focus();_1051.set("state","Error");}else{_1052=m._config.productCategoryMap["ALL"];_1051.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_1052}});_1051.fetchProperties={sort:[{attribute:"value"}]};}}},getAjaxSearchData:function(id,_1053,opt,_1054){var count=0;var _1055=dijit.byId("product_code")?dijit.byId("product_code").get("value"):"";var _1056="[";dojo.forEach(_1053,function(field){var _1057=dj.byId(field);if(_1057&&_1057.state==="Error"){return;}if(count!==0){_1056=_1056+",";}count++;if(_1057){_1056=_1056+"'"+_1057.get("value")+"'";}else{_1056=_1056+"''";}});_1056=_1056+"]";var _1058="[";count=0;while(count!=(_1054.length-1)){_1058=_1058+"'"+_1054[count]+"',";count++;}_1058=_1058+"'"+_1054[count]+"']";m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetStaticDataSearchAction"),handleAs:"json",sync:true,content:{option:opt,store_id:id,"widget[]":_1058,productcode:_1055,"fields[]":_1056},load:_d83});},toggleMutuallyExclusiveFields:function(_1059){var _105a=true;var _105b=false;dojo.forEach(_1059,function(field){var _105c=dj.byId(field);if((_105c.declaredClass==="dijit.form.NumberTextBox")||(_105c.declaredClass==="misys.form.CurrencyTextBox")){if(_105c&&!_105b&&_105c.get("value")+""!=="NaN"){_105c.set("disabled",false);_105b=true;_105a=false;}else{_105c.set("disabled",true);}}else{if(_105c&&!_105b&&_105c.get("value")!==""){_105c.set("disabled",false);_105b=true;_105a=false;}else{_105c.set("disabled",true);}}});if(_105a){dojo.forEach(_1059,function(field){var _105d=dj.byId(field);if(_105d){_105d.set("disabled",false);}});}},toggleMutuallyExclusiveMandatoryFields:function(_105e){var _105f=true;var _1060=false;dojo.forEach(_105e,function(field){var _1061=dj.byId(field);if((_1061.declaredClass==="dijit.form.NumberTextBox")||(_1061.declaredClass==="misys.form.CurrencyTextBox")){if(_1061&&!_1060&&_1061.get("value")+""!=="NaN"){_1061.set("disabled",false);_1061.set("required",true);_1060=true;_105f=false;}else{_1061.set("disabled",true);_1061.set("required",false);}}else{if(_1061&&!_1060&&_1061.get("value")!==""){_1061.set("disabled",false);_1061.set("required",true);_1060=true;_105f=false;}else{_1061.set("disabled",true);_1061.set("required",false);}}});if(_105f){dojo.forEach(_105e,function(field){var _1062=dj.byId(field);if(_1062){_1062.set("disabled",false);_1062.set("required",true);}});}},getPrgmCpty:function(_1063){misys.showProgramCptyDialog("programCounterparty","['abbv_name','name']",_1063,"","width:400px;height:400px",m.getLocalization("TABLE_PROGRAM_CPTY_LIST"),"legal"==="popup");},toggleMutuallyInclusiveFields:function(_1064,_1065,_1066){var _1067=dj.byId(_1064);var _1068=dj.byId(_1065);if(_1066==="required"){if(_1067&&_1067.value!==""&&_1068){_1068.set("required",true);}else{if(_1067&&_1067.value===""&&_1068){_1068.set("required",false);}}}else{if(_1066==="disabled"){if(_1067&&_1067.disabled===true){_1068.set("disabled",true);_1068.set("value","");}else{if(_1067&&_1067.disabled===false){_1068.set("disabled",false);}}}}},toggleTransferIndicatorFlag:function(_1069){if(dj.byId("ntrf_flag").get("checked")){dj.byId("narrative_transfer_conditions").set("disabled",true);dj.byId("narrative_transfer_conditions").set("value","");document.getElementById("narrative_transfer_conditions_img").style.display="none";}else{dj.byId("narrative_transfer_conditions").set("disabled",false);dj.byId("narrative_transfer_conditions").set("value","");document.getElementById("narrative_transfer_conditions_img").style.display="block";}},toggleDeliverMode:function(_106a){if(dj.byId("delv_org").get("value")==="99"){dj.byId("delv_org_text").set("disabled",false);}else{dj.byId("delv_org_text").set("disabled",true);dj.byId("delv_org_text").set("value","");}},clearDateCache:function(){misys._config.dateCache=[];},setDraweeDetailBankName:function(){if((dj.byId("cr_avl_by_code_2")&&dj.byId("cr_avl_by_code_2").get("checked"))||(dj.byId("cr_avl_by_code_3")&&dj.byId("cr_avl_by_code_3").get("checked"))){dj.byId("drawee_details_bank_name").set("value",dj.byId("drawee_details_bank_name")._resetValue);}},escapeHtml:function(str){return str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,"&#39;");},showFSCMProgramIPCollectionDialog:function(type,_106b,_106c,_106d,_106e,title,_106f){var url=[],query={},_1070=_d07,_1071={},_1072="GetStaticData",_1073=_106d||_d08,_1074,_1075;if(_106e.slice(_106e.length-1)!==";"){_106e+=";";}_1070+=_1072;_1071.option=type;_1071.fields=_106b;d.mixin(_1071,_106c);url.push("/screen/",_1073);query.option=type;query.fields=_106b;d.mixin(query,_106c);query.dimensions=_106e;query.popupType="LIST_DATA";_1074=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_1070),_1071);m.connect("CurrencyName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["NAME"],["CurrencyName"]);}});};if(_106f){_1075=dj.byId("childXhrDialog")||new dj.Dialog({title:title,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:query}});m.dialog.connect(_1075,"onLoad",_1074);m.dialog.connect(_1075,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_1075);_1075.destroyRecursive();},2000);});var co=d.coords("xhrDialog");_1075._relativePosition={x:co.x+30,y:co.y+30};_1075.show();}else{m.dialog.show("URL","",title,null,_1074,m.getServletURL(url.join("")),null,null,query);}},clearDataOnclicTenortype2or3:function(){dj.byId("tenor_maturity_date").set("displayedValue","");dj.byId("tenor_days").set("value","");dj.byId("tenor_period").set("value","");dj.byId("tenor_from_after").set("value","");dj.byId("tenor_days_type").set("value","");dj.byId("tenor_type_details").set("value","");dj.byId("tenor_base_date").set("displayedValue","");},validateShipPeriod:function(){var _1076=dj.byId("ship_period");var _1077=_1076?_1076.get("value"):"";var _1078=(dijit.byId("narrative_shipment_period")&&dijit.byId("narrative_shipment_period").tabContainer)?dijit.byId("narrative_shipment_period").tabContainer:"";var _1079=(dijit.byId("narrative_shipment_period")&&dijit.byId("narrative_shipment_period").parentTab)?dijit.byId("narrative_shipment_period").parentTab:"";var _107a="";var _107b="";if(_1077==="01"){m.toggleRequired("earliest_ship_date",false);dj.byId("earliest_ship_date").set("displayedValue","");dj.byId("earliest_ship_date").set("disabled",true);m.toggleRequired("last_ship_date",false);dj.byId("last_ship_date").set("displayedValue","");dj.byId("last_ship_date").set("disabled",true);m.toggleRequired("narrative_shipment_period",true);dj.byId("narrative_shipment_period").set("disabled",false);dj.byId("narrative_shipment_period_img").set("required",true);if(_1078.length>0&&_1079.length>0){_107a=_1078.concat("_tablist_").concat(_1079);_107b=dj.byId(_107a).label?dj.byId(_107a).label:"";if(!_107b.includes("*")){dj.byId(_107a).set("label","*".concat(_107b));}}else{dj.byId("narrative_shipment_period_img").set("displayedValue","*");dj.byId("narrative_shipment_period_img").set("value",dj.byId("narrative_shipment_period_img").get("value"));}}else{if(_1077==="02"){m.toggleRequired("earliest_ship_date",false);dj.byId("earliest_ship_date").set("displayedValue","");dj.byId("earliest_ship_date").set("disabled",true);m.toggleRequired("last_ship_date",false);dj.byId("last_ship_date").set("disabled",false);m.toggleRequired("narrative_shipment_period",false);if(dj.byId("narrative_shipment_period")){dj.byId("narrative_shipment_period").set("displayedValue","");dj.byId("narrative_shipment_period").set("disabled",true);}if(dj.byId("narrative_shipment_period_img")){dj.byId("narrative_shipment_period_img").set("required",false);}if(_1078.length>0&&_1079.length>0){_107a=_1078.concat("_tablist_").concat(_1079);_107b=dj.byId(_107a).label;if(_107b.includes("*")){dj.byId(_107a).set("label",_107b.replace("*",""));}}}else{if(_1077==="03"){m.toggleRequired("earliest_ship_date",true);dj.byId("earliest_ship_date").set("disabled",false);m.toggleRequired("last_ship_date",true);dj.byId("last_ship_date").set("disabled",false);m.toggleRequired("narrative_shipment_period",false);dj.byId("narrative_shipment_period").set("value","");dj.byId("narrative_shipment_period").set("disabled",true);dj.byId("narrative_shipment_period_img").set("required",false);if(_1078.length>0&&_1079.length>0){_107a=_1078.concat("_tablist_").concat(_1079);_107b=dj.byId(_107a).label;if(_107b.includes("*")){dj.byId(_107a).set("label",_107b.replace("*",""));}}}}}}});d.ready(function(){d.mixin(m._config,{advisingBank:_d02,anyBank:"Any Bank",issuingBank:"Issuing Bank",other:"Other",namedBank:"Named Bank",firstPageLoad:false});});})(dojo,dijit,misys);}if(!dojo._hasResource["misys.form.file"]){dojo._hasResource["misys.form.file"]=true;dojo.provide("misys.form.file");(function(d,dj,m){var _107c=["txt","doc","pdf","gif","zip"],_107d="file_",_107e="file_ext",_107f=".gif",_1080,_1081;function _1082(_1083){var _1084=dj.byId(_1083);if(_1084&&_1084.validate()){_1084.execute();_1084.hide();m.isFormDirty=true;}};function _1085(){if(dj.byId("validation_type")){if(dj.byId("validation_type").get("value")===""){return "none";}else{return dj.byId("validation_type").get("value");}}};function _1086(){if(dj.byId("entity")){if(dj.byId("entity").get("value")===""){return "none";}else{return dj.byId("entity").get("value");}}else{return "";}};function _1087(){if(dj.byId("upload_file_type")){if(dj.byId("upload_file_type").get("value")===""){return "none";}else{return dj.byId("upload_file_type").get("value");}}};d.mixin(m,{formatFileActions:function(value,_1088){var outer=d.create("div"),_1089=d.create("div",{"class":"gridActions","style":"text-align:center"}),_108a=_1088;if(!_1080){_1080=m.getContextualURL(m._config.imagesSrc+m._config.imageStore.downloadIcon);}if(!_1081){_1081=m.getContextualURL(m._config.imagesSrc+m._config.imageStore.deleteIcon);}d.create("img",{src:_1080,alt:m.getLocalization("view_label"),onclick:"misys.downloadFile("+value+", '"+_108a+"')"},_1089);d.create("img",{src:_1081,alt:m.getLocalization("delete_label"),type:"remove"},_1089);d.place(_1089,outer);return outer.innerHTML;},formatFileViewActions:function(value,_108b){var outer=d.create("div"),_108c=d.create("div",{"class":"gridActions","style":"text-align:center"}),_108d=_108b;if(!_1080){_1080=m.getContextualURL(m._config.imagesSrc+m._config.imageStore.downloadIcon);}if(!_1081){_1081=m.getContextualURL(m._config.imagesSrc+m._config.imageStore.deleteIcon);}d.create("img",{src:_1080,alt:m.getLocalization("view_label"),onclick:"misys.downloadFile("+value+", '"+_108d+"')"},_108c);d.place(_108c,outer);return outer.innerHTML;},getFileIcon:function(_108e){var outer=d.create("div"),_108f=d.create("div",{"style":"text-align:center"}),found=false,ext,_1090=d.create("img",{alt:m.getLocalization("download")});var _1091=m._config.uploadservice_extensions_allowed;if((_108e.lastIndexOf(".")!==-1)&&(_108e.lastIndexOf(".")!==_108e.length-1)){ext=_108e.substring(_108e.lastIndexOf(".")+1).toLowerCase();for(var x=0,len=_1091.length;x<len;x++){if(ext===_1091[x]){found=true;d.attr(_1090,"src",m.getContextualURL(m._config.imagesSrc)+_107d+ext+_107f);break;}}}if(!found){d.attr(_1090,"src",m.getContextualURL(m._config.imagesSrc)+_107e+_107f);}d.place(_1090,_108f);d.place(_108f,outer);return outer.innerHTML;},uploadFile:function(_1092,_1093){var _1094=dj.byId("file"+_1093)?dj.byId("file"+_1093).domNode:d.byId("file"+_1093),_1095=dj.byId("file"+_1093)?dj.byId("file"+_1093).get("value"):_1094.value,_1096,_1097;if(dj.byId("file_name")){var _1098=_1095.replace(/^.*(\\|\/|\:)/,"");dj.byId("file_name").set("value",_1098);}if(dj.byId("file_title")&&dj.byId("file_title").get("value")==""){return false;}if(!_1095){m.showTooltip(m.getLocalization("mandatoryPathToFileError"),_1094);return false;}console.warn("[misys.form.file] Sending the request, with attachmentGroup '",_1093,+"'");m.dialog.show("PROGRESS",m.getLocalization("uploadingFile"));var _1099=(document.getElementById("file"+_1093)&&document.getElementById("file"+_1093).files&&document.getElementById("file"+_1093).files[0]&&document.getElementById("file"+_1093).files[0].name)?encodeURIComponent(document.getElementById("file"+_1093).files[0].name):"";if(""===_1099){_1099=encodeURIComponent(_1095);}d.io.iframe.send({url:m.getServletURL("/screen/GTPUploadScreen"),method:"post",handleAs:"json",content:{operation:"UPLOAD",identifier:"file"+_1093,file_name:_1099,att_ref_id:dj.byId("ref_id")?dj.byId("ref_id").get("value"):"",att_tnx_id:dj.byId("tnx_id")?dj.byId("tnx_id").get("value"):"",att_item_id:dj.byId("item_id")?dj.byId("item_id").get("value"):"",attachment_type:dj.byId("attachment_type")&&dj.byId("attachment_type").get("value")!==""?dj.byId("attachment_type").get("value"):"",validation_type:_1085(),entity:_1086(),fileType:_1087(),token:document.getElementById("_token").getAttribute("value"),attachmentgroup:_1093},form:d.byId("sendfiles"+_1093),handle:function(data,_109a){console.warn("[misys.form.file] Data response is",data);console.warn("[misys.form.file] io args are",_109a);console.warn("[misys.form.file] data.status is",data.status);if(data&&data.details&&data.details.file_name){data.details.file_name=data.details.file_name.replace(/^.*(\\|\/|\:)/,"");}else{if(data.details!==undefined&&data.details!==null){data.details.file_name=_1095.replace(/^.*(\\|\/|\:)/,"");}}dj.byId("alertDialog").hide();if(data.status==="success"){dj.byId("attachment_id"+_1093).set("value",data.details.id);dj.byId("file_type"+_1093).set("value",data.details.type);dj.byId("file_name"+_1093).set("value",data.details.file_name);dj.byId("file_title"+_1093).set("value",data.details.title);_1082(_1092);}else{var _109b=d.byId("alertDialog_underlay");if(_109b){d.style(_109b,"display","none");}if(data.details&&data.details.message&&data.details.message.length>0){m.dialog.show("ERROR",data.details.message);}else{if(data.details===undefined||data.details===null){_1097=m.getLocalization("fileSizeExceeded");m.dialog.show("ERROR",_1097);}}console.warn("[misys.form.file] File upload error, response status = "+data.status);}}});return true;},downloadFile:function(_109c,group){var _109d=group||"",_109e=d.create("input"),type;if(!dj.byId("downloadfiles"+_109d)){d.parser.parse(d.byId("downloadfiles-container"+ +_109d));}_109e.type="hidden";_109e.name="attachmentid";_109e.id="attachmentid";_109e.value=_109c;d.byId("downloadfiles"+_109d).appendChild(_109e);if(dj.byId("item_id")){type=d.doc.createElement("input");type.type="hidden";type.name="attachment_type";type.id="attachment_type";type.value="news";d.byId("downloadfiles"+_109d).appendChild(type);}dojo.parser.parse(dojo.byId("downloadfiles"+_109d));dj.byId("downloadfiles"+_109d).submit();d.destroy(d.byId("attachmentid"));if(d.byId("attachment_type")&&dj.byId("item_id")){d.destroy(d.byId("attachment_type"));}},clearFilePath:function(){var x=document.getElementById("file");if(x){x.setAttribute("type","file");x.setAttribute("type","text");x.setAttribute("type","file");}var y=document.getElementById("fileinvoice");if(y){y.setAttribute("type","file");y.setAttribute("type","text");y.setAttribute("type","file");}},addFileItem:function(id){var _109f=d.byId("attachment_type");var _10a0="attachment-file"+id;if(!dj.byId(_10a0)){d.style("noFilesNotice"+id,"display","none");d.parser.instantiate([d.byId(_10a0)]);}if(d.byId("file")){d.byId("file").value="";}if(id!==""){var _10a1="file"+id;if(_10a1){d.byId(_10a1).value="";}}dj.byId(_10a0).addItem();},addBulkFileItem:function(id){var _10a2=d.byId("attachment_type"),_10a3=dj.byId("entity")?dj.byId("entity").get("value"):"";var _10a4="attachment-file"+id;if(!dj.byId(_10a4)){d.style("noFilesNotice"+id,"display","none");d.parser.instantiate([d.byId(_10a4)]);}if(dj.byId("entity")&&_10a3===""){var _10a5=m.getLocalization("selectEntityForFileUpload");_10a3.focus();_10a3.set("state","Error");dijit.hideTooltip(_10a3.domNode);dijit.showTooltip(_10a5,_10a3.domNode,0);}else{if(d.byId("file")){d.byId("file").value="";}dj.byId(_10a4).addItem();}},showUploadDialog:function(_10a6){var _10a7=dj.byId("fileUploadDialog"),group=_10a6||"",_10a8=d.byId("max-files"+group).value||1,file=dj.byId("file");if(!_10a7){d.parser.parse("fileUploadFields");_10a7=dj.byId("fileUploadDialog");}dj.byId("group").set("value",group);dj.byId("uploadButton").set("disabled",(m._config.attachedFiles[group]>=_10a8));dj.byId("title").set("value","");file.set("readOnly",false);file.set("value","");_10a7.show();}});d.ready(function(){d.require("misys.product.widget.AttachmentFiles");d.require("misys.product.widget.AttachmentFile");});})(dojo,dijit,misys);}if(!dojo._hasResource["dojox.validate.regexp"]){dojo._hasResource["dojox.validate.regexp"]=true;dojo.provide("dojox.validate.regexp");dojo.mixin(dojox.validate.regexp,{ipAddress:function(flags){flags=(typeof flags=="object")?flags:{};if(typeof flags.allowDottedDecimal!="boolean"){flags.allowDottedDecimal=true;}if(typeof flags.allowDottedHex!="boolean"){flags.allowDottedHex=true;}if(typeof flags.allowDottedOctal!="boolean"){flags.allowDottedOctal=true;}if(typeof flags.allowDecimal!="boolean"){flags.allowDecimal=true;}if(typeof flags.allowHex!="boolean"){flags.allowHex=true;}if(typeof flags.allowIPv6!="boolean"){flags.allowIPv6=true;}if(typeof flags.allowHybrid!="boolean"){flags.allowHybrid=true;}var _10a9=flags.allowPort?"(\\:\\d+)?":"";var _10aa="((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";var _10ab="(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]";var _10ac="(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]";var _10ad="(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|"+"4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])";var hexRE="0[xX]0*[\\da-fA-F]{1,8}";var _10ae="([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}";var _10af="([\\da-fA-F]{1,4}\\:){6}"+"((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";var a=[];if(flags.allowDottedDecimal){a.push(_10aa);}if(flags.allowDottedHex){a.push(_10ab);}if(flags.allowDottedOctal){a.push(_10ac);}if(flags.allowDecimal){a.push(_10ad);}if(flags.allowHex){a.push(hexRE);}if(flags.allowIPv6){a.push(_10ae);}if(flags.allowHybrid){a.push(_10af);}var _10b0="";if(a.length>0){_10b0="("+a.join("|")+")";}return _10b0+_10a9;},host:function(flags){flags=(typeof flags=="object")?flags:{};if(typeof flags.allowIP!="boolean"){flags.allowIP=true;}if(typeof flags.allowLocal!="boolean"){flags.allowLocal=false;}if(typeof flags.allowPort!="boolean"){flags.allowPort=true;}if(typeof flags.allowNamed!="boolean"){flags.allowNamed=false;}var _10b1="(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)";var _10b2="(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)";var _10b3="((?:"+_10b1+"\\.)+"+_10b2+"\\.?)";if(flags.allowIP){_10b3+="|"+dojox.validate.regexp.ipAddress(flags);}if(flags.allowLocal){_10b3+="|localhost";}if(flags.allowNamed){_10b3+="|^[^-][a-zA-Z0-9_-]*";}return "("+_10b3+")";},url:function(flags){flags=(typeof flags=="object")?flags:{};if(!("scheme" in flags)){flags.scheme=[true,false];}var _10b4=dojo.regexp.buildGroupRE(flags.scheme,function(q){if(q){return "(https?|ftps?)\\://";}return "";});var _10b5="(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?";return _10b4+dojox.validate.regexp.host(flags)+_10b5;},emailAddress:function(flags){flags=(typeof flags=="object")?flags:{};if(typeof flags.allowCruft!="boolean"){flags.allowCruft=false;}var _10b6="([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+";var _10b7=_10b6+"@"+dojox.validate.regexp.host(flags);if(flags.allowCruft){_10b7="<?(mailto\\:)?"+_10b7+">?";}return _10b7;},emailAddressList:function(flags){flags=(typeof flags=="object")?flags:{};if(typeof flags.listSeparator!="string"){flags.listSeparator="\\s;,";}var _10b8=dojox.validate.regexp.emailAddress(flags);var _10b9="("+_10b8+"\\s*["+flags.listSeparator+"]\\s*)*"+_10b8+"\\s*["+flags.listSeparator+"]?\\s*";return _10b9;},numberFormat:function(flags){flags=(typeof flags=="object")?flags:{};if(typeof flags.format=="undefined"){flags.format="###-###-####";}var _10ba=function(_10bb){return dojo.regexp.escapeString(_10bb,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d");};return dojo.regexp.buildGroupRE(flags.format,_10ba);}});dojox.validate.regexp.ca={postalCode:function(){return "([A-Z][0-9][A-Z] [0-9][A-Z][0-9])";},province:function(){return "(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)";}};dojox.validate.regexp.us={state:function(flags){flags=(typeof flags=="object")?flags:{};if(typeof flags.allowTerritories!="boolean"){flags.allowTerritories=true;}if(typeof flags.allowMilitary!="boolean"){flags.allowMilitary=true;}var _10bc="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|"+"NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";var _10bd="AS|FM|GU|MH|MP|PW|PR|VI";var _10be="AA|AE|AP";if(flags.allowTerritories){_10bc+="|"+_10bd;}if(flags.allowMilitary){_10bc+="|"+_10be;}return "("+_10bc+")";}};}if(!dojo._hasResource["dojox.validate._base"]){dojo._hasResource["dojox.validate._base"]=true;dojo.provide("dojox.validate._base");dojo.experimental("dojox.validate");dojox.validate.isText=function(value,flags){flags=(typeof flags=="object")?flags:{};if(/^\s*$/.test(value)){return false;}if(typeof flags.length=="number"&&flags.length!=value.length){return false;}if(typeof flags.minlength=="number"&&flags.minlength>value.length){return false;}if(typeof flags.maxlength=="number"&&flags.maxlength<value.length){return false;}return true;};dojox.validate._isInRangeCache={};dojox.validate.isInRange=function(value,flags){value=dojo.number.parse(value,flags);if(isNaN(value)){return false;}flags=(typeof flags=="object")?flags:{};var max=(typeof flags.max=="number")?flags.max:Infinity,min=(typeof flags.min=="number")?flags.min:-Infinity,dec=(typeof flags.decimal=="string")?flags.decimal:".",cache=dojox.validate._isInRangeCache,_10bf=value+"max"+max+"min"+min+"dec"+dec;if(typeof cache[_10bf]!="undefined"){return cache[_10bf];}cache[_10bf]=!(value<min||value>max);return cache[_10bf];};dojox.validate.isNumberFormat=function(value,flags){var re=new RegExp("^"+dojox.validate.regexp.numberFormat(flags)+"$","i");return re.test(value);};dojox.validate.isValidLuhn=function(value){var sum=0,_10c0,_10c1;if(!dojo.isString(value)){value=String(value);}value=value.replace(/[- ]/g,"");_10c0=value.length%2;for(var i=0;i<value.length;i++){_10c1=parseInt(value.charAt(i));if(i%2==_10c0){_10c1*=2;}if(_10c1>9){_10c1-=9;}sum+=_10c1;}return !(sum%10);};}if(!dojo._hasResource["dojox.validate.web"]){dojo._hasResource["dojox.validate.web"]=true;dojo.provide("dojox.validate.web");dojox.validate.isIpAddress=function(value,flags){var re=new RegExp("^"+dojox.validate.regexp.ipAddress(flags)+"$","i");return re.test(value);};dojox.validate.isUrl=function(value,flags){var re=new RegExp("^"+dojox.validate.regexp.url(flags)+"$","i");return re.test(value);};dojox.validate.isEmailAddress=function(value,flags){var re=new RegExp("^"+dojox.validate.regexp.emailAddress(flags)+"$","i");return re.test(value);};dojox.validate.isEmailAddressList=function(value,flags){var re=new RegExp("^"+dojox.validate.regexp.emailAddressList(flags)+"$","i");return re.test(value);};dojox.validate.getEmailAddressList=function(value,flags){if(!flags){flags={};}if(!flags.listSeparator){flags.listSeparator="\\s;,";}if(dojox.validate.isEmailAddressList(value,flags)){return value.split(new RegExp("\\s*["+flags.listSeparator+"]\\s*"));}return [];};}if(!dojo._hasResource["misys.client.validation.common_client"]){dojo._hasResource["misys.client.validation.common_client"]=true;dojo.provide("misys.client.validation.common_client");(function(d,dj,m){})(dojo,dijit,misys);}if(!dojo._hasResource["misys.validation.common"]){dojo._hasResource["misys.validation.common"]=true;dojo.provide("misys.validation.common");(function(d,dj,m){var _10c2="message is false";var _10c3=m.getServletURL("/screen/AjaxScreen/action/CheckPoReferenceAction");var _10c4=m.getServletURL("/screen/AjaxScreen/action/GetCurrencyISOCodes");var _10c5="CUSTOM-NO-CANCEL";var _10c6="[Could not validate mandatory field] ";var _10c7="[misys.validation.common] Current Date Value = ";var _10c8="[misys.validation.common] Validating Expiry Date. Value = ";var _10c9="[misys.validation.common] Days difference between expiry date and current date = ";var _10ca="[misys.validation.common] validateCurrency error";var _10cb="[misys.validation.common] Validating Abbv Name Format, Value =";var _10cc="[misys.validation.common] Validating Currency. Value";var _10cd="application/json; charset=utf-8";function _10ce(field,_10cf){if(!_10cf){_10cf=" 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/-?:().,+_";}return d.every(field.get("value"),function(_10d0){return _10cf.indexOf(_10d0)>=0;});};function _10d1(_10d2){var bDate="";if(dijit.byId("issuing_bank_abbv_name")&&dijit.byId("issuing_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("issuing_bank_abbv_name").get("value")][0]&&[dijit.byId("issuing_bank_abbv_name").get("value")][0].name!==""){bDate=misys._config.businessDateForBank[dijit.byId("issuing_bank_abbv_name").get("value")][0].name;}else{if(dijit.byId("remitting_bank_abbv_name")&&dijit.byId("remitting_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank&&[dijit.byId("remitting_bank_abbv_name").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("remitting_bank_abbv_name").get("value")][0].name!==""){bDate=misys._config.businessDateForBank[dijit.byId("remitting_bank_abbv_name").get("value")][0].name;}else{if(dijit.byId("recipient_bank_abbv_name")&&dijit.byId("recipient_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("recipient_bank_abbv_name").get("value")][0]&&[dijit.byId("recipient_bank_abbv_name").get("value")][0].name!==""){bDate=misys._config.businessDateForBank[dijit.byId("recipient_bank_abbv_name").get("value")][0].name;}else{if(dijit.byId("advising_bank_abbv_name")&&dijit.byId("advising_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("advising_bank_abbv_name").get("value")][0]&&[dijit.byId("advising_bank_abbv_name").get("value")][0].name!==""){bDate=misys._config.businessDateForBank[dijit.byId("advising_bank_abbv_name").get("value")][0].name;}else{if(dijit.byId("bank_abbv_name")&&dijit.byId("bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank[dijit.byId("bank_abbv_name").get("value")][0]&&[dijit.byId("bank_abbv_name").get("value")][0].name!==""){bDate=misys._config.businessDateForBank[dijit.byId("bank_abbv_name").get("value")][0].name;}else{if(misys&&misys._config&&misys._config.bankBusinessDate&&misys._config.bankBusinessDate!==""){bDate=misys._config.bankBusinessDate;}}}}}}var date=_10d2.get("value");if(bDate!==""){var _10d3=parseInt(bDate.substring(0,4),10);var _10d4=parseInt(bDate.substring(5,7),10);var _10d5=parseInt(bDate.substring(8,10),10);var _10d6=new Date(_10d3,_10d4-1,_10d5);_10d6.setHours(0,0,0,0);var days=dojo.date.compare(date,_10d6,"date");return days;}};function _10d7(_10d8){if(_10d8.get("type")==="hidden"){return d.date.locale.format(m.localizeDate(_10d8),{selector:"date",datePattern:m.getLocalization("g_strGlobalDateFormat")});}return _10d8.get("displayedValue");};function _10d9(_10da,error){var _10db=_10da.items.valid;var field;if(dj.byId("email")){field=dj.byId("email");}var _10dc="";if(_10da.items.valid===false){if(field!=undefined){field.focus();_10dc=m.getLocalization("invalidEmailAddressError",[field.get("value")]);field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_10dc,field.domNode,0);}}else{}};function _10dd(node,_10de){var _10df=dj.byId(node);if(_10df){if(!(/Date/.test(_10df.get("declaredClass")))){return -1;}if(_10df.isValidDate()){return _10df.getDate();}if(_10df.getCode()==="SPOT"){return -1;}if(_10df.getCode()===""||_10df.getNumber()===""){return -1;}var _10e0=parseInt(_10df.getNumber(),10),_10e1=null,today=_10de||new Date();if(_10df.getCode()==="d"){return d.date.add(today,"day",_10e0);}else{if(_10df.getCode()==="w"){return d.date.add(today,"week",_10e0);}else{if(_10df.getCode()==="m"){return d.date.add(today,"month",_10e0);}else{if(_10df.getCode()==="y"){return d.date.add(today,"year",_10e0);}}}}}else{return -1;}};function _10e2(sIban,_10e3){var _10e4=" .-_,/",_10e5="",_10e6="",sLCCS="",_10e7="";if(sIban.length<5||sIban.length>35){return -1;}if(_10e3==null||_10e3===""){sLCCS=sIban.substring(0,4);_10e6=sIban.substring(4,sIban.length)+sLCCS.toUpperCase();}else{sLCCS=_10e3+"00";_10e6=sIban+sLCCS.toUpperCase();}for(var i=0;i<_10e6.length;i++){_10e7=_10e6.charAt(i);if(!isNaN(_10e7)){_10e5+=""+_10e7;}else{if(_10e4.indexOf(_10e7)>0){continue;}else{if(_10e7.charCodeAt(0)<65||_10e7.charCodeAt(0)>90){return -1;}else{_10e5+=_10e7.charCodeAt(0)-55;}}}}return (_10e8(_10e5,97));};function _10e8(_10e9,_10ea){var i=0,j=0,_10eb=new Array(),r="";for(i=0;i<_10e9.length+6;i+=6){var sItem=_10e9.substring(i,i+6);if(sItem!==""){_10eb[j++]=_10e9.substring(i,i+6);}}for(i=0;i<_10eb.length;i++){r=(r+""+_10eb[i])%_10ea;}return r;};function _10ec(_10ed){var _10ee=_10ed.get("value")!==null?_10ed.get("value"):"";if(_10ee===""||!(_10ee instanceof Date)){return _10ee;}else{if(_10ed.get("displayedValue")){return _10ed.get("displayedValue");}else{var month=_10ee.getMonth();month=month+1;var year=_10ee.getFullYear();var day=_10ee.getDate();return day+"/"+month+"/"+year;}}};function _10ef(_10f0){var field;if(dj.byId("abbv_name")){field=dj.byId("abbv_name");}var _10f1="";if(_10f0.items.valid===true){if(field!=undefined){field.focus();_10f1=m.getLocalization("abbvNameExists",[field.get("value")]);field.set("value","");field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_10f1,field.domNode,0);}}else{}};function _10f2(_10f3){var field;if(dj.byId("claim_reference")){field=dj.byId("claim_reference");}var _10f4="";if(_10f3.items.valid===false){if(field!=undefined){_10f4=m.getLocalization("claimReferenceExists",[field.get("value")]);}var _10f5=function(){field.focus();field.set("state","Error");};m.dialog.show("ERROR",_10f4,"",function(){setTimeout(_10f5,500);});}else{}};function _10f6(_10f7){var field;if(dj.byId("issuer_ref_id")){field=dj.byId("issuer_ref_id");}var _10f8="";if(_10f7.items.valid===false){if(field!=undefined){_10f8=m.getLocalization("poReferenceExists",[field.get("value")]);field.focus();field.set("state","Error");field.set("value","");dj.hideTooltip(field.domNode);dj.showTooltip(_10f8,field.domNode,0);}}else{}};function _10f9(_10fa){var field;if(dj.byId("issuer_ref_id")){field=dj.byId("issuer_ref_id");}var _10fb="";if(_10fa.items.valid===false&&field!=undefined){_10fb=m.getLocalization("invoiceReferenceExists",[field.get("value")]);field.focus();field.set("state","Error");field.set("value","");dj.hideTooltip(field.domNode);dj.showTooltip(_10fb,field.domNode,0);}else{}};function _10fc(_10fd){var field;if(dj.byId("cust_ref_id")){field=dj.byId("cust_ref_id");}var _10fe="";if(_10fd.items.valid===false){if(field!=undefined){_10fe=m.getLocalization("custReferenceExists",[field.get("value")]);field.focus();field.set("state","Error");field.set("value","");dj.showTooltip(_10fe,field.domNode,0);}}else{}};function _10ff(_1100){var field;if(dj.byId("cn_reference")){field=dj.byId("cn_reference");}var _1101="";if(_1100.items.valid===false){if(field!=undefined){_1101=m.getLocalization("cnReferenceExists",[field.get("value")]);field.focus();field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_1101,field.domNode,0);}}else{}};function _1102(_1103){var field;if(dj.byId("report_name")){field=dj.byId("report_name");}var _1104="";if(_1103.items.valid===true){if(field!=undefined){field.focus();_1104=m.getLocalization("reportNameExists",[_1103.items.reportName]);field.set("value","");field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_1104,field.domNode,0);}}else{}};function _1105(_1106){var field;var _1107=dj.byId("ls_name");if(_1107){field=_1107;}var _1108="";if(_1106.items.valid===false){if(field!=undefined){_1108=m.getLocalization("lsNameExists",[field.get("value")]);field.focus();field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_1108,field.domNode,0);}}else{}};function _1109(_110a){var field;if(dj.byId("facility_reference")){field=dj.byId("facility_reference");}var _110b="";if(_110a.items.valid===true){if(field!=undefined){field.focus();_110b=m.getLocalization("facilityRefExists",[field.get("value")]);field.set("value","");field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_110b,field.domNode,0);}}else{}};function _110c(_110d){var field;if(dj.byId("employee_no")){field=dj.byId("employee_no");}var _110e="";if(_110d.items.valid===true){if(field!=undefined){field.focus();_110e=m.getLocalization("employeeNoExists",[field.get("value")]);field.set("value","");field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_110e,field.domNode,0);}}else{}};function _110f(_1110){var field;if(dj.byId("structure_code")){field=dj.byId("structure_code");}var _1111="";if(_1110.items.exists===true){dj.byId("structure_code").set("state","Error");if(field!=undefined){_1111=m.getLocalization("structureCodeExists",[field.get("value")]);}dj.showTooltip(_1111,dj.byId("structure_code").domNode,0);}else{}};function _1112(_1113){var field;if(dj.byId("effective_date")){field=dj.byId("effective_date");}var _1114="";if(_1113.items.exists===true){dj.byId("effective_date").set("state","Error");dj.showTooltip(m.getLocalization("effectiveDateExists"),dj.byId("effective_date").domNode,0);}else{}};function _1115(field){var _1116=misys.getLocalization("uploadTemplateValueRequired");field.set("state","Error");dj.hideTooltip(field.domNode);if(dojo.query("html")&&dojo.query("html")[0]&&dojo.query("html")[0].dir==="rtl"){dj.showTooltip(_1116,field.domNode,["before"]);}else{dj.showTooltip(_1116,field.domNode,0);}var _1117=function(){dj.hideTooltip(field.domNode);};setTimeout(_1117,5000);};function _1118(mode,_1119){if(!dj.byId("holidayCutOffDialog")){d.require("misys.widget.Dialog");d.require("dijit.form.Button");var _111a=new dj.Dialog({id:"holidayCutOffDialog",title:"Error",draggable:false});var _111b=d.create("div",{id:"holidayCutOffDialogContent"});var _111c=d.create("div",{id:"dialogHolidayText"},_111b,"first");var _111d=d.create("div",{id:"holidayCutOffDialogButtons",style:"text-align:center;"},_111b,"last");var _111e=new dj.form.Button({label:m.getLocalization("returnMessage"),id:"rejectHolidayButtonId"});var _111f=new dj.form.Button({label:m.getLocalization("autoForwardMessage"),id:"forwardHolidayButtonId"});var _1120=new dj.form.Button({label:m.getLocalization("cancelMessage"),id:"cancelHolidayButtonId"});if(mode==="UNSIGNED"){d.place(_111e.domNode,_111d);}if(_1119===true){d.place(_111f.domNode,_111d);}d.place(_1120.domNode,_111d);_111a.set("content",_111b);}if(mode!=="UNSIGNED"&&!_1119){m._config.onSubmitErrorMsg=m.getLocalization("failedSingleSubmissionFromDraft");}var _1121=dj.byId("holidayCutOffDialog");if(d.byId("dialogHolidayText")){d.byId("dialogHolidayText").innerHTML=m._config.onSubmitErrorMsg;}m.dialog.connect(_1121,"onKeyPress",function(evt){if(evt.keyCode===d.keys.ESCAPE){d.stopEvent(evt);}});m.dialog.connect(dj.byId("forwardHolidayButtonId"),"onClick",function(){_1121.hide();setTimeout(function(){m.submit("AUTO_FORWARD_SUBMIT");},500);},_1121.id);m.dialog.connect(dj.byId("rejectHolidayButtonId"),"onClick",function(){var _1122="REJECT";if(dj.byId("productcode")&&dj.byId("productcode").get("value")==="FT"||"TD"&&mode==="UNSIGNED"){_1122="RETURN_TRANSACTION";}m.submit(_1122);m.dialog.hide();_1121.hide();},_1121.id);m.dialog.connect(dj.byId("cancelHolidayButtonId"),"onClick",function(){m.dialog.hide();_1121.hide();if(d.byId("dialogHolidayText")){d.byId("dialogHolidayText").innerHTML="";m._config.onSubmitErrorMsg=d.byId("dialogHolidayText").innerHTML;}},_1121.id);m.dialog.connect(_1121,"onHide",function(){m.dialog.disconnect(_1121);m.dialog.hide();});_1121.show();};function _1123(_1124,_1125,_1126,mode,_1127,_1128,_1129,_112a,_112b,_112c){var _112d=true;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetBusinessDateAndCutOffTimeStatus"),sync:true,handleAs:"json",content:{date_names:_1127,date_values:_1128,bankAbbvName:_1124,entity_abbv_name:_1129,product_code:_1125,sub_product_code:_1126,cur_code:_112a,amount:_112b,clearingCode:_112c},load:function(_112e,args){var _112f=_112e.valid;var _1130=_112e.autoForwardEnabled;if(_112f===false){_112d=false;m._config.onSubmitErrorMsg=_112e.errorMessage;_1118(mode,_1130);}},customError:function(_1131,args){console.error("[misys.validation.common] Technical error while validating business days and cut-off time");console.error(_1131);_112d=false;m._config.onSubmitErrorMsg=m.getLocalization("technicalErrorWhileValidatingBusinessDays");m._config=m._config||{};dojo.mixin(m._config,{holidayCutOffEnabled:false});}});return _112d;};d.mixin(m,{isIBAN:function(sIban){return _10e2(sIban)===1;},getLocalizeDisplayDate:function(_1132){return _10d7(_1132);},validateRequiredField:function(){if(this.get("value")===""){_1115(this);}},validateTemplateId:function(){var _1133;var _1134=d.every(this.get("value"),function(_1135){_1133=_1135;return true;});if(!_1134){this.invalidMessage=m.getLocalization("illegalCharError",[_1133]);}else{if(this.get("value").length===1&&this.get("value")==="-"){this.invalidMessage=m.getLocalization("singleHyphenError");_1134=false;}}return _1134;},checkAbbvNameExists:function(){var _1136;if(dj.byId("abbv_name")){_1136=dj.byId("abbv_name").get("value");}if(_1136!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckAbbvNameAction"),handleAs:"json",sync:true,content:{abbv_name:_1136},load:_10ef});}},validateExtNarrativeSwiftInit2018:function(_1137,_1138){var _1139=_1137.trim();var _113a=_1139.split(/\n/);var _113b=_113a==""?0:_113a.length;return _113b>(_1138?800:1000)?false:true;},validateRowExtNarrativeSwiftInit2018:function(_113c,_113d){var _113e=_113c.trim();var _113f=_113e.split(/\r*\n/);var _1140=_113f==""?0:_113f.length;var _1141=_113c.trim().length;var _1142=_1141==""?0:_1141;var _1143=_1140>(_113d?800:1000)?true:false;var _1144=_1142>(_113d?52000:65000)?true:false;return (_1143)||(_1144);},validateExtendedNarrativeSwift2018:function(_1145,_1146,is798,_1147){var _1148=_1145.trim();var _1149=_1148.split(/\n/);var _114a=_1149==""?0:_1149.length+(_1146?_1146:0);var _114b=misys._config.swiftExtendedNarrativeEnabled?(_1147?(is798?792:800):(is798?992:1000)):100;return _114a>_114b?false:true;},checkClaimReferenceExists:function(){var _114c,_114d,_114e;if(dj.byId("claim_reference")){_114c=dj.byId("claim_reference").get("value");}if(dj.byId("product_code")){_114d=dj.byId("product_code").get("value");}if(dj.byId("company_id")){_114e=dj.byId("company_id").get("value");}if(_114c!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckClaimReferenceAction"),handleAs:"json",sync:true,content:{claim_ref:_114c,product_code:_114d,company_id:_114e},load:_10f2});}},checkPoReferenceExists:function(){var poRef,_114f,_1150,_1151,refId;if(dj.byId("issuer_ref_id")){poRef=dj.byId("issuer_ref_id").get("value");}if(dj.byId("product_code")){_114f=dj.byId("product_code").get("value");}if(dj.byId("buyer_abbv_name")){_1150=dj.byId("buyer_abbv_name").get("value");}if(dj.byId("seller_abbv_name")){_1151=dj.byId("seller_abbv_name").get("value");}if(dj.byId("ref_id")){refId=dj.byId("ref_id").get("value");}if(poRef!==""&&_1150!==""&&_1151!==""){m.xhrPost({url:_10c3,handleAs:"json",sync:true,content:{poRef:poRef,productCode:_114f,buyerAbbvName:_1150,sellerAbbvName:_1151,refId:refId},load:_10f6});}},checkInvoiceReferenceExists:function(){var poRef,_1152,_1153,_1154,refId;if(dj.byId("issuer_ref_id")){poRef=dj.byId("issuer_ref_id").get("value");}if(dj.byId("product_code")){_1152=dj.byId("product_code").get("value");}if(dj.byId("buyer_abbv_name")){_1153=dj.byId("buyer_abbv_name").get("value");}if(dj.byId("seller_abbv_name")){_1154=dj.byId("seller_abbv_name").get("value");}if(dj.byId("ref_id")){refId=dj.byId("ref_id").get("value");}if(poRef!==""&&_1153!==""&&_1154!==""){m.xhrPost({url:_10c3,handleAs:"json",sync:true,content:{poRef:poRef,productCode:_1152,buyerAbbvName:_1153,sellerAbbvName:_1154,refId:refId},load:_10f9});}},checkInvoiceCustReferenceExists:function(){var _1155,_1156,_1157,_1158,refId;if(dj.byId("issuer_ref_id")){_1155=dj.byId("cust_ref_id").get("value");}if(dj.byId("product_code")){_1156=dj.byId("product_code").get("value");}if(dj.byId("buyer_abbv_name")){_1157=dj.byId("buyer_abbv_name").get("value");}if(dj.byId("seller_abbv_name")){_1158=dj.byId("seller_abbv_name").get("value");}if(dj.byId("ref_id")){refId=dj.byId("ref_id").get("value");}if(_1155!==""&&_1157!==""&&_1158!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckCustReferenceAction"),handleAs:"json",sync:true,content:{custRef:_1155,productCode:_1156,buyerAbbvName:_1157,sellerAbbvName:_1158,refId:refId},load:_10fc});}},checkCnReferenceExists:function(){var cnRef,_1159,_115a,_115b,_115c,refId;if(dj.byId("cn_reference")){cnRef=dj.byId("cn_reference").get("value");}if(dj.byId("product_code")){_1159=dj.byId("product_code").get("value");}else{if(dj.byId("productCode")){_1159=dj.byId("productCode").get("value");}}if(dj.byId("buyer_abbv_name")){_115a=dj.byId("buyer_abbv_name").get("value");}if(dj.byId("seller_abbv_name")){_115b=dj.byId("seller_abbv_name").get("value");}if(dj.byId("fscm_programme_code")){_115c=dj.byId("fscm_programme_code").get("value");}if(dj.byId("ref_id")){refId=dj.byId("ref_id").get("value");}if(cnRef!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckCnReferenceAction"),handleAs:"json",sync:true,content:{cnReference:cnRef,productCode:_1159,buyerAbbvName:_115a,sellerAbbvName:_115b,fscmProgram:_115c,refId:refId},load:_10ff});}},checkPoReferenceExistsIO:function(){var poRef,_115d,_115e,_115f,refId;if(dj.byId("issuer_ref_id")){poRef=dj.byId("issuer_ref_id").get("value");}if(dj.byId("product_code")){_115d=dj.byId("product_code").get("value");}if(dj.byId("buyer_abbv_name")){_115e=dj.byId("buyer_abbv_name").get("value");}if(dj.byId("seller_abbv_name")){_115f=dj.byId("seller_abbv_name").get("value");}if(dj.byId("ref_id")){refId=dj.byId("ref_id").get("value");}if(poRef!==""){m.xhrPost({url:_10c3,handleAs:"json",sync:true,content:{poRef:poRef,productCode:_115d,buyerAbbvName:_115e,sellerAbbvName:_115f,refId:refId},load:_10f6});}},checkReportNameExists:function(){var _1160;var repId;if(dj.byId("report_name")){_1160=dj.byId("report_name").get("value");}if(dj.byId("report_id")){repId=dj.byId("report_id").get("value");}if(_1160!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckReportNameAction"),handleAs:"json",sync:true,content:{report_name:_1160,report_id:repId},load:_1102});}},checkLicenseNameExists:function(){var _1161;if(dj.byId("ls_name")){_1161=dj.byId("ls_name").get("value");}if(_1161!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckLsNameAction"),handleAs:"json",sync:true,content:{ls_Name:_1161},load:_1105});}},checkFacilityReferenceExists:function(){var _1162;var _1163;var _1164;var _1165;if(dj.byId("facility_reference")){_1162=dj.byId("facility_reference").get("value");}if(dj.byId("facility_id")){_1163=dj.byId("facility_id").get("value");}if(dj.byId("company_abbv_name")){_1165=dj.byId("company_abbv_name").get("value");}if(dj.byId("bank_abbv_name")){_1164=dj.byId("bank_abbv_name").get("value");}if(_1162!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckFacilityReferenceAction"),handleAs:"json",sync:true,content:{facility_reference:_1162,facility_id:_1163,company_abbv_name:_1165,bank_abbv_name:_1164},load:_1109});}},checkEmployeeNoExists:function(){var _1166;var _1167;var _1168;var _1169;if(dj.byId("employee_no")){_1166=dj.byId("employee_no").get("value");}if(dj.byId("company_id")){_1167=dj.byId("company_id").get("value");}if(dj.byId("login_id_hidden")){_1168=dj.byId("login_id_hidden").get("value");}if(dj.byId("login_id")){_1169=dj.byId("login_id").get("value");}if(_1166!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckEmployeeNoAction"),handleAs:"json",sync:true,content:{employee_no:_1166,company_id:_1167,login_id_hidden:_1168,login_id:_1169},load:_110c});}},checkBankReference:function(){var _116a,refId;var _116b=true;if(dj.byId("bo_ref_id")){_116a=dj.byId("bo_ref_id").get("value");}if(dj.byId("ref_id")){refId=dj.byId("ref_id").get("value");}if(_116a!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateDuplicateBankReference"),sync:true,handleAs:"json",content:{bo_ref_id:_116a,refId:refId},load:function(_116c,args){if(_116c.responseFlag==false){_116b=false;}else{}},error:function(_116d,args){console.error("checkBankReference AJAX error",_116d);}});}return _116b;},checkRMGroupExists:function(){var _116e;var _116f=true;if(dj.byId("rmGroup")){_116e=dj.byId("rmGroup").get("value");}var _1170=dj.byId("company_id").get("value");if(_116e!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckRMGroupExistsAction"),handleAs:"json",sync:false,content:{rm_group:_116e,companyid:_1170},load:function(_1171,args){var field;if(dj.byId("rmGroup")){field=dj.byId("rmGroup");}var _1172="";if(_1171.items.valid===false){if(field!=undefined){field.focus();_1172=m.getLocalization("rmGroupNoExists",[_1171.items.rmGroup]);field.set("value","");field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_1172,field.domNode,0);}_116f=false;}else{}},error:function(_1173,args){_116f=false;console.error(" processRepricingOfRecords error",_1173);}});}return _116f;},validateFeeAccount:function(){var _1174="";var _1175=false;var _1176="";if(dj.byId("fee_act_no")){_1176=_1176=dj.byId("fee_act_no").get("value");}if(dj.byId("entity")){_1174=dj.byId("entity").get("value");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetStaticData"),sync:true,handleAs:"json",content:{option:"account",fields:"['fee_act_no']",productcode:"SI",entity:_1174},load:function(_1177,args){for(var i=0;i<_1177.items.length;i++){if(_1177.items[i].ACCOUNTNO==_1176){_1175=true;break;}}},error:function(_1178,args){console.error("validateFeeAccount AJAX error",_1178);}});return _1175;},validateApplDate:function(_1179){var valid=true;var _117a;if(dj.byId("appl_date")){_117a=dj.byId("appl_date").get("value");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateApplDate"),sync:true,handleAs:"json",content:{bankAbbvName:_1179,applDate:_117a},load:function(_117b,args){if(_117b.items.valid==false){valid=false;if(dj.byId("appl_date")){dj.byId("appl_date").set("value",_117b.items.bDate);dojo.byId("appl_date_view_row").childNodes[1].innerHTML=dj.byId("appl_date").get("value");}}}});return valid;},goToTop:function(){var _117c=d.byId("body");if(d.isIE<=6){d.window.scrollIntoView(_117c);}else{dojox.fx.smoothScroll({node:_117c,win:window}).play();}},validatePricipleAccount:function(){var _117d="";var _117e="";var _117f=false;var _1180="";if(dj.byId("principal_act_no")){_1180=dj.byId("principal_act_no").get("value");}if(dj.byId("entity")){_117d=dj.byId("entity").get("value");}if(dj.byId("product_code")){_117e=dj.byId("product_code").get("value");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetStaticData"),sync:true,handleAs:"json",content:{option:"account",fields:"['principal_act_no']",productcode:_117e,entity:_117d},load:function(_1181,args){for(var i=0;i<_1181.items.length;i++){if(_1181.items[i].ACCOUNTNO==_1180){_117f=true;break;}}},error:function(_1182,args){console.error("validatePrincipleAccount AJAX error",_1182);}});return _117f;},checkEntityIdExists:function(){var _1183;var _1184;if(dj.byId("abbv_name")){_1183=dj.byId("abbv_name").get("value");}if(dj.byId("company_abbv_name")){_1184=dj.byId("company_id").get("value");}if(_1183!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckEntityIdAction"),handleAs:"json",sync:true,content:{abbv_name:_1183,companyId:_1184},load:_10ef});}},checkStructureCodeExists:function(){var _1185;if(dj.byId("structure_code")){_1185=dj.byId("structure_code").get("value");}if(_1185!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckStructureCodeExistsAction"),handleAs:"json",sync:true,content:{structureCode:_1185},load:_110f});}},checkEffectiveDateExists:function(){var _1186;if(dj.byId("effective_date")){_1186=dj.byId("effective_date").get("displayedValue");}if(_1186!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckEffectiveDateExistsAction"),handleAs:"json",sync:true,content:{effective_date:_1186},load:_1112});}},validateCashRequestDate:function(){var _1187=dj.byId("appl_date");if(!m.compareDateFields(_1187,this)){this.invalidMessage=m.getLocalization("requestDateLessThanAppDateError",[_10d7(this),_10d7(_1187)]);return false;}var _1188=dj.byId("iss_date");if(!m.compareDateFields(_1188,this)){this.invalidMessage=m.getLocalization("requestDateLessThanProcessingDateError",[_10d7(this),_10d7(_1188)]);return false;}return true;},validateAlertDates:function(){var _1189=dj.byId("alert_date");var _118a=dj.byId("alert_date2");if(_1189&&_1189.get("value")!==""&&_118a&&_118a.get("value")!==""&&(!m.compareDateFields(_1189,_118a))){this.invalidMessage=m.getLocalization("alertToDateLessThanFromError",[_10d7(_118a),_10d7(_1189)]);_118a.set("state","Error");dj.showTooltip(this.invalidMessage,_118a.domNode,0);return false;}return true;},validateLoanTransactionTypeDropDown:function(){dj.byId("tnx_type_code_parameter").set("value","");dj.byId("sub_tnx_type_code_parameter").set("value","");dj.byId("sub_product_code_parameter").set("value","");var _118b=(dj.byId("tnx_type_code_dropdown").get("value")).split(":");if(dj.byId("tnx_type_code_dropdown")&&dj.byId("tnx_type_code_dropdown")!=" "){var _118c=dj.byId("tnx_type_code_parameter");var _118d=dj.byId("sub_tnx_type_code_parameter");var _118e=dj.byId("sub_product_code_parameter");if(_118b.length>1){_118c.set("value",_118b[0]);_118d.set("value",_118b[1]);_118e.set("value","");}else{_118c.set("value",_118b[0]);_118e.set("value","LNRPN");_118d.set("value","");}}},validateLoanTransactionStatusDropDown:function(){dj.byId("tnx_stat_code_parameter").set("value","");if(dj.byId("sub_tnx_stat_code_parameter")){dj.byId("sub_tnx_stat_code_parameter").set("value","");}if(dj.byId("tnx_stat_code_dropdown")&&dj.byId("tnx_stat_code_dropdown")!=" "){var _118f=(dj.byId("tnx_stat_code_dropdown").get("value")).split(":");var _1190=dj.byId("tnx_stat_code_parameter");var _1191=dj.byId("sub_tnx_stat_code_parameter");if(_118f.length>1){_1190.set("value",_118f[0]);_1191.set("value",_118f[1]);}else{_1190.set("value",_118f[0]);if(_1191){_1191.set("value","");}}}},isLegalTextAcceptedForAuthorizer:function(){var _1192=false,_1193;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateAuthorizer"),handleAs:"json",sync:true,preventCache:true,content:{productCode:dj.byId("product_code")?dj.byId("product_code").get("value"):misys._config.productCode,subProductCode:dijit.byId("sub_product_code")?dijit.byId("sub_product_code").get("value"):"",tnxtype:dijit.byId("tnxtype").get("value")?dijit.byId("tnxtype").get("value"):dijit.byId("tnx_type_code").get("value"),option:dj.byId("option")?dj.byId("option").get("value"):"",subtnxtypeCode:dj.byId("sub_tnx_type_code")?dj.byId("sub_tnx_type_code").get("value"):"",xml:misys.formToXML({ignoreDisabled:true}),mode:dj.byId("mode")?dj.byId("mode").get("value"):"",operation:dj.byId("realform_operation")?dj.byId("realform_operation").get("value"):""},load:function(_1194,_1195){_1192=_1194.isValid;_1193=_1194.errorMsg;},customError:function(_1196,_1197){console.error(" processRepricingOfRecords error",_1196);m._config=m._config||{};dojo.mixin(m._config,{legalTextEnabled:false});}});if(_1192){var _1198=dijit.byId("legalDialog");if(!_1198){return true;}if(_1198.open===false){dj.byId("accept_legal_text").set("checked",false);dijit.byId("submitlegal").set("disabled",true);}m.dialog.connect(dj.byId("submitlegal"),"onClick",function(){_1198.hide();setTimeout(function(){m.acceptLegalText();},500);},_1198.id);m.dialog.connect(dj.byId("cancel"),"onClick",function(){m.dialog.disconnect(_1198);},_1198.id);m.dialog.connect(d.byId("legalDialog_close"),"onClick",function(){m.dialog.disconnect(_1198);});dijit.byId("alertDialog").hide();_1198.show();return false;}else{dojo.destroy("authorizer_id");dojo.destroy("legal_text_value");return true;}},validateCashProcessingDate:function(){if(!this.get("value")){return true;}var _1199=dj.byId("appl_date");if(!m.compareDateFields(_1199,this)){this.invalidMessage=m.getLocalization("processingDateLessThanAppDateError",[_10d7(this),_10d7(_1199)]);return false;}var _119a=dj.byId("iss_date");if(!m.compareDateFields(_119a,this)){this.invalidMessage=m.getLocalization("requestDateLessThanProcessingDateError",[_10d7(this),_10d7(_119a)]);return false;}if(this.get("value")!==""){var _119b;var _119c,_119d;if(dj.byId("customer_bank")){_119d=dj.byId("customer_bank").get("value");}else{if(dj.byId("bank_abbv_name")){_119d=dj.byId("bank_abbv_name").get("value");}else{_119d=dj.byId("issuing_bank_abbv_name").get("value");}}var _119e,_119f,_11a0;if(_119d!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[_119d]&&misys._config.businessDateForBank[_119d][0]&&misys._config.businessDateForBank[_119d][0].value!==""){_119e=parseInt(misys._config.businessDateForBank[_119d][0].value.substring(0,4),10);_119f=parseInt(misys._config.businessDateForBank[_119d][0].value.substring(5,7),10);_11a0=parseInt(misys._config.businessDateForBank[_119d][0].value.substring(8,10),10);_119c=new Date(_119e,_119f-1,_11a0);}else{if(misys&&misys._config&&misys._config.bankBusinessDate&&misys._config.bankBusinessDate!==""){_119e=parseInt(misys._config.bankBusinessDate.substring(0,4),10);_119f=parseInt(misys._config.bankBusinessDate.substring(5,7),10);_11a0=parseInt(misys._config.bankBusinessDate.substring(8,10),10);_119c=new Date(_119e,_119f-1,_11a0);}else{_119c=new Date();}}_119c.setHours(0,0,0,0);_119b=d.date.compare(m.localizeDate(this),_119c)<0?false:true;if(!_119b){this.invalidMessage=m.getLocalization("processingDateGreaterThanCurrentDateError",[_10d7(this)]);return false;}}return true;},validateEndDateWithCurrentDate:function(){if(!this.get("value")){return true;}var _11a1=this.get("value");var _11a2,_11a3;if(dj.byId("customer_bank")){_11a3=dj.byId("customer_bank").get("value");}else{if(dj.byId("bank_abbv_name")){_11a3=dj.byId("bank_abbv_name").get("value");}else{if(dj.byId("issuing_bank_abbv_name")){_11a3=dj.byId("issuing_bank_abbv_name").get("value");}}}var _11a4,_11a5,_11a6;if(_11a3!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[_11a3]&&misys._config.businessDateForBank[_11a3][0]&&misys._config.businessDateForBank[_11a3][0].value!==""){_11a4=parseInt(misys._config.businessDateForBank[_11a3][0].value.substring(0,4),10);_11a5=parseInt(misys._config.businessDateForBank[_11a3][0].value.substring(5,7),10);_11a6=parseInt(misys._config.businessDateForBank[_11a3][0].value.substring(8,10),10);_11a2=new Date(_11a4,_11a5-1,_11a6);}else{if(misys&&misys._config&&misys._config.bankBusinessDate&&misys._config.bankBusinessDate!==""){_11a4=parseInt(misys._config.bankBusinessDate.substring(0,4),10);_11a5=parseInt(misys._config.bankBusinessDate.substring(5,7),10);_11a6=parseInt(misys._config.bankBusinessDate.substring(8,10),10);_11a2=new Date(_11a4,_11a5-1,_11a6);}else{_11a2=new Date();}}_11a2.setHours(0,0,0,0);var _11a7=d.date.compare(m.localizeDate(this),_11a2)<0?false:true;if(!_11a7){this.invalidMessage=m.getLocalization("endDateSmallerThanCurrentDate",[_10d7(this)]);return false;}return true;},validateTradeExpiryDate:function(){if(!this.get("value")){return true;}var _11a8=dj.byId("appl_date");if(!m.compareDateFields(_11a8,this)){this.invalidMessage=m.getLocalization("expiryDateLessThanAppDateError",[_10d7(this),_10d7(_11a8)]);return false;}var _11a9=dj.byId("iss_date");if((_11a9)&&(!m.compareDateFields(_11a9,this))){this.invalidMessage=m.getLocalization("issueDateGreaterThanExpiryDateError",[_10d7(_11a9),_10d7(this)]);return false;}var _11aa=dj.byId("org_previous_exp_date");if((_11aa)&&(!m.compareDateFields(_11aa,this))){this.invalidMessage=m.getLocalization("orgExpDateGreaterThanExpiryDateError",[_10d7(this),_10d7(_11aa)]);return false;}var _11ab=dj.byId("amd_date");if((_11ab)&&(!m.compareDateFields(_11ab,this))){this.invalidMessage=m.getLocalization("ExpiryDateLessThanamendDate",[_10d7(this),_10d7(_11ab)]);return false;}var _11ac=dj.byId("last_ship_date");if((_11ac)&&(!m.compareDateFields(_11ac,this))){this.invalidMessage=m.getLocalization("expiryDateLessThanLastShipmentError",[_10d7(this),_10d7(_11ac)]);return false;}var _11ad=dj.byId("org_last_ship_date");if((_11ac&&_11ac.get("value")==null)&&(_11ad&&!m.compareDateFields(_11ad,this))){this.invalidMessage=m.getLocalization("newexpiryDateLessThanOldShipmentError",[_10d7(_11ad),_10d7(this)]);return false;}var _11ae=dj.byId("renewal_calendar_date");if(_11ae){if(_11ae.get("value")!=null&&this.get("value")!=null&&(_11ae.get("value")>this.get("value"))){var _11af=dojo.date.locale.format(_11ae.get("value"),{selector:"date",formatLength:"short",locale:dojo.config.locale});var _11b0=dojo.date.locale.format(this.get("value"),{selector:"date",formatLength:"short",locale:dojo.config.locale});_11ae.invalidMessage=m.getLocalization("calendarDateLessThanSystemDate",[_11af,_11b0]);_11ae.set("state","Error");}else{if(_11ae.get("value")!=null&&this.get("value")!=null&&_11ae.get("value")<=this.get("value")){_11ae.set("state","");}}}var _11b1=dj.byId("next_revolve_date");if(_11b1&&!m.compareDateFields(_11b1,this)){this.invalidMessage=m.getLocalization("expDateLessThanNextRevolveDateError",[_10d7(_11b1),_10d7(this)]);return false;}if(!m._config.isBank){var _11b2=this.get("value");var days=_10d1(this);if(days<0){this.invalidMessage=m.getLocalization("expiryDateSmallerThanSystemDate",[_10d7(this)]);return false;}}return true;},validateEnteredDateGreaterThanCurrentDate:function(){if(!m._config.isBank||(m._config.isBank&&dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")==="03"||dj.byId("prod_stat_code").get("value")==="08")){var _11b3=dj.byId("maturity_date");if(this.get("value")!=null){var days=_10d1(this);if(days<0){m.dialog.show("ERROR",m.getLocalization("lessthanCurrentDate"));_11b3.set("value"," ");return false;}}}return true;},validateAmendBGTradeExpiryDate:function(){var _11b4=dj.byId("amd_date");if((_11b4)&&(!m.compareDateFields(_11b4,this))){this.invalidMessage=m.getLocalization("ExpiryDateLessThanamendDate",[_10d7(this),_10d7(_11b4)]);return false;}var _11b5=this.get("value");var days=_10d1(this);if(days<0){this.invalidMessage=m.getLocalization("expiryDateSmallerThanSystemDate",[_10d7(this)]);return false;}var _11b6=dj.byId("renewal_calendar_date");if(_11b6){if(_11b6.get("value")!=null&&this.get("value")!=null&&(_11b6.get("value")>this.get("value"))){this.invalidMessage=m.getLocalization("expiryDateLessThanRenewalDate",[_10d7(_11b6)]);return false;}}return true;},validateContractDate:function(){if(!this.get("value")){return true;}var _11b7=dj.byId("appl_date");if(!m.compareDateFields(this,_11b7)){this.invalidMessage=m.getLocalization("contractDateGreaterThanApplicationDateError",[_10d7(this),_10d7(_11b7)]);return false;}return true;},validateBaseDate:function(){if(!this.get("value")){return true;}var _11b8=dj.byId("appl_date");if(!m.compareDateFields(this,_11b8)){this.invalidMessage=m.getLocalization("baseDateGreaterThanApplicationDateError",[_10d7(this),_10d7(_11b8)]);return false;}return true;},validateDocumentDate:function(){if(!this.get("value")){return true;}var _11b9=dj.byId("appl_date");if(!m.compareDateFields(this,_11b9)){this.invalidMessage=m.getLocalization("documentDateGreaterThanApplicationDateError",[_10d7(this),_10d7(_11b9)]);m._config.errorField.push(this);return false;}if(!(this.get("state")==="Error")){m._config.errorField=[];}return true;},validateTenderExpiryDate:function(){if(!this.get("value")){return true;}var _11ba=dj.byId("appl_date");if(!m.compareDateFields(_11ba,this)){this.invalidMessage=m.getLocalization("tenderExpDateLessThanApplicationDateError",[_10d7(this),_10d7(_11ba)]);return false;}var _11bb=dj.byId("exp_date");if((_11bb)&&(!m.compareDateFields(this,_11bb))){this.invalidMessage=m.getLocalization("expDateGreaterThanTenderExpiryDateError",[_10d7(this),_10d7(_11bb)]);return false;}return true;},validateMessageTradeExpiryDate:function(){if(!this.get("value")){return true;}var _11bc=dj.byId(this.id);var _11bd=dj.byId("org_exp_date");if(!m.compareDateFields(_11bd,_11bc)){this.invalidMessage=m.getLocalization("expiryDateSmallerThanOrgExpiryDate",[_10d7(_11bc),_10d7(_11bd)]);return false;}var _11be=dj.byId("iss_date");if(!m.compareDateFields(_11be,_11bc)){this.invalidMessage=m.getLocalization("expiryDateSmallerThanIssueDate",[_10d7(_11bc),_10d7(_11be)]);return false;}var days=_10d1(this);if(days<0){this.invalidMessage=m.getLocalization("expiryDateSmallerThanSystemDate",[_10d7(_11bc)]);return false;}return true;},validateMessageTransferTradeExpiryDate:function(){if(!this.get("value")){return true;}var _11bf=dj.byId(this.id);var _11c0=dj.byId("org_exp_date");if(!m.compareDateFields(_11bf,_11c0)){this.invalidMessage=m.getLocalization("expiryDateBiggerThanOrgExpiryDate",[_10d7(_11bf),_10d7(_11c0)]);return false;}var _11c1=dj.byId("iss_date");if(!m.compareDateFields(_11c1,_11bf)){this.invalidMessage=m.getLocalization("expiryDateSmallerThanIssueDate",[_10d7(_11bf),_10d7(_11c1)]);return false;}var days=_10d1(this);if(days<0){this.invalidMessage=m.getLocalization("expiryDateSmallerThanSystemDate",[_10d7(_11bf)]);return false;}return true;},validateFreeFormatMessage:function(){if(dj.byId("free_format_text").get("value")===""||dj.byId("free_format_text").get("value")===null){this.invalidMessage=m.getLocalization("requiredToolTip");return false;}else{return true;}},validateTradeMaturityDate:function(){if(!this.get("value")){return true;}var _11c2=dj.byId("appl_date");if(!m.compareDateFields(_11c2,this)){this.invalidMessage=m.getLocalization("maturityDateLessThanAppDateError",[_10d7(this),_10d7(_11c2)]);return false;}return true;},validateAWBIssueDate:function(){if(!this.get("value")){return true;}var _11c3=dj.byId("appl_date");if(!m.compareDateFields(_11c3,this)){this.invalidMessage=m.getLocalization("awbIssueDateLessThanAppDateError",[_10d7(this),_10d7(_11c3)]);return false;}return true;},validateOrderedDates:function(_11c4,_11c5,_11c6,_11c7){if(!this.get("value")){return true;}var _11c8=dj.byId(_11c6);if(!m.compareDateFields(this,_11c8)){this.invalidMessage=m.getLocalization(_11c7,[_10d7(this),_10d7(_11c8)]);return false;}var _11c9=dj.byId(_11c5);if(!m.compareDateFields(_11c9,this)){this.invalidMessage=m.getLocalization(_11c7,[_10d7(_11c9),_10d7(this)]);return false;}return true;},validateDateGreaterThan:function(_11ca,_11cb,_11cc){if(!this.get("value")){return true;}var _11cd;if(!_11cb){_11cd=dj.byId("appl_date");}else{_11cd=dj.byId(_11cb);}if(!m.compareDateFields(_11cd,this)){this.invalidMessage=m.getLocalization(_11cc,[_10d7(this),_10d7(_11cd)]);return false;}return true;},validateDateSmallerThan:function(_11ce,_11cf,_11d0){if(!this.get("value")){return true;}var _11d1=dj.byId(_11cf);if(!m.compareDateFields(this,_11d1)){this.invalidMessage=m.getLocalization(_11d0,[_10d7(this),_10d7(_11d1)]);return false;}return true;},validateLastShipmentDate:function(){if(!this.get("value")){return true;}var _11d2=dj.byId("exp_date");if(!m.compareDateFields(this,_11d2)){this.invalidMessage=m.getLocalization("expiryDateLessThanLastShipmentError",[_10d7(_11d2),_10d7(this)]);return false;}if(_11d2&&_11d2.get("value")==null){var _11d3=dj.byId("org_exp_date");if(_11d3&&!m.compareDateFields(this,_11d3)){this.invalidMessage=m.getLocalization("originalexpiryDateLessThanLastShipmentError",[_10d7(_11d3),_10d7(this)]);return false;}}var _11d4=dj.byId("due_date");if(!m.compareDateFields(this,_11d4)){this.invalidMessage=m.getLocalization("dueDateLessThanLastShipmentError",[_10d7(_11d4),_10d7(this)]);return false;}var _11d5=dj.byId("earliest_ship_date");if(_11d5&&_11d5.get("value")!==null){if(misys._config.shipment_period_standard===false){if((!m.compareDateFields(_11d5,this))){this.invalidMessage=m.getLocalization("lastDateLesserThanEarliestShipmentDate",[_10d7(this),_10d7(_11d5)]);return false;}}else{if(!m.compareDateFields(_11d5,this)){this.invalidMessage=m.getLocalization("lastShipDateLessThanEarliestShipDateError",[_10d7(this),_10d7(_11d5)]);return false;}}}return true;},validateEarliestShipmentDate:function(){if(!this.get("value")){return true;}var _11d6=dj.byId("last_ship_date");var _11d7=dj.byId("exp_date");if((!m.compareDateFields(this,_11d6))){this.invalidMessage=m.getLocalization("earliestDateGreaterThanLastShipmentDate",[_10d7(_11d6),_10d7(this)]);return false;}if(!m.compareDateFields(this,_11d7)){this.invalidMessage=m.getLocalization("earliestDateGreaterThanExpiryDate",[_10d7(_11d7),_10d7(this)]);return false;}return true;},validateMessageTransferLastShipmentDate:function(){if(!this.get("value")){return true;}var _11d8=dj.byId("exp_date");if(!m.compareDateFields(this,_11d8)){this.invalidMessage=m.getLocalization("expiryDateLessThanLastShipmentError",[_10d7(_11d8),_10d7(this)]);return false;}var _11d9=dj.byId(this.id);var _11da=dj.byId("org_last_ship_date");if(!m.compareDateFields(_11d9,_11da)){this.invalidMessage=m.getLocalization("lastShipDateBiggerThanOrgLastShipDate",[_10d7(_11d9),_10d7(_11da)]);return false;}return true;},validateRenewFor:function(){if(!isNaN(dj.byId("renew_for_nb").get("value"))){var _11db=dj.byId("renew_for_nb").get("value")+"";if(_11db.indexOf(".")!==-1){dj.byId("renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeInteger");return false;}if(_11db<=0){dj.byId("renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeGreaterThanZero");return false;}}return true;},validateDaysNotice:function(){if(!isNaN(dj.byId("advise_renewal_days_nb").get("value"))){var _11dc=dj.byId("advise_renewal_days_nb").get("value")+"";if(_11dc.indexOf(".")!==-1){dj.byId("advise_renewal_days_nb").invalidMessage=m.getLocalization("valueShouldBeInteger");return false;}if(_11dc<=0){dj.byId("renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeGreaterThanZero");return false;}}return true;},validateRollingFrequency:function(){if(!isNaN(dj.byId("rolling_renew_for_nb").get("value"))){var _11dd=dj.byId("rolling_renew_for_nb").get("value")+"";if(_11dd.indexOf(".")!==-1){dj.byId("rolling_renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeInteger");return false;}if(_11dd<=0){dj.byId("rolling_renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeGreaterThanZero");return false;}}return true;},validateNumberOfRenewals:function(){if(!isNaN(dj.byId("rolling_renewal_nb").get("value"))){var _11de=dj.byId("rolling_renewal_nb").get("value")+"";if(_11de.indexOf(".")!==-1){dj.byId("rolling_renewal_nb").invalidMessage=m.getLocalization("valueShouldBeInteger");return false;}if(_11de<=0){dj.byId("renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeGreaterThanZero");return false;}}return true;},validateCancellationNotice:function(){if(!isNaN(dj.byId("rolling_cancellation_days").get("value"))){var _11df=dj.byId("rolling_cancellation_days").get("value")+"";if(_11df.indexOf(".")!==-1){dj.byId("rolling_cancellation_days").invalidMessage=m.getLocalization("valueShouldBeInteger");return false;}if(_11df<=0){dj.byId("renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeGreaterThanZero");return false;}}return true;},validateTolerance:function(){var _11e0=(dj.byId("DrawingTolerence_spl")&&dj.byId("DrawingTolerence_spl").get("value")==="true");var _11e1=dj.byId("max_cr_desc_code")?dj.byId("max_cr_desc_code").get("value"):"";if(_11e0&&_11e1==3){if(dj.byId("pstv_tol_pct").get("value")!=0){dj.byId("pstv_tol_pct").set("value","0");}if(dj.byId("neg_tol_pct").get("value")!=5){dj.byId("neg_tol_pct").set("value","5");}dj.byId("pstv_tol_pct").set("readOnly",true);dj.byId("neg_tol_pct").set("readOnly",true);if(!isNaN(this.get("value"))&&this.get("value")<0){return false;}return true;}else{var _11e2=dj.byId("max_cr_desc_code");if(!(isNaN(this.get("value"))||this.get("value")=="")&&_11e2&&_11e2.get("value")){this.invalidMessage=m.getLocalization("toleranceExclusivityError");return false;}else{if(!isNaN(this.get("value"))&&this.get("value")<0){return false;}else{if(dj.byId("pstv_tol_pct").displayedValue==="."&&this.id!=="neg_tol_pct"){this.invalidMessage=m.getLocalization("invalidMessage");return false;}else{if(dj.byId("neg_tol_pct").displayedValue==="."&&this.id!=="pstv_tol_pct"){this.invalidMessage=m.getLocalization("invalidMessage");return false;}}}}return true;}},validateMaxCreditTerm:function(){var _11e3=dj.byId("DrawingTolerence_spl").get("value")==="true";var _11e4=dj.byId("max_cr_desc_code");if(_11e3&&_11e4==3){d.forEach(dj.byId("max_cr_desc_code").store.root.children,function(_11e5){if((dj.byId("max_cr_desc_code").get("displayedValue")===_11e5.text)){_11e6=true;}});dj.byId("pstv_tol_pct").set("value","0");dj.byId("neg_tol_pct").set("value","5");dj.byId("pstv_tol_pct").set("readOnly",true);dj.byId("neg_tol_pct").set("readOnly",true);return true;}else{dj.byId("pstv_tol_pct").set("readOnly",false);dj.byId("neg_tol_pct").set("readOnly",false);if(this.get("value")&&((!isNaN(dj.byId("pstv_tol_pct").get("value"))||!isNaN(dj.byId("neg_tol_pct").get("value")))&&!(dj.byId("pstv_tol_pct").get("value")==""&&dj.byId("neg_tol_pct").get("value")==""))){this.invalidMessage=m.getLocalization("toleranceExclusivityError");return false;}else{var _11e6=false;d.forEach(dj.byId("max_cr_desc_code").store.root.children,function(_11e7){if((dj.byId("max_cr_desc_code").get("displayedValue")===_11e7.text)){_11e6=true;}});}return _11e6;}},validateCurrency:function(){var _11e8=this.get("value"),_11e9=true,that=this;if(!_11e8){return true;}if(_11e8.length!==3){return false;}if(!m._config.currencyCodes||m._config.currencyCodes.length<1){m._config=m._config||{};d.mixin(m._config,{currencyCodes:[]});m.xhrGet({url:_10c4,handleAs:"json",contentType:_10cd,content:{bank_abbv_name:(dj.byId("bank_abbv_name")&&misys._config.isMultiBank===true)?dj.byId("bank_abbv_name").get("value"):""},preventCache:true,sync:true,load:function(_11ea,args){m._config.currencyCodes=_11ea.currencyCodesJsonArray;},error:function(_11eb,args){console.error(_10ca,_11eb);}});}if(d.indexOf(m._config.currencyCodes,_11e8)===-1){that.invalidMessage=m.getLocalization("invalidCurrencyError",[that.get("displayedValue")]);_11e9=false;}return _11e9;},validateCurrencyObj:function(_11ec){var _11ed=_11ec.get("value");var _11ee=true;var that=_11ec;var _11ef="";if(!_11ed){return true;}if(_11ed.length!==3){_11ef=m.getLocalization("invalidCurrencyError",[that.get("value")]);that.focus();that.set("value","");dijit.hideTooltip(that.domNode);dijit.showTooltip(_11ef,that.domNode,0);setTimeout(function(){dijit.hideTooltip(that.domNode);},2000);return false;}if(!m._config.currencyCodes||m._config.currencyCodes.length<1){m._config=m._config||{};d.mixin(m._config,{currencyCodes:[]});m.xhrGet({url:_10c4,handleAs:"json",contentType:_10cd,content:{bank_abbv_name:(dj.byId("bank_abbv_name")&&misys._config.isMultiBank===true)?dj.byId("bank_abbv_name").get("value"):""},preventCache:true,sync:true,load:function(_11f0,args){m._config.currencyCodes=_11f0.currencyCodesJsonArray;},error:function(_11f1,args){console.error(_10ca,_11f1);}});}if(d.indexOf(m._config.currencyCodes,_11ed)===-1){_11ef=m.getLocalization("invalidCurrencyError",[that.get("value")]);that.focus();that.set("value","");dijit.hideTooltip(that.domNode);dijit.showTooltip(_11ef,that.domNode,0);setTimeout(function(){dijit.hideTooltip(that.domNode);},2000);_11ee=false;}return _11ee;},validateUserAccountNumber:function(){if(misys._config.userAccountValidationEnabled==="false"){return true;}else{var _11f2=this.get("value"),_11f3=true,that=this;var _11f4=new RegExp(misys._config.userAccountValidationRegex);if(_11f2!==""&&_11f2!==null){_11f3=_11f4.test(_11f2);}if(!_11f3){var _11f5=that.get("displayedValue");if(_11f5){_11f5=_11f5.replace(/</g,"&lt;");_11f5=_11f5.replace(/>/g,"&gt;");}that.invalidMessage=m.getLocalization("invalidUserAccountNumber",[_11f5]);_11f3=false;}return _11f3;}},validateCurrencyCode:function(_11f6){var _11f7=_11f6,_11f8=true,that=this;if(!_11f7){return true;}if(_11f7.length!==3){return false;}if(!m._config.currencyCodes||m._config.currencyCodes.length<1){m._config=m._config||{};d.mixin(m._config,{currencyCodes:[]});m.xhrGet({url:_10c4,handleAs:"json",contentType:_10cd,preventCache:true,sync:true,load:function(_11f9,args){m._config.currencyCodes=_11f9.currencyCodesJsonArray;},error:function(_11fa,args){console.error(_10ca,_11fa);}});}if(d.indexOf(m._config.currencyCodes,_11f7)===-1){_11f8=false;}return _11f8;},validateCountry:function(){var _11fb=this.get("value"),_11fc=true,that=this;if(!_11fb){return true;}if(_11fb.length!==2){return false;}if(!m._config.countryCodes||m._config.countryCodes.length<1){m._config=m._config||{};d.mixin(m._config,{countryCodes:[]});m.xhrGet({url:m.getServletURL("/screen/AjaxScreen/action/GetCountryCodes"),handleAs:"json",contentType:_10cd,preventCache:true,sync:true,load:function(_11fd,args){m._config.countryCodes=_11fd.countryCodesJsonArray;},error:function(_11fe,args){console.error("[misys.validation.common] validateCountry error",_11fe);}});}if(d.indexOf(m._config.countryCodes,_11fb)===-1){that.invalidMessage=m.getLocalization("invalidCountryError",[that.get("displayedValue")]);_11fc=false;}return _11fc;},validateExecDate:function(){var _11ff=dj.byId("appl_date");if(!m.compareDateFields(this,_11ff)){this.invalidMessage=m.getLocalization("executionDateLessThanAppDateError",[_10d7(this),_10d7(_11ff)]);return false;}return true;},validateIssueDate:function(){if(!this.get("value")){return true;}var _1200=dj.byId("product_code");if(_1200&&_1200.get("value")!=="SR"&&_1200.get("value")!=="BR"&&_1200.get("value")!=="EL"&&_1200.get("value")!=="LS"){var _1201=dj.byId("appl_date");if(!m.compareDateFields(_1201,this)){this.invalidMessage=m.getLocalization("issueDateLessThanAppDateError",[_10d7(this),_10d7(_1201)]);return false;}}if(dj.byId("tenor_maturity_date")&&dj.byId("tenor_maturity_date").get("value")!=null){var _1202=dj.byId("tenor_maturity_date");if(!m.compareDateFields(this,_1202)){this.invalidMessage=m.getLocalization("IssueDateGreaterThanMaturityDateError",[_10d7(this),_10d7(_1202)]);return false;}}if(dj.byId("exp_date")&&dj.byId("exp_date").get("value")!=null){var _1203=dj.byId("exp_date");if(!m.compareDateFields(this,_1203)){this.invalidMessage=m.getLocalization("issueDateGreaterThanExpiryDateError",[_10d7(this),_10d7(_1203)]);return false;}}if(dj.byId("product_code")&&dj.byId("product_code").get("value")==="LS"){var _1204=dj.byId("bankDate")&&dj.byId("bankDate").get("value")!=null?dj.byId("bankDate").get("value"):"";var days=_10d1(this);if(days>0){this.invalidMessage=m.getLocalization("issueDateGreaterThanCurrentDateError",[_10d7(this)]);return false;}if(dj.byId("reg_date")){var _1205=dj.byId("reg_date");if(!m.compareDateFields(_1205,this)){this.invalidMessage=m.getLocalization("issDateLessThanRegDateError",[_10d7(this),_10d7(_1205)]);return false;}}}if(dj.byId("valid_from_date")&&dj.byId("valid_from_date").get("value")!=null){var _1206=dj.byId("valid_from_date");if(!m.compareDateFields(this,_1206)){this.invalidMessage=m.getLocalization("issueDateGreaterThanValidFromDateError",[_10d7(this),_10d7(_1206)]);return false;}}if(dj.byId("valid_to_date")&&dj.byId("valid_to_date").get("value")!=null){var _1207=dj.byId("valid_to_date");if(!m.compareDateFields(this,_1207)){this.invalidMessage=m.getLocalization("issueDateGreaterThanValidToDateError",[_10d7(this),_10d7(_1207)]);return false;}}if(dj.byId("latest_payment_date")&&dj.byId("latest_payment_date").get("value")!=null){var _1208=dj.byId("latest_payment_date");if(!m.compareDateFields(this,_1208)){this.invalidMessage=m.getLocalization("issueDateGreaterThanLatestPaymentDateError",[_10d7(this),_10d7(_1208)]);return false;}}if((dj.byId("tnxtype")&&(dj.byId("tnxtype").get("value")!=="38"))||(dj.byId("close_tnx")&&(dj.byId("close_tnx").get("checked")===false))){if(dj.byId("product_code")&&(dj.byId("product_code").get("value")==="IO"||dj.byId("product_code").get("value")==="EA")){var _1209=dj.byId("last_match_date");if((_1209&&_1209.get("value")!=null)&&(!m.compareDateFields(this,_1209))){this.invalidMessage=m.getLocalization("issueDateLessThanLastMatchDateError",[_10d7(this),_10d7(_1209)]);return false;}}}return true;},validateEffectiveIssueDate:function(){if(!this.get("value")){return true;}if(dj.byId("exp_date")&&dj.byId("exp_date").get("value")!=null){var _120a=dj.byId("exp_date");if(!m.compareDateFields(this,_120a)){this.invalidMessage=m.getLocalization("effectiveDateGreaterThanExpiryDateError",[_10d7(this),_10d7(_120a)]);return false;}}var _120b=dj.byId("appl_date");if(_120b&&_120b.get("value")!=null){if(!m.compareDateFields(_120b,this)){this.invalidMessage=m.getLocalization("AppDateMoreThanEffectiveDateError",[_10d7(this),_10d7(_120b)]);return false;}}return true;},validatePaymentDueDate:function(){if(!this.get("value")){return true;}var _120c=dj.byId("appl_date");if(!m.compareDateFields(_120c,this)){this.invalidMessage=m.getLocalization("paymentDueDateDateLessThanAppDateError",[_10d7(this),_10d7(_120c)]);return false;}return true;},validateMOProdIssueDate:function(){if(!this.get("value")){return true;}var _120d=dj.byId("appl_date");if(!m.compareDateFields(this,_120d)){this.invalidMessage=m.getLocalization("issueDateMoreThanAppDateError",[_10d7(this),_10d7(_120d)]);return false;}if(dj.byId("tenor_maturity_date")&&dj.byId("tenor_maturity_date").get("value")!=null){var _120e=dj.byId("tenor_maturity_date");if(!m.compareDateFields(this,_120e)){this.invalidMessage=m.getLocalization("IssueDateGreaterThanMaturityDateError",[_10d7(this),_10d7(_120e)]);return false;}}if(dj.byId("exp_date")&&dj.byId("exp_date").get("value")!=null){var _120f=dj.byId("exp_date");if(!m.compareDateFields(this,_120f)){this.invalidMessage=m.getLocalization("issueDateGreaterThanExpiryDateError",[_10d7(this),_10d7(_120f)]);return false;}}return true;},validateMOProdELIssueDate:function(){if(!this.get("value")){return true;}if(dj.byId("tenor_maturity_date")&&dj.byId("tenor_maturity_date").get("value")!=null){var _1210=dj.byId("tenor_maturity_date");if(!m.compareDateFields(this,_1210)){this.invalidMessage=m.getLocalization("IssueDateGreaterThanMaturityDateError",[_10d7(this),_10d7(_1210)]);return false;}}if(dj.byId("exp_date")&&dj.byId("exp_date").get("value")!=null){var _1211=dj.byId("exp_date");if(!m.compareDateFields(this,_1211)){this.invalidMessage=m.getLocalization("issueDateGreaterThanExpiryDateError",[_10d7(this),_10d7(_1211)]);return false;}}return true;},validateMaturityDate:function(){if(!this.get("value")){return true;}var _1212=dj.byId("appl_date");if(!m.compareDateFields(_1212,this)){this.invalidMessage=m.getLocalization("maturityDateLessThanAppDateError",[_10d7(this),_10d7(_1212)]);return false;}if(dj.byId("iss_date")&&dj.byId("iss_date").get("value")!=null){var _1213=dj.byId("iss_date");if(!m.compareDateFields(_1213,this)){this.invalidMessage=m.getLocalization("maturityDateLessThanIssueDateError",[_10d7(this),_10d7(_1213)]);return false;}}return true;},validateIssueDateInMO:function(){var _1214=dj.byId("iss_date");var _1215=dj.byId("appl_date");if(_1214&&_1214.get("value")&&_1215&&_1215.get("value")&&!m.compareDateFields(_1215,_1214)){var _1216=function(){var _1217=dijit.byId("iss_date");_1217.focus();_1217.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("issueDateLessThanAppDateError",[_1214.get("displayedValue"),_1215.get("displayedValue")]),"",function(){setTimeout(_1216,100);});return false;}},validateMaturityDateInMO:function(){var _1218=dj.byId("maturity_date");var _1219=dj.byId("iss_date");if(_1218&&_1218.get("value")){if(_1219&&_1219.get("value")&&!m.compareDateFields(_1219,_1218)){var _121a=function(){var _121b=dijit.byId("maturity_date");_121b.focus();_121b.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("maturityDateLessThanIssueDateError",[_1218.get("displayedValue"),_1219.get("displayedValue")]),"",function(){setTimeout(_121a,100);});return false;}}return true;},validateLatestAnswerDate:function(){if(!this.get("value")){return true;}var _121c=dj.byId("iss_date");if(!m.compareDateFields(_121c,this)){this.invalidMessage=m.getLocalization("lastAnwerDateLessThanIssDateError",[_10d7(this),_10d7(_121c)]);return false;}var _121d=dj.byId("exp_date");if(!m.compareDateFields(this,_121d)){this.invalidMessage=m.getLocalization("lastAnswerDateGreaterThanExpDateError",[_10d7(this),_10d7(_121d)]);return false;}return true;},validateLCAvailableAmt:function(){var _121e;if(dj.byId("lc_available_amt").get("value")>0){if(dj.byId("lc_amt")&&dj.byId("lc_available_amt")&&dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")=="03"&&(dj.byId("lc_amt").get("value")!=dj.byId("lc_available_amt").get("value"))){_121e=function(){var _121f=dijit.byId("lc_available_amt");_121f.focus();_121f.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("AvailLCAmtNotEqualToTranAmt"),"",function(){setTimeout(_121e,500);});}else{if(dj.byId("lc_amt")&&dj.byId("lc_available_amt")&&(dj.byId("lc_amt").get("value")<dj.byId("lc_available_amt").get("value"))){_121e=function(){var _1220=dijit.byId("lc_available_amt");_1220.focus();_1220.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("AvailLCamtcanNotMoreThanTranAmt"),"",function(){setTimeout(_121e,500);});}}}},validateLCLiabAmt:function(){var _1221;if(dj.byId("lc_liab_amt").get("value")>0){if(dj.byId("lc_amt")&&dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")==="03"&&(dj.byId("lc_amt").get("value")>dj.byId("lc_liab_amt").get("value"))){_1221=function(){var _1222=dijit.byId("lc_liab_amt");_1222.focus();_1222.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("LiabLCAmtcanNotLessThanTranAmt"),"",function(){setTimeout(_1221,500);});}}},validateTFMaturityDate:function(){var _1223=dj.byId("appl_date");if(!m.compareDateFields(_1223,this)){this.invalidMessage=m.getLocalization("maturityDateLessThanAppDateError",[_10d7(this),_10d7(_1223)]);return false;}var _1224=dj.byId("iss_date");if(!m.compareDateFields(_1224,this)){this.invalidMessage=m.getLocalization("issueDateGreaterThanMaturityError",[_10d7(_1224),_10d7(this)]);return false;}return true;},validateAmendAmount:function(_1225,node,_1226){var _1227=dj.byId(node);_1227.invalidMessage=_1227.messages.invalidMessage;if(!_1227.validator(_1227.textbox.value,_1227.constraints)){return false;}if(_1227&&_1227.get("value")<0){return false;}var _1228=(_1227.state==="Error")?false:true;if(false===_1225||(true===_1225&&!_1228)){_1228=true;var _1229=_1227.id;var _122a=d.number.parse(dj.byId("org_"+_1226+"_amt").get("value"));if(_1229==="inc_amt"){var _122b=_1227.get("value");if((!isNaN(_122b))&&((_122b+_122a)>Number.MAX_VALUE)){_1227.invalidMessage=m.getLocalization("maximumValueError");_1228=false;}}else{if(_1229==="dec_amt"){var _122c=_1227.get("value");if((!isNaN(_122c))&&((_122a-_122c)<0)){_1227.invalidMessage=m.getLocalization("amendAmountLessThanOriginalError");_1228=false;}}}}return _1228;},validateTransferAmount:function(){var value=this.get("value"),_122d=d.number.parse(dj.byId("org_lc_amt").get("value"));if(value&&_122d&&_122d<value){this.invalidMessage=m.getLocalization("transferAmtGreaterThanLCAmtError");return false;}return true;},validateStartDate:function(){if(!this.get("value")){return true;}var _122e=dj.byId("appl_date");if(!m.compareDateFields(_122e,this)){this.invalidMessage=m.getLocalization("startDateLessThanAppDateError",[_10d7(this),_10d7(_122e)]);return false;}var _122f=dj.byId("end_date");if(!m.compareDateFields(this,_122f)){this.invalidMessage=m.getLocalization("startDateGreaterThanEndDateError",[_10d7(this),_10d7(_122f)]);return false;}var _1230=dj.byId("registered_end_date");if(!m.compareDateFields(this,_1230)){this.invalidMessage=m.getLocalization("startDateGreaterThanRegisteredEndDateError",[_10d7(this),_10d7(_1230)]);return false;}return true;},validateEndDate:function(){if(!this.get("value")){return true;}var _1231=dj.byId("start_date");if(!m.compareDateFields(_1231,this)){this.invalidMessage=m.getLocalization("endDateLessThanStartDateError",[_10d7(this),_10d7(_1231)]);return false;}var _1232=dj.byId("registered_end_date");if(!m.compareDateFields(this,_1232)){this.invalidMessage=m.getLocalization("endDateGreaterThanRegisteredEndDateError",[_10d7(this),_10d7(_1232)]);return false;}return true;},validateNewsStartDate:function(){if(!this.get("value")){return true;}var _1233=dj.byId("start_display_date");var _1234=dj.byId("end_display_date");if(!m.compareDateFields(this,_1234)){this.invalidMessage=m.getLocalization("newsStartDateGreaterThanEndDateError",[_10d7(this),_10d7(_1234)]);return false;}var _1235,_1236;if((_1233)&&(_1233.get("value")!=="")){_1235=new Date();_1235.setHours(0,0,0,0);_1236=d.date.compare(m.localizeDate(_1233),_1235)<0?false:true;if(!_1236){_1233.state="Error";_1233.set("focusonerror",true);_1233.invalidMessage=m.getLocalization("startDateGreaterThanCurrentDateError",[_10d7(_1233)]);_1233._setStateClass();dj.setWaiState(_1233.focusNode,"invalid","true");return false;}}return true;},validateNewsEndDate:function(){if(!this.get("value")){return true;}var _1237=dj.byId("start_display_date");var _1238=dj.byId("end_display_date");if(!m.compareDateFields(_1237,this)){this.invalidMessage=m.getLocalization("newsEndDateLesserThanStartDateError",[_10d7(this),_10d7(_1237)]);return false;}var _1239,_123a;if((_1238)&&(_1238.get("value")!=="")){_1239=new Date();_1239.setHours(0,0,0,0);_123a=d.date.compare(m.localizeDate(_1238),_1239)<0?false:true;if(!_123a){_1238.state="Error";_1238.set("focusonerror",true);_1238.invalidMessage=m.getLocalization("endDateGreaterThanCurrentDateError",[_10d7(_1238)]);_1238._setStateClass();dj.setWaiState(_1238.focusNode,"invalid","true");return false;}}return true;},validateTransferDateCustomer:function(){var _123b,_123c;if(!this.get("value")){return true;}var _123d="";if(dj.byId("customer_bank")){_123d=dj.byId("customer_bank").get("value");}if(_123d===""){_123d=dj.byId("issuing_bank_abbv_name").get("value");}var _123e=dj.byId("appl_date");if(!m.compareDateFields(_123e,this)){this.invalidMessage=m.getLocalization("transferDateLessThanAppDateError",[_10d7(this),_10d7(_123e)]);return false;}if(dj.byId("sub_product_code").get("value")==="BILLP"||dj.byId("sub_product_code").get("value")==="BILLS"){var _123f=dj.byId("registered_end_date");if(!m.compareDateFields(this,_123f)){this.invalidMessage=m.getLocalization("transferDateGreaterThanRegisteredEndDateError",[_10d7(this),_10d7(_123f)]);return false;}}if(this.get("value")!==""){var _1240=parseInt(misys._config.businessDateForBank[_123d][0].value.substring(0,4),10);var _1241=parseInt(misys._config.businessDateForBank[_123d][0].value.substring(5,7),10);var _1242=parseInt(misys._config.businessDateForBank[_123d][0].value.substring(8,10),10);_123b=new Date(_1240,_1241-1,_1242);_123b.setHours(0,0,0,0);_123c=d.date.compare(m.localizeDate(this),_123b)<0?false:true;if(!_123c){this.invalidMessage=m.getLocalization("transferDateGreaterThanCurrentDateError",[_10d7(this)]);return false;}}return true;},validateTransferDateWithCurrentDate:function(_1243){var _1244,_1245;if((_1243)&&(_1243.get("value")!=="")){_1244=new Date();_1244.setHours(0,0,0,0);_1245=d.date.compare(m.localizeDate(_1243),_1244)<0?false:true;if(!_1245){_1243.state="Error";_1243.set("focusonerror",true);_1243.invalidMessage=m.getLocalization("transferDateGreaterThanCurrentDateError",[_10d7(_1243)]);_1243._setStateClass();dj.setWaiState(_1243.focusNode,"invalid","true");return false;}}return true;},validateTransferDate:function(){if(!this.get("value")){return true;}var _1246=dj.byId("appl_date");if(!m.compareDateFields(_1246,this)){this.invalidMessage=m.getLocalization("transferDateLessThanAppDateError",[_10d7(this),_10d7(_1246)]);return false;}if(dj.byId("sub_product_code").get("value")==="BILLP"||dj.byId("sub_product_code").get("value")==="BILLS"){var _1247=dj.byId("registered_end_date");if(!m.compareDateFields(this,_1247)){this.invalidMessage=m.getLocalization("transferDateGreaterThanRegisteredEndDateError",[_10d7(this),_10d7(_1247)]);return false;}}return true;},validateTransferExpiryDate:function(){if(!this.get("value")){return true;}var _1248=dj.byId("iss_date");if(!m.compareDateFields(_1248,this)){this.invalidMessage=m.getLocalization("transferExpiryDateLessThanIssueDateError",[_10d7(this),_10d7(_1248)]);return false;}var _1249=dj.byId("exp_date");if(!m.compareDateFields(this,_1249)){this.invalidMessage=m.getLocalization("transferExpiryDateGreaterThanExpiryDateError",[_10d7(this),_10d7(_1249)]);return false;}return true;},validateTransferLastShipmentDate:function(){if(!this.get("value")){return true;}var _124a=dj.byId("transfer_expiry_date");if(!m.compareDateFields(this,_124a)){this.invalidMessage=m.getLocalization("transferLastShipmentDateLessThanTransferExpiryDateError",[_10d7(this),_10d7(_124a)]);return false;}return true;},validateValueApplicationDate:function(){var _124b=this;if(_124b&&!_124b.get("value")){return true;}var _124c=dj.byId("appl_date");var _124d=d.date.compare(m.localizeDate(_124b),m.localizeDate(_124c))<0?false:true;if(!_124d){_124b.state="Error";_124b.set("focusonerror",true);_124b.invalidMessage=m.getLocalization("valueDateIsLessThanApplDateError",[_10d7(_124b),_10d7(_124c)]);_124b._setStateClass();dj.setWaiState(_124b.focusNode,"invalid","true");return false;}return true;},validateTransferNumbers:function(){if(!this.get("value")){return true;}if(this.get("value")<0||this.get("value")>999){this.invalidMessage=m.getLocalization("invalidTransferNumbers");return false;}return true;},validateBlankEndorsedPercentage:function(){if(!this.get("value")){return true;}if(this.get("value")<110||this.get("value")>999){this.invalidMessage=m.getLocalization("invalidBlankEndorsedPercentage");return false;}return true;},validateAmendmentDate:function(){var _124e=this.get("value");if(!m._config.isBank||(m._config.isBank&&dj.byId("prod_stat_code")&&(dj.byId("prod_stat_code").get("value")==="03"||dj.byId("prod_stat_code").get("value")==="08"))){if(_124e!=null){var days=_10d1(this);if(days<0){this.invalidMessage=m.getLocalization("amdDateSmallerThanCurrentDate",[_10d7(this)]);return false;}}if(dj.byId("amd_date")&&dj.byId("amd_date").get("value")!=null&&dj.byId("exp_date")&&dj.byId("exp_date").get("value")!=null){var _124f=dj.byId("amd_date");var _1250=dj.byId("exp_date");var _1251=d.date.compare(m.localizeDate(_124f),m.localizeDate(_1250))>=0?false:true;if(!_1251){this.invalidMessage=m.getLocalization("amdDateGreaterThanExpiryDate",[_10d7(_124f),_10d7(_1250)]);return false;}}}return true;},validateBGAmendmentDate:function(){var _1252=this.get("value");var _1253=new Date();var that=this;_1253.setHours(0,0,0,0);if(_1252!=null){var days=_10d1(this);if(days<0){this.invalidMessage=m.getLocalization("amdDateSmallerThanCurrentDate",[_10d7(this)]);return false;}}if(dj.byId("amd_date")&&dj.byId("amd_date").get("value")!=null&&dj.byId("exp_date")&&dj.byId("exp_date").get("value")!=null){var _1254=dj.byId("amd_date");var _1255=dj.byId("exp_date");var _1256=d.date.compare(m.localizeDate(_1254),m.localizeDate(_1255))>=0?false:true;if(!_1256){this.invalidMessage=m.getLocalization("amdDateGreaterThanExpiryDate",[_10d7(_1254),_10d7(_1255)]);return false;}}return true;},validateBankExpiryDate:function(){if(!this.get("value")){return true;}var _1257=dj.byId("appl_date");if(!m.compareDateFields(_1257,this)){this.invalidMessage=m.getLocalization("expiryDateLessThanAppDateError",[_10d7(this),_10d7(_1257)]);return false;}var _1258=dj.byId("iss_date");if(!m.compareDateFields(_1258,this)){this.invalidMessage=m.getLocalization("expiryDateLessThanIssueDateError",[_10d7(this),_10d7(_1258)]);return false;}var _1259=dj.byId("org_previous_exp_date");if(!m.compareDateFields(_1259,this)){this.invalidMessage=m.getLocalization("orgExpDateGreaterThanExpiryDateError",[_10d7(this),_10d7(_1259)]);return false;}var _125a=dj.byId("last_ship_date");if(!m.compareDateFields(_125a,this)){this.invalidMessage=m.getLocalization("expiryDateLessThanLastShipmentError",[_10d7(this),_10d7(_125a)]);return false;}var _125b=dj.byId("next_revolve_date");if(_125b&&!m.compareDateFields(_125b,this)){this.invalidMessage=m.getLocalization("expDateLessThanNextRevolveDateError",[_10d7(_125b),_10d7(this)]);return false;}if((!m._config.isBank&&(null==dj.byId("prod_stat_code")||null!=dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")!="10"))||(m._config.isBank&&null!=dj.byId("prod_stat_code")&&dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")==="03"||dj.byId("prod_stat_code").get("value")==="08")){if(dj.byId("product_code")&&(dj.byId("product_code").get("value")==="BG"||dj.byId("product_code").get("value")==="LC"||dj.byId("product_code").get("value")==="EL"||dj.byId("product_code").get("value")==="SI")){var days=_10d1(this);if(days<0){this.invalidMessage=m.getLocalization("expiryDateSmallerThanSystemDate",[_10d7(this)]);return false;}}}return true;},validateLink:function(){if(dj.byId("link").get("value")!==""&&dj.byId("file_name").get("value")!==""){this.invalidMessage=m.getLocalization("tooManyNewsLinksError");return false;}return true;},validateBICFormat:function(){var bic=this.get("value"),regex=new RegExp(dj.byId("swiftBicCodeRegexValue")?dj.byId("swiftBicCodeRegexValue").get("value"):"");if(!dj.byId("swiftBicCodeRegexValue")){this.invalidMessage=m.getLocalization("invalidBICError",[bic]);return false;}if(bic){if(!regex.test(bic)){this.invalidMessage=m.getLocalization("invalidBICError",[bic]);return false;}}return true;},validateLiquidityBranchReference:function(){var _125c=dj.byId("liquidity_branch_reference");if(_125c&&_125c.get("value")!==""){var _125d=misys._config.liquidityBranchReferences;for(var itr=0;itr<_125d.length;itr++){if(misys._config.liqBranchRef===_125c.get("value")){return true;}else{if(_125c.get("value")===_125d[itr].fi_code&&_125d[itr].in_use==="Y"){this.invalidMessage=m.getLocalization("invalidLBORefError");return false;}}}}return true;},checkEmailExistence:function(){var _125e=dj.byId("email");var login=dj.byId("login_id");var _125f=dj.byId("company_abbv_name");var field=dijit.byId("email");var _1260=dj.byId("org_email")?dj.byId("org_email").get("value"):"";var _1261=dj.byId("user_id")?dj.byId("user_id").get("value"):"";var _1262=_125e?_125e.get("value"):"";var _1263=login?login.get("value"):"";var _1264=_125f?_125f.get("value"):"";var _1265=(field&&(field.get("state")==="Error"||field.get("state")==="Incomplete"||field.readOnly||field.disabled))?false:true;if(_1262){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckEmailUniquenessAction"),handleAs:"json",sync:true,content:{emailInContext:_1262,loginInContext:_1263,companyInContext:_1264,orgEmail:_1260,userID:_1261},load:function(_1266){var _1267="";if(_1266.items.isEmailUnique===false&&_1265){_1265=false;_1267=m.getLocalization("emailIdExists",[_1262]);m.dialog.show("CUSTOM-NO-CANCEL",_1267,"Email Error",function(){field.focus();field.set("state","Error");dj.hideTooltip(_125e.domNode);dj.showTooltip(_1267,_125e.domNode,0);});setTimeout(function(){dj.hideTooltip(_125e.domNode);},5000);}else{_1265=true;field.set("state","");}}});}else{_1265=true;}return _1265;},checkBICExistence:function(){var _1268=dijit.byId(this.id);var _1269=_1268?_1268.get("value"):"";var _126a=(_1268&&(_1268.get("state")==="Error"||_1268.get("state")==="Incomplete"||_1268.readOnly||_1268.disabled))?false:true;if(_1269&&_126a){var _126b=dijit.byId("product_code")?dijit.byId("product_code").get("value"):"";m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckSwiftBICAction"),handleAs:"json",sync:true,content:{productCode:_126b,bicInContext:_1269},load:function(_126c){var _126d="";if(!_126c.items.bankDataExists){_126a=true;_126d=m.getLocalization("nonExistentBICWarning",[_1269]);m.dialog.show(_10c5,_126d,"BIC Error",function(){dj.hideTooltip(_1268.domNode);dj.showTooltip(_126d,_1268.domNode,0);});setTimeout(function(){dj.hideTooltip(_1268.domNode);},5000);}else{if(!_126c.items.isValidBic){_126a=false;_126d=m.getLocalization("nonExistentBICError",[_1269]);m.dialog.show(_10c5,_126d,"BIC Error",function(){_1268.focus();_1268.set("state","Error");dj.hideTooltip(_1268.domNode);dj.showTooltip(_126d,_1268.domNode,0);});setTimeout(function(){dj.hideTooltip(_1268.domNode);},5000);}}}});}return _126a;},checkBICExistenceForWidgets:function(){var _126e=dijit.byId(this.id);var _126f=_126e?_126e.get("value"):"";var _1270=(_126e&&(_126e.get("state")==="Error"||_126e.get("state")==="Incomplete"||_126e.readOnly||_126e.disabled))?false:true;if(_126f&&_1270){var _1271=dijit.byId("product_code")?dijit.byId("product_code").get("value"):"";m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckSwiftBICAction"),handleAs:"json",sync:true,content:{productCode:_1271,bicInContext:_126f},load:function(_1272){var _1273="";if(!_1272.items.bankDataExists){_1270=true;_1273=m.getLocalization("nonExistentBICWarning",[_126f]);m.dialog.show(_10c5,_1273,"BIC Error",function(){dj.hideTooltip(_126e.domNode);dj.showTooltip(_1273,_126e.domNode,0);});setTimeout(function(){dj.hideTooltip(_126e.domNode);},5000);}else{if(!_1272.items.isValidBic){_1270=false;_1273=m.getLocalization("nonExistentBICError",[_126f]);m.dialog.show(_10c5,_1273,"BIC Error",function(){_126e.set("value","");_126e.focus();_126e.set("state","Error");dj.hideTooltip(_126e.domNode);dj.showTooltip(_1273,_126e.domNode,0);});setTimeout(function(){dj.hideTooltip(_126e.domNode);},5000);}}}});}return _1270;},validateBEIFormat:function(){var _1274="^[A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9][A-Z2-9]([A-Z0-9]{3,3}){0,1}$";var bei=this.get("value"),regex=(dj.byId("swiftBicCodeRegexValue")&&dj.byId("swiftBicCodeRegexValue").get("value")&&dj.byId("swiftBicCodeRegexValue").get("value")!=="")?new RegExp(dj.byId("swiftBicCodeRegexValue").get("value"),"g"):new RegExp(_1274,"g");if(bei){if(!regex.test(bei)){this.invalidMessage=m.getLocalization("invalidBEIError",[bei]);return false;}}return true;},validateSGI:function(){var reg=misys._config.sgiValidationRegex;var sgi=this.get("value"),regex=new RegExp(reg,"g");if(reg!==undefined&&reg!==null){var _1275=reg.substring(reg.indexOf("["),reg.indexOf("]")+1);var _1276=reg.substring(reg.indexOf("{"),reg.indexOf("}")).split(",")[1];if(sgi){if(!regex.test(sgi)){this.invalidMessage=m.getLocalization("sgiBbanValidationError",[_1275,_1276]);return false;}}}return true;},validateBBAN:function(){var reg=misys._config.bbanValidationRegex;var bban=this.get("value"),regex=new RegExp(reg);if(reg!==undefined&&reg!==null){var _1277=reg.substring(reg.indexOf("["),reg.indexOf("]")+1);var _1278=reg.substring(reg.indexOf("{"),reg.indexOf("}")).split(",")[1];if(bban){if(!regex.test(bban)){this.invalidMessage=m.getLocalization("sgiBbanValidationError",[_1277,_1278]);return false;}}}return true;},validateCharacters:function(){var _1279=" 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/-?.,+_";var _127a;var _127b=d.every(this.get("value"),function(_127c){_127a=_127c;return (_1279.indexOf(_127c)<0)?false:true;});if(!_127b){this.invalidMessage=m.getLocalization("illegalCharError",[_127a]);}return _127b;},validateCharsInRolesCreation:function(){var _127d="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-()/'  ";var _127e;var _127f=d.every(this.get("value"),function(_1280){_127e=_1280;return (_127d.indexOf(_1280)<0)?false:true;});if(!_127f){this.invalidMessage=m.getLocalization("illegalCharError",[_127e]);}return _127f;},validateSwiftAddressCharacters:function(){var _1281=dj.byId("swiftregexValue").get("value");var _1282=this.get("value"),_1283=new RegExp(_1281);var _1284=false;_1284=_1283.test(_1282);if(!_1284){this.invalidMessage=m.getLocalization("invalidSWIFTTransactionError");}return _1284;},validateCharactersExcludeSpace:function(){var _1285=" 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/-?.,+_";var _1286;var _1287=d.every(this.get("value"),function(_1288){_1286=_1288;return (_1285.indexOf(_1288)<0)?false:true;});if(!_1287){this.invalidMessage=m.getLocalization("illegalCharError",[_1286]);}return _1287;},validateBlackListChar:function(){var _1289=dijit.byId("blacklistspecialcharregexvalue").get("value");var _128a=new RegExp(_1289);var _128b=_128a.test(this.get("value"));if(_128b){this.invalidMessage=m.getLocalization("blacklistCharError");}return _128b;},validateBlackListCharInDynamicRTE:function(field){var _128c=field?field.get("value"):"";var _128d=dojo.trim(dojox.html.entities.encode(_128c,dojox.html.entities.html));var _128e=dijit.byId("blacklistspecialcharregexvalue").get("value");var _128f=new RegExp(_128e);var _1290=_128f.test(_128d);if(_1290){this.invalidMessage=m.getLocalization("blacklistCharError");}return _1290;},validateSingleEmailAddr:function(){var _1291=this.get("value");var _1292=true;if(_1291===""){return _1292;}if(!dojox.validate.isEmailAddress(_1291)){_1292=false;}if(!_1292){this.invalidMessage=m.getLocalization("invalidEmailAddressError");return false;}return true;},validateEmailAddr:function(){var _1293=this.get("value");if(_1293===""){return true;}var _1294=_1293.split(";");var _1295=[];var j=0;for(var i=(_1294.length-1);i>=0;i--){if(!dojox.validate.isEmailAddress(_1294[i])){_1295[j]=_1294[i];j++;}}if(i>j){this.invalidMessage=m.getLocalization("invalidEmailAddressError");return false;}for(var k=(_1295.length-1);k>=0;k--){if(!dojox.validate.isEmailAddress(_1295[k])){this.invalidMessage=m.getLocalization("invalidEmailAddressError");return false;}}return true;},validateNoOfEmails:function(){var _1296=dj.byId("notify_beneficiary_email").get("value");var res=_1296.split(";");if(res.length>10){var _1297=m.getLocalization("checkEmailId");dj.byId("notify_beneficiary_email").set("state","Error");dj.hideTooltip(dj.byId("notify_beneficiary_email").domNode);dj.showTooltip(_1297,dj.byId("notify_beneficiary_email").domNode,0);}},validateWebAddr:function(){var _1298=this.get("value");if(_1298===""){return true;}if(!dojox.validate.isUrl(_1298)){this.invalidMessage=m.getLocalization("invalidWebAddressError");return false;}return true;},validatePassword:function(){return true;},validateMonthly:function(){if(!dj.byId("frequency_2").get("checked")){this.set("value","");}var value=this.get("value");if(value==="29"||value==="30"||value==="31"){this.invalidMessage=m.getLocalization("monthDayWarningMessage");return false;}return true;},validateRateFormat:function(){var _1299=true;var rate=this.get("value");if(rate<0||rate===0){_1299=false;return _1299;}var _129a=(rate+"");var _129b=0;var _129c=0;var _129d=false;var _129e=false;d.forEach(_129a,function(_129f){if(((_129f>="0"||_129f<="9")&&_129f!==m.getLocalization("g_strDecimalDelimiter"))){if(!_129d){_129b=_129b+1;}else{_129c=_129c+1;}}else{if(_129f===m.getLocalization("g_strDecimalDelimiter")){_129d=true;_129e=true;if(_129b>m.getLocalization("g_numbersBeforeComma")){this.invalidMessage=m.getLocalization("rateMessageNumbersBeforeAndAfterComma",[m.getLocalization("g_numbersBeforeComma"),m.getLocalization("g_numbersAfterComma")]);_1299=false;}}}});if(_129c>m.getLocalization("g_numbersAfterComma")){this.invalidMessage=m.getLocalization("rateMessageNumbersBeforeAndAfterComma",[m.getLocalization("g_numbersBeforeComma"),m.getLocalization("g_numbersAfterComma")]);_1299=false;}var _12a0=m.getLocalization("g_numbersBeforeComma");var _12a1=parseInt(_12a0,10);if(!_129e&&_129a.length>_12a1){this.invalidMessage=m.getLocalization("rateMessageNumbersBeforeComma",[m.getLocalization("g_numbersBeforeComma")]);_1299=false;}return _1299;},validateTermNumberField:function(_12a2){if(!(/Date/.test(this.get("declaredClass")))){return false;}if(!this.isCorrectlyFilled()){return true;}if(!this.isValidNumber()){this.get("_numberField").invalidMessage=m.getLocalization(_12a2);return false;}return true;},validateDateTermField:function(_12a3,_12a4,_12a5,_12a6,_12a7){if(!(/Date/.test(this.get("declaredClass")))){return false;}this.get("_calendarWidget").invalidMessage=this.get("_calendarWidget").messages.invalidMessage;if(!this.get("_calendarWidget").validator(this.get("_calendarWidget").textbox.value,this.get("_calendarWidget").constraints)){return false;}if(!this.isCorrectlyFilled()){return true;}var _12a8=true;if(!_12a6){_12a6=false;}var _12a9;if(this.isValidDate()){_12a9=this.getFormalValueDate();if(!_12a9){return true;}}else{_12a9=_10dd(this.get("id"));if(_12a9<0){return true;}}if(!_12a9){return true;}var _12aa;var _12ab=dj.byId(_12a4);if(!_12a4){_12aa=new Date();}else{if(!(/Date/.test(_12ab.get("declaredClass")))){_12aa=m.localizeDate(_12ab);if(!_12aa){return true;}}else{if(_12ab.isValidDate()){_12aa=_12ab.getFormalValueDate();if(!_12aa){return true;}}else{if(_12a7){_12aa=_10dd(_12a4,_12a9);}else{_12aa=_10dd(_12a4);}if(_12aa<0){return true;}}}}_12a9.setHours(0);_12a9.setMinutes(0);_12a9.setSeconds(0);_12a9.setMilliseconds(0);if(_12aa!==undefined){_12aa.setHours(0);_12aa.setMinutes(0);_12aa.setSeconds(0);_12aa.setMilliseconds(0);}if(_12a6){_12a8=d.date.compare(_12a9,_12aa)<=0?true:false;}else{_12a8=d.date.compare(_12a9,_12aa)>=0?true:false;}if(!_12a8){this.get("_calendarWidget").invalidMessage=m.getLocalization(_12a5,[d.date.locale.format(_12a9,{selector:"date"}),d.date.locale.format(_12aa,{selector:"date"})]);}return _12a8;},validateOrderType:function(){var _12ac=dj.byId("order_list_by_default");if(_12ac&&_12ac.get("checked")){return this.get("displayedValue")!=="";}return true;},validateAxisScale:function(){var _12ad=dj.byId("chart_axis_x");if((_12ad&&_12ad.get("value")&&arrColumn)&&(arrColumn[_12ad][0]==="Date")){return this.get("displayedValue");}return true;},validateGroupingColumn:function(){var _12ae=dj.byId("grouping_enable");if(this.get("value")==""&&this.get("displayedValue")!=""){return false;}if(_12ae&&_12ae.get("checked")){return this.get("displayedValue")!=="";}return true;},validateOutstandingAmount:function(){var _12af=d.query(".outstanding");if(_12af.length===1){var _12b0=dj.byId(d.attr(_12af[0],"widgetid")).get("value")||0;if(_12b0>0&&this.get("value")==="10"){this.invalidMessage=m.getLocalization("outstandingAmountShouldBeZero");return false;}}return true;},validatecourierPartnerField:function(){var _12b1=dj.byId("courier_partner");var _12b2=dj.byId("courier_partner_waybill_no");if(_12b1&&_12b2){if(_12b1.get("value")!==""){m.toggleRequired("courier_partner_waybill_no",true);}else{m.toggleRequired("courier_partner_waybill_no",false);}}},validateShipmentDates:function(){var _12b3=dj.byId("last_ship_date"),_12b4=dj.byId("narrative_shipment_period");if(_12b3&&_12b4&&!_12b3.get("value")&&_12b4.get("value")===""){m._config.onSubmitErrorMsg=m.getLocalization("shipmentPeriodOrDateMissingError");return false;}return true;},validateHolidaysAndCutOffTime:function(_12b5,_12b6,mode,_12b7,_12b8,_12b9,_12ba,_12bb){var _12bc=misys._config.productCode?misys._config.productCode:"";var _12bd=dj.byId(_12b5)?dj.byId(_12b5).get("value"):"";var _12be=dj.byId(_12b6)?dj.byId(_12b6).get("value"):"";if(_12be==="IAFT"){if(mode==="UNSIGNED"){if(dj.byId(_12ba).get("value")===dj.byId("applicant_act_cur_code_unsigned").get("value")){_12be="IAFTS";}else{_12be="IAFTD";}}else{if(dj.byId(_12ba).get("value")===dj.byId("applicant_act_cur_code").get("value")){_12be="IAFTS";}else{_12be="IAFTD";}}}var _12bf=dj.byId(_12ba)?dj.byId(_12ba).get("value"):"";var _12c0=dj.byId(_12bb)?dj.byId(_12bb).get("value"):"";m._config=m._config||{};dojo.mixin(m._config,{holidayCutOffEnabled:true});var _12c1=new Array();var _12c2=dj.byId(_12b9)?dj.byId(_12b9).get("value"):"";dojo.forEach(_12b8,function(node,index){var date=_10ec(dj.byId(node));_12c1.push(date);});return _1123(_12bd,_12bc,_12be,mode,_12b7,_12c1,_12c2,_12bf,_12c0,null);},validateHolidaysAndCutOffTimeForMUPS:function(_12c3,_12c4,mode,_12c5,_12c6,_12c7,_12c8,_12c9,_12ca){var _12cb=misys._config.productCode?misys._config.productCode:"";var _12cc=dj.byId(_12c3)?dj.byId(_12c3).get("value"):"";var _12cd=dj.byId(_12c4)?dj.byId(_12c4).get("value"):"";var _12ce=dj.byId(_12ca)?dj.byId(_12ca).get("value"):"";if(_12cd==="IAFT"){if(mode==="UNSIGNED"){if(dj.byId(_12c8).get("value")===dj.byId("applicant_act_cur_code_unsigned").get("value")){_12cd="IAFTS";}else{_12cd="IAFTD";}}else{if(dj.byId(_12c8).get("value")===dj.byId("applicant_act_cur_code").get("value")){_12cd="IAFTS";}else{_12cd="IAFTD";}}}var _12cf=dj.byId(_12c8)?dj.byId(_12c8).get("value"):"";var _12d0=dj.byId(_12c9)?dj.byId(_12c9).get("value"):"";m._config=m._config||{};dojo.mixin(m._config,{holidayCutOffEnabled:true});var _12d1=new Array();var _12d2=dj.byId(_12c7)?dj.byId(_12c7).get("value"):"";dojo.forEach(_12c6,function(node,index){var date=_10ec(dj.byId(node));_12d1.push(date);});return _1123(_12cc,_12cb,_12cd,mode,_12c5,_12d1,_12d2,_12cf,_12d0,_12ce);},checkAccountStatus:function(accNo){var _12d3=true;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckAccountStatus"),handleAs:"json",sync:true,content:{accNo:accNo},load:function(_12d4,args){_12d3=_12d4.isAccountActive;},error:function(_12d5,args){console.error("Checking Account status  error ",_12d5);}});return _12d3;},validateAlphaNumeric:function(){var _12d6=dijit.byId("userNameRegexValue").get("value");var _12d7=new RegExp(_12d6);var _12d8=_12d7.test(this.get("value"));if(!_12d8){this.invalidMessage=m.getLocalization("userIdillegalCharError");}return _12d8;},validateGroupId:function(){var _12d9=dijit.byId("groupIdRegexValue").get("value");var _12da=new RegExp(_12d9);var _12db=_12da.test(this.get("value"));if(!_12db){this.invalidMessage=m.getLocalization("userIdillegalCharError");}return _12db;},validateGroupName:function(){var _12dc=dijit.byId("groupNameRegexValue").get("value");var _12dd=new RegExp(_12dc);var _12de=_12dd.test(this.get("value"));if(!_12de){this.invalidMessage=m.getLocalization("userIdillegalCharError");}return _12de;},validateAlphaNumericRemarks:function(){if(!_10ce(this," 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ")){var _12df=m.getLocalization("illegalRemarksCharError",[this.get("value")]);_12df=_12df.replace(/>/g,"&gt;");_12df=_12df.replace(/</g,"&lt;");this.invalidMessage=_12df;return false;}return true;},validateNumeric:function(){var _12e0="0123456789";var _12e1;var _12e2=d.every(this.get("value"),function(_12e3){_12e1=_12e3;return (_12e0.indexOf(_12e3)<0)?false:true;});if(!_12e2){this.invalidMessage=m.getLocalization("illegalCharError",[_12e1]);}return _12e2;},validatePhoneOrFax:function(){var _12e4="0123456789- ()";var _12e5;var _12e6=d.every(this.get("value"),function(_12e7,index){if(index===0&&_12e7==="+"){return true;}else{_12e5=_12e7;return (_12e4.indexOf(_12e7)<0)?false:true;}});if(!_12e6){if(_12e5==="+"){this.invalidMessage=m.getLocalization("invalidCharacterPosition",[_12e5]);}else{this.invalidMessage=m.getLocalization("illegalCharErrorContact");}}return _12e6;},validateFax:function(){var _12e8="0123456789- ()";var _12e9;var _12ea=d.every(this.get("value"),function(_12eb,index){if(index===0&&_12eb==="+"){return true;}else{_12e9=_12eb;return (_12e8.indexOf(_12eb)<0)?false:true;}});if(!_12ea){if(_12e9==="+"){this.invalidMessage=m.getLocalization("invalidCharacterPosition",[_12e9]);}else{this.invalidMessage=m.getLocalization("illegalCharErrorContactForFax");}}return _12ea;},validateTelex:function(){var _12ec="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ ";var _12ed;var _12ee=d.every(this.get("value"),function(_12ef,index){return (_12ec.indexOf(_12ef)<0)?false:true;});if(!_12ee){this.invalidMessage=m.getLocalization("illegalCharErrorContactForTelex");}return _12ee;},validateIPInvoiceDate:function(){if(!this.get("value")){return true;}var _12f0=dj.byId("due_date");if(!m.compareDateFields(this,_12f0)){this.invalidMessage=m.getLocalization("invoiceDateGreaterThanDueDateError",[_10d7(this),_10d7(_12f0)]);return false;}return true;},validateIPDueDate:function(){if(!this.get("value")){return true;}var _12f1=dj.byId("appl_date");if(!m.compareDateFields(_12f1,this)){this.invalidMessage=m.getLocalization("dueDateLessThanAppDateError",[_10d7(this),_10d7(_12f1)]);return false;}var _12f2=dj.byId("iss_date");if(!m.compareDateFields(_12f2,this)){this.invalidMessage=m.getLocalization("dueDateLessThanInvoiceDateError",[_10d7(this),_10d7(_12f2)]);return false;}return true;},validateRemittanceDate:function(){if(!this.get("value")){return true;}var _12f3=this.get("value");var days=_10d1(this);if(days>0){this.invalidMessage=m.getLocalization("remittanceDateGreaterThanSystemDateError",[_10d7(this)]);return false;}return true;},clearPrincipalAndFeeAccount:function(){if(dj.byId("principal_act_name")){dj.byId("principal_act_name").set("value","");}if(dj.byId("fee_act_name")){dj.byId("fee_act_name").set("value","");}},validateAmount:function(amtId){if(amtId){var amt=amtId.get("value");var _12f4,_12f5;if(amt===0){_12f4=m.getLocalization("amountcannotzero");amtId.set("state","Error");dj.hideTooltip(amtId.domNode);dj.showTooltip(_12f4,amtId.domNode,0);amtId.focus();return false;}else{if((amt<0)||(amt===undefined)){_12f4=m.getLocalization("invalidMessage");amtId.set("state","Error");dj.hideTooltip(amtId.domNode);dj.showTooltip(_12f4,amtId.domNode,0);amtId.focus();return false;}else{return true;}}}return true;},validateFinalExpiryDate:function(){var _12f6=true;var _12f7=dj.byId("exp_date").get("value");var _12f8=dj.byId("final_expiry_date").get("value");if(_12f7==null||_12f7==""){_12f6=false;this.invalidMessage=m.getLocalization("expiryDateReqd");}else{if(_12f8&&_12f8!=""){if(_12f8<_12f7){dj.byId("final_expiry_date").set("value",null);_12f6=false;this.invalidMessage=m.getLocalization("finalExpDateLessThanTransactionExpDtError",[dj.byId("final_expiry_date").get("displayedValue"),dj.byId("exp_date").get("displayedValue")]);}}}return _12f6;},validateTradeFinalExpiryDate:function(){var _12f9=true;var _12fa=true;if(this.get("value")!=null){var _12fb=this.get("value");var _12fc=dj.byId("renew_on_code").get("value");var _12fd=dj.byId("renewal_calendar_date").get("value");var _12fe=dj.byId("renew_for_nb").get("value");var _12ff=dj.byId("renew_for_period").get("value");var _1300=dj.byId("rolling_renewal_nb").get("value");var _1301=dj.byId("rolling_renewal_nb").get("value");var _1302=null;var _1303=null;var _1304=null;if(_12fc==="01"){_1303=dj.byId("exp_date").get("value");_1304=dj.byId("org_exp_date");if(!_1303&&_1304){_1303=dojo.date.locale.parse(_1304.get("value"),{locale:dojo.config.locale,formatLength:"short",selector:"date"});}if(_1303==null){_12fa=false;this.invalidMessage=m.getLocalization("expiryDateReqdForFinExpiryDateError");}}else{if(_12fc==="02"){_1303=_12fd;if(_1303==null){_12fa=false;this.invalidMessage=m.getLocalization("calendarDateReqdForFinExpiryDateError");}}else{_12fa=false;this.invalidMessage=m.getLocalization("renewOnNotSelectedError");}}if(_1300==null||isNaN(_1300)){_12fa=false;this.invalidMessage=m.getLocalization("nbofRenewalsNotSelectedError");}else{if(_12fc==="01"||_12fc==="02"){if(_12fe==null||_12fe===""||_12ff==null||_12ff===""){_12fa=false;this.invalidMessage=m.getLocalization("renewForNotSelectedError");}}}if(_12fa){switch(_12ff){case "D":_1302=d.date.add(_1303,"day",_1301*_12fe);break;case "W":_1302=d.date.add(_1303,"week",_1301*_12fe);break;case "M":_1302=d.date.add(_1303,"month",_1301*_12fe);break;case "Y":_1302=d.date.add(_1303,"year",_1301*_12fe);break;default:break;}var _1305;if(_1302!=undefined){_1305=new Date(_1302.getTime());}if(_1305!=undefined&&_12fb.getTime()<_1305.getTime()){_12f9=false;var _1306=dojo.date.locale.format(_1305,{selector:"date",formatLength:"short",locale:dojo.config.locale});this.invalidMessage=m.getLocalization("finExpiryDateLessThanLastActiveDateError",[_10d7(this),_1306]);}}else{_12f9=false;}}return _12f9;},validateValidFromDate:function(){if(!this.get("value")){return true;}if(dj.byId("reg_date")){var _1307=dj.byId("reg_date");if(!m.compareDateFields(_1307,this)){this.invalidMessage=m.getLocalization("validFromDateLessThanRegDateError",[_10d7(this),_10d7(_1307)]);return false;}}if(dj.byId("iss_date")&&dj.byId("iss_date").get("value")!==null){var _1308=dj.byId("iss_date");if(!m.compareDateFields(_1308,this)){this.invalidMessage=m.getLocalization("validFromDateLessThanIssDateError",[_10d7(this),_10d7(_1308)]);return false;}}if(dj.byId("valid_to_date")&&dj.byId("valid_to_date").get("value")!==null){var _1309=dj.byId("valid_to_date");if(!m.compareDateFields(this,_1309)){this.invalidMessage=m.getLocalization("validFromDateGreaterThanValidToDateError",[_10d7(this),_10d7(_1309)]);return false;}}if(dj.byId("latest_payment_date")&&dj.byId("latest_payment_date").get("value")!==null){var _130a=dj.byId("latest_payment_date");if(!m.compareDateFields(this,_130a)){this.invalidMessage=m.getLocalization("validFromDateGreaterThanLatestPaymntDateError",[_10d7(this),_10d7(_130a)]);return false;}}return true;},validateValidToDate:function(){if(!this.get("value")){return true;}var days=_10d1(this);if(days<0){this.invalidMessage=m.getLocalization("validToDateLessThanTodayDateError",[_10d7(this)]);return false;}if(dj.byId("appl_date")){var _130b=dj.byId("appl_date");if(!m.compareDateFields(_130b,this)){this.invalidMessage=m.getLocalization("validToDateLessThanAppDateError",[_10d7(this),_10d7(_130b)]);return false;}}if(dj.byId("iss_date")&&dj.byId("iss_date").get("value")!=null){var _130c=dj.byId("iss_date");if(!m.compareDateFields(_130c,this)){this.invalidMessage=m.getLocalization("validToDateLessThanIssDateError",[_10d7(this),_10d7(_130c)]);return false;}}if(dj.byId("valid_from_date")&&dj.byId("valid_from_date").get("value")!==null){var _130d=dj.byId("valid_from_date");if(!m.compareDateFields(_130d,this)){this.invalidMessage=m.getLocalization("validToDateLessThanValidFromDateError",[_10d7(this),_10d7(_130d)]);return false;}}if(dj.byId("latest_payment_date")&&dj.byId("latest_payment_date").get("value")!==null){var _130e=dj.byId("latest_payment_date");if(!m.compareDateFields(this,_130e)){this.invalidMessage=m.getLocalization("validToDateGreaterThanLatestPaymntDateError",[_10d7(this),_10d7(_130e)]);return false;}}return true;},validateLatestPaymentDate:function(){if(!this.get("value")){return true;}if(dj.byId("appl_date")){var _130f=dj.byId("appl_date");if(!m.compareDateFields(_130f,this)){this.invalidMessage=m.getLocalization("latestPaymentDateLessThanAppDateError",[_10d7(this),_10d7(_130f)]);return false;}}if(dj.byId("iss_date")&&dj.byId("iss_date").get("value")!==null){var _1310=dj.byId("iss_date");if(!m.compareDateFields(_1310,this)){this.invalidMessage=m.getLocalization("latestPaymentDateLessThanIssDateError",[_10d7(this),_10d7(_1310)]);return false;}}if(dj.byId("valid_from_date")&&dj.byId("valid_from_date").get("value")!==null){var _1311=dj.byId("valid_from_date");if(!m.compareDateFields(_1311,this)){this.invalidMessage=m.getLocalization("latestPaymentDateLessThanValidFromDateError",[_10d7(this),_10d7(_1311)]);return false;}}if(dj.byId("valid_to_date")&&dj.byId("valid_to_date").get("value")!==null){var _1312=dj.byId("valid_to_date");if(!m.compareDateFields(_1312,this)){this.invalidMessage=m.getLocalization("latestPaymentDateLessThanValidToDateError",[_10d7(this),_10d7(_1312)]);return false;}}return true;},validateRegDate:function(){if(!this.get("value")){return true;}if(dj.byId("iss_date")){var _1313=dj.byId("iss_date");if(!m.compareDateFields(this,_1313)){this.invalidMessage=m.getLocalization("regDateGreaterThanIssDateError",[_10d7(this),_10d7(_1313)]);return false;}}var days=_10d1(this);if(days>0){this.invalidMessage=m.getLocalization("RegistrationDateGreaterThanApplicationDateError",[_10d7(this)]);return false;}return true;},validateLicenseSettlementAmt:function(){if(dj.byId("ls_amt")){var lsAmt=d.number.parse(dj.byId("ls_amt").get("value"));var _1314=d.number.parse(dj.byId("ls_settlement_amt").get("value"));lsAmt=!isNaN(lsAmt)?lsAmt:0;_1314=!isNaN(_1314)?_1314:0;if(_1314>lsAmt){m.showTooltip(m.getLocalization("lsSettlementAmtGreaterThanLSAmtError",[_1314,lsAmt]),this.domNode,["after"]);this.state="Error";this._setStateClass();dj.setWaiState(this.focusNode,"invalid","true");return false;}}return true;},validateAddLicenseSettlementAmt:function(){if(dj.byId("additional_amt")){var _1315=d.number.parse(dj.byId("additional_amt").get("value"));var _1316=d.number.parse(dj.byId("add_settlement_amt").get("value"));_1315=!isNaN(_1315)?_1315:0;_1316=!isNaN(_1316)?_1316:0;if(_1316>_1315){m.showTooltip(m.getLocalization("addSettlementAmtGreaterThanAddAmtError",[_1316,_1315]),this.domNode,["after"]);this.state="Error";this._setStateClass();dj.setWaiState(this.focusNode,"invalid","true");return false;}}return true;},validateRenewalCalendarDate:function(){var _1317=dj.byId("renewal_calendar_date")?dj.byId("renewal_calendar_date").get("value"):"";var _1318=dj.byId("renew_on_code")?dj.byId("renew_on_code").get("value"):"";var _1319=new Date();var _131a=true;if(_1318!=null&&_1318==="02"){var _131b=dj.byId("exp_date").get("value");var _131c=dj.byId("org_exp_date");if(!_131b&&_131c){_131b=dojo.date.locale.parse(_131c.get("value"),{locale:dojo.config.locale,formatLength:"short",selector:"date"});}if(_131b==null||_131b===""){_131a=false;this.invalidMessage=m.getLocalization("expiryDateReqd");}if(_1317!=null&&_131b!=null&&((_1317<=_1319)||(_1317>_131b))){_131a=false;var _131d=dojo.date.locale.format(_1319,{selector:"date",formatLength:"short",locale:dojo.config.locale});var _131e=dojo.date.locale.format(_131b,{selector:"date",formatLength:"short",locale:dojo.config.locale});this.invalidMessage=m.getLocalization("calendarDateLessThanSystemDate",[_131d,_131e]);}}return _131a;},validateAmendBGRenewalCalendarDate:function(){var _131f=dj.byId("renewal_calendar_date")?dj.byId("renewal_calendar_date").get("value"):"";var _1320=dj.byId("renew_on_code")?dj.byId("renew_on_code").get("value"):"";var _1321=new Date();if(_1320!=null&&_1320==="02"){var _1322=dj.byId("exp_date").get("value");var _1323=dj.byId("org_exp_date");var that=this;if(!_1322&&_1323){_1322=dojo.date.locale.parse(_1323.get("value"),{locale:dojo.config.locale,formatLength:"short",selector:"date"});}if(_1322==null||_1322===""){m.dialog.show("ERROR",m.getLocalization("expiryDateReqd"),"",function(){that.focus();});this.reset();}if(_131f!=null&&_1322!=null&&((_131f<=_1321)||(_131f>_1322))){var _1324=dojo.date.locale.format(_1321,{selector:"date",formatLength:"short",locale:dojo.config.locale});var _1325=dojo.date.locale.format(_1322,{selector:"date",formatLength:"short",locale:dojo.config.locale});m.dialog.show("ERROR",m.getLocalization("calendarDateLessThanSystemDate",[_1324,_1325]),"",function(){that.focus();});this.reset();}}},validateTransportDocumentDate:function(){if(!this.get("value")){return true;}var _1326=dj.byId("appl_date");if(d.date.compare(this.get("value"),m.localizeDate(_1326))>=0){this.invalidMessage=m.getLocalization("TransDocDateGreaterThanApplDateError",[_10d7(this),_10d7(_1326)]);return false;}return true;},validateFutureDate:function(){if(!this.get("value")){return true;}var _1327=dj.byId("iss_date");if((_1327&&_1327.get("value"))&&(d.date.compare(this.get("value"),m.localizeDate(_1327))<=0)){this.invalidMessage=m.getLocalization("issDateSmallerThanFutureDate",[_10d7(this),_10d7(_1327)]);return false;}var _1328=dj.byId("appl_date");if((_1328&&_1328.get("value"))&&(d.date.compare(this.get("value"),m.localizeDate(_1328))<=0)){this.invalidMessage=m.getLocalization("futureDateSmallerThanAppDate",[_10d7(this),_10d7(_1328)]);return false;}return true;},validateTnxAmount:function(){var _1329=dj.byId("tnx_amt");var _132a=dj.byId("claim_amt");var _132b=dojo.number.parse(dj.byId("tnx_amt").get("value"));var _132c;if(dj.byId("lc_amt")){_132c=dojo.number.parse(dj.byId("lc_amt").get("value"));}else{if(dj.byId("bg_amt")){_132c=dojo.number.parse(dj.byId("bg_amt").get("value"));}}if(_132a){var _132d=dojo.number.parse(_132a.get("value"));}if(_132b<0){_1329.invalidMessage=m.getLocalization("totalamount");return false;}if(_1329&&_132c&&_132b>_132c){_1329.invalidMessage=misys.getLocalization("settlementAmtGreaterThanOrigTnxAmtError",[_132b.toFixed(2),_132c.toFixed(2)]);return false;}else{if(_1329&&_132a&&_132b>_132d){_1329.invalidMessage=misys.getLocalization("tnxAmtGreaterThanClaimAmtError",[_132b.toFixed(2),_132d.toFixed(2)]);return false;}else{if(_1329&&_132b===0){_1329.invalidMessage=misys.getLocalization("tnxAmtZeroError");return false;}}}return true;},validateFinanceAmt:function(){var _132e,_132f;var _1330=true;if(this.get("value")<=0){_1330=false;this.invalidMessage=misys.getLocalization("financeRequestAmtError");}else{if(dj.byId("intent_to_pay_amt")){_132e=Number(dj.byId("intent_to_pay_amt").get("value").replace(",",""));if(_132e!=""&&this.get("value")>_132e){_1330=false;this.invalidMessage=misys.getLocalization("financeRequestAmtErrorForIntentPayAmt");}}else{if(dj.byId("total_net_amt")){_132f=dj.byId("total_net_amt").get("value");if(_132f!==""&&this.get("value")>_132f){_1330=false;this.invalidMessage=misys.getLocalization("financeRequestAmtErrorForTotalAmt");}}}}return _1330;},validateParity:function(){var _1331=this.get("value");var _1332=true;if((_1331===0)||(_1331<0)){this.invalidMessage=m.getLocalization("parityError");_1332=false;}return _1332;},validateRemarks:function(){if(!_10ce(this," 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ#$^*_=`~{}|:./[]-")){var _1333=m.getLocalization("illegalRemarksCharError",[this.get("value")]);_1333=_1333.replace(/>/g,"&gt;");_1333=_1333.replace(/</g,"&lt;");this.invalidMessage=_1333;return false;}return true;},validateLoanIncreaseDate:function(){if(this.get("value")==null){return true;}var _1334=dj.byId(this.id);var _1335=new Date();_1335.setHours(0,0,0,0);var _1336=d.date.compare(m.localizeDate(this),_1335)<0?false:true;if(!_1336){this.invalidMessage=m.getLocalization("loanEffectiveIncreaseDateLessThanCurrentDate",[_10d7(this)]);return false;}var _1337=m.localizeDate(_1334);var _1338=dj.byId("effective_date");if(_1338){var _1339=m.localizeDate(_1338);if(d.date.compare(_1339,_1337)>0){this.invalidMessage=m.getLocalization("loanAmendDateLesserThanLoanEffectiveDateError",[_10d7(this),_10d7(_1338)]);return false;}}_1337=m.localizeDate(_1334);var flag=dj.byId("sub_product_code");var _133a="SWG";if(flag.get("value")===_133a){var _133b=dj.byId("repricing_date");if(_133b){var _133c=m.localizeDate(_133b);if(d.date.compare(_133c,_1337)<=0){this.invalidMessage=m.getLocalization("loanAmendDateLesserThanRepricingDateError",[_10d7(this),_10d7(_133b)]);return false;}}}var _133d=dj.byId("ln_maturity_date");if(_133d&&_133d.get("value")!==""){var _133e=m.localizeDate(_133d);if(d.date.compare(_133e,_1337)<=0){this.invalidMessage=m.getLocalization("loanAmendDateGreaterThanLoanMatDateError",[_10d7(this),_10d7(_133d)]);return false;}}var _133f=dijit.byId("facility_expiry_date");if(_133f){var _1340=m.localizeDate(_133f);if(d.date.compare(_1340,_1337)<0){this.invalidMessage=m.getLocalization("loanAmendDateGreaterThanFacExpDateError",[_10d7(this),_10d7(_133f)]);return false;}}var _1341=dj.byId("appl_date");if(_1341){var _1342=m.localizeDate(_1341);if(d.date.compare(_1342,_1337)>0){this.invalidMessage=m.getLocalization("loanAmendDateLesserThanLoanApplDateError",[_10d7(this),_10d7(_1341)]);return false;}}return true;},validateBpoBICFormat:function(id){var bic=id.get("value"),regex=new RegExp("^[A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9][A-Z2-9]([A-Z0-9]{3,3}){0,1}$","g");if(bic){if(!regex.test(bic)){var _1343=m.getLocalization("invalidBICError",[bic]);id.set("value","");id.set("state","Error");m.dialog.show("ERROR",m.getLocalization("focusOnErrorAlert"),"",function(){id.focus();dj.hideTooltip(id.domNode);dj.showTooltip(_1343,id.domNode,0);});}}},compareDateIsGreater:function(node,_1344){var _1345=dj.byId(node);var date1=null;if(!(_1345&&_1345.get("value"))){return true;}else{date1=_1345.get("value");}var _1346=new Date();_1346.setHours(0,0,0,0);if(d.date.compare(m.localizeDate(_1345),_1346)<0){m._config.onSubmitErrorMsg=m.getLocalization("expDateSmallerThanCurrentDate",[_10d7(_1345)]);return false;}for(var i=0;i<_1344.length;i++){var _1347=dj.byId(_1344[i]);if((_1347&&_1347.get("value"))&&(d.date.compare(date1,m.localizeDate(_1347))<=0)){m._config.onSubmitErrorMsg=m.getLocalization("issDateSmallerThanFutureDate",[_10d7(_1345),_10d7(_1347)]);return false;}}return true;},validateDescriptionGoods:function(){var _1348=this.get("value"),_1349=true,that=this;if(_1348.length>35){that.invalidMessage=m.getLocalization("invalidLSDescGoodsLength",[that.get("displayedValue")]);_1349=false;return false;}return true;},setRenewalAmount:function(_134a){var _134b=_134a.get("value");if(_134b==="01"){dj.byId("renew_amt_code_1").set("checked",true);dj.byId("renew_amt_code_1").set("value","01");}else{if(_134b==="02"){dj.byId("renew_amt_code_2").set("checked",true);dj.byId("renew_amt_code_2").set("value","02");}}},setRenewalAmountOnFormLoad:function(){if(dj.byId("renew_flag")&&dj.byId("renew_flag").get("checked")===true){var _134c=dj.byId("renew_amount_code")?dj.byId("renew_amount_code").get("value"):"02";if(_134c){if(_134c==="01"){dj.byId("renew_amt_code_1").set("checked",true);}else{if(_134c==="02"){dj.byId("renew_amt_code_2").set("checked",true);}}}}},validateRollingRenewalFrequency:function(node){var _134d=dj.byId("renew_for_nb").get("value");var _134e=dj.byId("rolling_renew_for_nb").get("value");if(_134d!==""&&_134e!==""&&_134e>_134d){node.set("value","");dj.showTooltip(m.getLocalization("rollingFrequencyCannotBeMoreThanRenewalPeriodError"),node.domNode,0);var _134f=function(){dj.hideTooltip(node.domNode);};setTimeout(_134f,1500);}},validateEnteredGreaterThanCurrentDate:function(){var _1350=dj.byId("maturity_date");var _1351=dj.byId("current_date");if(_1351&&!m.compareDateFields(_1351,_1350)){m.dialog.show("ERROR",m.getLocalization("lessthanCurrentDate"));_1350.set("value"," ");return false;}return true;},validateIntegerValue:function(node){if(!isNaN(node.get("value"))){var _1352=node.get("value")+"";var _1353=function(){dj.hideTooltip(node.domNode);};if(_1352.indexOf(".")!==-1){dj.showTooltip(m.getLocalization("valueShouldBeInteger"),node.domNode,0);setTimeout(_1353,1500);node.set("state","Error");}if(_1352<=0){dj.showTooltip(m.getLocalization("valueShouldBeGreaterThanZero"),node.domNode,0);setTimeout(_1353,1500);node.set("state","Error");}}},validateNextRevolveDate:function(){if(!this.get("value")){return true;}var days=_10d1(this);if(days<0){this.invalidMessage=m.getLocalization("nextRevolveDateSmallerThanSystemDate",[_10d7(this)]);return false;}var _1354=dj.byId("iss_date");if((_1354)&&(!m.compareDateFields(_1354,this))){this.invalidMessage=m.getLocalization("nextRevolveDateLessThenIssDateError",[_10d7(this),_10d7(_1354)]);return false;}var _1355=dj.byId("exp_date");var _1356=dj.byId("org_exp_date");if(_1355&&!m.compareDateFields(this,_1355)){this.invalidMessage=m.getLocalization("nextRevolveDateGreaterThanExpiryDateError",[_10d7(this),_10d7(_1355)]);return false;}else{if(_1355.get("value")==null&&_1356&&!m.compareDateFields(this,_1356)){this.invalidMessage=m.getLocalization("nextRevolveDateGreaterThanExpiryDateError",[_10d7(this),_10d7(_1356)]);return false;}}return true;},validateOpenAccountLastMatchDate:function(){var _1357=dj.byId("last_match_date");var _1358=m.getMaxBPOExpiryDate();if(_1357&&_1357.get("value")!=null&&_1358!==""){if(d.date.compare(_1357.get("value"),_1358)>0){this.invalidMessage=m.getLocalization("lastMatchDateGreaterThanBpoExpiryDateError",[_10d7(this),dojo.date.locale.format(_1358,{locale:dojo.config.locale,formatLength:"short",selector:"date"})]);return false;}}var _1359=dj.byId("exp_date");if(_1357&&_1357.get("value")!=null&&_1359&&_1359.get("value")!=null){if(d.date.compare(_1357.get("value"),_1359.get("value"))>0){this.invalidMessage=m.getLocalization("lastMatchDateGreaterThanExpiryDateError",[_10d7(this),_10d7(_1359)]);return false;}}var _135a=dj.byId("iss_date");if(_1357&&_1357.get("value")!=null&&_135a&&_135a.get("value")!=null){if(d.date.compare(_1357.get("value"),_135a.get("value"))<0){this.invalidMessage=m.getLocalization("lastMatchDateLessThanIssueDateError",[_10d7(this),_10d7(_135a)]);return false;}}var _135b=dj.byId("appl_date");if(_1357&&_1357.get("value")!=null&&_135b&&_135b.get("value")!=null){if(d.date.compare(_1357.get("value"),_135b.get("value"))<0){this.invalidMessage=m.getLocalization("lastMatchDateLessThanApplicationDateError",[_10d7(this),_10d7(_135b)]);return false;}}return true;},checkContractPercent:function(){if(!this.get("value")){return true;}var _135c=this.get("value");var index=_135c.toString().indexOf(".");var _135d=_135c.toString().length;if(_135c<=100&&_135c>=0){if(index===-1&&_135d>12){this.invalidMessage=m.getLocalization("contractPercentMoreThan12DigitError");return false;}else{if(_135c.toString().indexOf(".")>=0){var _135e=(_135d-index-1);if(_135e>2){this.invalidMessage=m.getLocalization("contractPercentMoreThan2DecilamError");return false;}}}return true;}else{this.invalidMessage=m.getLocalization("contractPercentMoreThan100Error");return false;}},validateEarliestShipDate:function(){if((dj.byId("tnxtype")&&(dj.byId("tnxtype").get("value")==="38"))||(dj.byId("close_tnx")&&(dj.byId("close_tnx").get("checked")===true))){return true;}if(!this.get("value")){return true;}var _135f=dj.byId("iss_date");if((_135f&&_135f.get("value"))&&(d.date.compare(this.get("value"),m.localizeDate(_135f))<0)){this.invalidMessage=m.getLocalization("issDateSmallerThanEarliestShipDate",[_10d7(this),_10d7(_135f)]);return false;}var _1360=dj.byId("appl_date");if((_1360)&&(d.date.compare(this.get("value"),m.localizeDate(_1360))<0)){this.invalidMessage=m.getLocalization("earliestShipDateSmallerThanAppDate",[_10d7(this),_10d7(_1360)]);return false;}var _1361=dj.byId("exp_date");var _1362=m.getMaxBPOExpiryDate();if(this.get("value")!==""&&_1362&&_1362!==""){if(d.date.compare(this.get("value"),_1362)>0){this.invalidMessage=m.getLocalization("BPOexpiryDateLessThanEarliestShipmentError",[_10d7(this),dojo.date.locale.format(_1362,{locale:dojo.config.locale,formatLength:"short",selector:"date"})]);return false;}}if(_1361&&!m.compareDateFields(this,_1361)){this.invalidMessage=m.getLocalization("expiryDateLessThanEarliestShipmentError",[_10d7(this),_10d7(_1361)]);return false;}var _1363=dj.byId("last_ship_date");if((_1363&&_1363.get("value")!=null)&&(d.date.compare(this.get("value"),m.localizeDate(_1363))>0)){this.invalidMessage=m.getLocalization("earliestShipDateSmallerThanLastShipDate",[_10d7(this),_10d7(_1363)]);return false;}var _1364=dj.byId("line_item_last_ship_date");if((_1364&&_1364.get("value")!=null)&&(d.date.compare(this.get("value"),m.localizeDate(_1364))>0)){this.invalidMessage=m.getLocalization("earliestShipDateSmallerThanLastShipDate",[_10d7(this),_10d7(_1364)]);return false;}var _1365=dj.byId("schedule_latest_ship_date");var _1366=dj.byId("line_item_shipment_schedules");if(_1366&&_1366.store&&_1366.store._arrayOfTopLevelItems.length>0&&_1365&&_1365.get("value")!=null){if(d.date.compare(this.get("value"),m.localizeDate(_1365))>0){this.invalidMessage=m.getLocalization("earliestShipDateSmallerThanLastShipDate",[_10d7(this),_10d7(_1365)]);return false;}}return true;},validateGroupCode:function(){var regex=reg_exp_validationCode.value,_1367=dj.byId("group_code").get("value"),_1368=new RegExp(regex);if(_1367){if(!_1368.test(_1367)){dj.byId("group_code").set("state","Error");misys.dialog.show("ERROR",misys.getLocalization("validateCode"));return false;}}return true;},validateDescription:function(){var regex=reg_exp_validationDesc.value,_1369=dj.byId("description").get("value"),_136a=new RegExp(regex);if(_1369){if(!_136a.test(_1369)){dj.byId("description").set("state","Error");misys.dialog.show("ERROR",misys.getLocalization("validateDesc"));return false;}}return true;},validateLCAvailablelAmount:function(amtId){if(amtId){var amt=amtId.get("value");var _136b,_136c;if((amt<0)||(amt===undefined)){_136b=m.getLocalization("invalidMessage");amtId.set("state","Error");dj.hideTooltip(amtId.domNode);dj.showTooltip(_136b,amtId.domNode,0);amtId.focus();return false;}else{return true;}}return true;},validateSubGroupCode:function(){var regex=reg_exp_validationCode.value,_136d=dj.byId("sub_group_code").get("value"),_136e=new RegExp(regex);if(_136d){if(!_136e.test(_136d)){dj.byId("sub_group_code").set("state","Error");misys.dialog.show("ERROR",misys.getLocalization("validateCode"));return false;}}return true;},validateHighTargetBalances:function(){if(dj.byId("subGrpType").get("value")&&dj.byId("subGrpType").get("value")==="1"){if(dj.byId("high_target")&&dj.byId("low_target")){var _136f=dj.byId("high_target").get("value");var _1370=dj.byId("low_target").get("value");if(_136f<_1370){var _1371=misys.getLocalization("hightargetLesserThanhighTargetError");dj.byId("high_target").set("state","Error");dj.hideTooltip(dj.byId("high_target").domNode);dj.showTooltip(_1371,dj.byId("high_target").domNode,0);return false;}}}return true;},validateLowTargetBalances:function(){if(dj.byId("subGrpType").get("value")&&dj.byId("subGrpType").get("value")==="1"){if(dj.byId("high_target")&&dj.byId("low_target")){var _1372=dj.byId("high_target").get("value");var _1373=dj.byId("low_target").get("value");if(_1373>_1372){var _1374=misys.getLocalization("lowtargetGreaterThanhighTargetError");dj.byId("low_target").set("state","Error");dj.hideTooltip(dj.byId("low_target").domNode);dj.showTooltip(_1374,dj.byId("low_target").domNode,0);return false;}}}return true;},validateSubGrpDescription:function(){var regex=reg_exp_validationDesc.value,_1375=dj.byId("subgrp_description").get("value"),_1376=new RegExp(regex);if(_1375){if(!_1376.test(_1375)){dj.byId("subgrp_description").set("state","Error");misys.dialog.show("ERROR",misys.getLocalization("validateDesc"));return false;}}return true;},checkUploadTemplateNameExists:function(){var name,_1377,_1378,_1379;var _137a=false;if(dj.byId("name")){name=dj.byId("name").get("value");}if(dj.byId("product_code")){_1377=dj.byId("product_code").get("value");}if(dj.byId("sub_product_code")){_1378=dj.byId("sub_product_code").get("value");}if(dj.byId("upload_template_id")){_1379=dj.byId("upload_template_id").get("value");}if(name!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckFileUploadTemplateAction"),handleAs:"json",sync:true,content:{name:name,productCode:_1377,subProdCode:_1378,uploadTemplateId:_1379},load:function(_137b,args){_137a=_137b.items.valid;}});}return _137a;},checkNumericOnlyValue:function(){var value=this.get("value");if(value!==""){if(value.match(/^[0-9]+$/)===null){this.invalidMessage=misys.getLocalization("valueShouldBeInteger");this.set("state","Error");dj.hideTooltip(this.domNode);dj.showTooltip(misys.getLocalization("valueShouldBeInteger"),this.domNode,0);return false;}}return true;},validatePeriodPresentationDays:function(){var _137c=dj.byId("period_presentation_days");var _137d=dj.byId("period_presentation_days").get("value");if(typeof _137d==="undefined"){this.invalidMessage=m.getLocalization("valueShouldBeInteger");return false;}else{if(_137d<=0){this.invalidMessage=m.getLocalization("valueShouldBeGreaterThanZero");return false;}}return true;},validateBeneficiaryStatus:function(){var _137e=dj.byId("beneficiary_name")?dj.byId("beneficiary_name").get("value"):"";var _137f=dj.byId("company_id")?dj.byId("company_id").get("value"):"";var _1380=true;if(_137e!==""&&_137f!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateBeneficiaryStatus"),handleAs:"json",sync:true,content:{beneficiary_name:_137e,company_id:_137f},load:function(_1381,args){if(_1381&&_1381.items&&_1381.items.active===false){_1380=false;}else{}},error:function(_1382,args){_1380=false;console.error(" Validating beneficiary status error",_1382);}});}return _1380;},validateLength:function(_1383){var set=true;var _1384=m._config.trade_total_combined_sizeallowed;d.forEach(_1383,function(id){if(id){var _1385=0;var _1386=[id+"_name",id+"_address_line_1",id+"_address_line_2",id+"_dom",id+"_address_line_4"];d.forEach(_1386,function(id){var field=dj.byId(id);if(field){_1385=_1385+(field.get("value")).length;if(_1385>_1384){m._config.onSubmitErrorMsg=m.getLocalization("invalidBankFieldSizeErrorForTrade");set=false;}}});}});return set;},validateDiscountExpDate:function(){if(!this.get("value")){return true;}var _1387=dj.byId("due_date");if(!m.compareDateFields(this,_1387)){this.invalidMessage=m.getLocalization("expiryDateGraterThanDueDateError",[_10d7(this),_10d7(_1387)]);return false;}return true;},validateEmailid:function(){var _1388;if(dj.byId("email")){_1388=dj.byId("email").get("value");}if(_1388!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateEmailAddress"),handleAs:"json",sync:true,content:{email:_1388},load:_10d9});}},validateBaseDateWithCurrentSystemDate:function(){if(!this.get("value")){return true;}var _1389=this.get("value");var days=_10d1(this);if(days>0){this.invalidMessage=m.getLocalization("baseDateGreaterThanSystemDateError",[_10d7(this)]);return false;}return true;},validateMaturityDateWithSystemDate:function(){if(!this.get("value")){return true;}var _138a=this.get("value");var days=_10d1(this);if(days<0){this.invalidMessage=m.getLocalization("maturityDateLessThanSystemDateError",[_10d7(this)]);return false;}return true;},validateOffset:function(_138b){if(_138b==Math.floor(_138b)){return true;}else{return false;}},bofunction:function(){var _138c=dj.byId("bo_comment");if(_138c.get("value").charAt(0)=="-"){this.invalidMessage=m.getLocalization("hyphenError");return false;}if(this.rowCount>=this.maxSize){this.invalidMessage=misys.getLocalization("textareaLinesError",[this.maxSize,this.rowCount+1]);return false;}return true;},getUnitMesureLocalization:function(_138d,item){var value="";if(item){var unity=item.qty_unit_measr_label[0];value=unity;}return value;},validateMandatoryRemarks:function(){var _138e=dj.byId("issuing_bank_abbv_name"),_138f=dj.byId("sub_product_code"),_1390=dj.byId("ft_cur_code"),_1391=dj.byId("applicant_act_cur_code");var valid=false;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateMandatoryRemarks"),handleAs:"json",sync:true,content:{bank_name:_138e.get("value"),payment_type:_138f.get("value"),credit_currency:_1390.get("value"),debit_currency:_1391.get("value")},load:function(_1392,args){var a="";switch(_1392.items.StatusCode){case "OK":var _1393=_1392.items.mandatoryIndicator;var _1394=_1392.items.credCur;var _1395=_1392.items.debCur;if(_1393&&_1394&&_1395){if(_1393==="Y"||_1393==="y"){dj.byId("free_format_text").set("required",true);if(document.getElementById("mandatorySpan")==undefined){var _1396=dojo.create("span",{"id":"mandatorySpan","class":"required-field-symbol","innerHTML":"*"});d.parser.parse(_1396);dojo.place(_1396,dojo.byId("free_format_text"),"before");valid=true;}else{a=document.getElementById("mandatorySpan");a.setAttribute("style","display:inline-block");}}}else{dj.byId("free_format_text").set("required",false);if(document.getElementById("mandatorySpan")){a=document.getElementById("mandatorySpan");a.setAttribute("style","display:none");}}break;default:break;}},error:function(_1397,args){console.error(_10c6);console.error(_1397);}});return valid;},MT103DetailsBeneficiary:function(){var _1398=dj.byId("issuing_bank_abbv_name"),_1399=dj.byId("sub_product_code"),_139a=dj.byId("ft_cur_code"),_139b=dj.byId("applicant_act_cur_code");var valid=false;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateMandatoryRemarks"),handleAs:"json",sync:true,content:{bank_name:_1398.get("value"),payment_type:_1399.get("value"),credit_currency:_139a.get("value"),debit_currency:_139b.get("value")},load:function(_139c,args){var a="";switch(_139c.items.StatusCode){case "OK":var _139d=_139c.items.mandatoryIndicator;if(_139d){if(_139d==="Y"||_139d==="y"){dj.byId("payment_details_to_beneficiary").set("required",true);m.toggleRequired("payment_details_to_beneficiary",true);}}else{dj.byId("payment_details_to_beneficiary").set("required",false);m.toggleRequired("payment_details_to_beneficiary",false);}break;default:break;}},error:function(_139e,args){console.error(_10c6);console.error(_139e);}});return valid;},validateRemittanceReasonCode:function(){var _139f=dj.byId("issuing_bank_abbv_name"),_13a0=dj.byId("ft_cur_code");var valid=false;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateRemittanceReasonCode"),handleAs:"json",sync:true,content:{bank_name:_139f.get("value"),bene_currency:_13a0.get("value")},load:function(_13a1,args){switch(_13a1.items.StatusCode){case "OK":var _13a2=_13a1.items.mandatoryIndicator;valid=true;if(_13a2){if(_13a2==="Y"||_13a2==="y"){m.toggleRequired("remittance_description",true);}}else{m.toggleRequired("remittance_description",false);}break;default:break;}},error:function(_13a3,args){console.error(_10c6);console.error(_13a3);}});return valid;},MT103ValidCountryCode:function(){var _13a4=dj.byId("issuing_bank_abbv_name"),_13a5=dj.byId("ft_cur_code"),_13a6=dj.byId("cpty_bank_country");if(_13a6.get("value")===""){return true;}var valid=false;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateCountryCode"),handleAs:"json",sync:true,content:{bank_name:_13a4.get("value"),currency_code:_13a5.get("value"),country_code:_13a6.get("value")},load:function(_13a7,args){var a="";switch(_13a7.items.StatusCode){case "Mandatory":var _13a8=_13a7.items.mandatoryIndicator;var _13a9=_13a7.items.countryCode;valid=true;if(_13a8&&_13a9){if(_13a8==="Y"||_13a8==="y"){m.toggleRequired("intermediary_bank_swift_bic_code",true);m.toggleRequired("intermediary_bank_name",true);m.toggleRequired("intermediary_bank_address_line_1",true);m.toggleRequired("intermediary_bank_country",true);}}else{m.toggleRequired("intermediary_bank_swift_bic_code",false);m.toggleRequired("intermediary_bank_name",false);m.toggleRequired("intermediary_bank_address_line_1",false);m.toggleRequired("intermediary_bank_country",false);}break;case "NotMandatory":m.toggleRequired("intermediary_bank_swift_bic_code",false);m.toggleRequired("intermediary_bank_name",false);m.toggleRequired("intermediary_bank_address_line_1",false);m.toggleRequired("intermediary_bank_country",false);break;default:break;}},error:function(_13aa,args){console.error(_10c6);console.error(_13aa);}});return valid;},MT103Intermediarydetailvalidation:function(){if(!misys._config.mt103_intermediary_details){return true;}var _13ab=dj.byId("issuing_bank_abbv_name"),_13ac=dj.byId("ft_cur_code"),_13ad=dj.byId("intermediary_bank_country"),_13ae="";var valid=true;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/IntermediaryDetailValidation"),handleAs:"json",sync:true,content:{bank_name:_13ab.get("value"),currency_code:_13ac.get("value"),country_code:_13ad.get("value")},load:function(_13af,args){var a="";switch(_13af.items.StatusCode){case "Mandatory":var _13b0=_13af.items.mandatoryIndicator;var _13b1=_13af.items.countryCode;valid=false;if(_13b0&&_13b1){if(_13b0==="Y"||_13b0==="y"){_13ae=_13ad.value+": is not valid Country Code";_13ad.set("state","Error");m.dialog.show("ERROR",_13ae);}}else{m.toggleRequired("intermediary_bank_country",false);valid=true;}break;case "NotMandatory":m.toggleRequired("intermediary_bank_country",false);valid=true;break;default:break;}},error:function(_13b2,args){console.error(_10c6);console.error(_13b2);}});return valid;},_validateCurrencyCode:function(_13b3,_13b4){var _13b5=_13b3?_13b3.get("value"):"";var _13b6=_13b4?_13b4.get("value"):"";var _13b7="";var valid=true;if(_13b6!=""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateCurrencyValid"),handleAs:"json",sync:true,content:{subproductcode:_13b5,transferCurCode:_13b6},load:function(_13b8,args){var _13b9=_13b8.isValid;if(!_13b9){_13b7=m.getLocalization("invalidCurrencyConfigured",[_13b4.get("value")]);_13b4.set("state","Error");dj.showTooltip(_13b7,_13b4.domNode,0);valid=false;return valid;}}});}return valid;},validateDocumentAmtAndLCAmt:function(){var _13ba=dj.byId("prod_stat_code")&&!(dj.byId("prod_stat_code").get("value")==="08"||dj.byId("prod_stat_code").get("value")==="31");if(_13ba){var _13bb=dojo.number.parse(dj.byId("org_lc_liab_amt").getValue());if(dj.byId("tnx_amt")){var _13bc=dj.byId("tnx_amt").getValue();if(isNaN(_13bc)){return true;}if((_13bc>0)&&(_13bc>_13bb)){if(dj.byId("prod_stat_code").get("value")=="12"){var _13bd=document.documentElement.getAttribute("lang");var _13be=dojo.currency.format(parseFloat(_13bc));var _13bf=dojo.currency.format(parseFloat(_13bb));var _13c0=m.getLocalization("documentAmtGreaterthanLiabilityAmt",[dj.byId("lc_cur_code").getValue(),_13be,_13bf]);if(_13bd==="ar"){m.showTooltip(_13c0,dj.byId("tnx_amt").domNode,["before"]);}else{m.showTooltip(_13c0,dj.byId("tnx_amt").domNode,["after"]);}return true;}else{var _13c1=m.getLocalization("documentAmtGreaterThanLCAmt",[dj.byId("lc_cur_code").getValue(),_13bc,_13bb]);dj.byId("tnx_amt").set("state","Error");dj.byId("tnx_amt").set("value","");dj.hideTooltip(dj.byId("tnx_amt").domNode);dj.showTooltip(_13c1,dj.byId("tnx_amt").domNode,100);dj.byId("tnx_amt").invalidMessage=_13c1;m._config.onSubmitErrorMsg=_13c1;return false;}}}}return true;}});})(dojo,dijit,misys);}if(!dojo._hasResource["dojox.uuid.generateRandomUuid"]){dojo._hasResource["dojox.uuid.generateRandomUuid"]=true;dojo.provide("dojox.uuid.generateRandomUuid");dojox.uuid.generateRandomUuid=function(){var _13c2=16;function _13c3(){var _13c4=Math.floor((Math.random()%1)*Math.pow(2,32));var _13c5=_13c4.toString(_13c2);while(_13c5.length<8){_13c5="0"+_13c5;}return _13c5;};var _13c6="-";var _13c7="4";var _13c8="8";var a=_13c3();var b=_13c3();b=b.substring(0,4)+_13c6+_13c7+b.substring(5,8);var c=_13c3();c=_13c8+c.substring(1,4)+_13c6+c.substring(4,8);var d=_13c3();var _13c9=a+_13c6+b+_13c6+c+d;_13c9=_13c9.toLowerCase();return _13c9;};}if(!dojo._hasResource["misys.grid._ViewManager"]){dojo._hasResource["misys.grid._ViewManager"]=true;dojo.provide("misys.grid._ViewManager");dojo.declare("misys.grid._ViewManager",[dojox.grid._ViewManager],{measureContent:function(){var h=0;this.forEach(function(_13ca){var _13cb=0;if(_13ca.contentNode.childNodes.length>0){_13cb=_13ca.contentNode.childNodes[0].offsetHeight;}h=Math.max(_13cb,h);});return h;}});}if(!dojo._hasResource["misys.grid._View"]){dojo._hasResource["misys.grid._View"]=true;dojo.provide("misys.grid._View");dojo.experimental("misys.grid._View");dojo.declare("misys.grid._View",[dojox.grid._View],{_getHeaderContent:function(_13cc){var ret="";if(_13cc.grid.showMoveOptions&&_13cc.field&&_13cc.field==="actions"){ret=["<div align='center'>"];ret=ret.concat(["<img src='"+misys.getContextualURL("/content/images/pic_arrowdown.gif")+"' alt='Move Down' border='0' type='moveDown'/>"],["&nbsp;"],["<img src='"+misys.getContextualURL("/content/images/pic_arrowup.gif")+"' alt='Move Up' border='0' type='moveUp'/>"],["</div>"]);return ret.join("");}else{var n=_13cc.name||_13cc.grid.getCellName(_13cc);ret=["<div class=\"dojoxGridSortNode"];if(_13cc.index!=_13cc.grid.getSortIndex()){ret.push("\">");}else{ret=ret.concat([" ",_13cc.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown","\"><div class=\"dojoxGridArrowButtonChar\">",_13cc.grid.sortInfo>0?"&#9650;":"&#9660;","</div><div class=\"dojoxGridArrowButtonNode\" role=\""+(dojo.isFF<3?"wairole:":"")+"presentation\"></div>"]);}ret=ret.concat([n,"</div>"]);return ret.join("");}}});}if(!dojo._hasResource["misys.grid.DataGrid"]){dojo._hasResource["misys.grid.DataGrid"]=true;dojo.provide("misys.grid.DataGrid");dojo.experimental("misys.grid.DataGrid");dojo.declare("misys.grid.DataGrid",[dojox.grid.DataGrid],{showMoveOptions:true,_deleteGridRecord:"deletegridrecord",startup:function(){this.inherited(arguments);misys.connect(this,"onCellClick",this,this.handleGridAction);},handleGridAction:function(event){if(event.target.tagName==="IMG"&&event.target.attributes.type){var _13cd=event.target.attributes.type.value.toLowerCase();if(_13cd==="edit"){this.onEdit(event);}else{if(_13cd==="remove"){this.onDelete(event);}else{if(_13cd==="view"){this.onView(event);}else{if(_13cd==="moveup"){this._moveSelectedRowsUp(event.grid);}else{if(_13cd==="movedown"){this._moveSelectedRowsDown(event.grid);}}}}}}},onEdit:function(event){var store=this.store;var id;store.fetch({query:{store_id:"*"},sort:this.getSortProps(),onComplete:dojo.hitch(this,function(items,_13ce){dojo.forEach(items,function(item,index){if(index===event.rowIndex){id=item.store_id[0];}},this);})});if(event.grid.gridMultipleItemsWidget.name=="amendments"){store.fetch({query:{store_id:id},onComplete:dojo.hitch(this.gridMultipleItemsWidget,"editGridData")});}else{store.fetch({query:{store_id:id},onComplete:dojo.hitch(this.gridMultipleItemsWidget,"openDialogFromExistingItem")});}},onView:function(event){var store=this.store;var id;store.fetch({query:{store_id:"*"},sort:this.getSortProps(),onComplete:dojo.hitch(this,function(items,_13cf){dojo.forEach(items,function(item,index){if(index===event.rowIndex){id=item.store_id[0];}},this);})});store.fetch({query:{store_id:id},onComplete:dojo.hitch(this.gridMultipleItemsWidget,"openDialogFromExistingItem")});},onDelete:function(event){var that=this;var _13d0=function(){var items=that.selection.getSelected();if(items.length){dojo.forEach(items,function(_13d1){if(_13d1!==null){that.selection.setSelected(_13d1,false);}},that);}that.selection.setSelected(event.rowIndex,true);items=that.selection.getSelected();if(items.length){dojo.forEach(items,function(_13d2){if(_13d2!==null){that.store.deleteItem(_13d2);}},that);that.store.save();}items=that.selection.getSelected();if(items.length){dojo.forEach(items,function(_13d3){if(_13d3!==null){that.selection.setSelected(_13d3,false);}},that);}setTimeout(dojo.hitch(that.gridMultipleItemsWidget,"renderSections"),100);dojo.publish(that._deleteGridRecord);if(event.grid.gridMultipleItemsWidget.name=="amendments"){that.gridMultipleItemsWidget.deleteData();}};misys.dialog.show("CONFIRMATION",misys.getLocalization("confirmDeletionGridRecord"),"",_13d0);},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){this.createView("misys.grid._View",i).setStructure(vs);}this.scroller.setContentNodes(this.views.getContentNodes());},createViews:function(){this.views=new misys.grid._ViewManager(this);this.views.createView=dojo.hitch(this,"createView");},postresize:function(){if(this._autoHeight){setTimeout(dojo.hitch(this,"_postresize"),120);}},_postresize:function(){if(this.viewsNode){var size=Math.max(this.views.measureContent())+"px";dojo.attr(this.viewsNode,"style",{height:size});if(this.views&&this.views.views&&this.views.views[0].contentNode){dojo.attr(this.views.views[0].contentNode,"style",{height:size});}var _13d4=0;var _13d5=(this.viewsHeaderNode.childNodes?this.viewsHeaderNode.childNodes:[]);var _13d6=new RegExp("/*dojoxGridHeader*");for(var i=0,len=_13d5.length;i<len;i++){var child=_13d5[i];if(_13d6.test(dojo.attr(child,"classname"))){dojo.attr(this.viewsHeaderNode,"style",{height:child.clientHeight+"px"});break;}}}},onHeaderCellClick:function(event){var _13d7=(event.target.attributes.type)?event.target.attributes.type.value.toLowerCase():"";if(_13d7==="moveup"){this._moveSelectedRowsUp(event.grid);}else{if(_13d7==="movedown"){this._moveSelectedRowsDown(event.grid);}else{this.inherited(arguments);}}},_clone:function(obj){if(obj==null||typeof (obj)!=="object"){return obj;}var temp=new obj.constructor();for(var key in obj){if(obj.hasOwnProperty(key)){if(key.match("^_")!="_"){temp[key]=this._clone(obj[key]);}}}return temp;},_moveSelectedRowsUp:function(grid){if(grid.selection.selected.length>0&&!grid.selection.selected[0]){var _13d8=[];for(var i=0,len=grid.rowCount;i<len;i++){var _13d9=this._clone(grid.getItem(i));if(grid.selection.selected[i+1]){var j=i+1;while(j<len&&grid.selection.selected[j]){var item=this._clone(grid.getItem(j));_13d8.push(item);j++;}i=j-1;}_13d8.push(_13d9);}var _13da,_13db;for(var m=0,mlen=grid.rowCount;m<mlen;m++){var _13dc=grid.getItem(m).store_id;_13dc=dojo.isArray(_13dc)?_13dc[0]:_13dc;grid.store.fetch({query:{store_id:_13dc},onComplete:dojo.hitch(this,function(_13dd,m,items,_13de){for(var _13df in items[0]){if(items[0].hasOwnProperty(_13df)){_13da=_13df.match("^_");_13db=(dojo.isArray(_13da)?_13da[0]:_13da)==="_";if(_13df!=="store_id"&&!_13db){var value=_13dd[m][_13df];value=dojo.isArray(value)?value[0]:value;grid.store.setValue(items[0],_13df,value);}}}},_13d8,m)});}for(var k=0,klen=grid.rowCount-1;k<klen;k++){grid.selection.selected[k]=grid.selection.selected[k+1];}}for(var l=0;l<grid.rowCount;l++){grid.selection.selected[l]=undefined;}},_moveSelectedRowsDown:function(grid){if(grid.selection.selected.length>0&&!grid.selection.selected[grid.rowCount-1]){var _13e0=[];for(var i=0,len=grid.rowCount;i<len;i++){if(grid.selection.selected[i]){var j=i;while(j<len&&grid.selection.selected[j]){j++;}_13e0.push(this._clone(grid.getItem(j)));for(var k=i;k<j;k++){var item=this._clone(grid.getItem(k));_13e0.push(item);}i=j;}else{_13e0.push(this._clone(grid.getItem(i)));}}var _13e1,_13e2;for(var n=0,nlen=grid.rowCount;n<nlen;n++){var _13e3=grid.getItem(n).store_id;_13e3=dojo.isArray(_13e3)?_13e3[0]:_13e3;grid.store.fetch({query:{store_id:_13e3},onComplete:dojo.hitch(this,function(_13e4,n,items,_13e5){for(var _13e6 in items[0]){if(items[0].hasOwnProperty(_13e6)){_13e1=_13e6.match("^_");_13e2=(dojo.isArray(_13e1)?_13e1[0]:_13e1)==="_";if(_13e6!=="store_id"&&!_13e2){var value=_13e4[n][_13e6];value=dojo.isArray(value)?value[0]:value;grid.store.setValue(items[0],_13e6,value);}}}},_13e0,n)});}for(var m=grid.rowCount-1;m>=0;m--){grid.selection.selected[m]=grid.selection.selected[m-1];}}for(var l=0;l<grid.rowCount;l++){grid.selection.selected[l]=undefined;}}});}if(!dojo._hasResource["misys.grid.GridMultipleItems"]){dojo._hasResource["misys.grid.GridMultipleItems"]=true;dojo.provide("misys.grid.GridMultipleItems");dojo.experimental("misys.grid.GridMultipleItems");dojo.declare("misys.grid.GridMultipleItems",[dijit._Widget,dijit._Templated,dijit._Container],{overrideDisplaymode:"edit",widgetsInTemplate:true,store:null,gridId:"",handle:[],name:"",grid:null,dialogId:"",dialog:null,dialogClassName:null,dialogAddItemTitle:"",dialogUpdateItemTitle:"",dialogViewItemTitle:"",requiredField:[],xmlTagName:"",xmlSubTagName:"",noItemLabel:"null",addButtonLabel:"null",openDialogFromExistingItemInitFunction:null,data:{},propertiesMap:{},typeMap:{},gridColumns:[],layout:[],headers:[],dataList:[],_itemFields:null,showMoveOptions:false,mandatoryFields:[],is_valid:"Y",state:"",getMandatoryProperties:function(item){return (this.mandatoryFields?this.mandatoryFields:[]);},buildRendering:function(){if(!this.templateString){if(this.attachmentGroup&&this.attachmentGroup!=""){this.templateString=dojo.byId("file-attachment-template"+this.attachmentGroup).innerHTML;}else{if(dojo.byId("file-attachment-template")){this.templateString=dojo.byId("file-attachment-template").innerHTML;}}}this.inherited(arguments);},startup:function(){if(this.isWidgetToBeDestroyed(this.id)){return;}if(this._started){return;}this.name=this.id;if(this.dataList.length===0){this.dataList=this.createJsonItem();}else{dojo.forEach(this.dataList,function(item){var _13e7=this.checkMandatoryProperties(item);item["is_valid"]=_13e7?"Y":"N";},this);}this.inherited(arguments);for(var i=0,len=this.headers.length;i<len;i++){this.layout[i].name=this.headers[i];}if(this.noItemLabel!=="null"&&this.noItemLabelNode){this.noItemLabelNode.innerHTML=this.noItemLabel;}if(this.overrideDisplaymode==="view"||this.overrideDisplaymode==="editonly"){if(this.addButtonNode){this.addButtonNode.set("style","display:none");}}else{if(this.addButtonLabel!=="null"&&this.addButtonNode){this.addButtonNode.set("label",this.addButtonLabel);}}this.gridColumns.push("store_id");this.gridColumns.push("is_valid");if(this.dataList.length>0){this.createDataStoreFromDataList();this.createDataGrid();}this.renderSections();this.destroyWidgets();this.collectRequiredField();this.setDialogFieldUnrequired();misys.connect(this.dialog,"onHide",this,"setDialogFieldUnrequired");misys.connect(this.dialog,"onShow",this,"setDialogFieldRequired");dojo.addClass(this.dialog.domNode,"gridMultipleItems_"+this.overrideDisplaymode);},createDataStoreFromDataList:function(){this.data.items=this.buildStoreItem(this.dataList);this.store=new dojo.data.ItemFileWriteStore({data:this.data,typeMap:this.typeMap});},createAmendDataStoreFromText:function(_13e8){if(misys._config.editedItemIndex!=-1&&misys._config.editedItemIndex!=undefined&&this.data.items.length!=0){var _13e9=this.data.items;var _13ea=[];var _13eb=0;for(var itr=0;itr<this.data.items.length+1;itr++){if(itr===misys._config.editedItemIndex){_13ea.push(dojo.mixin({store_id:dojox.uuid.generateRandomUuid()},_13e8));}else{_13ea.push(dojo.mixin({store_id:dojox.uuid.generateRandomUuid()},_13e9[_13eb++]));}}this.data.items=_13ea;}else{this.data.items.push(dojo.mixin({store_id:dojox.uuid.generateRandomUuid()},_13e8));}this.store=new dojo.data.ItemFileWriteStore({data:this.data,typeMap:this.typeMap});misys._config.editedItemIndex=-1;},buildStoreItem:function(data){var items=[];for(var i=0,rows=this.dataList.length;i<rows;i++){var _13ec=data[i];for(var _13ed in _13ec){if(dojo.isArray(_13ec[_13ed])){_13ec[_13ed]=this.buildStoreItem(_13ec[_13ed]);}}items.push(dojo.mixin({store_id:dojox.uuid.generateRandomUuid()},_13ec));}return items;},updateGridFromDataList:function(){for(var i=0,rows=this.dataList.length;i<rows;i++){var item=this.dataList[i%l];if(!item.store_id){item=dojo.mixin({store_id:dojox.uuid.generateRandomUuid()},item);}this.grid.store.fetch({query:{store_id:item.store_id},onComplete:dojo.hitch(this,function(items,_13ee){if(items.length<=0){this.grid.store.newItem(item);}})});}this.grid.store.save();this.renderAll();},onGridCreate:function(){},createDataGrid:function(){var _13ef=this.gridId;if(!_13ef){_13ef="grid-"+(this.xmlTagName?this.xmlTagName+"-":"")+dojox.uuid.generateRandomUuid();}this.grid=new misys.grid.DataGrid({jsId:_13ef,id:_13ef,store:this.store,structure:this.layout,autoHeight:true,selectionMode:"multiple",columnReordering:true,autoWidth:true,rowsPerpage:1000,initialWidth:"100%",canSort:function(){return true;},showMoveOptions:this.showMoveOptions},document.createElement("div"));this.grid.gridMultipleItemsWidget=this;misys.connect(this.grid,"onStyleRow",dojo.hitch(this,function(row){var item=this.grid.getItem(row.index);if(item&&item.hasOwnProperty("is_valid")){var _13f0=dojo.isArray(item.is_valid)?item.is_valid[0]:item.is_valid;if(_13f0&&_13f0!=="Y"){row.customStyles+="background-color: #F9F7BA !important";this.state="Error";}}this.grid.focus.styleRow(row);this.grid.edit.styleRow(row);}));this.addChild(this.grid);this.onGridCreate();},renderSections:function(){try{if(this.itemsNode){var _13f1=(this.grid&&this.grid.rowCount>0);dojo.attr(this.itemsNode,"style",{display:(_13f1?"block":"none")});if(document.getElementById("reporting_popup")){dojo.attr(this.itemsNode,"style",{width:"100%"});}}if(this.noItemLabelNode){var _13f2=(this.grid&&this.grid.rowCount===0)||(!this.grid);dojo.attr(this.noItemLabelNode,"style",{display:(_13f2?"block":"none")});}}catch(err){}},openDialogFromExistingItem:function(items,_13f3){misys.dialog.isActive=false;var item=items[0];this.checkDialog();if(this.overrideDisplaymode!=="view"){this.dialog.set("title",this.dialogUpdateItemTitle);}else{var _13f4=this.dialogViewItemTitle||this.dialogUpdateItemTitle;this.dialog.set("title",_13f4);}this.resetDialog();this.dialog.gridMultipleItemsWidget=this;this.dialog.execute=this.dialogExecute;this.dialog.gridMultipleItemsWidget=this;this.dialog.storeId=(dojo.isArray(item.store_id)?item.store_id[0]:item.store_id);var _13f5=this.dialog.getChildren();for(var _13f6 in item){var _13f7=(this.propertiesMap[_13f6]&&this.propertiesMap[_13f6]._fieldName?this.propertiesMap[_13f6]._fieldName:_13f6);if(_13f6!=="store_id"){dojo.some(_13f5,function(_13f8){if(_13f8.id===_13f7||_13f8.name===_13f7){var value=item[_13f6];value=dojo.isArray(value)?value[0]:value;if(this.overrideDisplaymode==="view"){var _13f9=(!value&&value!==0)?"none":"block";if(_13f8&&_13f8.id&&dojo.byId(_13f8.id+"_row")){dojo.style(_13f8.id+"_row","display",_13f9);}}if(_13f8.isInstanceOf(misys.grid.GridMultipleItems)){if(_13f8.grid){_13f8.grid.destroy();}if(dojo.isObject(value)&&value._values&&dojo.isArray(value._values)){_13f8.dataList=dojo.clone(value._values);_13f8.createDataStoreFromDataList();_13f8.createDataGrid();var key=item.store_id+"_"+_13f6;if(this.handle&&!this.handle[key]){this.handle[key]=misys.connect(this.dialog,"onShow",_13f8,"renderAll");}}}else{var _13fa=_13f8.declaredClass;switch(_13fa){case "dijit.form.DateTextBox":_13f8.set("displayedValue",value);break;case "dijit.form.CheckBox":_13f8.set("checked",value==="Y"?true:false);break;case "dijit.form.RadioButton":var _13fb=dojo.query("[name='"+_13f8.name+"']",this.dialog.domNode);dojo.some(_13fb,function(_13fc){var _13fd=dijit.byNode(_13fc.parentNode);if(_13fd.params.value===value){_13fd.set("checked",true);return true;}});break;case "dijit.form.NumberTextBox":if(value!=null&&value!==""&&value!=="NaN"){_13f8.set("value",value,false);}break;case "misys.form.MultiSelect":_13f8.domNode.innerHTML=[];if(value!==""){var arr=value.split(",");for(i=0;i<arr.length;i++){var op=dojo.create("option");op.innerHTML=arr[i];op.value=arr[i];_13f8.domNode.appendChild(op);}}break;default:_13f8.set("value",value);break;}if(this.overrideDisplaymode==="view"){_13f8.set("readOnly",true);}return true;}}return false;},this);}}if(item&&item.product_name&&item.product_name[0]){item.product_name[0]=dojox.html.entities.encode(item.product_name[0],dojox.html.entities.html);}if(item&&item.cust_ref_id&&item.cust_ref_id[0]){item.cust_ref_id[0]=dojox.html.entities.encode(item.cust_ref_id[0],dojox.html.entities.html);}if(item&&item.other_type&&item.other_type[0]){item.other_type[0]=dojox.html.entities.encode(item.other_type[0],dojox.html.entities.html);}if(this.openDialogFromExistingItemInitFunction!=null){this.openDialogFromExistingItemInitFunction(item);}this.dialog.show();setTimeout(dojo.hitch(this,"activateDialog"),500);if(item.hasOwnProperty("is_valid")){var _13fe=(dojo.isArray(item.is_valid))?item.is_valid[0]:item.is_valid;if(_13fe!=="Y"){this.validateDialog(true);}}},editGridData:function(items,_13ff){var _1400=dojox.html.entities.decode(items[0].content[0],dojox.html.entities.html);var _1401=function(){var i=0;dijit.byId("narrative_description_goods_popup").set("disabled",false);if(misys._config.codeword_enabled==true){if(items[0].verb[0]=="REPALL"){dijit.byId("adr_3").set("disabled",false);dijit.byId("adr_3").set("value","REPALL");dijit.byId("adr_1").set("disabled",false);dijit.byId("adr_2").set("disabled",false);dijit.byId("narrative_description_goods_popup").set("value","/REPALL/"+_1400);}if(items[0].verb[0]=="DELETE"){dijit.byId("adr_2").set("disabled",false);dijit.byId("adr_2").set("value","DELETE");dijit.byId("adr_3").set("disabled",true);dijit.byId("narrative_description_goods_popup").set("value","/DELETE/"+_1400);}if(items[0].verb[0]=="ADD"){dijit.byId("adr_1").set("disabled",false);dijit.byId("adr_1").set("value","ADD");dijit.byId("adr_3").set("disabled",true);dijit.byId("narrative_description_goods_popup").set("value","/ADD/"+_1400);}}else{dijit.byId("narrative_description_goods_popup").set("value",_1400);}dijit.byId("amendments").grid.store.deleteItem(items[0]);};misys.dialog.show("CONFIRMATION",misys.getLocalization("confirmEditGridRecord"),"",_1401);},activateDialog:function(){misys.dialog.isActive=true;},cloneArray:function(arr){var arr1=[];for(var _1402 in arr){arr1[_1402]=arr[_1402];}return arr1;},checkDialog:function(){if(!this.dialog){var _1403=dijit.byId(this.dialogId);if(_1403){this.dialog=_1403;}else{var id=this.dialogId?this.dialogId:"dialog-"+(xmlTag?xmlTag+"-":"")+dojox.uuid.generateRandomUuid();var _1404=this.dialogClassName?this.dialogClassName:"misys.widget.Dialog";this.dialog=dojo.eval("new "+_1404+"({}, dojo.byId('"+id+"'))");this.dialog.set("refocus",false);this.dialog.set("draggable",false);dojo.addClass(this.dialog.domNode,"multipleItemDialog");this.dialog.startup();document.body.appendChild(this.dialog.domNode);}}return this.dialog;},dialogExecute:function(_1405){setTimeout(dojo.hitch(this.gridMultipleItemsWidget,"updateData"),500);},performValidation:function(){if(this.validateDialog()){this.dialog._onSubmit();}},addItem:function(event){misys.dialog.isActive=false;this.checkDialog();this.dialog.set("title",this.dialogAddItemTitle);this.resetDialog();var _1406=this.dialog.getChildren();dojo.some(_1406,function(_1407){if(_1407.grid){_1407.renderSections();}});this.dialog.gridMultipleItemsWidget=this;this.dialog.execute=this.dialogExecute;this.dialog.show();if(this._itemFields&&this._itemFields["product_name"]){this._itemFields["product_name"]=dojox.html.entities.encode(this._itemFields["product_name"],dojox.html.entities.html);}if(this._itemFields&&this._itemFields["cust_ref_id"]){this._itemFields["cust_ref_id"]=dojox.html.entities.encode(this._itemFields["cust_ref_id"],dojox.html.entities.html);}if(this._itemFields&&this._itemFields["other_type"]){this._itemFields["other_type"]=dojox.html.entities.encode(this._itemFields["other_type"],dojox.html.entities.html);}if(dojo.byId("pooling_enabled_row")){dojo.style(dojo.byId("pooling_enabled_row"),"display","none");}if(dojo.byId("sweeping_enabled_row")){dojo.style(dojo.byId("sweeping_enabled_row"),"display","none");}if(dojo.byId("charge_account_for_liq_row")){dojo.style(dojo.byId("charge_account_for_liq_row"),"display","none");}setTimeout(dojo.hitch(this,"activateDialog"),500);},setDialogFieldRequired:function(){misys.toggleFields(true,null,this.requiredField,true,true);},setDialogFieldUnrequired:function(){misys.toggleFields(false,null,this.requiredField,true,true);},resetDialog:function(){var _1408=this.dialog.getChildren();dojo.forEach(_1408,function(_1409){var _140a=_1409.declaredClass;switch(_140a){case "dijit.form.RadioButton":_1409.set("checked",false);break;case "dijit.form.CheckBox":_1409.set("checked",false);break;case "dijit.form.DateTextBox":_1409.set("value",null);break;default:if(_1409.get("type")==="hidden"){break;}_1409.set("value","");_1409.state="";if(_1409._setStateClass){_1409._setStateClass();}break;}_1409._hasBeenBlurred=false;if(_1409.grid&&_1409.grid.declaredClass==="misys.grid.DataGrid"){_1409.clear();}});if(this.dialog.gridMultipleItemsWidget){this.dialog.gridMultipleItemsWidget=null;}if(this.dialog.storeId){this.dialog.storeId=null;}for(elm in this.handle){dojo.disconnect(this.handle[elm]);}this.handle=[];},_retrieveItemFields:function(){var _140b=this.dialog.getChildren();var _140c={};for(var i=0,len=this.gridColumns.length;i<len;i++){var _140d=this.gridColumns[i];var _140e=(this.propertiesMap[_140d]&&this.propertiesMap[_140d]._fieldName?this.propertiesMap[_140d]._fieldName:_140d);_140c=this._retrieveWidgetsValues(_140b,_140d,_140e,_140c);}return _140c;},_retrieveWidgetsValues:function(_140f,_1410,_1411,_1412){dojo.some(_140f,function(_1413){if(_1413.id===_1411||_1413.name===_1411){var value="";var _1414=_1413.declaredClass;if(_1413.isInstanceOf(misys.grid.GridMultipleItems)){value=this._extractJSON(_1413);if(value._values.is_valid&&value._values.is_valid==="N"){_1412.is_valid="N";}}else{switch(_1414){case "dijit.form.DateTextBox":value=_1413.get("displayedValue");break;case "dijit.form.CheckBox":value=_1413.get("checked")===true?"Y":"N";break;case "dijit.form.RadioButton":var _1415=dojo.query("[name='"+_1413.name+"']",this.dialog.domNode);dojo.some(_1415,function(_1416){var _1417=dijit.byNode(_1416.parentNode);var _1418=_1417.get("checked");if(_1418){value=_1417.params.value;return true;}});break;case "dijit.form.NumberTextBox":undefined;value=isNaN(_1413.get("value"))?"":_1413.get("value");break;case "misys.form.PercentNumberTextBox":undefined;value=isNaN(_1413.get("value"))?"":_1413.get("value");break;case "misys.form.SpreadTextBox":undefined;value=isNaN(_1413.get("value"))?"":_1413.get("value");break;case "misys.form.CurrencyTextBox":undefined;value=_1413.get("displayedValue");break;default:value=_1413.get("value");value+="";break;}}if(value==null){value="";}_1412[_1410]=value;return true;}else{if(_1413.declaredClass==="dijit.form.Form"){var _1419=_1413.getChildren();_1412=this._retrieveWidgetsValues(_1419,_1410,_1411,_1412);}}return false;},this);return _1412;},_extractJSON:function(_141a){var type=_141a.declaredClass;var json={_type:type,_values:[]};if(_141a&&_141a.grid&&_141a.grid.store){_141a.store.fetch({query:{store_id:"*"},onComplete:function(items,_141b){dojo.forEach(items,function(item){json._values.push(_141a._cloneSingleItem(item));});}});}return json;},_retrieveGridData:function(_141c,_141d){dojo.forEach(_141c,function(_141e){var _141f=_141e.declaredClass;if(_141e.grid){var _1420=[];_141e.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(items,_1421){dojo.forEach(items,function(item){var _1422=_141e._cloneSingleItem(item);_1420.push(_1422);});})});_141d[_141f]=_1420;}else{if(_141e.declaredClass==="dijit.form.Form"){var _1423=_141e.getChildren();_141d=this._retrieveGridData(_1423,_141d);}}},this);return _141d;},_cloneMultipleItems:function(items){var _1424=[];dojo.forEach(items,function(item){var _1425=dojo.isArray(item);item=dojo.isArray(item)?item[0]:item;var _1426={};for(var _1427 in item){if(dojo.some(this.gridColumns,function(_1428){return _1428==_1427;})){if(_1427.match("^misys.openaccount.widget.")=="misys.openaccount.widget."){var _1429=dojo.eval("new "+_1427+"()");var _142a=_1429._cloneItem(item[_1427]);_1426[_1427]=_142a;}else{if(_1427.match("^_")!=="_"){_1426[_1427]=dojo.isArray(item[_1427])?item[_1427][0]:item[_1427];}}}}_1424.push(_1426);},this);return _1424;},_cloneSingleItem:function(item){var _142b=dojo.isArray(item);item=dojo.isArray(item)?item[0]:item;var _142c={};for(var _142d in item){if(dojo.some(this.gridColumns,function(_142e){return _142e==_142d;})){if(_142d.match("^_")!=="_"){_142c[_142d]=dojo.isArray(item[_142d])?item[_142d][0]:item[_142d];}}}return _142b?[_142c]:_142c;},_cloneItemWithoutStoreId:function(item){var _142f=dojo.isArray(item);item=dojo.isArray(item)?item[0]:item;var _1430={};for(var _1431 in item){if(dojo.some(this.gridColumns,function(_1432){return _1432==_1431;})){if(_1431.match("^misys.openaccount.widget.")=="misys.openaccount.widget."){var _1433=dojo.eval("new "+_1431+"()");var _1434=_1433._cloneItem(item[_1431]);_1430[_1431]=_1434;}else{if(_1431!=="store_id"){if(_1431.match("^_")!=="_"){_1430[_1431]=dojo.isArray(item[_1431])?item[_1431][0]:item[_1431];}}}}}return _142f?[_1430]:_1430;},updateData:function(){var _1435=this.dialog.storeId;this._itemFields=this._retrieveItemFields();this._itemFields["store_id"]=(_1435!=null?_1435:dojox.uuid.generateRandomUuid());if(this._itemFields&&this._itemFields["product_name"]){this._itemFields["product_name"]=dojox.html.entities.encode(this._itemFields["product_name"],dojox.html.entities.html);}if(this._itemFields&&this._itemFields["cust_ref_id"]){this._itemFields["cust_ref_id"]=dojox.html.entities.encode(this._itemFields["cust_ref_id"],dojox.html.entities.html);}if(this._itemFields&&this._itemFields["other_type"]){this._itemFields["other_type"]=dojox.html.entities.encode(this._itemFields["other_type"],dojox.html.entities.html);}var _1436=this.checkMandatoryProperties(this._itemFields);var _1437=this.checkSubItemsValidity();this._itemFields["is_valid"]=_1436&&_1437?"Y":"N";dojo.attr(this.itemsNode,"style",{display:"block"});dojo.attr(this.noItemLabelNode,"style",{display:"none"});if(this.grid){this.grid.store.fetch({query:{store_id:_1435},onComplete:dojo.hitch(this,function(items,_1438){if(items.length>0){var item=items[0];for(var _1439 in this._itemFields){var value=this._itemFields[_1439];if((value!=null&&value!=undefined)&&_1439!="store_id"){this.grid.store.setValue(item,_1439,value);}}}else{this.grid.store.newItem(this._itemFields);}})});var items=this.grid.selection.getSelected();if(items.length){dojo.forEach(items,function(_143a){if(_143a!==null){this.grid.selection.setSelected(_143a,false);}},this);}}else{var _143b=[this._itemFields];var data={identifier:"store_id",label:"store_id",items:_143b};this.store=new dojo.data.ItemFileWriteStore({data:data,typeMap:this.typeMap});this.createDataGrid();}this.grid.store.save();this.grid.render();},createDataStoreFromNewItemCommand:function(_143c){dojo.eval("this.data.items = [{store_id: '0', "+_143c+"}]");this.store=new dojo.data.ItemFileWriteStore({data:this.data});},clear:function(){if(this.grid&&this.grid.store){this.grid.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(items,_143d){dojo.forEach(items,function(item){this.grid.store.deleteItem(item);},this);})});this.grid.store.save();var that=this;setTimeout(function(){that.renderSections();that.grid.render();},200);}},renderAll:function(){this.renderSections();if(this.grid){this.grid.render();}},createItem:function(){if(this.hasChildren&&this.hasChildren()){var items=[];dojo.forEach(this.getChildren(),function(child){if(child.createItem){items.push(child.createItem());}},this);var item={};item[this.declaredClass]=items;return item;}return null;},toXML:function(){var xml=[];if(this.xmlTagName){xml.push("<",this.xmlTagName,">");}if(this.grid){this.grid.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(items,_143e){xml.push(this.itemToXML(items,this.xmlSubTagName));})});}if(this.xmlTagName){xml.push("</",this.xmlTagName,">");}return xml.join("");},itemToXML:function(items,_143f){var xml=[];dojo.forEach(items,function(item){if(item){if(_143f){xml.push("<",_143f,">");}for(var _1440 in item){var value=dojo.isArray(item[_1440])?item[_1440][0]:item[_1440];if(dojo.isObject(value)&&value._type){var _1441=value._type;var clazz=dojo.eval(_1441);var _1442=new clazz({});xml.push("<",_1442.xmlTagName,">");if(value._values){xml.push(this.itemToXML(value._values,_1442.xmlSubTagName,xml));}else{if(value._value){xml.push(this.itemToXML(value._value,_1442.xmlSubTagName,xml));}}xml.push("</",_1442.xmlTagName,">");}else{if(_1440!="store_id"&&_1440.match("^_")!="_"){value=dojo.isArray(item[_1440])?item[_1440][0]:item[_1440];value+="";xml.push("<",_1440,">",dojox.html.entities.encode(value,dojox.html.entities.html),"</",_1440,">");}}}if(_143f){xml.push("</",_143f,">");}}},this);return xml.join("");},createItemsFromJson:function(_1443){var item;myData=dojo.fromJson(_1443);this.dataList=[];for(item in myData.items){if(myData.items[item].ref_id){this.dataList.push(myData.items[item]);}}if(this.dataList.length>0){this.createDataStoreFromDataList();this.createDataGrid();}},createJsonItem:function(){var _1444=[];if(this.hasChildren&&this.hasChildren()){dojo.forEach(this.getChildren(),function(child){if(child.createJsonItem){var _1445=this.getMandatoryProperties(child);var item=child.createJsonItem(this.propertiesMap,_1445);_1444.push(item);if(this.get("is_valid")!=="N"){this.set("is_valid",item.is_valid?item.is_valid:"Y");}misys._widgetsToDestroy=misys._widgetsToDestroy||[];misys._widgetsToDestroy.push(child.id);}},this);}return _1444;},isWidgetToBeDestroyed:function(_1446){var _1447=false;if(misys._widgetsToDestroy){dojo.some(misys._widgetsToDestroy,function(_1448){if(_1448===_1446.id){_1447=true;return false;}});}return _1447;},destroyWidgets:function(){if(misys._widgetsToDestroy){dojo.forEach(misys._widgetsToDestroy,function(_1449){if(dijit.byId(_1449)){dijit.byId(_1449).destroyRecursive();}});}},validate:function(){if(this.store){var _144a=dojo.some(this.store._arrayOfAllItems,function(item){if(item&&item.is_valid){return item.is_valid[0]!=="Y";}return false;});return !_144a;}else{if(this.is_valid){return (this.is_valid==="Y");}}return true;},validateDialog:function(_144b){var _144c=true,_144d=false,_144e=this.dialog.getChildren();if(!_144b){var _144f=dojo.every(_144e,function(w){return (w.disabled||!w.validate||w.validate());});this.is_valid=(_144f)?"Y":"N";this.state=(_144f)?"":"Error";_144c=true;}else{dojo.some(_144e,function(_1450){_1450._hasBeenBlurred=true;var valid=_1450.disabled||!_1450.validate||_1450.validate();if(!valid&&!_144d){if(_1450.hasOwnProperty("parentTab")){dijit.byId(_1450.get("tabContainer")).selectChild(_1450.get("parentTab"));}dojo.window.scrollIntoView(_1450.containerNode||_1450.domNode);if(_1450.focus){_1450.focus();}_144d=true;}if(!valid){_144c=false;}});}return _144c;},collectRequiredField:function(){this.checkDialog();var _1451=this.dialog.getChildren();var _1452=[];dojo.some(_1451,function(_1453){if(_1453.required){_1452.push(_1453.id);}});this.requiredField=_1452;},checkMandatoryProperties:function(item){var _1454=this.getMandatoryProperties(item);var _1455=dojo.some(_1454,dojo.hitch(this,function(_1456){var value=item[_1456];if(typeof value!=="undefined"){value=dojo.isArray(value)?value[0]:value;return (value==null||value==="");}}));return !_1455;},checkSubItemsValidity:function(){for(var _1457 in this._itemFields){var value=this._itemFields[_1457];if(value._type&&value._values){var _1458=dojo.some(value._values,dojo.hitch(this,function(item){if(item.is_valid){var _1459=dojo.isArray(value)?item.is_valid[0]:item.is_valid;return (_1459==="N");}return false;}));if(_1458){return false;}}}return true;}});}if(!dojo._hasResource["misys.product.widget.AttachmentFiles"]){dojo._hasResource["misys.product.widget.AttachmentFiles"]=true;dojo.provide("misys.product.widget.AttachmentFiles");dojo.experimental("misys.product.widget.AttachmentFiles");dojo.declare("misys.product.widget.AttachmentFiles",[misys.grid.GridMultipleItems],{data:{identifier:"store_id",label:"store_id",items:[]},templatePath:null,templateString:"",dialogId:"file-attachment-dialog-template",xmlTagName:"attachments",xmlSubTagName:"attachment",attachmentGroup:"",dialogOKCallback:"",showStatusColumn:"",viewMode:"edit",gridColumns:["attachment_id","file_type","file_title","file_name","file_status","file_access_dttm","file_description","fileact"],propertiesMap:{},maxFiles:0,fileActVisible:false,addItem:function(event){var that=this;var _145a=false;if(that.grid&&that.grid.store&&that.maxFiles!==0&&misys._config.isCustUser){that.grid.store.fetch({onBegin:function(total){if(total<that.maxFiles){_145a=true;}else{misys.dialog.show("ERROR",misys.getLocalization("maxFileUploadReached"));}}});}else{_145a=true;}if(_145a){that.inherited(arguments);dojo.forEach(dijit.byId("sendfiles"+this.attachmentGroup).getChildren(),function(_145b){if(_145b.name!="attachment-type"){_145b.set("value","");_145b.set("state","");}else{_145b.set("value",dijit.byId("attachment-type").get("_resetValue"));}});}},layout:[],dialogExecute:function(_145c){setTimeout(dojo.hitch(this.gridMultipleItemsWidget,"updateData"),500);var _145d=this.gridMultipleItemsWidget.dialogOKCallback;setTimeout(function(){dojo.eval(_145d);},600);},startup:function(){if(this._started){return;}var _145e=this.attachmentGroup;if(this.attachmentGroup!==""){this.templateString=dojo.byId("file-attachment-template"+this.attachmentGroup).innerHTML;this.dialogId="file-attachment"+this.attachmentGroup+"-dialog-template";this.xmlTagName="attachments-"+this.attachmentGroup;this.propertiesMap={attachment_id:{_fieldName:"attachment_id"+_145e},file_type:{_fieldName:"file_type"+_145e},file_title:{_fieldName:"file_title"+_145e},file_name:{_fieldName:"file_name"+_145e},file_status:{_fieldName:"file_status"+_145e},file_status_decoded:{_fieldName:"file_status_decoded"+_145e},file_access_dttm:{_fieldName:"file_access_dttm"+_145e},file_description:{_fieldName:"file_description"+_145e}};}var _145f=this.viewMode;var _1460={name:"FileAct",field:"fileact",get:function(_1461,_1462){var isSel=this.grid.selection.isSelected(_1461);if(_1462&&_1462.fileact&&_1462.fileact[0]==="Y"&&!misys.isFormDirty){isSel=true;this.grid.selection.addToSelection(_1461);}var html="<input type=\"checkbox\""+(isSel?" checked=\"checked\"":"")+" />";return html;},formatter:misys.grid.formatHTML,width:"5%",noresize:true,styles:"text-align: center;"};this.layout=[{name:"Picture",field:"file_name",formatter:function(value){return misys.getFileIcon(value);},width:"5%",noresize:true},{name:"Title",field:"file_title",width:"35%",noresize:true},{name:"FileName",field:"file_name",width:"35%",noresize:true,formatter:function(value){return misys.grid.formatSimpleHTML(value);}},{name:" ",field:"attachment_id",formatter:function(value){return misys.formatFileActions(value,_145e);},width:"10%",noresize:true},_1460];if(this.viewMode=="view"){if(this.showStatusColumn=="true"){this.layout=[{name:" ",field:"file_name",formatter:function(value){return misys.getFileIcon(value);},width:"5%",noresize:true},{name:"Title",field:"file_title",width:"30%",noresize:true},{name:"FileName",field:"file_name",width:"30%",noresize:true,formatter:function(value){return misys.grid.formatSimpleHTML(value);}},{name:"Status",field:"file_status_decoded",width:"5%",noresize:true},{name:" ",field:"attachment_id",formatter:function(value){return misys.formatFileViewActions(value,_145e);},width:"10%",noresize:true},{name:"FileAct",field:"fileact",width:"5%",noresize:true,styles:"text-align: center;",formatter:function(text){if(text==="Y"){return "Yes";}else{if(text==="Z"){return "NA";}else{return "No";}}}}];}else{this.layout=[{name:" ",field:"file_name",formatter:function(value){return misys.getFileIcon(value);},width:"5%",noresize:true},{name:"Title",field:"file_title",width:"30%",noresize:true},{name:"FileName",field:"file_name",width:"35%",noresize:true,formatter:function(value){return misys.grid.formatSimpleHTML(value);}},{name:" ",field:"attachment_id",formatter:function(value){return misys.formatFileViewActions(value,_145e);},width:"10%",noresize:true},{name:"FileAct",field:"fileact",width:"5%",noresize:true,styles:"text-align: center;",formatter:function(text){if(text==="Y"){return "Yes";}else{if(text==="Z"){return "NA";}else{return "No";}}}}];}}this.dataList=[];if(this.hasChildren()){dojo.forEach(this.getChildren(),function(child){var item={attachment_id:child.get("attachment_id"),file_type:child.get("file_type"),file_title:child.get("file_title"),file_name:child.get("file_name"),file_status:child.get("file_status"),file_status_decoded:child.get("file_status_decoded"),file_access_dttm:child.get("file_access_dttm"),file_description:child.get("file_description"),fileact:child.get("fileact")};this.dataList.push(item);},this);}dojo.parser.parse(this.dialogId);this.inherited(arguments);},onGridCreate:function(){var that=this;dojo.connect(that.grid,"onSelected",function(_1463){that.grid.updateRow(_1463);});dojo.connect(that.grid,"onDeselected",function(_1464){that.grid.updateRow(_1464);});dojo.connect(that.grid,"onCellClick",function(evt){var t=evt.target;if(t.tagName.toLowerCase()=="input"&&t.type=="checkbox"){misys.isFormDirty=true;var _1465=t.checked?"addToSelection":"deselect";that.grid.selection[_1465](evt.rowIndex);}});that.grid.selection.clickSelectEvent=function(){};if(this.viewMode==="edit"&&((typeof deliveryChannelFileAct!=="undefined")&&(deliveryChannelFileAct!==false))){that.displayFileAct(true);}else{if(this.viewMode==="edit"){that.displayFileAct(false);}else{if((typeof deliveryChannelFileAct!=="undefined")&&(deliveryChannelFileAct)&&(this.attachmentGroup!=="summarybank")){that.displayFileAct(true);}else{that.displayFileAct(false);}}}},createDataGrid:function(){var _1466=this.gridId;if(!_1466){_1466="grid-"+(this.xmlTagName?this.xmlTagName+"-":"")+dojox.uuid.generateRandomUuid();}this.grid=new misys.grid.DataGrid({jsId:_1466,id:_1466,store:this.store,structure:this.layout,autoHeight:true,selectionMode:"multiple",columnReordering:true,autoWidth:true,rowsPerpage:1000,initialWidth:"100%",canSort:function(_1467){var _1468=true;if(this.layout.cells){var _1469=this.layout.cellCount;var _146a=this.layout.cellCount;this.layout.cells.forEach(function(item,index){if(item.name){if(item.name===" "){_1469=index+1;}if(item.name==="FileAct"){_146a=index+1;}}});_1468=(Math.abs(_1467)!==1&&Math.abs(_1467)!==_1469&&Math.abs(_1467)!==_146a);}return _1468;},showMoveOptions:this.showMoveOptions},document.createElement("div"));this.grid.gridMultipleItemsWidget=this;misys.connect(this.grid,"onStyleRow",dojo.hitch(this,function(row){var item=this.grid.getItem(row.index);if(item&&item.hasOwnProperty("is_valid")){var _146b=dojo.isArray(item.is_valid)?item.is_valid[0]:item.is_valid;if(_146b&&_146b!=="Y"){row.customStyles+="background-color: #F9F7BA !important";this.state="Error";}}this.grid.focus.styleRow(row);this.grid.edit.styleRow(row);}));this.addChild(this.grid);this.onGridCreate();},displayFileAct:function(show){var that=this;if(that.grid.layout){dojo.forEach(that.grid.layout.cells,function(node,index){if(node&&node.name==="FileAct"&&show){that.grid.layout.setColumnVisibility(node.index,true);that.fileActVisible=true;}else{if(node&&node.name==="FileAct"&&!show){if(that.grid.selection){that.grid.selection.deselectAll();}that.grid.layout.setColumnVisibility(node.index,false);that.fileActVisible=false;}}});}}});}if(!dojo._hasResource["misys.product.widget.AttachmentFile"]){dojo._hasResource["misys.product.widget.AttachmentFile"]=true;dojo.provide("misys.product.widget.AttachmentFile");dojo.experimental("misys.product.widget.AttachmentFile");dojo.declare("misys.product.widget.AttachmentFile",[dijit._Widget,dijit._Contained],{attachment_id:"",file_type:"",file_title:"",file_name:"",file_status:"",file_status_decoded:"",file_access_dttm:"",file_description:"",fileact:""});}if(!dojo._hasResource["dojox.string.tokenize"]){dojo._hasResource["dojox.string.tokenize"]=true;dojo.provide("dojox.string.tokenize");dojox.string.tokenize=function(str,re,_146c,_146d){var _146e=[];var match,_146f,_1470=0;while(match=re.exec(str)){_146f=str.slice(_1470,re.lastIndex-match[0].length);if(_146f.length){_146e.push(_146f);}if(_146c){if(dojo.isOpera){var copy=match.slice(0);while(copy.length<match.length){copy.push(null);}match=copy;}var _1471=_146c.apply(_146d,match.slice(1).concat(_146e.length));if(typeof _1471!="undefined"){_146e.push(_1471);}}_1470=re.lastIndex;}_146f=str.slice(_1470);if(_146f.length){_146e.push(_146f);}return _146e;};}if(!dojo._hasResource["misys.grid.TopicListenerDataGrid"]){dojo._hasResource["misys.grid.TopicListenerDataGrid"]=true;dojo.provide("misys.grid.TopicListenerDataGrid");dojo.experimental("misys.grid.TopicListenerDataGrid");dojo.declare("misys.grid.TopicListenerDataGrid",[dojox.grid.EnhancedGrid],{subscribe_topic:"",onSelectionClearedScript:"",startup:function(){this.inherited(arguments);},handleTopicEvent:function(event,topic){if(this.selection&&this.get("selectionMode")!=""){this.selection.clear();}this._reloadGridForEventTerms(event);},_reloadGridForEventTerms:function(event){var store=this.get("store"),_1472=store.url,query={};if(_1472.indexOf("&")!==-1){_1472=_1472.substring(0,_1472.indexOf("&"));}for(key in event){if(event.hasOwnProperty(key)){query[key]=event[key];}}store.close();store.url=_1472;this.setStore(store,query);}});}if(!dojo._hasResource["dojox.grid.enhanced.plugins.Dialog"]){dojo._hasResource["dojox.grid.enhanced.plugins.Dialog"]=true;dojo.provide("dojox.grid.enhanced.plugins.Dialog");dojo.declare("dojox.grid.enhanced.plugins.Dialog",dijit.Dialog,{refNode:null,_position:function(){if(this.refNode&&!this._relativePosition){var _1473=dojo.position(dojo.byId(this.refNode)),_1474=dojo.position(this.domNode),_1475=dojo.window.getBox();if(_1473.x<0){_1473.x=0;}if(_1473.x+_1473.w>_1475.w){_1473.w=_1475.w-_1473.x;}if(_1473.y<0){_1473.y=0;}if(_1473.y+_1473.h>_1475.h){_1473.h=_1475.h-_1473.y;}_1473.x=_1473.x+_1473.w/2-_1474.w/2;_1473.y=_1473.y+_1473.h/2-_1474.h/2;if(_1473.x>=0&&_1473.x+_1474.w<=_1475.w&&_1473.y>=0&&_1473.y+_1474.h<=_1475.h){this._relativePosition=_1473;}}this.inherited(arguments);}});}if(!dojo._hasResource["dojox.grid.enhanced.plugins._StoreLayer"]){dojo._hasResource["dojox.grid.enhanced.plugins._StoreLayer"]=true;dojo.provide("dojox.grid.enhanced.plugins._StoreLayer");(function(){var ns=dojox.grid.enhanced.plugins,_1476=function(tags){var _1477=["reorder","sizeChange","normal","presentation"];var idx=_1477.length;for(var i=tags.length-1;i>=0;--i){var p=dojo.indexOf(_1477,tags[i]);if(p>=0&&p<=idx){idx=p;}}if(idx<_1477.length-1){return _1477.slice(0,idx+1);}else{return _1477;}},_1478=function(_1479){var i,_147a=this._layers,len=_147a.length;if(_1479){for(i=len-1;i>=0;--i){if(_147a[i].name()==_1479){_147a[i]._unwrap(_147a[i+1]);break;}}_147a.splice(i,1);}else{for(i=len-1;i>=0;--i){_147a[i]._unwrap();}}if(!_147a.length){delete this._layers;delete this.layer;delete this.unwrap;delete this.forEachLayer;}return this;},_147b=function(_147c){var i,_147d=this._layers;if(typeof _147c=="undefined"){return _147d.length;}if(typeof _147c=="number"){return _147d[_147c];}for(i=_147d.length-1;i>=0;--i){if(_147d[i].name()==_147c){return _147d[i];}}return null;},_147e=function(_147f,_1480){var len=this._layers.length,start,end,dir;if(_1480){start=0;end=len;dir=1;}else{start=len-1;end=-1;dir=-1;}for(var i=start;i!=end;i+=dir){if(_147f(this._layers[i],i)===false){return i;}}return end;};ns.wrap=function(store,_1481,layer,_1482){if(!store._layers){store._layers=[];store.layer=dojo.hitch(store,_147b);store.unwrap=dojo.hitch(store,_1478);store.forEachLayer=dojo.hitch(store,_147e);}var _1483=_1476(layer.tags);if(!dojo.some(store._layers,function(lyr,i){if(dojo.some(lyr.tags,function(tag){return dojo.indexOf(_1483,tag)>=0;})){return false;}else{store._layers.splice(i,0,layer);layer._wrap(store,_1481,_1482,lyr);return true;}})){store._layers.push(layer);layer._wrap(store,_1481,_1482);}return store;};dojo.declare("dojox.grid.enhanced.plugins._StoreLayer",null,{tags:["normal"],layerFuncName:"_fetch",constructor:function(){this._store=null;this._originFetch=null;this.__enabled=true;},initialize:function(store){},uninitialize:function(store){},invalidate:function(){},_wrap:function(store,_1484,_1485,_1486){this._store=store;this._funcName=_1484;var _1487=dojo.hitch(this,function(){return (this.enabled()?this[_1485||this.layerFuncName]:this.originFetch).apply(this,arguments);});if(_1486){this._originFetch=_1486._originFetch;_1486._originFetch=_1487;}else{this._originFetch=store[_1484]||function(){};store[_1484]=_1487;}this.initialize(store);},_unwrap:function(_1488){this.uninitialize(this._store);if(_1488){_1488._originFetch=this._originFetch;}else{this._store[this._funcName]=this._originFetch;}this._originFetch=null;this._store=null;},enabled:function(_1489){if(typeof _1489!="undefined"){this.__enabled=!!_1489;}return this.__enabled;},name:function(){if(!this.__name){var m=this.declaredClass.match(/(?:\.(?:_*)([^\.]+)Layer$)|(?:\.([^\.]+)$)/i);this.__name=m?(m[1]||m[2]).toLowerCase():this.declaredClass;}return this.__name;},originFetch:function(){return (dojo.hitch(this._store,this._originFetch)).apply(this,arguments);}});dojo.declare("dojox.grid.enhanced.plugins._ServerSideLayer",ns._StoreLayer,{constructor:function(args){args=args||{};this._url=args.url||"";this._isStateful=!!args.isStateful;this._onUserCommandLoad=args.onCommandLoad||function(){};this.__cmds={cmdlayer:this.name(),enable:true};this.useCommands(this._isStateful);},enabled:function(_148a){var res=this.inherited(arguments);this.__cmds.enable=this.__enabled;return res;},useCommands:function(toUse){if(typeof toUse!="undefined"){this.__cmds.cmdlayer=(toUse&&this._isStateful)?this.name():null;}return !!(this.__cmds.cmdlayer);},_fetch:function(_148b){if(this.__cmds.cmdlayer){dojo.xhrPost({url:this._url||this._store.url,content:this.__cmds,load:dojo.hitch(this,function(_148c){this.onCommandLoad(_148c,_148b);this.originFetch(_148b);}),error:dojo.hitch(this,this.onCommandError)});}else{this.onCommandLoad("",_148b);this.originFetch(_148b);}return _148b;},command:function(_148d,_148e){var cmds=this.__cmds;if(_148e===null){delete cmds[_148d];}else{if(typeof _148e!=="undefined"){cmds[_148d]=_148e;}}return cmds[_148d];},onCommandLoad:function(_148f,_1490){this._onUserCommandLoad(this.__cmds,_1490,_148f);},onCommandError:function(error){throw error;}});})();}if(!dojo._hasResource["dojox.grid.enhanced.plugins.Pagination"]){dojo._hasResource["dojox.grid.enhanced.plugins.Pagination"]=true;dojo.provide("dojox.grid.enhanced.plugins.Pagination");dojo.declare("dojox.grid.enhanced.plugins.Pagination",dojox.grid.enhanced._Plugin,{name:"pagination",pageSize:25,defaultRows:25,_currentPage:0,_maxSize:0,init:function(){this.gh=null;this.grid.rowsPerPage=this.pageSize=this.grid.rowsPerPage?this.grid.rowsPerPage:this.pageSize;this.grid.usingPagination=true;this.nls=dojo.i18n.getLocalization("dojox.grid.enhanced","Pagination");this._wrapStoreLayer();this._createPaginators(this.option);this._regApis();},_createPaginators:function(_1491){this.paginators=[];if(_1491.position==="both"){this.paginators=[new dojox.grid.enhanced.plugins._Paginator(dojo.mixin(_1491,{position:"bottom",plugin:this})),new dojox.grid.enhanced.plugins._Paginator(dojo.mixin(_1491,{position:"top",plugin:this}))];}else{this.paginators=[new dojox.grid.enhanced.plugins._Paginator(dojo.mixin(_1491,{plugin:this}))];}},_wrapStoreLayer:function(){var g=this.grid,ns=dojox.grid.enhanced.plugins;this._store=g.store;this.query=g.query;this.forcePageStoreLayer=new ns._ForcedPageStoreLayer(this);ns.wrap(g,"_storeLayerFetch",this.forcePageStoreLayer);this.connect(g,"setQuery",function(query){if(query!==this.query){this.query=query;}});},_stopEvent:function(event){try{dojo.stopEvent(event);}catch(e){}},_onNew:function(item,_1492){var _1493=Math.ceil(this._maxSize/this.pageSize);if(((this._currentPage+1===_1493||_1493===0)&&this.grid.rowCount<this.pageSize)||this.showAll){dojo.hitch(this.grid,this._originalOnNew)(item,_1492);this.forcePageStoreLayer.endIdx++;}this._maxSize++;if(this.showAll){this.pageSize++;}if(this.showAll&&this.grid.autoHeight){this.grid._refresh();}else{dojo.forEach(this.paginators,function(p){p.update();});}},_removeSelectedRows:function(){this._multiRemoving=true;this._originalRemove();this._multiRemoving=false;this.grid.resize();this.grid._refresh();},_onDelete:function(){if(!this._multiRemoving){this.grid.resize();if(this.showAll){this.grid._refresh();}}if(this.grid.get("rowCount")===0){this.prevPage();}},_regApis:function(){var g=this.grid;g.gotoPage=dojo.hitch(this,this.gotoPage);g.nextPage=dojo.hitch(this,this.nextPage);g.prevPage=dojo.hitch(this,this.prevPage);g.gotoFirstPage=dojo.hitch(this,this.gotoFirstPage);g.gotoLastPage=dojo.hitch(this,this.gotoLastPage);g.changePageSize=dojo.hitch(this,this.changePageSize);g.showGotoPageButton=dojo.hitch(this,this.showGotoPageButton);g.getTotalRowCount=dojo.hitch(this,this.getTotalRowCount);this.originalScrollToRow=dojo.hitch(g,g.scrollToRow);g.scrollToRow=dojo.hitch(this,this.scrollToRow);this._originalOnNew=dojo.hitch(g,g._onNew);this._originalRemove=dojo.hitch(g,g.removeSelectedRows);g.removeSelectedRows=dojo.hitch(this,this._removeSelectedRows);g._onNew=dojo.hitch(this,this._onNew);this.connect(g,"_onDelete",dojo.hitch(this,this._onDelete));},destroy:function(){this.inherited(arguments);var g=this.grid;try{dojo.forEach(this.paginators,function(p){p.destroy();});g.unwrap(this.forcePageStoreLayer.name());g._onNew=this._originalOnNew;g.removeSelectedRows=this._originalRemove;g.scrollToRow=this.originalScrollToRow;this.paginators=null;this.nls=null;}catch(e){console.warn("Pagination.destroy() error: ",e);}},nextPage:function(){if(this._maxSize>((this._currentPage+1)*this.pageSize)){this.gotoPage(this._currentPage+2);}},prevPage:function(){if(this._currentPage>0){this.gotoPage(this._currentPage);}},gotoPage:function(page){window.preventTableHeaderFocus=true;var _1494=Math.ceil(this._maxSize/this.pageSize);page--;if(page<_1494&&page>=0&&this._currentPage!==page){this._currentPage=page;this.grid.setQuery(this.query);this.grid.resize();}window.preventTableHeaderFocus=false;},gotoFirstPage:function(){this.gotoPage(1);},gotoLastPage:function(){var _1495=Math.ceil(this._maxSize/this.pageSize);this.gotoPage(_1495);},changePageSize:function(size){if(typeof size=="string"){size=parseInt(size,10);}var _1496=this.pageSize*this._currentPage;dojo.forEach(this.paginators,function(f){f.currentPageSize=this.grid.rowsPerPage=this.pageSize=size;if(size>=this._maxSize){this.grid.rowsPerPage=this.defaultRows;this.grid.usingPagination=false;}else{this.grid.usingPagination=true;}},this);var _1497=_1496+Math.min(this.pageSize,this._maxSize);if(_1497>this._maxSize){this.gotoLastPage();}else{var cp=Math.ceil(_1496/this.pageSize);if(cp!==this._currentPage){this.gotoPage(cp+1);}else{this.grid._refresh(true);}}this.grid.resize();},showGotoPageButton:function(flag){dojo.forEach(this.paginators,function(p){p._showGotoButton(flag);});},scrollToRow:function(_1498){var page=parseInt(_1498/this.pageSize,10),_1499=Math.ceil(this._maxSize/this.pageSize);if(page>_1499){return;}this.gotoPage(page+1);var _149a=_1498%this.pageSize;this.grid.setScrollTop(this.grid.scroller.findScrollTop(_149a)+1);},getTotalRowCount:function(){return this._maxSize;}});dojo.declare("dojox.grid.enhanced.plugins._ForcedPageStoreLayer",dojox.grid.enhanced.plugins._StoreLayer,{tags:["presentation"],constructor:function(_149b){this._plugin=_149b;},_fetch:function(_149c){var self=this,_149d=self._plugin,grid=_149d.grid,scope=_149c.scope||dojo.global,_149e=_149c.onBegin;_149c.start=_149d._currentPage*_149d.pageSize+(_149c.start<0?0:_149c.start);self.startIdx=_149c.start;self.endIdx=_149c.start+_149d.pageSize-1;if(_149e&&(_149d.showAll||dojo.every(_149d.paginators,function(p){return _149d.showAll=!p.sizeSwitch&&!p.pageStepper&&!p.gotoButton;}))){_149c.onBegin=function(size,req){_149d._maxSize=_149d.pageSize=size;self.startIdx=0;self.endIdx=size-1;dojo.forEach(_149d.paginators,function(f){f.update();});req.onBegin=_149e;req.onBegin.call(scope,size,req);};}else{if(_149e){_149c.onBegin=function(size,req){req.start=0;req.count=_149d.pageSize;_149d._maxSize=size;self.endIdx=self.endIdx>=size?(size-1):self.endIdx;if(self.startIdx>size&&size!==0){grid._pending_requests[req.start]=false;_149d.gotoFirstPage();}dojo.forEach(_149d.paginators,function(f){f.update();});req.onBegin=_149e;req.onBegin.call(scope,Math.min(_149d.pageSize,(size-self.startIdx)),req);};}}return dojo.hitch(this._store,this._originFetch)(_149c);}});dojo.declare("dojox.grid.enhanced.plugins._Paginator",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"paginatorBar\">\n\t<table cellpadding=\"0\" cellspacing=\"0\"  class=\"dojoxGridPaginator\">\n\t\t<tr>\n\t\t\t<td dojoAttachPoint=\"descriptionTd\" class=\"dojoxGridDescriptionTd\">\n\t\t\t\t<div aria-live=\"polite\" dojoAttachPoint=\"descriptionDiv\" class=\"dojoxGridDescription\" />\n\t\t\t</td>\n\t\t\t<td dojoAttachPoint=\"sizeSwitchTd\" class=\"dojoPageSizeSwitch\"></td>\n\t\t\t<td dojoAttachPoint=\"pageStepperTd\" class=\"dojoxGridPaginatorFastStep\">\n\t\t\t\t<div dojoAttachPoint=\"pageStepperDiv\" class=\"dojoxGridPaginatorStep\"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n",position:"bottom",_maxItemSize:0,description:true,pageStepper:true,maxPageStep:7,sizeSwitch:true,pageSizes:["10","25","50","100","All"],gotoButton:false,constructor:function(_149f){dojo.mixin(this,_149f);this.grid=this.plugin.grid;this.itemTitle=this.itemTitle?this.itemTitle:this.plugin.nls.itemTitle;this.descTemplate=this.descTemplate?this.descTemplate:this.plugin.nls.descTemplate;},postCreate:function(){this.inherited(arguments);this._setWidthValue();var self=this;var g=this.grid;this.plugin.connect(g,"_resize",dojo.hitch(this,"_resetGridHeight"));this._originalResize=dojo.hitch(g,"resize");g.resize=function(_14a0,_14a1){self._changeSize=g._pendingChangeSize=_14a0;self._resultSize=g._pendingResultSize=_14a1;g.sizeChange();};this._placeSelf();},destroy:function(){this.inherited(arguments);this.grid.focus.removeArea("pagination"+this.position.toLowerCase());if(this._gotoPageDialog){this._gotoPageDialog.destroy();dojo.destroy(this.gotoPageTd);delete this.gotoPageTd;delete this._gotoPageDialog;}this.grid.resize=this._originalResize;this.pageSizes=null;},update:function(){this.currentPageSize=this.plugin.pageSize;this._maxItemSize=this.plugin._maxSize;this._updateDescription();this._updatePageStepper();this._updateSizeSwitch();this._updateGotoButton();if(window.isAccessibilityEnabled){this._updateTableInfo();}},_setWidthValue:function(){var type=["description","sizeSwitch","pageStepper"];var _14a2=function(str1,str2){var reg=new RegExp(str2+"$");return reg.test(str1);};dojo.forEach(type,function(t){var width,flag=this[t];if(flag===undefined||typeof flag=="boolean"){return;}if(dojo.isString(flag)){width=_14a2(flag,"px")||_14a2(flag,"%")||_14a2(flag,"em")?flag:parseInt(flag,10)>0?parseInt(flag,10)+"px":null;}else{if(typeof flag==="number"&&flag>0){width=flag+"px";}}this[t]=width?true:false;this[t+"Width"]=width;},this);},_regFocusMgr:function(_14a3){this.grid.focus.addArea({name:"pagination"+_14a3,onFocus:dojo.hitch(this,this._onFocusPaginator),onBlur:dojo.hitch(this,this._onBlurPaginator),onMove:dojo.hitch(this,this._moveFocus),onKeyDown:dojo.hitch(this,this._onKeyDown)});switch(_14a3){case "top":this.grid.focus.placeArea("pagination"+_14a3,"before","header");break;case "bottom":default:this.grid.focus.placeArea("pagination"+_14a3,"after","content");break;}},_placeSelf:function(){var g=this.grid;var _14a4=dojo.trim(this.position.toLowerCase());switch(_14a4){case "top":this.placeAt(g.viewsHeaderNode,"before");this._regFocusMgr("top");break;case "bottom":default:this.placeAt(g.viewsNode,"after");this._regFocusMgr("bottom");break;}},_resetGridHeight:function(_14a5,_14a6){var g=this.grid;_14a5=_14a5||this._changeSize;_14a6=_14a6||this._resultSize;delete this._changeSize;delete this._resultSize;if(g._autoHeight){return;}var _14a7=g._getPadBorder().h;if(!this.plugin.gh){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_14a7;}if(_14a6){_14a5=_14a6;}if(_14a5){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_14a7;}var gh=this.plugin.gh,hh=g._getHeaderHeight(),ph=dojo.marginBox(this.domNode).h;ph=this.plugin.paginators[1]?ph*2:ph;if(typeof g.autoHeight=="number"){var cgh=gh+ph-_14a7;dojo.style(g.domNode,"height",cgh+"px");dojo.style(g.viewsNode,"height",(cgh-ph-hh)+"px");this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,cgh-ph-hh);}else{var h=gh-ph-hh-_14a7;dojo.style(g.viewsNode,"height",h+"px");var _14a8=dojo.some(g.views.views,function(v){return v.hasHScrollbar();});dojo.forEach(g.viewsNode.childNodes,function(c,idx){dojo.style(c,"height",h+"px");});dojo.forEach(g.views.views,function(v,idx){if(v.scrollboxNode){if(!v.hasHScrollbar()&&_14a8){dojo.style(v.scrollboxNode,"height",(h-dojox.html.metrics.getScrollbar().h)+"px");}else{dojo.style(v.scrollboxNode,"height",h+"px");}}});this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,h);}},_styleMsgNode:function(top,width,_14a9){var _14aa=this.grid.messagesNode;dojo.style(_14aa,{"position":"absolute","top":top+"px","width":width+"px","height":_14a9+"px","z-Index":"100"});},_updateDescription:function(){var s=this.plugin.forcePageStoreLayer;if(this.description&&this.descriptionDiv){this.descriptionDiv.innerHTML=this._maxItemSize>0?dojo.string.substitute(this.descTemplate,[this.itemTitle,this._maxItemSize,s.startIdx+1,s.endIdx+1]):"0 "+this.itemTitle;}if(this.descriptionWidth){dojo.style(this.descriptionTd,"width",this.descriptionWidth);}this._updateDownloadButton();},_updateDownloadButton:function(){var _14ab=parseInt(this._maxItemSize);var _14ac=dijit.byId("dijit_form_DropDownButton_1")?dijit.byId("dijit_form_DropDownButton_1").set("disabled",false):"";if(!_14ac){return;}if(dojo.query(".dojoxGrid")&&dojo.query(".dojoxGrid").length>1){var _14ad=dojo.query(".dojoxGrid").length;var _14ae=false;dojo.query(".dojoxGrid").forEach(function(grid){var _14af=dijit.byId(grid.id);try{if(!_14ae&&_14af.getTotalRowCount!==undefined){_14ae=_14af.getTotalRowCount()>=1?true:_14ae;}}catch(e){dijit.byId("dijit_form_DropDownButton_1").set("disabled",true);}});if(!_14ae){dijit.byId("dijit_form_DropDownButton_1").set("disabled",true);}}else{if(_14ab===0){dijit.byId("dijit_form_DropDownButton_1").set("disabled",true);}}},_updateTableInfo:function(){var _14b0="";if(dojo.query("#"+this.grid.id+" .dojoxGridDescription")&&dojo.query("#"+this.grid.id+" .dojoxGridDescription").length>0){_14b0=dojo.attr(dojo.query("#"+this.grid.id+" .dojoxGridDescription")[0],"innerHTML")+". ";}if(dojo.query("#"+this.grid.id+" .dojoxGridActivedSwitch")&&dojo.query("#"+this.grid.id+" .dojoxGridActivedSwitch").length>0){_14b0=_14b0+misys.getLocalization("currentPageSize")+" "+dojo.attr(dojo.query("#"+this.grid.id+" .dojoxGridActivedSwitch")[0],"title")+". ";}if(dojo.query("#"+this.grid.id+" .dojoxGridActived")&&dojo.query("#"+this.grid.id+" .dojoxGridActived").length>0){_14b0=_14b0+misys.getLocalization("currentPage")+" "+dojo.attr(dojo.query("#"+this.grid.id+" .dojoxGridActived")[0],"title");}if(dojo.query("span.dojoxGridInactiveSwitch",this.sizeSwitchTd)&&dojo.query("span.dojoxGridInactiveSwitch",this.sizeSwitchTd).length>0){var _14b1=dojo.query("span.dojoxGridInactiveSwitch",this.sizeSwitchTd)[0];_14b0=_14b0+" "+dojo.attr(_14b1,"title");if(dojo.query("#table-page-size-instructions")&&dojo.query("#table-page-size-instructions").length>0){_14b0=_14b0+" "+dojo.query("#table-page-size-instructions")[0].innerHTML;}dojo.attr(_14b1,"aria-label",_14b0);}if(dojo.query("span.sr-only",this.descriptionTd).length<1){var _14b2=this.grid.id+"_table"+"_info";var _14b3=dojo.create("span",{id:_14b2},this.descriptionTd,"last");dojo.addClass(_14b3,"sr-only");dojo.attr(_14b3,"aria-live","polite");}dojo.attr(dojo.query("span.sr-only",this.descriptionTd)[0],"innerHTML",_14b0);},_updateSizeSwitch:function(){if(!this.sizeSwitchTd){return;}if(!this.sizeSwitch||this._maxItemSize<=0){dojo.style(this.sizeSwitchTd,"display","none");return;}else{dojo.style(this.sizeSwitchTd,"display","");}if(this.initializedSizeNode&&!this.pageSizeValue){return;}if(this.sizeSwitchTd.childNodes.length<1){this._createSizeSwitchNodes();}this._updateSwitchNodeClass();this._moveToNextActivableNode(this._getAllPageSizeNodes(),this.pageSizeValue);this.pageSizeValue=null;},_createSizeSwitchNodes:function(){var node=null;if(!this.pageSizes||this.pageSizes.length<1){return;}dojo.forEach(this.pageSizes,function(size){size=dojo.trim(size);var _14b4=size.toLowerCase()=="all"?this.plugin.nls.allItemsLabelTemplate:dojo.string.substitute(this.plugin.nls.pageSizeLabelTemplate,[size]);node=dojo.create("span",{innerHTML:size,title:_14b4,value:size,tabindex:0},this.sizeSwitchTd,"last");if(window.isAccessibilityEnabled&&dojo.query("#table-page-size-instructions")&&dojo.query("#table-page-size-instructions")[0]!==undefined){_14b4=_14b4+" "+dojo.query("#table-page-size-instructions")[0].innerHTML;dojo.attr(node,"role","menuitem");}dijit.setWaiState(node,"label",_14b4);this.plugin.connect(node,"onclick",dojo.hitch(this,"_onSwitchPageSize"));this.plugin.connect(node,"onmouseover",function(e){dojo.addClass(e.target,"dojoxGridPageTextHover");});this.plugin.connect(node,"onmouseout",function(e){dojo.removeClass(e.target,"dojoxGridPageTextHover");});node=dojo.create("span",{innerHTML:"|"},this.sizeSwitchTd,"last");dojo.addClass(node,"dojoxGridSeparator");},this);dojo.destroy(node);this.initializedSizeNode=true;if(this.sizeSwitchWidth){dojo.style(this.sizeSwitchTd,"width",this.sizeSwitchWidth);}},_updateSwitchNodeClass:function(){var size=null;var _14b5=false;var _14b6=function(node,_14b7){if(_14b7){dojo.addClass(node,"dojoxGridActivedSwitch");dojo.attr(node,"tabindex","-1");_14b5=true;}else{dojo.addClass(node,"dojoxGridInactiveSwitch");dojo.attr(node,"tabindex","0");}};dojo.forEach(this.sizeSwitchTd.childNodes,function(node){if(node.value){size=node.value;dojo.removeClass(node);if(this.pageSizeValue){_14b6(node,size===this.pageSizeValue&&!_14b5);}else{if(size.toLowerCase()=="all"){size=this._maxItemSize;}_14b6(node,this.currentPageSize===parseInt(size,10)&&!_14b5);}}},this);},_updatePageStepper:function(){if(!this.pageStepperTd){return;}if(!this.pageStepper||this._maxItemSize<=0){dojo.style(this.pageStepperTd,"display","none");return;}else{dojo.style(this.pageStepperTd,"display","");}if(this.pageStepperDiv.childNodes.length<1){this._createPageStepNodes();this._createWardBtns();}else{this._resetPageStepNodes();}this._updatePageStepNodeClass();this._moveToNextActivableNode(this._getAllPageStepNodes(),this.pageStepValue);this.pageStepValue=null;},_createPageStepNodes:function(){var _14b8=this._getStartPage(),_14b9=this._getStepPageSize(),label="",node=null;for(var i=_14b8;i<this.maxPageStep+1;i++){label=dojo.string.substitute(this.plugin.nls.pageStepLabelTemplate,[i+""]);node=dojo.create("div",{innerHTML:i,value:i,title:label,tabindex:i<_14b8+_14b9?0:-1},this.pageStepperDiv,"last");if(window.isAccessibilityEnabled&&dojo.query("#table-page-instructions")&&dojo.query("#table-page-instructions")[0]!==undefined){label=label+" "+dojo.query("#table-page-instructions")[0].innerHTML;dojo.attr(node,"role","menuitem");}dijit.setWaiState(node,"label",label);this.plugin.connect(node,"onclick",dojo.hitch(this,"_onPageStep"));this.plugin.connect(node,"onmouseover",function(e){dojo.addClass(e.target,"dojoxGridPageTextHover");});this.plugin.connect(node,"onmouseout",function(e){dojo.removeClass(e.target,"dojoxGridPageTextHover");});dojo.style(node,"display",i<_14b8+_14b9?"block":"none");}if(this.pageStepperWidth){dojo.style(this.pageStepperTd,"width",this.pageStepperWidth);}},_createWardBtns:function(){var self=this;var _14ba={prevPage:"&#60;",firstPage:"&#171;",nextPage:"&#62;",lastPage:"&#187;"};var _14bb=function(value,label,_14bc){var node=dojo.create("div",{value:value,title:label,tabindex:1},self.pageStepperDiv,_14bc);self.plugin.connect(node,"onclick",dojo.hitch(self,"_onPageStep"));if(window.isAccessibilityEnabled&&dojo.query("#table-page-instructions")&&dojo.query("#table-page-instructions")[0]!==undefined){label=label+" "+dojo.query("#table-page-instructions")[0].innerHTML;dojo.attr(node,"role","menuitem");}dijit.setWaiState(node,"label",label);if(window.isAccessibilityEnabled){var _14bd=dojo.create("span",{value:value,title:label},node,_14bc);}else{var _14bd=dojo.create("span",{value:value,title:label,innerHTML:_14ba[value]},node,_14bc);}dojo.addClass(_14bd,"dojoxGridWardButtonInner");};_14bb("prevPage",this.plugin.nls.prevTip,"first");_14bb("firstPage",this.plugin.nls.firstTip,"first");_14bb("nextPage",this.plugin.nls.nextTip,"last");_14bb("lastPage",this.plugin.nls.lastTip,"last");},_resetPageStepNodes:function(){var _14be=this._getStartPage(),_14bf=this._getStepPageSize(),_14c0=this.pageStepperDiv.childNodes,node=null;for(var i=_14be,j=2;j<_14c0.length-2;j++,i++){node=_14c0[j];if(i<_14be+_14bf){dojo.attr(node,"innerHTML",i);dojo.attr(node,"value",i);dojo.style(node,"display","block");dijit.setWaiState(node,"label",dojo.string.substitute(this.plugin.nls.pageStepLabelTemplate,[i+""]));}else{dojo.style(node,"display","none");}}},_updatePageStepNodeClass:function(){var value=null,_14c1=this._getCurrentPageNo(),_14c2=this._getPageCount(),_14c3=0;var _14c4=function(node,_14c5,_14c6){var value=node.value,_14c7=_14c5?"dojoxGrid"+value+"Btn":"dojoxGridInactived",_14c8=_14c5?"dojoxGrid"+value+"BtnDisable":"dojoxGridActived";if(_14c6){dojo.addClass(node,_14c8);dojo.attr(node,"tabindex","-1");window.preventTabToPages=true;}else{dojo.addClass(node,_14c7);dojo.attr(node,"tabindex","0");window.preventTabToPages=false;}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(isNaN(parseInt(node.value,10))){dojo.addClass(node,"dojoxGridWardButton");var _14c9=node.value=="prevPage"||node.value=="firstPage"?1:_14c2;_14c4(node,true,(_14c1==_14c9));}else{value=parseInt(node.value,10);_14c4(node,false,(value===_14c1||dojo.style(node,"display")==="none"));}},this);},_showGotoButton:function(flag){this.gotoButton=flag;this._updateGotoButton();},_updateGotoButton:function(){if(!this.gotoButton){if(this.gotoPageTd){if(this._gotoPageDialog){this._gotoPageDialog.destroy();}dojo.destroy(this.gotoPageDiv);dojo.destroy(this.gotoPageTd);delete this.gotoPageDiv;delete this.gotoPageTd;}return;}if(!this.gotoPageTd){this._createGotoNode();}dojo.toggleClass(this.gotoPageDiv,"dojoxGridPaginatorGotoDivDisabled",this.plugin.pageSize>=this.plugin._maxSize);},_createGotoNode:function(){this.gotoPageTd=dojo.create("td",{},dojo.query("tr",this.domNode)[0],"last");dojo.addClass(this.gotoPageTd,"dojoxGridPaginatorGotoTd");this.gotoPageDiv=dojo.create("div",{tabindex:"0",title:this.plugin.nls.gotoButtonTitle},this.gotoPageTd,"first");dojo.addClass(this.gotoPageDiv,"dojoxGridPaginatorGotoDiv");this.plugin.connect(this.gotoPageDiv,"onclick",dojo.hitch(this,"_openGotopageDialog"));dojo.attr(this.gotoPageDiv,"role","menuitem");if(window.isAccessibilityEnabled){var _14ca=dojo.create("span",{title:this.plugin.nls.gotoButtonTitle},this.gotoPageDiv,"last");}else{var _14ca=dojo.create("span",{title:this.plugin.nls.gotoButtonTitle,innerHTML:"&#8869;"},this.gotoPageDiv,"last");}dojo.addClass(_14ca,"dojoxGridWardButtonInner");},_openGotopageDialog:function(event){if(!this._gotoPageDialog){this._gotoPageDialog=new dojox.grid.enhanced.plugins.pagination._GotoPageDialog(this.plugin);}if(!this._currentFocusNode){this.grid.focus.focusArea("pagination"+this.position,event);}else{this._currentFocusNode=this.gotoPageDiv;}if(this.focusArea!="pageStep"){this.focusArea="pageStep";}this._gotoPageDialog.updatePageCount();this._gotoPageDialog.showDialog();},_onFocusPaginator:function(event,step){if(!this._currentFocusNode){if(step>0){return this._onFocusPageSizeNode(event)?true:this._onFocusPageStepNode(event);}else{if(step<0){return this._onFocusPageStepNode(event)?true:this._onFocusPageSizeNode(event);}else{return false;}}}else{if(step>0){return this.focusArea==="pageSize"?this._onFocusPageStepNode(event):false;}else{if(step<0){if(window.isAccessibilityEnabled){if(this.focusArea==="pageStep"||((this.grid.focus._currentAreaIdx===0)&&dojo.hasClass(this.gotoPageDiv,"dojoxGridPaginatorGotoDivDisabled"))){return this._onFocusPageSizeNode(event);}else{return false;}}else{return this.focusArea==="pageStep"?this._onFocusPageSizeNode(event):false;}}else{return false;}}}},_onFocusPageSizeNode:function(event){var _14cb=this._getPageSizeActivableNodes();if(event&&event.type!=="click"){if(_14cb[0]){dijit.focus(_14cb[0]);this._currentFocusNode=_14cb[0];this.focusArea="pageSize";this.plugin._stopEvent(event);return true;}else{return false;}}if(event&&event.type=="click"){if(dojo.indexOf(this._getPageSizeActivableNodes(),event.target)>-1){this.focusArea="pageSize";this.plugin._stopEvent(event);return true;}}return false;},_onFocusPageStepNode:function(event){var _14cc=this._getPageStepActivableNodes();if(event&&event.type!=="click"){if(_14cc[0]){dijit.focus(_14cc[0]);this._currentFocusNode=_14cc[0];this.focusArea="pageStep";this.plugin._stopEvent(event);return true;}else{if(this.gotoPageDiv){if(window.isAccessibilityEnabled&&dojo.hasClass(this.gotoPageDiv,"dojoxGridPaginatorGotoDivDisabled")){return false;}dijit.focus(this.gotoPageDiv);this._currentFocusNode=this.gotoPageDiv;this.focusArea="pageStep";this.plugin._stopEvent(event);return true;}else{return false;}}}if(event&&event.type=="click"){if(dojo.indexOf(this._getPageStepActivableNodes(),event.target)>-1){this.focusArea="pageStep";this.plugin._stopEvent(event);return true;}else{if(event.target==this.gotoPageDiv){dijit.focus(this.gotoPageDiv);this._currentFocusNode=this.gotoPageDiv;this.focusArea="pageStep";this.plugin._stopEvent(event);return true;}}}return false;},_onFocusGotoPageNode:function(event){if(!this.gotoButton||!this.gotoPageTd){return false;}if(event&&event.type!=="click"||(event.type=="click"&&event.target==this.gotoPageDiv)){dijit.focus(this.gotoPageDiv);this._currentFocusNode=this.gotoPageDiv;this.focusArea="gotoButton";this.plugin._stopEvent(event);return true;}return true;},_onBlurPaginator:function(event,step){var _14cd=this._getPageSizeActivableNodes(),_14ce=this._getPageStepActivableNodes();if(step>0&&this.focusArea==="pageSize"&&(_14ce.length>1||this.gotoButton)){return false;}else{if(step<0&&this.focusArea==="pageStep"&&_14cd.length>1){return false;}}this._currentFocusNode=null;this.focusArea=null;return true;},_onKeyDown:function(event,_14cf){if(_14cf){return;}if(event.altKey||event.metaKey){return;}var dk=dojo.keys;if(event.keyCode===dk.ENTER||event.keyCode===dk.SPACE){if(dojo.indexOf(this._getPageStepActivableNodes(),this._currentFocusNode)>-1){this._onPageStep(event);}else{if(dojo.indexOf(this._getPageSizeActivableNodes(),this._currentFocusNode)>-1){this._onSwitchPageSize(event);}else{if(this._currentFocusNode===this.gotoPageDiv){this._openGotopageDialog(event);}}}}this.plugin._stopEvent(event);},_moveFocus:function(_14d0,_14d1,evt){var nodes;if(this.focusArea=="pageSize"){nodes=this._getPageSizeActivableNodes();}else{if(this.focusArea=="pageStep"){nodes=this._getPageStepActivableNodes();if(this.gotoPageDiv){nodes.push(this.gotoPageDiv);}}}if(nodes.length<1){return;}var _14d2=dojo.indexOf(nodes,this._currentFocusNode);var _14d3=_14d2+_14d1;if(_14d3>=0&&_14d3<nodes.length){dijit.focus(nodes[_14d3]);this._currentFocusNode=nodes[_14d3];}this.plugin._stopEvent(evt);},_getPageSizeActivableNodes:function(){return dojo.query("span[tabindex='0']",this.sizeSwitchTd);},_getPageStepActivableNodes:function(){return (dojo.query("div[tabindex='0']",this.pageStepperDiv));},_getAllPageSizeNodes:function(){var _14d4=[];dojo.forEach(this.sizeSwitchTd.childNodes,function(node){if(node.value){_14d4.push(node);}});return _14d4;},_getAllPageStepNodes:function(){var _14d5=[];for(var i=0,len=this.pageStepperDiv.childNodes.length;i<len;i++){_14d5.push(this.pageStepperDiv.childNodes[i]);}return _14d5;},_moveToNextActivableNode:function(_14d6,_14d7){if(!_14d7){return;}if(_14d6.length<2){this.grid.focus.tab(1);}var nl=[],node=null,index=0;dojo.forEach(_14d6,function(n){if(n.value==_14d7){nl.push(n);node=n;}else{if(dojo.attr(n,"tabindex")=="0"){nl.push(n);}}});if(nl.length<2){this.grid.focus.tab(1);}index=dojo.indexOf(nl,node);if(dojo.attr(node,"tabindex")!="0"){node=nl[index+1]?nl[index+1]:nl[index-1];}dijit.focus(node);this._currentFocusNode=node;},_onSwitchPageSize:function(e){window.preventTableHeaderFocus=true;var size=this.pageSizeValue=e.target.value;if(!size){return;}if(dojo.trim(size.toLowerCase())=="all"){size=this._maxItemSize;showAll=true;}this.plugin.grid.usingPagination=!this.plugin.showAll;size=parseInt(size,10);if(isNaN(size)||size<=0){return;}if(!this._currentFocusNode){this.grid.focus.currentArea("pagination"+this.position);}if(this.focusArea!="pageSize"){this.focusArea="pageSize";}this.plugin.changePageSize(size);this.grid.focus.focusArea("pagination"+this.position,event);window.preventTableHeaderFocus=false;},_onPageStep:function(e){var p=this.plugin,value=this.pageStepValue=e.target.value;if(!this._currentFocusNode){this.grid.focus.currentArea("pagination"+this.position);}if(this.focusArea!="pageStep"){this.focusArea="pageStep";}if(!isNaN(parseInt(value,10))){p.gotoPage(value);}else{switch(e.target.value){case "prevPage":p.prevPage();break;case "nextPage":p.nextPage();break;case "firstPage":p.gotoFirstPage();break;case "lastPage":p.gotoLastPage();}}},_getCurrentPageNo:function(){return this.plugin._currentPage+1;},_getPageCount:function(){if(!this._maxItemSize||!this.currentPageSize){return 0;}return Math.ceil(this._maxItemSize/this.currentPageSize);},_getStartPage:function(){var cp=this._getCurrentPageNo();var ms=parseInt(this.maxPageStep/2,10);var pc=this._getPageCount();if(cp<ms||(cp-ms)<1){return 1;}else{if(pc<=this.maxPageStep){return 1;}else{if(pc-cp<ms&&cp-this.maxPageStep>=0){return pc-this.maxPageStep+1;}else{return (cp-ms);}}}},_getStepPageSize:function(){var sp=this._getStartPage();var count=this._getPageCount();if((sp+this.maxPageStep)>count){return count-sp+1;}else{return this.maxPageStep;}}});dojo.declare("dojox.grid.enhanced.plugins.pagination._GotoPageDialog",null,{pageCount:0,constructor:function(_14d8){this.plugin=_14d8;this.pageCount=this.plugin.paginators[0]._getPageCount();this._dialogNode=dojo.create("div",{},dojo.body(),"last");this._gotoPageDialog=new dojox.grid.enhanced.plugins.Dialog({"refNode":_14d8.grid.domNode,"title":this.plugin.nls.dialogTitle},this._dialogNode);this._createDialogContent();this._gotoPageDialog.startup();},_createDialogContent:function(){this._specifyNode=dojo.create("div",{innerHTML:this.plugin.nls.dialogIndication},this._gotoPageDialog.containerNode,"last");if(window.isAccessibilityEnabled===true){dojo.attr(this._specifyNode,"id","page_num_text");}this._pageInputDiv=dojo.create("div",{},this._gotoPageDialog.containerNode,"last");this._pageTextBox=new dijit.form.NumberTextBox();this._pageTextBox.constraints={fractional:false,min:1,max:this.pageCount};this.plugin.connect(this._pageTextBox.textbox,"onkeyup",dojo.hitch(this,"_setConfirmBtnState"));if(window.isAccessibilityEnabled===true){dojo.attr(this._pageTextBox.textbox,"aria-labelledby","page_num_text");}this._pageInputDiv.appendChild(this._pageTextBox.domNode);this._pageLabel=dojo.create("label",{innerHTML:dojo.string.substitute(this.plugin.nls.pageCountIndication,[this.pageCount])},this._pageInputDiv,"last");this._buttonDiv=dojo.create("div",{},this._gotoPageDialog.containerNode,"last");this._confirmBtn=new dijit.form.Button({label:this.plugin.nls.dialogConfirm,onClick:dojo.hitch(this,this._onConfirm)});this._confirmBtn.set("disabled",true);this._cancelBtn=new dijit.form.Button({label:this.plugin.nls.dialogCancel,onClick:dojo.hitch(this,this._onCancel)});this._buttonDiv.appendChild(this._confirmBtn.domNode);this._buttonDiv.appendChild(this._cancelBtn.domNode);this._styleContent();this._gotoPageDialog.onCancel=dojo.hitch(this,this._onCancel);this.plugin.connect(this._gotoPageDialog,"_onKey",dojo.hitch(this,"_onKeyDown"));},_styleContent:function(){dojo.addClass(this._specifyNode,"dojoxGridDialogMargin");dojo.addClass(this._pageInputDiv,"dojoxGridDialogMargin");dojo.addClass(this._buttonDiv,"dojoxGridDialogButton");dojo.style(this._pageTextBox.domNode,"width","50px");},updatePageCount:function(){this.pageCount=this.plugin.paginators[0]._getPageCount();this._pageTextBox.constraints={fractional:false,min:1,max:this.pageCount};dojo.attr(this._pageLabel,"innerHTML",dojo.string.substitute(this.plugin.nls.pageCountIndication,[this.pageCount]));},showDialog:function(){this._gotoPageDialog.show();},_onConfirm:function(event){if(this._pageTextBox.isValid()&&this._pageTextBox.getDisplayedValue()!==""){this.plugin.gotoPage(this._pageTextBox.parse(this._pageTextBox.getDisplayedValue()));this._gotoPageDialog.hide();this._pageTextBox.reset();}this.plugin._stopEvent(event);},_onCancel:function(event){this._pageTextBox.reset();this._gotoPageDialog.hide();this.plugin._stopEvent(event);},_onKeyDown:function(event){if(event.altKey||event.metaKey){return;}var dk=dojo.keys;if(event.keyCode===dk.ENTER){this._onConfirm(event);}},_setConfirmBtnState:function(){if(this._pageTextBox.isValid()&&this._pageTextBox.getDisplayedValue()!==""){this._confirmBtn.set("disabled",false);}else{this._confirmBtn.set("disabled",true);}},destroy:function(){this._pageTextBox.destroy();this._confirmBtn.destroy();this._cancelBtn.destroy();this._gotoPageDialog.destroy();dojo.destroy(this._specifyNode);dojo.destroy(this._pageInputDiv);dojo.destroy(this._pageLabel);dojo.destroy(this._buttonDiv);dojo.destroy(this._dialogNode);}});dojox.grid.EnhancedGrid.registerPlugin(dojox.grid.enhanced.plugins.Pagination);}if(!dojo._hasResource["misys.grid.Pagination"]){dojo._hasResource["misys.grid.Pagination"]=true;dojo.provide("misys.grid.Pagination");dojo.experimental("misys.grid.Pagination");dojo.declare("misys.grid.Pagination",[dojox.grid.enhanced.plugins.Pagination],{name:"paginationEnhanced",defaultRows:100,queryOptions:{},gotoPage:function(page){window.preventTableHeaderFocus=true;this.setQueryOptions();var _14d9=Math.ceil(this._maxSize/this.pageSize);page--;if(page<_14d9&&page>=0&&this._currentPage!==page){this._currentPage=page;if(this.grid.store&&this.grid.store.declaredClass==="dojox.data.QueryReadStore"){if(this.grid.params.domIdArray){var grid=this.grid,_14da={},field,_14db=this.grid.params.jsonArray,_14dc=this.grid.params.domIdArray;if(grid&&(_14db.length===_14dc.length)){dojo.forEach(_14db,function(key,i){field=dijit.byId(_14dc[i]);if(field){var _14dd=field.get("value");_14dd=_14dd.replace("'","'");if(_14dd!=""){_14da[key]=_14dd;}}});}this.queryOptions=_14da;}this.grid.setQuery(this.queryOptions);}else{this.grid.setQuery(this.grid.query);}this.grid.resize();}if(this.grid.rowSelectCell){this.grid.rowSelectCell.toggleAllSelection(false);}window.preventTableHeaderFocus=false;},setQueryOptions:function(){var form=dijit.byId("TransactionSearchForm"),grids=dojo.query(".dojoxGrid"),_14de={},_14df=dojo.query(".gridContainer")[0],_14e0=/Date/,_14e1=/Time/;if(form){form.getDescendants().forEach(function(field,i){if(field.name){var value;if(field.declaredClass=="dijit.form.RadioButton"){var _14e2=dojo.query("[name='"+field.name+"']",form.domNode);dojo.some(_14e2,function(_14e3){var _14e4=dijit.byNode(_14e3.parentNode);if(_14e4.checked){value=_14e4.params.value;}});}else{value=field.get("value");}if(_14e0.test(field.declaredClass)||(_14e1.test(field.declaredClass))){value=field.get("displayedValue");}if(value===" "){value="";}_14de[field.get("name")]=value;}});_14de["searchFlag"]=true;this.queryOptions=_14de;}}});dojox.grid.EnhancedGrid.registerPlugin(misys.grid.Pagination);}if(!dojo._hasResource["misys.grid.IndirectSelection"]){dojo._hasResource["misys.grid.IndirectSelection"]=true;dojo.provide("misys.grid.IndirectSelection");dojo.declare("misys.grid.IndirectSelection",dojox.grid.enhanced._Plugin,{name:"misysIndirectSelection",constructor:function(){var _14e5=this.grid.layout;this.connect(_14e5,"setStructure",dojo.hitch(_14e5,this.addRowSelectCell,this.option));},addRowSelectCell:function(_14e6){if(!this.grid.misysIndirectSelection||this.grid.selectionMode=="none"){return;}var _14e7=false,_14e8=["get","formatter","field","fields"],_14e9={type:misys.grid.MultipleRowSelector,name:"",width:"30px",styles:"text-align: center;"};if(_14e6.headerSelector){_14e6.name="";}if(this.grid.rowSelectCell){this.grid.rowSelectCell.destroy();}dojo.forEach(this.structure,function(view){var cells=view.cells;if(cells&&cells.length>0&&!_14e7){var _14ea=cells[0];if(_14ea[0]&&_14ea[0].isRowSelector){_14e7=true;return;}var _14eb,_14ec=this.grid.selectionMode=="single"?misys.grid.SingleRowSelector:misys.grid.MultipleRowSelector;_14eb=dojo.mixin(_14e9,_14e6,{type:_14ec,editable:false,notselectable:true,filterable:false,navigatable:true,nosort:true});dojo.forEach(_14e8,function(field){if(field in _14eb){delete _14eb[field];}});if(cells.length>1){_14eb.rowSpan=cells.length;}dojo.forEach(this.cells,function(cell,i){if(cell.index>=0){cell.index+=1;}else{console.warn("Error:IndirectSelection.addRowSelectCell()-  cell "+i+" has no index!");}});var _14ed=this.addCellDef(0,0,_14eb);_14ed.index=0;_14ea.unshift(_14ed);this.cells.unshift(_14ed);this.grid.rowSelectCell=_14ed;_14e7=true;}},this);this.cellCount=this.cells.length;},destroy:function(){if(this.grid&&this.grid.rowSelectCell){this.grid.rowSelectCell.destroy();delete this.grid.rowSelectCell;}this.inherited(arguments);}});dojo.declare("misys.grid.RowSelector",dojox.grid.cells._Widget,{inputType:"",map:null,disabledMap:null,isRowSelector:true,_connects:null,_subscribes:null,checkedText:"&#8730;",unCheckedText:"O",constructor:function(){this.map={};this.disabledMap={};this.disabledCount=0;this._connects=[];this._subscribes=[];this.inA11YMode=dojo.hasClass(dojo.body(),"dijit_a11y");this.baseClass="dojoxGridRowSelector dijitReset dijitInline dijit"+this.inputType;this.checkedClass=" dijit"+this.inputType+"Checked";this.disabledClass=" dijit"+this.inputType+"Disabled";this.checkedDisabledClass=" dijit"+this.inputType+"CheckedDisabled";this.statusTextClass=" dojoxGridRowSelectorStatusText";this._connects.push(dojo.connect(this.grid,"dokeyup",this,"_dokeyup"));this._connects.push(dojo.connect(this.grid.selection,"onSelected",this,"_onSelected"));this._connects.push(dojo.connect(this.grid.selection,"onDeselected",this,"_onDeselected"));this._connects.push(dojo.connect(this.grid.scroller,"invalidatePageNode",this,"_pageDestroyed"));this._connects.push(dojo.connect(this.grid,"onCellClick",this,"_onClick"));this._connects.push(dojo.connect(this.grid,"updateRow",this,"_onUpdateRow"));},formatter:function(data,_14ee){var clazz=this.baseClass;var _14ef=this.getValue(_14ee);var _14f0=!!this.disabledMap[_14ee];if(_14ef){clazz+=this.checkedClass;if(_14f0){clazz+=this.checkedDisabledClass;}}else{if(_14f0){clazz+=this.disabledClass;}}if(window.isAccessibilityEnabled&&window.isAccessibilityEnabled===true){var _14f1="";try{var _14f2=dojo.attr(this.grid.id+"_rowSelector_a11y-1-context","innerHTML");var keys=dojo.attr(this.grid.id+"_rowSelector_a11y-1-keys","innerHTML").split(",");var store=this.grid.store;var item=store._items[_14ee];var _14f3=dojo.map(keys,function(key){return store.getValue(item,key);});_14f1=misys.getLocalization("unchecked")+dojo.string.substitute(_14f2,_14f3);}catch(exc){_14f1="Onclick selects/deselects the row ";}return ["<div tabindex = -1 ","id = '"+this.grid.id+"_rowSelector_"+_14ee+"' ","name = '"+this.grid.id+"_rowSelector' class = '"+clazz+"' ","role = 'checkbox' aria-checked = '"+_14ef+"' aria-disabled = '"+_14f0+"' aria-label = '"+dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_14ee+1])+(_14ef?this.checkedText:this.unCheckedText)+"'>","<span class = '"+this.statusTextClass+"'>"+(_14ef?this.checkedText:this.unCheckedText)+"</span>","<span class = 'sr-only' aria-live='polite' id='"+this.grid.id+"_rowSelector_"+_14ee+"_a11y_text' class='sr-only'>"+_14f1+" </span>","</div>"].join("");}else{return ["<div tabindex = -1 ","id = '"+this.grid.id+"_rowSelector_"+_14ee+"' ","name = '"+this.grid.id+"_rowSelector' class = '"+clazz+"' ","role = 'presentation' aria-checked = '"+_14ef+"' aria-disabled = '"+_14f0+"' aria-label = '"+dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_14ee+1])+"'>","<span class = '"+this.statusTextClass+"'>"+(_14ef?this.checkedText:this.unCheckedText)+"</span>","</div>"].join("");}},setValue:function(_14f4,_14f5){},getValue:function(_14f6){return this.grid.selection.isSelected(_14f6);},toggleRow:function(index,value){this._nativeSelect(index,value);},setDisabled:function(index,_14f7){if(index<0){return;}this._toggleDisabledStyle(index,_14f7);},disabled:function(index){return !!this.disabledMap[index];},_onClick:function(e){if(e.cell===this){this._selectRow(e);}},_dokeyup:function(e){if(e.cellIndex==this.index&&e.rowIndex>=0&&(e.keyCode==dojo.keys.SPACE||e.keyCode==dojo.keys.ENTER)){this._selectRow(e);}},focus:function(_14f8){var _14f9=this.map[_14f8];if(_14f9){_14f9.focus();}},_focusEndingCell:function(_14fa,_14fb){var cell=this.grid.getCell(_14fb);this.grid.focus.setFocusCell(cell,_14fa);},_nativeSelect:function(index,value){this.grid.selection[value?"select":"deselect"](index);},_onSelected:function(index){this._toggleCheckedStyle(index,true);},_onDeselected:function(index){this._toggleCheckedStyle(index,false);},_onUpdateRow:function(index){delete this.map[index];},_toggleCheckedStyle:function(index,value){var _14fc=this._getSelector(index);if(_14fc){dojo.toggleClass(_14fc,this.checkedClass,value);if(this.disabledMap[index]){dojo.toggleClass(_14fc,this.checkedDisabledClass,value);}dijit.setWaiState(_14fc,"checked",value);if(this.inA11YMode){dojo.attr(_14fc.firstChild,"innerHTML",value?this.checkedText:this.unCheckedText);}if(window.isAccessibilityEnabled&&window.isAccessibilityEnabled===true){var _14fd=(value)?(this.inputType+" "+misys.getLocalization("checked")+"."):(this.inputType+" "+misys.getLocalization("unchecked")+".");dojo.attr(dojo.query("#"+this.grid.id+"_rowSelector_"+index)[0],"aria-label",dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[index+1])+" "+_14fd);try{var _14fe=dojo.attr(dojo.query("#"+this.grid.id+"_rowSelector_"+index+"_a11y_text")[0],"innerHTML");_14fe=_14fe.replace(misys.getLocalization("unchecked"),"");_14fe=_14fe.replace(misys.getLocalization("checked"),"");var _14ff=(value)?misys.getLocalization("checked"):misys.getLocalization("unchecked");dojo.attr(dojo.query("#"+this.grid.id+"_rowSelector_"+index+"_a11y_text")[0],"innerHTML",_14ff+_14fe);}catch(exc){}}}},_toggleDisabledStyle:function(index,_1500){var _1501=this._getSelector(index);if(_1501){dojo.toggleClass(_1501,this.disabledClass,_1500);if(this.getValue(index)){dojo.toggleClass(_1501,this.checkedDisabledClass,_1500);}dijit.setWaiState(_1501,"disabled",_1500);}this.disabledMap[index]=_1500;if(index>=0){this.disabledCount+=_1500?1:-1;}},_getSelector:function(index){var _1502=this.map[index];if(!_1502){var _1503=this.view.rowNodes[index];if(_1503){_1502=dojo.query(".dojoxGridRowSelector",_1503)[0];if(_1502){this.map[index]=_1502;}}}return _1502;},_pageDestroyed:function(_1504){var _1505=this.grid.scroller.rowsPerPage;var start=_1504*_1505,end=start+_1505-1;for(var i=start;i<=end;i++){if(!this.map[i]){continue;}dojo.destroy(this.map[i]);delete this.map[i];}},destroy:function(){for(var i in this.map){dojo.destroy(this.map[i]);delete this.map[i];}for(i in this.disabledMap){delete this.disabledMap[i];}dojo.forEach(this._connects,dojo.disconnect);dojo.forEach(this._subscribes,dojo.unsubscribe);delete this._connects;delete this._subscribes;}});dojo.declare("misys.grid.SingleRowSelector",misys.grid.RowSelector,{inputType:"Radio",_selectRow:function(e){var index=e.rowIndex;if(this.disabledMap[index]){return;}this._focusEndingCell(index,0);this._nativeSelect(index,!this.grid.selection.selected[index]);}});dojo.declare("misys.grid.MultipleRowSelector",misys.grid.RowSelector,{inputType:"CheckBox",swipeStartRowIndex:-1,swipeMinRowIndex:-1,swipeMaxRowIndex:-1,toSelect:false,lastClickRowIdx:-1,toggleAllTrigerred:false,unCheckedText:"&#9633;",constructor:function(){this._connects.push(dojo.connect(dojo.doc,"onmouseup",this,"_domouseup"));this._connects.push(dojo.connect(this.grid,"onRowMouseOver",this,"_onRowMouseOver"));this._connects.push(dojo.connect(this.grid.focus,"move",this,"_swipeByKey"));this._connects.push(dojo.connect(this.grid,"onCellMouseDown",this,"_onMouseDown"));if(this.headerSelector){this._connects.push(dojo.connect(this.grid.views,"render",this,"_addHeaderSelector"));this._connects.push(dojo.connect(this.grid,"onSelectionChanged",this,"_onSelectionChanged"));this._connects.push(dojo.connect(this.grid,"onKeyDown",this,function(e){if(e.rowIndex==-1&&e.cellIndex==this.index&&(e.keyCode==dojo.keys.SPACE||e.keyCode==dojo.keys.ENTER)){this._toggletHeader();}}));}},toggleAllSelection:function(_1506){var grid=this.grid,_1507=grid.selection;if(_1506){_1507.selectRange(0,grid.rowCount-1);}else{_1507.deselectAll();}this.toggleAllTrigerred=true;var _1508=this.grid.rowCount;for(var i=0;i<_1508;i++){var item=this.grid.getItem(i);var flag;if(item){flag=this.grid.store.getValue(item,"disable_selection");}if(flag==="Y"){this.grid.rowSelectCell.toggleRow(i,false);}}},_onMouseDown:function(e){if(e.cell==this){this._startSelection(e.rowIndex);dojo.stopEvent(e);}},_onRowMouseOver:function(e){this._updateSelection(e,0);},_domouseup:function(e){if(dojo.isIE){this.view.content.decorateEvent(e);}var _1509=e.cellIndex>=0&&this.inSwipeSelection()&&!this.grid.edit.isEditRow(e.rowIndex);if(_1509){this._focusEndingCell(e.rowIndex,e.cellIndex);}this._finishSelect();},_dokeyup:function(e){this.inherited(arguments);if(!e.shiftKey){this._finishSelect();}},_startSelection:function(_150a){this.swipeStartRowIndex=this.swipeMinRowIndex=this.swipeMaxRowIndex=_150a;this.toSelect=!this.getValue(_150a);},_updateSelection:function(e,delta){if(!this.inSwipeSelection()){return;}var byKey=delta!==0;var _150b=e.rowIndex,_150c=_150b-this.swipeStartRowIndex+delta;if(_150c>0&&this.swipeMaxRowIndex<_150b+delta){this.swipeMaxRowIndex=_150b+delta;}if(_150c<0&&this.swipeMinRowIndex>_150b+delta){this.swipeMinRowIndex=_150b+delta;}var min=_150c>0?this.swipeStartRowIndex:_150b+delta;var max=_150c>0?_150b+delta:this.swipeStartRowIndex;for(var i=this.swipeMinRowIndex;i<=this.swipeMaxRowIndex;i++){if(this.disabledMap[i]||i<0){continue;}if(i>=min&&i<=max){this._nativeSelect(i,this.toSelect);}else{if(!byKey){this._nativeSelect(i,!this.toSelect);}}}},_swipeByKey:function(_150d,_150e,e){if(!e||_150d===0||!e.shiftKey||e.cellIndex!=this.index||this.grid.focus.rowIndex<0){return;}var _150f=e.rowIndex;if(this.swipeStartRowIndex<0){this.swipeStartRowIndex=_150f;if(_150d>0){this.swipeMaxRowIndex=_150f+_150d;this.swipeMinRowIndex=_150f;}else{this.swipeMinRowIndex=_150f+_150d;this.swipeMaxRowIndex=_150f;}this.toSelect=this.getValue(_150f);}this._updateSelection(e,_150d);},_finishSelect:function(){this.swipeStartRowIndex=-1;this.swipeMinRowIndex=-1;this.swipeMaxRowIndex=-1;this.toSelect=false;},inSwipeSelection:function(){return this.swipeStartRowIndex>=0;},_nativeSelect:function(index,value){this.grid.selection[value?"addToSelection":"deselect"](index);},_selectRow:function(e){var _1510=e.rowIndex;if(this.disabledMap[_1510]){return;}dojo.stopEvent(e);this._focusEndingCell(_1510,0);var delta=_1510-this.lastClickRowIdx;var _1511=!this.grid.selection.selected[_1510];if(this.lastClickRowIdx>=0&&!e.ctrlKey&&!e.altKey&&e.shiftKey){var min=delta>0?this.lastClickRowIdx:_1510;var max=delta>0?_1510:this.lastClickRowIdx;for(var i=min;i>=0&&i<=max;i++){this._nativeSelect(i,_1511);}}else{this._nativeSelect(_1510,_1511);}this.lastClickRowIdx=_1510;},getValue:function(_1512){if(_1512==-1){var g=this.grid;return g.rowCount>0&&g.rowCount<=g.selection.getSelectedCount();}return this.inherited(arguments);},_addHeaderSelector:function(){var _1513=this.view.getHeaderCellNode(this.index);if(!_1513){return;}dojo.empty(_1513);var g=this.grid;var _1514=null;if(window.isAccessibilityEnabled&&window.isAccessibilityEnabled===true){if(!dojo.byId(g.id+"_rowSelector_a11y-1-context")){var _1515=dojo.filter(this.grid.layout.cells,function(_1516){return (_1516.a11ySelectionContext==="true");});var _1517="";var _1518="";var iTemp=0;dojo.map(_1515,function(_1519){if(_1517==""){_1517=_1519.name+": ${"+(iTemp++)+"}";_1518=_1519.field;}else{_1517=_1517+", "+misys.getLocalization("with")+" "+_1519.name+" ${"+(iTemp++)+"}";_1518=_1518+","+_1519.field;}});this.grid.domNode.appendChild(dojo.create("span",{"id":g.id+"_rowSelector_a11y-1-context","class":"sr-only","innerHTML":_1517}));this.grid.domNode.appendChild(dojo.create("span",{"id":g.id+"_rowSelector_a11y-1-keys","class":"sr-only","innerHTML":_1518}));}_1514=_1513.appendChild(dojo.create("div",{"tabindex":-1,"id":g.id+"_rowSelector_-1","class":this.baseClass,"role":"checkbox","aria-checked":"false","aria-describedby":g.id+"_rowSelector_a11y-1-text","innerHTML":"<span  class = 'sr-only' aria-live='polite' id='"+g.id+"_rowSelector_a11y-1-text' class='sr-only'/>"}));}else{_1514=_1513.appendChild(dojo.create("div",{"tabindex":-1,"id":g.id+"_rowSelector_-1","class":this.baseClass,"role":"presentation","innerHTML":"<span class = '"+this.statusTextClass+"'></span><span style='height: 0; width: 0; overflow: hidden; display: block;'>"+g._nls["selectAll"]+"</span>"}));}this.map[-1]=_1514;var idx=this._headerSelectorConnectIdx;if(idx!==undefined){dojo.disconnect(this._connects[idx]);this._connects.splice(idx,1);}this._headerSelectorConnectIdx=this._connects.length;this._connects.push(dojo.connect(_1514,"onclick",this,"_toggletHeader"));if(window.isAccessibilityEnabled&&window.isAccessibilityEnabled===true){try{var _151a=misys.getLocalization("unchecked")+this.grid.paginationEnhanced.plugin.paginators[0].descriptionDiv.innerHTML;dojo.attr(this.grid.id+"_rowSelector_a11y-1-text","innerHTML",_151a);}catch(exc){}}this._onSelectionChanged();},_toggletHeader:function(){if(!!this.disabledMap[-1]){return;}this.grid._selectingRange=true;this.toggleAllSelection(!this.getValue(-1));this._onSelectionChanged();this.grid._selectingRange=false;if(window.isAccessibilityEnabled&&window.isAccessibilityEnabled===true){try{var _151b=this.grid.paginationEnhanced.plugin.paginators[0].descriptionDiv.innerHTML;var _151c=!this.getValue(-1)?misys.getLocalization("unchecked"):misys.getLocalization("checked");dojo.attr(this.grid.id+"_rowSelector_a11y-1-text","innerHTML",_151c+_151b);}catch(exc){}}},_onSelectionChanged:function(){var g=this.grid;if(!this.map[-1]||g._selectingRange){return;}this._toggleCheckedStyle(-1,this.getValue(-1));},_toggleDisabledStyle:function(index,_151d){this.inherited(arguments);if(this.headerSelector){var _151e=(this.grid.rowCount==this.disabledCount);if(_151e!=!!this.disabledMap[-1]){arguments[0]=-1;arguments[1]=_151e;this.inherited(arguments);}}}});dojox.grid.EnhancedGrid.registerPlugin(misys.grid.IndirectSelection,{"preInit":true});}if(!dojo._hasResource["misys.calendar.Calendar"]){dojo._hasResource["misys.calendar.Calendar"]=true;dojo.provide("misys.calendar.Calendar");dojo.experimental("misys.calendar.Calendar");dojo.declare("misys.calendar.Calendar",[dijit.Calendar],{templateString:dojo.cache("misys.calendar","templates/Calendar.html","<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" dojoAttachEvent=\"onkeypress: _onKeyPress\" aria-labelledby=\"${id}_year calendar-instructions\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th id=\"decrement_month\" class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span dojoAttachPoint=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t\n\t\t\t<th id=\"dijit_reset\" dojoAttachPoint=\"monthLabel\" class='dijitReset' colspan=\"5\">\n\t\t\t\t<div class=\"dijitVisible\">\n\t\t\t\t\t<div class=\"dijitPopup dijitMenu dijitMenuPassive dijitHidden\" dojoAttachPoint=\"monthDropDownButton\">\n\t\t\t\t\t\t<div class=\"dijitCalendarMonthLabelTemplate dijitCalendarMonthLabel\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div dojoAttachPoint=\"monthLabelSpacer\" class=\"dijitSpacer\"></div>\n\t\t\t\t<div dojoAttachPoint=\"monthLabelNode\" class=\"dijitCalendarMonthLabel dijitInline dijitVisible\" dojoAttachEvent=\"onmousedown: _onMonthToggle\"></div>\n\t\t\t</th>\n\t\t\t\n\n\t\t\t<!--  th dojoAttachPoint=\"monthLabel\" class='dijitReset' colspan=\"5\">\n\t\t\t\t<div dojoType=\"dijit.form.DropDownButton\" dojoAttachPoint=\"monthDropDownButton\"\n\t\t\t\t\tid=\"${id}_mddb\" tabIndex=\"-1\">\n\t\t\t\t</div>\n\t\t\t</th>\n \t\t\t-->\n\t\t\t<th id=\"increment_month\" class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span dojoAttachPoint=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th id=\"header\" class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent=\"onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut, onmousedown: _onDayMouseDown, onmouseup: _onDayMouseUp\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">\n\t\t\t<td class=\"dijitReset dijitCalendarDateTemplate\" role=\"gridcell\"><span class=\"dijitCalendarDateLabel\"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\">\n\t\t\t\t<h3 class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span dojoAttachPoint=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"),tooltipTemplateString:"<span class='cal-event'>{content}</span>",tooltipDuration:10000,activeTooltips:[],monthOffset:0,calendarDateHasChanged:false,eventLimit:10,eventsLoaded:false,_onDayClick:function(evt){for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!dojo.hasClass(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);}var _151f=dojo.date.locale.format(this.value,{selector:"date",datePattern:"yyyyMMdd"});dojo.global.location=misys.getServletURL("/screen/FullEventsScreen?operation=LIST_FEATURES&date="+_151f);},postCreate:function(){var _1520=0;var _1521=this.id;if(_1521.indexOf("_",1)>0){currentId=_1521.substring(9,_1521.length);_1520=parseInt(currentId,10)-1;if(_1520<0){_1520=11;}}if(dijit.byId("calendar_"+_1520)){dojo.style(this.incrementMonth,"display","none");dojo.style(this.decrementMonth,"display","none");dojo.style(this.nextYearLabelNode,"display","none");dojo.style(this.previousYearLabelNode,"display","none");this.monthLabel.setAttribute("colSpan",7);}this.inherited(arguments);if(this.monthOffset!==0){this._adjustDisplay("month",this.monthOffset);}var _1522=dojo.byId("CustomerOngoingTasksList")?true:false;var _1523=dojo.byId("InternalNewsPortlet")?true:false;var _1524=dojo.byId("OutstandingPerProductChartPortlet")?true:false;var _1525=dojo.byId("TradeEventsGridPortlet")?true:false;var _1526=dojo.byId("HomeAccountSummaryListPortlet")?true:false;var _1527=dojo.byId("ActionRequiredPortlet")?true:false;var _1528=dojo.byId("OpicsAccountListPortletPlusBalance")?true:false;var _1529=dojo.byId("TradeCalendarPortlet")?true:false;if(!_1522&&!_1523&&!_1524&&!_1525&&!_1526&&!_1527&&!_1528){var _152a=this.id;var _152b;if(_152a.indexOf("_",1)>0){_152b=_152a.substring(9,_152a.length);}var _152c="calendar_"+_152b;if(dijit.byId(_152c)){if(_1529){dojo.style(_152c,"width",0);dojo.style(_152c,"position","relative");dojo.style(_152c,"left","100%");}}}},_onMonthToggle:function(evt){dojo.stopEvent(evt);var _152d=dojo.date.locale.format(this.currentFocus,{selector:"date",datePattern:"yyyyMM"});var _152e=0;var _152f=0;var _1530=this.id;if(_1530.indexOf("_",1)>0){currentId=_1530.substring(9,_1530.length);_152e=parseInt(currentId,10)+1;_152f=parseInt(currentId,10)-1;if(_152e>11){_152e=0;}if(_152f<0){_152f=11;}}var _1531="&date="+_152d;dojo.global.location=misys.getServletURL("/screen/FullEventsScreen?operation=LIST_FEATURES"+_1531);},_adjustDisplay:function(part,_1532){this.calendarDateHasChanged=true;this.inherited(arguments);},_updateNextDisplay:function(_1533,_1534,adj,_1535){var _1536=_1533+1;if(dijit.byId("calendar_"+_1536)){this._updateNextDisplay(_1536,_1534,adj);dijit.byId("calendar_"+_1536)._adjustDisplay(_1534,adj);}},_populateGrid:function(){var month=new this.dateClassObj(this.currentFocus);month.setDate(1);var _1537=month.getDay(),_1538=this.dateFuncObj.getDaysInMonth(month),_1539=this.dateFuncObj.getDaysInMonth(this.dateFuncObj.add(month,"month",-1)),today=null;if(misys&&misys._config&&misys._config.bankBusinessDate&&misys._config.bankBusinessDate!==""){var _153a=misys._config.bankBusinessDate.substring(0,4);var _153b=misys._config.bankBusinessDate.substring(5,7);var _153c=misys._config.bankBusinessDate.substring(8,10);today=new this.dateClassObj(_153a,_153b-1,_153c);}else{today=new this.dateClassObj();}var _153d=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);if(_153d>_1537){_153d-=7;}var _153e=dojo.query(".dijitCalendarDateTemplate",this.domNode);_153e.forEach(function(_153f,i){i+=_153d;var date=new this.dateClassObj(month),_1540,clazz="dijitCalendar",adj=0;if(i<_1537){_1540=_1539-_1537+i+1;adj=-1;clazz+="Previous";}else{if(i>=(_1537+_1538)){_1540=i-_1537-_1538+1;adj=1;clazz+="Next";}else{_1540=i-_1537+1;clazz+="Current";}}if(adj){date=this.dateFuncObj.add(date,"month",adj);}date.setDate(_1540);if(!this.dateFuncObj.compare(date,today,"date")){clazz="dijitCalendarCurrentDate "+clazz;}if(this._isSelectedDate(date,this.lang)){clazz="dijitCalendarSelectedDate "+clazz;}if(this.isDisabledDate(date,this.lang)){clazz="dijitCalendarDisabledDate "+clazz;}var _1541=this.getClassForDate(date,this.lang);if(_1541){clazz=_1541+" "+clazz;}var _1542="";if(!this.calendarDateHasChanged&&_153f.className.indexOf("calevent")!==-1){_1542=_153f.className.substring(_153f.className.indexOf("calevent"));}_153f.className=clazz+"Month dijitCalendarDateTemplate "+_1542;_153f.dijitDateValue=date.valueOf();dojo.attr(_153f,"dijitDateValue",date.valueOf());var label=dojo.query(".dijitCalendarDateLabel",_153f)[0],text=date.getDateLocalized?date.getDateLocalized(this.lang):date.getDate();this._setText(label,text);},this);var _1543=dojo.date.locale.getNames("months","wide","standAlone",this.lang);this._setText(this.monthLabelNode,_1543[month.getMonth()]);var y=month.getFullYear()-1;var d=new this.dateClassObj();dojo.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);dojo.query(".calendarLoader").forEach(function(d){dojo.replaceClass(d,"");});var _1544=this;if(!this.eventsLoaded){var _1545=dojo.byId("CustomerOngoingTasksList")?true:false;var _1546=dojo.byId("InternalNewsPortlet")?true:false;var _1547=dojo.byId("OutstandingPerProductChartPortlet")?true:false;var _1548=dojo.byId("TradeEventsGridPortlet")?true:false;var _1549=dojo.byId("HomeAccountSummaryListPortlet")?true:false;var _154a=dojo.byId("ActionRequiredPortlet")?true:false;var _154b=dojo.byId("OpicsAccountListPortletPlusBalance")?true:false;if(!_1545&&!_1546&&!_1547&&!_1548&&!_1549&&!_154a&&!_154b){if(dojo.byId("EventsPortlet")){dojo.style("EventsPortlet","width",10);dojo.style("EventsPortlet","position","relative");dojo.style("EventsPortlet","left","100%");}}var _154c="";var _154d="";var _154e=[];var _154f=misys.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetCalendarEvents"),handleAs:"json",content:{inputdate:this.currentFocus.getTime(),startdate:_154c,enddate:_154d},load:function(_1550,_1551){dojo.forEach(_1550.events,function(ev){_154e.push(ev);});}});_154f.then(function(){dojo.forEach(_1544.activeTooltips,function(tId){dijit.byId(tId).destroy();});_1544.activeTooltips=[];setTimeout(function(){var _1552=_1544.currentFocus.getMonth();_153e.forEach(function(td){var _1553=new Date(td.dijitDateValue);if(_1553.getMonth()===_1552){var _1554=dojo.filter(_154e,function(event){return (dojo.date.compare(_1553,new Date(event.DATE),"date")===0);});if(_1554.length>0){var _1555="";var _1556="";dojo.forEach(_1554,function(event,i){if(i<=_1544.eventLimit){if(i===0){_1556=_1544.id+event.DATE;td.id=_1556;td.className+=" "+event.CSS;}_1555+=event.TITLE;if(event.REF_ID){_1555+=" - "+event.REF_ID;}_1555+="<br/>";}});if(_1554.length>_1544.eventLimit){_1555+=" ...";}var _1557=_1556+_1553.getTime();_1544.activeTooltips.push(_1557);new dijit.Tooltip({connectId:[_1556],id:_1557,duration:_1544.tooltipDuration,label:dojo.replace(_1544.tooltipTemplateString,{content:_1555})});}}});},500);});this.eventsLoaded=true;}var _1558=function(_1559,_155a,adj){_1544._connects.push(dijit.typematic.addMouseListener(_1544[_1559],_1544,function(count){if(count>=0){var _155b=parseInt(this.id.substring(9,this.id.length),10);_1544._updateNextDisplay(_155b,_155a,adj,_1559);_1544._adjustDisplay(_155a,adj);var _155c=parseInt(_155b,10)+1;var _155d=parseInt(_155b,10)+2;var _155e=parseInt(_155b,10)-1;var _155f=dijit.byId("calendar_"+_155c);if(_155c>11){_155c=0;}if(_155e<0){_155e=11;}var _1560=dojo.date.locale.format(_1544.currentFocus,{selector:"date",datePattern:"yyyyMM"});var _1561=new _1544.dateClassObj(_1544.currentFocus);_1561.setDate(1);var _1562=dojo.date.locale.format(_1561,{selector:"date",fullYear:true});var range=1;if(_155f){range=3;}var _1563=dojo.date.add(_1561,"month",range);_1563=dojo.date.add(_1563,"day",-1);_1563=dojo.date.locale.format(_1563,{selector:"date",fullYear:true});var _1564="";var _1565="";var _1566="";var _1567="";if(dojo.byId("TransactionSearchForm")){_1565=dijit.byId("product_code")?dijit.byId("product_code").get("value"):"";_1566=dijit.byId("ref_id")?dijit.byId("ref_id").get("value"):"";_1567=dijit.byId("entity")?dijit.byId("entity").get("value"):"";if(dijit.byId("startdate")&&dijit.byId("enddate")){if(adj!==-1){dijit.byId("enddate").set("displayedValue",_1562);}dijit.byId("startdate").set("displayedValue",_1562);dijit.byId("enddate").set("displayedValue",_1563);}}misys.grid.reloadForSearchTerms();_1544.eventsLoaded=false;_1544._populateGrid();if(_155f){_155f.eventsLoaded=false;_155f._populateGrid();var _1568=dijit.byId("calendar_"+_155d);_1568.eventsLoaded=false;_1568._populateGrid();}}},0.8,500));};_1558("incrementMonth","month",1);_1558("decrementMonth","month",-1);_1558("nextYearLabelNode","year",1);_1558("previousYearLabelNode","year",-1);this.calendarDateHasChanged=false;}});}if(!dojo._hasResource["dijit.TitlePane"]){dojo._hasResource["dijit.TitlePane"]=true;dojo.provide("dijit.TitlePane");dojo.declare("dijit.TitlePane",[dijit.layout.ContentPane,dijit._Templated,dijit._CssStateMixin],{title:"",open:true,toggleable:true,tabIndex:"0",duration:dijit.defaultDuration,baseClass:"dijitTitlePane",templateString:dojo.cache("dijit","templates/TitlePane.html","<div>\n\t<div dojoAttachEvent=\"onclick:_onTitleClick, onkeypress:_onTitleKey\"\n\t\t\tclass=\"dijitTitlePaneTitle\" dojoAttachPoint=\"titleBarNode\">\n\t\t<div class=\"dijitTitlePaneTitleFocus\" dojoAttachPoint=\"focusNode\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"arrowNode\" class=\"dijitArrowNode\" role=\"presentation\"\n\t\t\t/><span dojoAttachPoint=\"arrowNodeInner\" class=\"dijitArrowNodeInner\"></span\n\t\t\t><span dojoAttachPoint=\"titleNode\" class=\"dijitTitlePaneTextNode\"></span>\n\t\t</div>\n\t</div>\n\t<div class=\"dijitTitlePaneContentOuter\" dojoAttachPoint=\"hideNode\" role=\"presentation\">\n\t\t<div class=\"dijitReset\" dojoAttachPoint=\"wipeNode\" role=\"presentation\">\n\t\t\t<div class=\"dijitTitlePaneContentInner\" dojoAttachPoint=\"containerNode\" role=\"region\" id=\"${id}_pane\">\n\t\t\t\t<!-- nested divs because wipeIn()/wipeOut() doesn't work right on node w/padding etc.  Put padding on inner div. -->\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n"),attributeMap:dojo.delegate(dijit.layout.ContentPane.prototype.attributeMap,{title:{node:"titleNode",type:"innerHTML"},tooltip:{node:"focusNode",type:"attribute",attribute:"title"},id:""}),buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.titleNode,false);},postCreate:function(){this.inherited(arguments);if(this.toggleable){this._trackMouseState(this.titleBarNode,"dijitTitlePaneTitle");}var _1569=this.hideNode,_156a=this.wipeNode;this._wipeIn=dojo.fx.wipeIn({node:this.wipeNode,duration:this.duration,beforeBegin:function(){_1569.style.display="";}});this._wipeOut=dojo.fx.wipeOut({node:this.wipeNode,duration:this.duration,onEnd:function(){_1569.style.display="none";}});},_setOpenAttr:function(open,_156b){dojo.forEach([this._wipeIn,this._wipeOut],function(_156c){if(_156c&&_156c.status()=="playing"){_156c.stop();}});if(_156b){var anim=this[open?"_wipeIn":"_wipeOut"];anim.play();}else{this.hideNode.style.display=this.wipeNode.style.display=open?"":"none";}if(this._started){if(open){this._onShow();}else{this.onHide();}}this.arrowNodeInner.innerHTML=open?"-":"+";dijit.setWaiState(this.containerNode,"hidden",open?"false":"true");dijit.setWaiState(this.focusNode,"pressed",open?"true":"false");this._set("open",open);this._setCss();},_setToggleableAttr:function(_156d){dijit.setWaiRole(this.focusNode,_156d?"button":"heading");if(_156d){dijit.setWaiState(this.focusNode,"controls",this.id+"_pane");dojo.attr(this.focusNode,"tabIndex",this.tabIndex);}else{dojo.removeAttr(this.focusNode,"tabIndex");}this._set("toggleable",_156d);this._setCss();},_setContentAttr:function(_156e){if(!this.open||!this._wipeOut||this._wipeOut.status()=="playing"){this.inherited(arguments);}else{if(this._wipeIn&&this._wipeIn.status()=="playing"){this._wipeIn.stop();}dojo.marginBox(this.wipeNode,{h:dojo.marginBox(this.wipeNode).h});this.inherited(arguments);if(this._wipeIn){this._wipeIn.play();}else{this.hideNode.style.display="";}}},toggle:function(){this._setOpenAttr(!this.open,true);},_setCss:function(){var node=this.titleBarNode||this.focusNode;var _156f=this._titleBarClass;this._titleBarClass="dijit"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");dojo.replaceClass(node,this._titleBarClass,_156f||"");this.arrowNodeInner.innerHTML=this.open?"-":"+";},_onTitleKey:function(e){if(e.charOrCode==dojo.keys.ENTER||e.charOrCode==" "){if(this.toggleable){this.toggle();}dojo.stopEvent(e);}else{if(e.charOrCode==dojo.keys.DOWN_ARROW&&this.open){this.containerNode.focus();e.preventDefault();}}},_onTitleClick:function(){if(this.toggleable){this.toggle();}},setTitle:function(title){dojo.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",title);}});}if(!dojo._hasResource["dojox.html._base"]){dojo._hasResource["dojox.html._base"]=true;dojo.provide("dojox.html._base");(function(){if(dojo.isIE){var _1570=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;}var _1571=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g;var _1572=dojox.html._adjustCssPaths=function(_1573,_1574){if(!_1574||!_1573){return;}if(_1570){_1574=_1574.replace(_1570,function(_1575,pre,delim,url,post){return pre+(new dojo._Url(_1573,"./"+url).toString())+post;});}return _1574.replace(_1571,function(_1576,_1577,_1578,_1579,_157a,media){if(_1578){return "@import \""+(new dojo._Url(_1573,"./"+_1578).toString())+"\""+media;}else{return "url("+(new dojo._Url(_1573,"./"+_157a).toString())+")"+media;}});};var _157b=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi;var _157c=dojox.html._adjustHtmlPaths=function(_157d,cont){var url=_157d||"./";return cont.replace(_157b,function(tag,start,name,delim,_157e,_157f,_1580,end){return start+(name?(name+"="+delim+(new dojo._Url(url,_157e).toString())+delim):("style="+_157f+_1572(url,_1580)+_157f))+end;});};var _1581=dojox.html._snarfStyles=function(_1582,cont,_1583){_1583.attributes=[];return cont.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(_1584,_1585,_1586,_1587,delim,href){var i,attr=(_1585||_1587||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");if(_1586){i=_1583.push(_1582?_1572(_1582,_1586):_1586);}else{i=_1583.push("@import \""+href+"\";");attr=attr.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,"");}if(attr){attr=attr.split(/\s+/);var atObj={},tmp;for(var j=0,e=attr.length;j<e;j++){tmp=attr[j].split("=");atObj[tmp[0]]=tmp[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");}_1583.attributes[i-1]=atObj;}return "";});};var _1588=dojox.html._snarfScripts=function(cont,byRef){byRef.code="";cont=cont.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(_1589){return _1589.replace(/<(\/?)script\b/ig,"&lt;$1Script");});function _158a(src){if(byRef.downloadRemote){src=src.replace(/&([a-z0-9#]+);/g,function(m,name){switch(name){case "amp":return "&";case "gt":return ">";case "lt":return "<";default:return name.charAt(0)=="#"?String.fromCharCode(name.substring(1)):"&"+name+";";}});dojo.xhrGet({url:src,sync:true,load:function(code){byRef.code+=code+";";},error:byRef.errBack});}};return cont.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))(?:[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?)*>([\s\S]*?)<\/script>/gi,function(_158b,delim,src,code){if(src){_158a(src);}else{byRef.code+=code;}return "";});};var _158c=dojox.html.evalInGlobal=function(code,_158d){_158d=_158d||dojo.doc.body;var n=_158d.ownerDocument.createElement("script");n.type="text/javascript";_158d.appendChild(n);n.text=code;};dojo.declare("dojox.html._ContentSetter",[dojo.html._ContentSetter],{adjustPaths:false,referencePath:".",renderStyles:false,executeScripts:false,scriptHasHooks:false,scriptHookReplacement:null,_renderStyles:function(_158e){this._styleNodes=[];var st,att,_158f,doc=this.node.ownerDocument;var head=doc.getElementsByTagName("head")[0];for(var i=0,e=_158e.length;i<e;i++){_158f=_158e[i];att=_158e.attributes[i];st=doc.createElement("style");st.setAttribute("type","text/css");for(var x in att){st.setAttribute(x,att[x]);}this._styleNodes.push(st);head.appendChild(st);if(st.styleSheet){st.styleSheet.cssText=_158f;}else{st.appendChild(doc.createTextNode(_158f));}}},empty:function(){this.inherited("empty",arguments);this._styles=[];},onBegin:function(){this.inherited("onBegin",arguments);var cont=this.content,node=this.node;var _1590=this._styles;if(dojo.isString(cont)){if(this.adjustPaths&&this.referencePath){cont=_157c(this.referencePath,cont);}if(this.renderStyles||this.cleanContent){cont=_1581(this.referencePath,cont,_1590);}if(this.executeScripts){var _1591=this;var byRef={downloadRemote:true,errBack:function(e){_1591._onError.call(_1591,"Exec","Error downloading remote script in \""+_1591.id+"\"",e);}};cont=_1588(cont,byRef);this._code=byRef.code;}}this.content=cont;},onEnd:function(){var code=this._code,_1592=this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop());}}if(this.renderStyles&&_1592&&_1592.length){this._renderStyles(_1592);}if(this.executeScripts&&code){if(this.cleanContent){code=code.replace(/(<!--|(?:\/\/)?-->|<!\[CDATA\[|\]\]>)/g,"");}if(this.scriptHasHooks){code=code.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement);}try{_158c(code,this.node);}catch(e){this._onError("Exec","Error eval script in "+this.id+", "+e.message,e);}}this.inherited("onEnd",arguments);},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop());}}delete this._styleNodes;dojo.mixin(this,dojo.getObject(this.declaredClass).prototype);}});dojox.html.set=function(node,cont,_1593){if(!_1593){return dojo.html._setNodeContent(node,cont,true);}else{var op=new dojox.html._ContentSetter(dojo.mixin(_1593,{content:cont,node:node}));return op.set();}};})();}if(!dojo._hasResource["dojox.layout.ContentPane"]){dojo._hasResource["dojox.layout.ContentPane"]=true;dojo.provide("dojox.layout.ContentPane");dojo.declare("dojox.layout.ContentPane",dijit.layout.ContentPane,{adjustPaths:false,cleanContent:false,renderStyles:false,executeScripts:true,scriptHasHooks:false,constructor:function(){this.ioArgs={};this.ioMethod=dojo.xhrGet;},onExecError:function(e){},_setContent:function(cont){var _1594=this._contentSetter;if(!(_1594&&_1594 instanceof dojox.html._ContentSetter)){_1594=this._contentSetter=new dojox.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(e){var _1595=this.onContentError(e);try{this.containerNode.innerHTML=_1595;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+this.id+"')"};this.inherited("_setContent",arguments);}});}if(!dojo._hasResource["dojox.layout.ResizeHandle"]){dojo._hasResource["dojox.layout.ResizeHandle"]=true;dojo.provide("dojox.layout.ResizeHandle");dojo.experimental("dojox.layout.ResizeHandle");dojo.declare("dojox.layout.ResizeHandle",[dijit._Widget,dijit._Templated],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:false,activeResizeClass:"dojoxResizeHandleClone",animateSizing:true,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:false,maxHeight:0,maxWidth:0,fixedAspect:false,intermediateChanges:false,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:"<div dojoAttachPoint=\"resizeHandle\" class=\"dojoxResizeHandle\"><div></div></div>",postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(!this.activeResize){this._resizeHelper=dijit.byId("dojoxGlobalResizeHelper");if(!this._resizeHelper){this._resizeHelper=new dojox.layout._ResizeHelper({id:"dojoxGlobalResizeHelper"}).placeAt(dojo.body());dojo.addClass(this._resizeHelper.domNode,this.activeResizeClass);}}else{this.animateSizing=false;}if(!this.minSize){this.minSize={w:this.minWidth,h:this.minHeight};}if(this.constrainMax){this.maxSize={w:this.maxWidth,h:this.maxHeight};}this._resizeX=this._resizeY=false;var _1596=dojo.partial(dojo.addClass,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=true;_1596("dojoxResizeNW");break;case "x":this._resizeX=true;_1596("dojoxResizeW");break;case "y":this._resizeY=true;_1596("dojoxResizeN");break;}},_beginSizing:function(e){if(this._isSizing){return false;}dojo.publish(this.startTopic,[this]);this.targetWidget=dijit.byId(this.targetId);this.targetDomNode=this.targetWidget?this.targetWidget.domNode:dojo.byId(this.targetId);if(this.targetContainer){this.targetDomNode=this.targetContainer;}if(!this.targetDomNode){return false;}if(!this.activeResize){var c=dojo.position(this.targetDomNode,true);this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();}this._isSizing=true;this.startPoint={x:e.clientX,y:e.clientY};var mb=this.targetWidget?dojo.marginBox(this.targetDomNode):dojo.contentBox(this.targetDomNode);this.startSize={w:mb.w,h:mb.h};if(this.fixedAspect){var max,val;if(mb.w>mb.h){max="w";val=mb.w/mb.h;}else{max="h";val=mb.h/mb.w;}this._aspect={prop:max};this._aspect[max]=val;}this._pconnects=[];this._pconnects.push(dojo.connect(dojo.doc,"onmousemove",this,"_updateSizing"));this._pconnects.push(dojo.connect(dojo.doc,"onmouseup",this,"_endSizing"));dojo.stopEvent(e);},_updateSizing:function(e){if(this.activeResize){this._changeSizing(e);}else{var tmp=this._getNewCoords(e);if(tmp===false){return;}this._resizeHelper.resize(tmp);}e.preventDefault();},_getNewCoords:function(e){try{if(!e.clientX||!e.clientY){return false;}}catch(e){return false;}this._activeResizeLastEvent=e;var dx=(this.isLeftToRight()?this.startPoint.x-e.clientX:e.clientX-this.startPoint.x),dy=this.startPoint.y-e.clientY,newW=this.startSize.w-(this._resizeX?dx:0),newH=this.startSize.h-(this._resizeY?dy:0);return this._checkConstraints(newW,newH);},_checkConstraints:function(newW,newH){if(this.minSize){var tm=this.minSize;if(newW<tm.w){newW=tm.w;}if(newH<tm.h){newH=tm.h;}}if(this.constrainMax&&this.maxSize){var ms=this.maxSize;if(newW>ms.w){newW=ms.w;}if(newH>ms.h){newH=ms.h;}}if(this.fixedAspect){var ta=this._aspect[this._aspect.prop];if(newW<newH){newH=newW*ta;}else{if(newH<newW){newW=newH*ta;}}}return {w:newW,h:newH};},_changeSizing:function(e){var tmp=this._getNewCoords(e);if(tmp===false){return;}if(this.targetWidget&&dojo.isFunction(this.targetWidget.resize)){this.targetWidget.resize(tmp);}else{if(this.animateSizing){var anim=dojo.fx[this.animateMethod]([dojo.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:tmp.w}},duration:this.animateDuration}),dojo.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:tmp.h}},duration:this.animateDuration})]);anim.play();}else{dojo.style(this.targetDomNode,{width:tmp.w+"px",height:tmp.h+"px"});}}if(this.intermediateChanges){this.onResize(e);}},_endSizing:function(e){dojo.forEach(this._pconnects,dojo.disconnect);var pub=dojo.partial(dojo.publish,this.endTopic,[this]);if(!this.activeResize){this._resizeHelper.hide();this._changeSizing(e);setTimeout(pub,this.animateDuration+15);}else{pub();}this._isSizing=false;this.onResize(e);},onResize:function(e){}});dojo.declare("dojox.layout._ResizeHelper",dijit._Widget,{show:function(){dojo.fadeIn({node:this.domNode,duration:120,beforeBegin:function(n){dojo.style(n,"display","");}}).play();},hide:function(){dojo.fadeOut({node:this.domNode,duration:250,onEnd:function(n){dojo.style(n,"display","none");}}).play();},resize:function(dim){dojo.marginBox(this.domNode,dim);}});}if(!dojo._hasResource["dojox.layout.FloatingPane"]){dojo._hasResource["dojox.layout.FloatingPane"]=true;dojo.provide("dojox.layout.FloatingPane");dojo.experimental("dojox.layout.FloatingPane");dojo.declare("dojox.layout.FloatingPane",[dojox.layout.ContentPane,dijit._Templated],{closable:true,dockable:true,resizable:false,maxable:false,resizeAxis:"xy",title:"",dockTo:"",duration:400,contentClass:"dojoxFloatingPaneContent",_showAnim:null,_hideAnim:null,_dockNode:null,_restoreState:{},_allFPs:[],_startZ:100,templateString:dojo.cache("dojox.layout","resources/FloatingPane.html","<div class=\"dojoxFloatingPane\" id=\"${id}\">\n\t<div tabindex=\"0\" role=\"button\" class=\"dojoxFloatingPaneTitle\" dojoAttachPoint=\"focusNode\">\n\t\t<span dojoAttachPoint=\"closeNode\" dojoAttachEvent=\"onclick: close\" class=\"dojoxFloatingCloseIcon\"></span>\n\t\t<span dojoAttachPoint=\"maxNode\" dojoAttachEvent=\"onclick: maximize\" class=\"dojoxFloatingMaximizeIcon\">&thinsp;</span>\n\t\t<span dojoAttachPoint=\"restoreNode\" dojoAttachEvent=\"onclick: _restore\" class=\"dojoxFloatingRestoreIcon\">&thinsp;</span>\t\n\t\t<span dojoAttachPoint=\"dockNode\" dojoAttachEvent=\"onclick: minimize\" class=\"dojoxFloatingMinimizeIcon\">&thinsp;</span>\n\t\t<span dojoAttachPoint=\"titleNode\" class=\"dijitInline dijitTitleNode\"></span>\n\t</div>\n\t<div dojoAttachPoint=\"canvas\" class=\"dojoxFloatingPaneCanvas\">\n\t\t<div dojoAttachPoint=\"containerNode\" role=\"region\" tabindex=\"-1\" class=\"${contentClass}\">\n\t\t</div>\n\t\t<span dojoAttachPoint=\"resizeHandle\" class=\"dojoxFloatingResizeHandle\"></span>\n\t</div>\n</div>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:{type:"innerHTML",node:"titleNode"}}),postCreate:function(){this.inherited(arguments);new dojo.dnd.Moveable(this.domNode,{handle:this.focusNode});if(!this.dockable){this.dockNode.style.display="none";}if(!this.closable){this.closeNode.style.display="none";}if(!this.maxable){this.maxNode.style.display="none";this.restoreNode.style.display="none";}if(!this.resizable){this.resizeHandle.style.display="none";}else{this.domNode.style.width=dojo.marginBox(this.domNode).w+"px";}this._allFPs.push(this);this.domNode.style.position="absolute";this.bgIframe=new dijit.BackgroundIframe(this.domNode);this._naturalState=dojo.coords(this.domNode);},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.resizable){if(dojo.isIE){this.canvas.style.overflow="auto";}else{this.containerNode.style.overflow="auto";}this._resizeHandle=new dojox.layout.ResizeHandle({targetId:this.id,resizeAxis:this.resizeAxis},this.resizeHandle);}if(this.dockable){var _1597=this.dockTo;if(this.dockTo){this.dockTo=dijit.byId(this.dockTo);}else{this.dockTo=dijit.byId("dojoxGlobalFloatingDock");}if(!this.dockTo){var tmpId,_1598;if(_1597){tmpId=_1597;_1598=dojo.byId(_1597);}else{_1598=dojo.create("div",null,dojo.body());dojo.addClass(_1598,"dojoxFloatingDockDefault");tmpId="dojoxGlobalFloatingDock";}this.dockTo=new dojox.layout.Dock({id:tmpId,autoPosition:"south"},_1598);this.dockTo.startup();}if((this.domNode.style.display=="none")||(this.domNode.style.visibility=="hidden")){this.minimize();}}this.connect(this.focusNode,"onmousedown","bringToTop");this.connect(this.domNode,"onmousedown","bringToTop");this.resize(dojo.coords(this.domNode));this._started=true;},setTitle:function(title){dojo.deprecated("pane.setTitle","Use pane.set('title', someTitle)","2.0");this.set("title",title);},close:function(){if(!this.closable){return;}dojo.unsubscribe(this._listener);this.hide(dojo.hitch(this,function(){this.destroyRecursive();}));},hide:function(_1599){dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,function(){this.domNode.style.display="none";this.domNode.style.visibility="hidden";if(this.dockTo&&this.dockable){this.dockTo._positionDock(null);}if(_1599){_1599();}})}).play();},show:function(_159a){var anim=dojo.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:dojo.hitch(this,function(){this.domNode.style.display="";this.domNode.style.visibility="visible";if(this.dockTo&&this.dockable){this.dockTo._positionDock(null);}if(typeof _159a=="function"){_159a();}this._isDocked=false;if(this._dockNode){this._dockNode.destroy();this._dockNode=null;}})}).play();this.resize(dojo.coords(this.domNode));this._onShow();},minimize:function(){if(!this._isDocked){this.hide(dojo.hitch(this,"_dock"));}},maximize:function(){if(this._maximized){return;}this._naturalState=dojo.position(this.domNode);if(this._isDocked){this.show();setTimeout(dojo.hitch(this,"maximize"),this.duration);}dojo.addClass(this.focusNode,"floatingPaneMaximized");this.resize(dojo.window.getBox());this._maximized=true;},_restore:function(){if(this._maximized){this.resize(this._naturalState);dojo.removeClass(this.focusNode,"floatingPaneMaximized");this._maximized=false;}},_dock:function(){if(!this._isDocked&&this.dockable){this._dockNode=this.dockTo.addNode(this);this._isDocked=true;}},resize:function(dim){dim=dim||this._naturalState;this._currentState=dim;var dns=this.domNode.style;if("t" in dim){dns.top=dim.t+"px";}if("l" in dim){dns.left=dim.l+"px";}dns.width=dim.w+"px";dns.height=dim.h+"px";var _159b={l:0,t:0,w:dim.w,h:(dim.h-this.focusNode.offsetHeight)};dojo.marginBox(this.canvas,_159b);this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){this._singleChild.resize(_159b);}},bringToTop:function(){var _159c=dojo.filter(this._allFPs,function(i){return i!==this;},this);_159c.sort(function(a,b){return a.domNode.style.zIndex-b.domNode.style.zIndex;});_159c.push(this);dojo.forEach(_159c,function(w,x){w.domNode.style.zIndex=this._startZ+(x*2);dojo.removeClass(w.domNode,"dojoxFloatingPaneFg");},this);dojo.addClass(this.domNode,"dojoxFloatingPaneFg");},destroy:function(){this._allFPs.splice(dojo.indexOf(this._allFPs,this),1);if(this._resizeHandle){this._resizeHandle.destroy();}this.inherited(arguments);}});dojo.declare("dojox.layout.Dock",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dojoxDock\"><ul dojoAttachPoint=\"containerNode\" class=\"dojoxDockList\"></ul></div>",_docked:[],_inPositioning:false,autoPosition:false,addNode:function(_159d){var div=dojo.create("li",null,this.containerNode),node=new dojox.layout._DockNode({title:_159d.title,paneRef:_159d},div);node.startup();return node;},startup:function(){if(this.id=="dojoxGlobalFloatingDock"||this.isFixedDock){this.connect(window,"onresize","_positionDock");this.connect(window,"onscroll","_positionDock");if(dojo.isIE){this.connect(this.domNode,"onresize","_positionDock");}}this._positionDock(null);this.inherited(arguments);},_positionDock:function(e){if(!this._inPositioning){if(this.autoPosition=="south"){setTimeout(dojo.hitch(this,function(){this._inPositiononing=true;var _159e=dojo.window.getBox();var s=this.domNode.style;s.left=_159e.l+"px";s.width=(_159e.w-2)+"px";s.top=(_159e.h+_159e.t)-this.domNode.offsetHeight+"px";this._inPositioning=false;}),125);}}}});dojo.declare("dojox.layout._DockNode",[dijit._Widget,dijit._Templated],{title:"",paneRef:null,templateString:"<li dojoAttachEvent=\"onclick: restore\" class=\"dojoxDockNode\">"+"<span dojoAttachPoint=\"restoreNode\" class=\"dojoxDockRestoreButton\" dojoAttachEvent=\"onclick: restore\"></span>"+"<span class=\"dojoxDockTitleNode\" dojoAttachPoint=\"titleNode\">${title}</span>"+"</li>",restore:function(){this.paneRef.show();this.paneRef.bringToTop();this.destroy();}});}if(!dojo._hasResource["misys.layout.FloatingPane"]){dojo._hasResource["misys.layout.FloatingPane"]=true;dojo.provide("misys.layout.FloatingPane");dojo.experimental("misys.layout.FloatingPane");dojo.declare("misys.layout.FloatingPane",[dojox.layout.FloatingPane],{templateString:dojo.cache("misys.layout","resources/CollaborationFloatingPane.html","<div class=\"dojoxFloatingPane\" id=\"${id}\" dojoAttachPoint=\"floatingWindow\">\n <div tabindex=\"0\" waiRole=\"button\" class=\"dojoxFloatingPaneTitle\" dojoAttachPoint=\"titleBarNode,focusNode\">\n  <span dojoAttachPoint=\"pinNode\" dojoAttachEvent=\"onclick: pin\" class=\"pinButton\"></span>\n  <img src=\"${_blankGif}\" dojoAttachEvent=\"onclick:toggle\" alt=\"\" dojoAttachPoint=\"arrowNode\" class=\"dijitArrowNode\" waiRole=\"presentation\">\n  <span dojoAttachPoint=\"arrowNodeInner\" dojoAttachEvent=\"onclick:toggle\" class=\"dijitArrowNodeInner\"></span>\n  <span dojoAttachPoint=\"titleNode\" dojoAttachEvent=\"onclick:toggle\" class=\"dijitInline dijitTitleNode\"></span>\n </div>\n <div dojoAttachPoint=\"canvas,collabContentNode\" class=\"dojoxFloatingPaneCanvas\" id=\"collaborationWindowContent\">\n  <div dojoAttachPoint=\"containerNode\" waiRole=\"region\" tabindex=\"-1\" class=\"${contentClass}\"></div>\n  <span dojoAttachPoint=\"resizeHandle\" class=\"dojoxFloatingResizeHandle\"></span>\n </div>\n <!-- These are needed by the inherited class, but we don't use them -->\n <span style=\"display:none\">\n  <span dojoAttachPoint=\"closeNode\" class=\"dojoxFloatingCloseIcon\"></span>\n  <span dojoAttachPoint=\"maxNode\" class=\"dojoxFloatingMaximizeIcon\"></span>\n  <span dojoAttachPoint=\"restoreNode\" class=\"dojoxFloatingRestoreIcon\"></span>    \n  <span dojoAttachPoint=\"dockNode\" class=\"dojoxFloatingMinimizeIcon\"></span>\n </span>\n</div>\n"),open:false,pinned:true,_pinnedReference:null,_windowHeight:null,duration:dijit.defaultDuration,_blankGif:misys.getContextualURL("/content/js/dojo/resources/blank.gif"),postCreate:function(){this.inherited(arguments);this.moveable=new dojo.dnd.move.parentConstrainedMoveable(this.domNode,{handle:this.focusNode,constraints:{l:0,t:20,w:window.innerWidth,h:window.innerHeight},within:true});var _159f=this.collabContentNode,_15a0=this.floatingWindow;if(this.open){_159f.style.height="auto";_15a0.style.height="auto";dojo.style(this.domNode,"height","auto");}else{_159f.style.display="none";dojo.style(this.domNode,"height","30px");}this._setCss();dojo.setSelectable(this.titleNode,false);dijit.setWaiState(this.containerNode,"labelledby",this.titleNode.id);dijit.setWaiState(this.focusNode,"haspopup","true");this._showPanes=function(){_159f.style.height="auto";_15a0.style.height="auto";};this._hidePanes=function(){this._windowHeight=dojo.style("collaborationWindowContent","height");_15a0.style.height="auto";_159f.style.height="0";};if(!dojo.isIE||dojo.isIE>6){this._fadeOut=dojo.fadeOut({node:_159f,duration:this.duration,onEnd:function(){_159f.style.display="none";}});}else{this._fadeOut=function(){_159f.style.display="none";};}if(!dojo.isIE||dojo.isIE>6){this._fadeIn=dojo.fadeIn({node:_159f,duration:this.duration,beforeBegin:function(){_159f.style.display="inherit";}});}else{this._fadeIn=function(){_159f.style.display="block";};}this.pin();},toggle:function(){var _15a1=this[this.open?"_fadeOut":"_fadeIn"];var _15a2=this[this.open?"_hidePanes":"_showPanes"];if(_15a1&&_15a2){_15a2();if(_15a1.play){_15a1.play();}else{_15a1();}}else{this.collabContentNode.style.display=this.open?"":"none";}this.open=!(this.open);this._onShow();this._setCss();},pin:function(){if(!this.pinned){this.pinNode.style.background="url('"+misys.getContextualURL("/content/images/pic_pinup.gif")+"')";this._pinnedReference=dojo.connect(window,"onscroll",this,"_positionWindow");misys.connections.push(this._pinnedReference);}else{this.pinNode.style.background="url('"+misys.getContextualURL("/content/images/pic_pindown.gif")+"')";if(this._pinnedReference){dojo.disconnect(this._pinnedReference);}}this.pinned=!this.pinned;},resize:function(dim){dim=dim||this._naturalState;this._currentState=dim;var dns=this.domNode.style;var c=dojo.coords(this.domNode);if("t" in dim){dns.top=c.t+"px";}if("l" in dim){dns.left=c.l+"px";}dns.width=dim.w+"px";dns.height=(this.open)?dim.h+"px":"auto";var _15a3=(this.open)?(dim.h-this.focusNode.offsetHeight):0;var _15a4={l:0,t:0,w:dim.w,h:_15a3};dojo.marginBox(this.canvas,_15a4);this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){this._singleChild.resize(_15a4);}},bringToTop:function(){return;},_config:{timer:null,heightOffset:null},_positionWindow:function(){if(this._config.timer){clearTimeout(this.timer);}if(!this._config.heightOffset){var _15a5=dojo.query(".header");this._config.heightOffset=(_15a5.length===1)?dojo.coords(_15a5[0]).h:0;}var _15a6=dijit.getViewport(),_15a7=this.domNode;this.timer=setTimeout(dojo.hitch(this,function(){dojo.fx.slideTo({node:_15a7,top:_15a6.t+(_15a7.offsetHeight/2)+this._config.heightOffset,right:_15a7.style.right,left:_15a7.style.left,unit:"px"}).play();}),300);},_setCss:function(){var _15a8=["dijitClosed","dijitOpen"];var _15a9=this.open;var node=this.titleBarNode||this.focusNode;dojo.removeClass(node,_15a8[!_15a9+0]);node.className+=" "+_15a8[_15a9+0];this.arrowNodeInner.innerHTML=this.open?"-":"+";}});}if(!dojo._hasResource["misys.widget.Collaboration"]){dojo._hasResource["misys.widget.Collaboration"]=true;dojo.provide("misys.widget.Collaboration");(function(d,dj,m){function _15aa(type){var _15ab,id;do{m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetTaskId"),sync:true,load:function(_15ac,args){id=_15ac;},error:function(_15ad){throw {name:"CollaborationError",message:"An error occurred when retrieving a Collaboration "+"task ID "+_15ad};}});if(id==="false"||id===_15ab){throw {name:"CollaborationError",message:"An error occurred when retrieving a Collaboration "+"task ID "+response};}_15ab=id;}while(d.byId(type+"_row_"+id));return id;};function _15ae(type,id,_15af,_15b0){var _15b1=dj.byId("public_task_details_assignee_type_nosend_1"),_15b2=dj.byId("public_task_details_assignee_type_nosend_2"),_15b3=dj.byId("public_task_details_assignee_type_nosend_3"),_15b4=dj.byId("public_task_details_assignee_type_nosend_4"),xml;_15af=_15af?_15af:"N";type=type.toLowerCase();var tnxId=dj.byId("tnx_id"),refId=dj.byId("ref_id"),_15b5=dj.byId("old_inp_dttm"),_15b6=dj.byId("todo_list_id").get("value"),_15b7=[dj.byId("sentence_posted_by").get("value")," ",dj.byId("sentence_you").get("value")," "],_15b8="01",_15b9=d.byId(type+"_master_list"),_15ba,_15bb,li,text;if(!tnxId||!refId||!_15b5){m.dialog.show("ERROR",m.getLocalization("generalCollaborationError"));return false;}switch(type){case "private_tasks":_15ba=_15bc(id);_15bb=dj.byId("private_description_nosend").get("value");break;case "public_tasks":_15ba=_15bd(id);_15b8="02";if(dj.byId("public_task_details_type_nosend_3").get("checked")){_15b8="03";}_15bb=dj.byId("public_task_details_description_nosend").get("value");break;default:_15ba=_15be(id);_15b8="03";_15b7.push(dj.byId("sentence_to").get("value")," ");_15b7.push(dj.byId("notification_task_details_other_user_assignee_login_id_nosend").get("value")," ");_15bb=dj.byId("notification_description_nosend").get("value");break;}var _15bf;if(d.byId(id+"_container")){_15bf=d.byId(id+"_container");}else{_15bf=d.create("div",{id:id+"_container"});}_15ba.push({name:"task_id",id:"task_id_"+id,value:id},{name:"tnx_id",id:"tnx_id_"+id,value:tnxId.get("value")},{name:"ref_id",id:"ref_id_"+id,value:refId.get("value")},{name:"todo_list_id",id:"todo_list_id_"+id,value:_15b6},{name:"old_inp_dttm",id:"old_inp_dttm_"+id,value:_15b5.get("value")},{name:"postSave",id:"postSave_"+id,value:_15af});if(_15b0){d.forEach(_15ba,function(_15c0){if(dj.byId(_15c0.id||_15c0.name)){dj.byId(_15c0.id||_15c0.name).destroy();}});}d.forEach(_15ba,function(_15c1){new dj.form.TextBox({id:_15c1.id||_15c1.name,name:_15c1.name,readOnly:true,value:_15c1.value,type:"hidden"}).placeAt(_15bf);});dojo.place(_15bf,dojo.byId(type+"_form"));xml=m.formToXML({selector:"#"+type+"_form",xmlRoot:type,ignoreDisabled:true});m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/SaveTask"),content:{xml_string:xml}});if(_15b8==="03"){_15b7.push(dj.byId("sentence_to").get("value")," ");if(_15b1&&_15b1.get("checked")){_15b7.push(dj.byId("public_task_details_other_user_assignee_login_id_nosend").get("value")," ");}else{if(_15b2&&_15b2.get("checked")){_15b7.push(dj.byId("public_task_details_bank_assignee_name_nosend").get("value")," ");_15b7.push(dj.byId("public_task_details_bank_assignee_abbv_name_nosend").get("value")," ");}else{if(_15b3&&_15b3.get("checked")){_15b7.push(dj.byId("public_task_details_counterparty_assignee_name_nosend").get("value")," ");_15b7.push(dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend").get("value")," ");}else{if(_15b4&&_15b4.get("checked")){_15b7.push(dj.byId("public_details_bank_other_user_assignee_first_name_nosend").get("value")," ");_15b7.push(dj.byId("public_details_bank_other_user_assignee_last_name_nosend").get("value")," ");}}}}}if(d.style(_15b9,"display")==="none"||d.style(_15b9,"opacity")===0){d.style(_15b9,"opacity",0);m.animate("fadeIn",_15b9);}text=["<label for='",type,"_dismiss_",id,"' id='",type,"_dismiss_",id,"_label'>","<span id='",type,"_desc_",id,"'>",m.grid.sanitizeHTMLDataForUI(_15bb),"</span></label>","<span class='taskInfo'>",_15b7.join(""),"</span>","<span class='commentInfo' id='","task_edit_",id,"'>"," | ","<a href=\"javascript:void(0)\" onClick=\"misys.openTaskForUpdate(",id,")\">",m.getLocalization("Edit"),"</a></span>","<span class='commentInfo'>"," | ","<a href=\"javascript:void(0)\" onClick=\"misys.openCollaborationComment('",type,"',",id,")\">",m.getLocalization("comments")," (<span id=\"",type,"_comment_count_",id,"\">0</span>)</a></span>"];if(!_15b0){li=d.create("li",{id:type+"_item_"+id,style:"display:none;opacity:0",innerHTML:text.join("")},_15b9);}else{dj.byId(type+"_dismiss_"+id).destroy();li=d.byId(type+"_item_"+id);li.innerHTML=text.join("");}new dj.form.CheckBox({id:type+"_dismiss_"+id,name:type+"_dismiss_"+id,onClick:function(){m.finishCollaborationTask(this,type,id);}}).placeAt(type+"_dismiss_"+id+"_label","first");if(!_15b0){var ol=d.create("ol",{id:type+"_comments_"+id,style:"display:none"},type+"_comment_fields","first");d.addClass(ol,"comment-list");}m.animate("fadeIn",li,function(){d.style(d.byId(type+"_notice"),"display","none");});d.forEach(dijit.findWidgets(_15bf),function(w){if(w){w.destroyRecursive();}});return true;};function _15c2(){var _15c3=dj.byId("entity");if(_15c3&&!_15c3.get("value")){m.dialog.show("ERROR",m.getLocalization("mandatoryEntityMessage"));return false;}return true;};function _15c4(){var _15c5=dj.byId("public_task_details_assignee_type_nosend_1"),_15c6=dj.byId("public_task_details_assignee_type_nosend_2"),_15c7=dj.byId("public_task_details_assignee_type_nosend_3"),_15c8=dj.byId("public_task_details_type_nosend_3"),_15c9=(_15c8)?_15c8.get("checked"):false,_15ca=d.byId("assigneeTypeFields");m.toggleFields(_15c9,["public_task_details_assignee_type_nosend_1","public_task_details_assignee_type_nosend_2","public_task_details_assignee_type_nosend_3","public_task_details_assignee_type_nosend_4"]);if(_15c9){var _15cb=[{id:"public_task_details_assignee_type_nosend_1",description:"user_to_user"},{id:"public_task_details_assignee_type_nosend_2",description:"user_to_bank"},{id:"public_task_details_assignee_type_nosend_3",description:"counterparty"},{id:"public_task_details_assignee_type_nosend_4",description:"bank"}];m.preDisplayAssigneeType=m.preDisplayAssigneeType||function(){return true;};m.preDisplayAssigneeType(_15cb);}if(_15c9){m.animate("fadeIn",_15ca,function(){_15f1();_15cc();_15c2();},false,{duration:20});}else{m.animate("fadeOut",_15ca,function(){if(_15c5){_15c5.set("checked",false);}if(_15c6){_15c6.set("checked",false);}if(_15c7){_15c7.set("checked",false);}_15cc();},false,{duration:20});}};function _15cc(){var _15cd=dj.byId("public_task_details_assignee_type_nosend_1")?dj.byId("public_task_details_assignee_type_nosend_1").get("checked"):false,_15ce=dj.byId("public_task_details_assignee_type_nosend_2")?dj.byId("public_task_details_assignee_type_nosend_2").get("checked"):false,_15cf=dj.byId("public_task_details_assignee_type_nosend_3")?dj.byId("public_task_details_assignee_type_nosend_3").get("checked"):false,_15d0=dj.byId("public_task_details_assignee_type_nosend_4")?dj.byId("public_task_details_assignee_type_nosend_4").get("checked"):false,_15d1=d.byId("notifyBankFields"),_15d2=d.byId("notifyUserFields"),_15d3=d.byId("notifyCounterpartyFields"),_15d4=d.byId("bankAssigneeTasks");m.toggleFields(_15cd,null,["public_task_details_other_user_assignee_login_id_nosend"]);m.toggleFields(_15ce,null,["public_task_details_bank_assignee_name_nosend"],true,true);m.toggleFields(_15cf,null,["public_task_details_counterparty_assignee_name_nosend"],true,true);m.toggleFields(_15d0,null,["public_task_details_bank_other_user_assignee_login_id_nosend","public_task_details_bank_other_user_assignee_email_nosend"],true,true);dj.byId("public_task_details_other_user_assignee_login_id_nosend").set("readonly",true);dj.byId("public_task_details_other_user_assignee_login_id_nosend").set("disabled",true);m.animate("fadeOut",[_15d1,_15d2,_15d3],function(){if(_15cd){m.animate("fadeIn",_15d2);}else{if(_15ce){m.animate("fadeIn",_15d1,function(){var _15d5=dj.byId("public_task_details_assignee_type_nosend_2").get("checked");if(_15d5){dj.byId("public_task_details_bank_assignee_name_nosend").set("readonly",true);dj.byId("public_task_details_bank_assignee_name_nosend").set("disabled",true);}},false,{duration:1});}else{if(_15cf){m.animate("fadeIn",_15d3);var _15d6=dj.byId("access_opened"),_15d7=dj.byId("public_task_details_counterparty_assignee_name_nosend"),_15d8=dj.byId("product_code").get("value"),_15d9=null,_15da=dj.byId("counterparty_email_id_hidden"),_15db=dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend");if(_15d8&&(_15d8==="IP"||_15d8==="CR")){_15d9=dj.byId("seller_name")?dj.byId("seller_name"):dj.byId("seller_abbv_name");}else{if(_15d8&&(_15d8==="IN"||_15d8==="CN")){_15d9=dj.byId("buyer_name")?dj.byId("buyer_name"):dj.byId("buyer_abbv_name");}}if(_15d6&&_15d9){if(_15d9.get("value")!==""){if(_15d6.get("value")==="Y"){_15d7.set("value",_15d9.get("value"));_15da.set("value",dj.byId("transaction_counterparty_email").get("value"));_15db.set("value",dj.byId("ben_company_abbv_name").get("value"));}else{_15d7.set("value","");_15db.set("value","");m.dialog.show("ERROR",m.getLocalization("errorCounterpartyCollaborationNotEnabled"));m.animate("fadeOut",_15d3);}}else{_15d7.set("value","");_15db.set("value","");m.dialog.show("ERROR",m.getLocalization("errorSelectCounterpartyCollaboration"));m.animate("fadeOut",_15d3);}}}else{if(_15d0){m.animate("fadeIn",_15d4);}}}}_15dc();_15dd();},false,{duration:20});};function _15de(){var _15df=[{name:"public_task_details_description_nosend",value:""}];if(dj.byId("public_task_details_email_notification_nosend").get("checked")){_15df.push({name:"public_task_details_email_nosend",value:""});}if(dj.byId("public_task_details_assignee_type_nosend_1").get("checked")){_15df.push({name:"public_task_details_other_user_assignee_login_id_nosend",value:""});}if(dj.byId("public_task_details_assignee_type_nosend_2")&&dj.byId("public_task_details_assignee_type_nosend_2").get("checked")){_15df.push({name:"public_task_details_bank_assignee_name_nosend",value:""});}if(dj.byId("public_task_details_assignee_type_nosend_3")&&dj.byId("public_task_details_assignee_type_nosend_3").get("checked")){_15df.push({name:"public_task_details_counterparty_assignee_name_nosend",value:""});if(dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").get("checked")){_15df.push({name:"public_task_details_counterparty_assignee_email_nosend",value:""});}}if(dj.byId("public_task_details_assignee_type_nosend_4")&&dj.byId("public_task_details_assignee_type_nosend_4").get("checked")){_15df.push({name:"public_task_details_bank_other_user_assignee_login_id_nosend",value:""});if(dj.byId("public_task_details_bank_other_user_assignee_email_notification_nosend").get("checked")){_15df.push({name:"public_task_details_bank_other_user_assignee_email_nosend",value:""});}}return _15df;};function _15e0(){var _15e1=[{name:"notification_task_details_other_user_assignee_login_id_nosend",value:""},{name:"notification_description_nosend",value:""}];if(dj.byId("notification_task_details_email_notification_nosend").get("checked")){_15e1.push({name:"notification_task_details_email_nosend",value:""});}return _15e1;};function _15e2(){return [{name:"private_description_nosend",value:""}];};function _15bd(id){var _15e3="N",_15e4="02",_15e5="N",_15e6="N",_15e7="N",_15e8;if(dj.byId("public_task_details_email_notification_nosend")&&dj.byId("public_task_details_email_notification_nosend").get("checked")){_15e3="Y";}if(dj.byId("public_task_details_type_nosend_3")&&dj.byId("public_task_details_type_nosend_3").get("checked")){_15e4="03";}if(dj.byId("public_task_details_counterparty_assignee_email_notification_nosend")&&dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").get("checked")){_15e5="Y";}if(dj.byId("public_task_details_other_user_assignee_email_notification_nosend")&&dj.byId("public_task_details_other_user_assignee_email_notification_nosend").get("checked")){_15e6="Y";}if(dj.byId("public_task_details_assignee_type_nosend_1")&&dj.byId("public_task_details_assignee_type_nosend_1").get("checked")){_15e8="01";}else{if(dj.byId("public_task_details_assignee_type_nosend_2")&&dj.byId("public_task_details_assignee_type_nosend_2").get("checked")){_15e8="02";}else{if(dj.byId("public_task_details_assignee_type_nosend_3")&&dj.byId("public_task_details_assignee_type_nosend_3").get("checked")){_15e8="03";}else{if(dj.byId("public_task_details_assignee_type_nosend_4")&&dj.byId("public_task_details_assignee_type_nosend_4").get("checked")){_15e8="04";}}}}if(dj.byId("public_task_details_bank_assignee_email_notification_nosend")&&dj.byId("public_task_details_bank_assignee_email_notification_nosend").get("checked")){_15e7="Y";}var _15e9=[{name:"public_task_details_task_id_"+id,value:id},{name:"public_task_details_issue_user_id_"+id,value:dj.byId("connected_user_id").get("value")},{name:"public_task_details_issue_company_abbv_name_"+id,value:dj.byId("connected_company_abbv_name").get("value")},{name:"public_task_details_description_"+id,value:dj.byId("public_task_details_description_nosend").get("value")},{name:"public_task_details_email_notification_"+id,value:_15e3},{name:"public_task_details_email_"+id,value:dj.byId("public_task_details_email_nosend").get("value")},{name:"public_task_details_type_"+id,id:"",value:_15e4},{name:"public_task_details_assignee_type_"+id,id:"",value:_15e8},{name:"public_task_details_counterparty_assignee_name_"+id,value:dj.byId("public_task_details_counterparty_assignee_name_nosend").get("value")},{name:"public_task_details_counterparty_assignee_abbv_name_"+id,value:dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend").get("value")},{name:"public_task_details_counterparty_assignee_email_notification_"+id,value:_15e5},{name:"public_task_details_counterparty_assignee_email_"+id,value:dj.byId("public_task_details_counterparty_assignee_email_nosend").get("value")},{name:"public_task_details_other_user_assignee_login_id_"+id,value:dj.byId("public_task_details_other_user_assignee_login_id_nosend").get("value")},{name:"public_task_details_other_user_assignee_user_id_"+id,value:dj.byId("public_task_details_other_user_assignee_user_id_nosend").get("value")},{name:"public_task_details_other_user_assignee_email_notification_"+id,value:_15e6},{name:"public_task_details_other_user_assignee_email_"+id,value:dj.byId("public_task_details_other_user_assignee_email_nosend").get("value")},{name:"public_task_details_bank_assignee_name_"+id,value:dj.byId("public_task_details_bank_assignee_name_nosend").get("value")},{name:"public_task_details_bank_assignee_abbv_name_"+id,value:dj.byId("public_task_details_bank_assignee_abbv_name_nosend").get("value")},{name:"public_task_details_bank_assignee_email_notification_"+id,value:_15e7},{name:"public_tasks_details_issue_date_"+id,value:""},{name:"public_tasks_details_bank_other_user_assignee_user_id_"+id,value:""}];if(_15e8=="04"){_15e9.push({name:"public_task_details_bank_other_user_assignee_login_id_"+id,value:dj.byId("public_task_details_bank_other_user_assignee_login_id_nosend").get("value")});var _15ea="N";if(dj.byId("public_task_details_bank_other_user_assignee_email_notification_nosend")&&dj.byId("public_task_details_bank_other_user_assignee_email_notification_nosend").get("checked")){_15ea="Y";}_15e9.push({name:"public_task_details_bank_other_user_assignee_email_notification_"+id,value:_15ea});_15e9.push({name:"public_task_details_bank_other_user_assignee_email_"+id,value:dj.byId("public_task_details_bank_other_user_assignee_email_nosend").get("value")});}return _15e9;};function _15be(id){var _15eb="N",_15ec="01",_15ed="03";if(dj.byId("notification_task_details_email_notification_nosend")&&dj.byId("notification_task_details_email_notification_nosend").get("checked")){_15eb="Y";}var _15ee=[{name:"public_task_details_task_id_"+id,id:"",value:id},{name:"public_task_details_issue_user_id_"+id,id:"",value:dj.byId("connected_user_id").get("value")},{name:"public_task_details_issue_company_abbv_name_"+id,id:"",value:dj.byId("connected_company_abbv_name").get("value")},{name:"public_task_details_description_"+id,id:"public_task_details_description_nosend",value:dj.byId("notification_description_nosend").get("value")},{name:"public_task_details_email_notification_"+id,id:"",value:_15eb},{name:"public_task_details_email_"+id,id:"public_task_details_email_nosend",value:dj.byId("notification_task_details_email_nosend").get("value")},{name:"public_task_details_type_"+id,id:"",value:_15ed},{name:"public_task_details_assignee_type_"+id,id:"",value:_15ec},{name:"public_task_details_other_user_assignee_login_id_"+id,id:"public_task_details_other_user_assignee_login_id_nosend",value:dj.byId("notification_task_details_other_user_assignee_login_id_nosend").get("value")},{name:"public_tasks_details_issue_date_"+id,id:"",value:""},{name:"public_tasks_details_bank_other_user_assignee_user_id_"+id,id:"public_tasks_details_bank_other_user_assignee_user_id_nosend",value:dj.byId("notification_task_details_other_user_assignee_user_id_nosend").get("value")}];return _15ee;};function _15bc(id){var _15ef="01";var _15f0=[{name:"private_task_details_task_id_"+id,id:"",value:id},{name:"public_tasks_details_issue_date_"+id,id:"",value:""},{name:"private_task_details_issue_user_id_"+id,id:"",value:dj.byId("connected_user_id").get("value")},{name:"private_task_details_issue_company_abbv_name_"+id,id:"",value:dj.byId("connected_company_abbv_name").get("value")},{name:"private_task_details_description_"+id,id:"private_task_details_description_nosend",value:dj.byId("private_description_nosend").get("value")},{name:"public_task_details_type_"+id,id:"",value:_15ef}];return _15f0;};function _15f1(){var _15f2=dj.byId("public_task_details_assignee_type_nosend_1"),_15f3=dj.byId("public_task_details_assignee_type_nosend_2"),_15f4=dj.byId("public_task_details_assignee_type_nosend_3");if(!_15f2){_15f2.set("checked",false);if(_15f3){_15f3.set("checked",true);_15f2.set("checked",false);if(_15f4){_15f4.set("checked",false);}}else{if(_15f4){_15f4.set("checked",true);_15f2.set("checked",false);}else{_15f2.set("checked",false);}}}else{_15f2.set("checked",true);if(_15f3){_15f3.set("checked",false);}if(_15f4){_15f4.set("checked",false);}}};function _15f5(_15f6,_15f7,_15f8,_15f9){var email=dj.byId(_15f9).get("value");if(dj.byId(_15f6).get("checked")){m.animate("fadeIn",d.byId(_15f8),function(){if(email){dj.byId(_15f7).set("value",email);dj.byId(_15f7).set("readonly",true);dj.byId(_15f7).set("disabled",true);}},false,{duration:20});}else{m.animate("fadeOut",_15f8,function(){dj.byId(_15f7).set("value","");},false,{duration:20});}};function _15dc(){var _15fa,_15fb,_15fc,_15fd;if(dj.byId("public_task_details_assignee_type_nosend_2")&&dj.byId("public_task_details_assignee_type_nosend_2").get("checked")){if(dj.byId("bank_abbv_name_widget_id_hidden")&&dj.byId("bank_name_widget_id_hidden")){_15fa=dj.byId("bank_abbv_name_widget_id_hidden").get("value");_15fc=dj.byId("bank_name_widget_id_hidden").get("value");if(dj.byId(_15fa)){_15fb=dj.byId(_15fa);dj.byId("public_task_details_bank_assignee_abbv_name_nosend").set("value",_15fb.get("value"));}if(dj.byId(_15fc)){_15fd=dj.byId(_15fc);dj.byId("public_task_details_bank_assignee_name_nosend").set("value",_15fd.get("value"));}}}else{dj.byId("public_task_details_bank_assignee_name_nosend").set("value","");dj.byId("public_task_details_bank_assignee_abbv_name_nosend").set("value","");}};function _15dd(){var _15fe=dj.byId("public_task_details_type_nosend_2"),_15ff=dj.byId("public_task_details_type_nosend_3"),_1600=dj.byId("public_task_details_assignee_type_nosend_1"),_1601=dj.byId("public_task_details_assignee_type_nosend_2"),_1602=dj.byId("public_task_details_assignee_type_nosend_3");if(_15fe.get("checked")){m.animate("fadeOut",[d.byId("counterparty_email_input_field_div"),d.byId("other_user_email_input_field_div")],function(){dj.byId("public_task_details_other_user_assignee_login_id_nosend").reset();dj.byId("public_task_details_other_user_assignee_email_notification_nosend").set("checked",false);dj.byId("other_user_email_id_hidden").reset();dj.byId("public_task_details_other_user_assignee_user_id_nosend").reset();dj.byId("public_task_details_other_user_assignee_email_nosend").reset();dj.byId("public_task_details_counterparty_assignee_name_nosend").reset();dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend").reset();dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").set("checked",false);dj.byId("counterparty_email_id_hidden").reset();dj.byId("public_task_details_counterparty_assignee_email_nosend").reset();dj.byId("public_task_details_bank_assignee_email_notification_nosend").set("checked",false);dj.byId("public_task_details_bank_assignee_name_nosend").reset();},false,{duration:20});}else{if(_1600&&!_1600.get("checked")){m.animate("fadeOut",d.byId("other_user_email_input_field_div"),function(){dj.byId("public_task_details_other_user_assignee_login_id_nosend").reset();dj.byId("public_task_details_other_user_assignee_email_notification_nosend").set("checked",false);dj.byId("public_task_details_other_user_assignee_user_id_nosend").reset();dj.byId("other_user_email_id_hidden").reset();dj.byId("public_task_details_other_user_assignee_email_nosend").reset();});}if(_1601&&!_1601.get("checked")){dj.byId("public_task_details_bank_assignee_email_notification_nosend").set("checked",false);dj.byId("public_task_details_bank_assignee_name_nosend").reset();}if(_1602&&!_1602.get("checked")){m.animate("fadeOut",d.byId("counterparty_email_input_field_div"),function(){dj.byId("public_task_details_counterparty_assignee_name_nosend").reset();dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").set("checked",false);dj.byId("counterparty_email_id_hidden").reset();dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend").reset();dj.byId("public_task_details_counterparty_assignee_email_nosend").reset();});}}};function _1603(_1604){var _1605=null;if(dj.byId(_1604)){var _1606=dj.byId(_1604).get("value");if((_1606.indexOf("<")!=-1)||(_1606.indexOf(">")!=-1)){_1605=m.getLocalization("invalidContent");dj.byId(_1604).set("state","Error");dj.hideTooltip(dj.byId(_1604).domNode);dj.showTooltip(_1605,dj.byId(_1604).domNode,0);}}};var _1607=[];d.mixin(m,{bindCollaboration:function(){m.setValidation("public_task_details_email_nosend",m.validateEmailAddr);m.setValidation("public_task_details_bank_other_user_assignee_email_nosend",m.validateEmailAddr);m.setValidation("public_task_details_counterparty_assignee_email_nosend",m.validateEmailAddr);m.connect("public_task_details_email_notification_nosend","onClick",function(){m.toggleFields(this.get("checked"),null,["public_task_details_email_nosend"]);_15f5(this,"public_task_details_email_nosend","email_input_field_div","user_email_id_hidden");});m.connect("notification_task_details_email_notification_nosend","onClick",function(){m.toggleFields(this.get("checked"),null,["notification_task_details_email_nosend"]);});m.connect("public_task_details_counterparty_assignee_email_notification_nosend","onClick",function(){m.toggleFields(this.get("checked"),null,["public_task_details_counterparty_assignee_email_nosend"]);if(!dj.byId("public_task_details_counterparty_assignee_name_nosend").get("value")){dj.byId("counterparty_email_id_hidden").set("value","");dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").set("checked",false);}else{_15f5(this,"public_task_details_counterparty_assignee_email_nosend","counterparty_email_input_field_div","counterparty_email_id_hidden");}});m.connect("public_task_details_other_user_assignee_email_notification_nosend","onClick",function(){m.toggleFields(this.get("checked"),null,["public_task_details_other_user_assignee_email_nosend"]);if(!dj.byId("public_task_details_other_user_assignee_login_id_nosend").get("value")){dj.byId("other_user_email_id_hidden").set("value","");dj.byId("public_task_details_other_user_assignee_email_notification_nosend").set("checked",false);}else{_15f5(this,"public_task_details_other_user_assignee_email_nosend","other_user_email_input_field_div","other_user_email_id_hidden");}});_1607.push(m.connect("public_task_details_type_nosend_2","onClick",_15c4));_1607.push(m.connect("public_task_details_type_nosend_3","onClick",_15c4));_1607.push(m.connect("public_task_details_assignee_type_nosend_1","onClick",_15c2));_1607.push(m.connect("public_task_details_assignee_type_nosend_1","onClick",_15cc));_1607.push(m.connect("public_task_details_assignee_type_nosend_2","onClick",_15cc));_1607.push(m.connect("public_task_details_assignee_type_nosend_3","onClick",_15cc));_1607.push(m.connect("public_task_details_assignee_type_nosend_4","onClick",_15cc));m.connect("public_task_details_description_nosend","onBlur",function(){_1603("public_task_details_description_nosend");});m.connect("private_description_nosend","onBlur",function(){_1603("private_description_nosend");});m.connect("public_tasks_description_nosend","onBlur",function(){_1603("public_tasks_description_nosend");});m.connect("private_tasks_description_nosend","onBlur",function(){_1603("private_tasks_description_nosend");});m.connect("notification_description_nosend","onBlur",function(){_1603("notification_description_nosend");});m.connect("notification_tasks_description_nosend","onBlur",function(){_1603("notification_tasks_description_nosend");});m.connect("public_task_details_description_nosend","onBlur",function(){_1603("public_task_details_description_nosend");});},cancelCollaborationTask:function(type){if(dj.byId("public_task_id_nosend")){dj.byId("public_task_id_nosend").set("value","");}dj.byId("public_tasks_dialog").hide();},addCollaborationTask:function(type,_1608){if(dj.byId(type+"_description_nosend")&&dj.byId(type+"_description_nosend").state!=="Error"){var _1609=[],_160a=false,id="",_160b=true,_160c=dj.byId(type+"_dialog"),field,_160d,value;type=type.toLowerCase();switch(type){case "private_tasks":_1609=_15e2();id=dj.byId("private_task_id_nosend").get("value");break;case "public_tasks":_1609=_15de();id=dj.byId("public_task_id_nosend").get("value");break;default:_1609=_15e0();id=dj.byId("notification_task_id_nosend").get("value");break;}if(id===""){id=_15aa(type);_160b=false;}_160a=d.every(_1609,function(_160e){field=dj.byId(_160e.name);if(field){_160d=field.declaredClass;value=field.get("displayedValue");if(/NumberTextBox/.test(_160d)||(/CurrencyTextBox/.test(_160d))){value=field.get("value");value=isNaN(value)?"":value;}else{if(field.id){_1603(field.id);}}if(type==="private_tasks"&&field.state==="Error"){return false;}if(!value||field.state==="Error"){m.showTooltip(field.invalidMessage,field.domNode);m.setFieldState(field,false);return false;}}return true;});if(!_160a){return false;}_15ae(type,id,_1608,_160b);if(_160c){_160c.hide();}d.query("#"+type+"_fields *[id^="+type+"]").forEach(function(node){var field=dj.byId(node.id);if(field){field.reset();}});m._config.taskEditMode=false;m._config.currentTaskID="";if(_160b){switch(type){case "private_tasks":if(dj.byId("private_task_id_nosend")){dj.byId("private_task_id_nosend").set("value","");}break;case "public_tasks":if(dj.byId("public_task_id_nosend")){dj.byId("public_task_id_nosend").set("value","");}break;default:if(dj.byId("notification_task_id_nosend")){dj.byId("notification_task_id_nosend").set("value","");}break;}}return true;}},finishCollaborationTask:function(node,type,id){var _160f=dj.byId(node),_1610=d.byId("old_inp_dttm")?d.byId("old_inp_dttm").value:"",_1611=_160f.get("checked"),_1612;if(d.byId("task_edit_"+id)){var _1613=d.byId("task_edit_"+id);d.style(_1613,"display",_1611?"none":"inline");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/SetPerformed?taskid="+id+"&performed="+(_1611?"Y":"N")+"&inputdate="+_1610),load:function(_1614,args){_1612=d.byId(type+"_desc_"+id);if(_1611){d.style(_1612,"textDecoration","line-through");d.style(_1612,"color","#999");}else{d.style(_1612,"textDecoration","none");d.style(_1612,"color","black");}}});},openCollaborationComment:function(type,id){var _1615=dj.byId(type+"_comments_dialog"),_1616,oldId;if(!_1615){d.parser.parse(type+"_comments_div");_1615=dj.byId(type+"_comments_dialog");m.bindCollaboration();}_1616=dj.byId(type+"_comments_current_id_nosend");dj.byId(type+"_description_nosend").set("value","");oldId=_1616.get("value");if(oldId){d.style(d.byId(type+"_comments_"+oldId),"display","none");}_1616.set("value",id);_1615.show();d.style(d.byId(type+"_comments_"+id),"display","block");d.style(d.byId(type+"_comments_"+id),"width","425px");d.style(d.byId(type+"_comments_"+id),"height","173px");d.style(d.byId(type+"_comments_"+id),"overflow","auto");},addCollaborationComment:function(type){if(dj.byId(type+"_description_nosend")&&dj.byId(type+"_description_nosend").state!=="Error"){var _1617=dj.byId(type+"_description_nosend").get("value"),xml=["<?xml version='1.0' encoding='UTF-8'?><comment>"],_1618=dj.byId("old_inp_dttm").get("value"),_1619,id;if((_1617)&&(_1617.length<=204)){id=dj.byId(type+"_comments_current_id_nosend").get("value");xml.push("<description>",m.grid.sanitizeHTMLDataForUI(dj.byId(type+"_description_nosend").get("value")),"</description>");xml.push("<task_id>",id,"</task_id>");xml.push("<old_inp_dttm>",_1618,"</old_inp_dttm></comment>");xml=xml.join("");m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/SaveComment"),content:{xml_string:xml},load:function(_161a,args){var _161b=d.byId(type+"_comments_"+id),_161c=_161b.getElementsByTagName("li").length,desc=dj.byId(type+"_description_nosend"),_161d=dj.byId("sentence_posted_by").get("value")+" "+dj.byId("sentence_you").get("value");d.create("li",{id:type+"_comment_"+id+"_"+_161c,innerHTML:desc.get("value")+"<br><div class='taskInfo'>"+_161d+"</div>"},_161b);var count=parseInt(d.byId(type+"_comment_count_"+id).innerHTML,10);count++;d.byId(type+"_comment_count_"+id).innerHTML=count;desc.set("value","");},error:function(_161e,args){console.error("[collaboration] Technical error while saving Comment");console.error(_161e);}});}}},openPublicTaskDialog:function(){var _161f=dj.byId("public_tasks_dialog");if(!_161f){d.parser.parse("public-tasks-fields");_161f=dj.byId("public_tasks_dialog");m.bindCollaboration();}var nodes=[];nodes.push(d.byId("collaboration_type_view_div"));nodes.push(d.byId("email_input_field_div"));nodes.push(d.byId("counterparty_email_input_field_div"));nodes.push(d.byId("other_user_email_input_field_div"));m.animate("fadeOut",nodes,function(){_161f.show();},false,{duration:20});dj.byId("public_task_details_description_nosend").reset();dj.byId("public_task_details_other_user_assignee_user_id_nosend").reset();dj.byId("public_task_details_email_nosend").reset();dj.byId("public_task_details_email_notification_nosend").set("checked",false);if(dj.byId("public_task_details_email_notification_nosend")){m.toggleFields(dj.byId("public_task_details_email_notification_nosend").get("checked"),null,["public_task_details_email_nosend"]);}dj.byId("public_task_details_type_nosend_2").set("checked",true);dj.byId("public_task_details_type_nosend_3").set("checked",false);_15c4();dj.byId("public_task_details_other_user_assignee_login_id_nosend").reset();dj.byId("public_task_details_bank_assignee_name_nosend").reset();dj.byId("public_task_details_bank_assignee_abbv_name_nosend").reset();dj.byId("public_task_details_bank_assignee_email_notification_nosend").set("checked",false);dj.byId("public_task_details_counterparty_assignee_name_nosend").reset();dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").set("checked",false);dj.byId("public_task_details_counterparty_assignee_email_nosend").set("disabled",true);},openNotificationTaskDialog:function(){var _1620=dj.byId("notification_tasks_dialog");if(!_1620){d.parser.parse("notification-task-fields");_1620=dj.byId("notification_tasks_dialog");m.bindCollaboration();}if(dj.byId("notification_task_details_email_notification_nosend")){m.toggleFields(dj.byId("notification_task_details_email_notification_nosend").get("checked"),null,["notification_task_details_email_nosend"]);}dj.byId("notification_task_details_other_user_assignee_login_id_nosend").reset();dj.byId("notification_description_nosend").reset();_1620.show();},openPrivateTaskDialog:function(){var _1621=dj.byId("private_tasks_dialog");if(!_1621){d.parser.parse("private-task-fields");_1621=dj.byId("private_tasks_dialog");m.bindCollaboration();}_1621.show();dj.byId("private_description_nosend").reset();},openTaskForUpdate:function(_1622){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetTask?taskid="+_1622),load:function(_1623,args){_1623=d.fromJson(_1623);if(_1623.type[1]==="01"){m.openPrivateTaskDialog();dj.byId("private_task_id_nosend").set("value",_1623.task_id);dj.byId("private_description_nosend").set("value",_1623.description);}else{_15c4=function(){};_15cc=function(){};m.openPublicTaskDialog();d.forEach(_1607,function(_1624){d.disconnect(_1624);});dj.byId("public_task_id_nosend").set("value",_1623.task_id);dj.byId("public_task_details_description_nosend").set("value",_1623.description);dj.byId("public_task_details_email_notification_nosend").set("checked",_1623.email_notification==="Y");dj.byId("public_task_details_email_nosend").set("value",_1623.email);dj.byId("public_task_details_type_nosend_2").set("checked",_1623.type[1]==="02");dj.byId("public_task_details_type_nosend_3").set("checked",_1623.type[1]==="03");if(_1623.type[1]==="03"){m.toggleFields(true,["public_task_details_assignee_type_nosend_1","public_task_details_assignee_type_nosend_2","public_task_details_assignee_type_nosend_3"]);d.style("assigneeTypeFields","display","block");if(dj.byId("public_task_details_assignee_type_nosend_1")){dj.byId("public_task_details_assignee_type_nosend_1").set("checked",_1623.assignee_type[1]==="01");}if(dj.byId("public_task_details_assignee_type_nosend_2")){dj.byId("public_task_details_assignee_type_nosend_2").set("checked",_1623.assignee_type[1]==="02");}if(dj.byId("public_task_details_assignee_type_nosend_3")){dj.byId("public_task_details_assignee_type_nosend_3").set("checked",_1623.assignee_type[1]==="03");}if(_1623.assignee_type[1]==="01"){d.style("notifyUserFields","display","block");dj.byId("public_task_details_other_user_assignee_login_id_nosend").set("value",_1623.dest_user_login_id);dj.byId("public_task_details_other_user_assignee_user_id_nosend").set("value",_1623.dest_user_id);dj.byId("public_task_details_other_user_assignee_email_notification_nosend").set("value",_1623.dest_user_email_notif==="Y");dj.byId("public_task_details_other_user_assignee_email_nosend").set("value",_1623.dest_user_email);dj.byId("other_user_email_id_hidden").set("value",_1623.dest_user_email);if(_1623.dest_user_email_notif==="Y"){d.style("other_user_email_input_field_div","display","block");m.toggleFields(true,null,["public_task_details_other_user_assignee_email_nosend"]);_15f5(dj.byId("public_task_details_other_user_assignee_email_notification_nosend"),"public_task_details_other_user_assignee_email_nosend","other_user_email_input_field_div","other_user_email_id_hidden");}}if(_1623.assignee_type[1]==="02"){d.style("notifyBankFields","display","block");dj.byId("public_task_details_bank_assignee_name_nosend").set("value",_1623.dest_company_name);dj.byId("public_task_details_bank_assignee_abbv_name_nosend").set("value",_1623.dest_company_abbv_name);dj.byId("public_task_details_bank_assignee_email_notification_nosend").set("checked",_1623.dest_company_email_notif==="Y");}if(_1623.assignee_type[1]==="03"){d.style("notifyCounterpartyFields","display","block");dj.byId("public_task_details_counterparty_assignee_name_nosend").set("value",_1623.dest_company_name);dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend").set("value",_1623.dest_company_abbv_name);dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").set("checked",_1623.dest_company_email_notif==="Y");}var _1625=dj.byId("public_task_details_assignee_type_nosend_1"),_1626=dj.byId("public_task_details_assignee_type_nosend_2"),_1627=dj.byId("public_task_details_assignee_type_nosend_3"),_1628=dj.byId("public_task_details_type_nosend_3"),_1629=(_1628)?_1628.get("checked"):false,_162a=d.byId("assigneeTypeFields");if(_1629){var _162b=[{id:"public_task_details_assignee_type_nosend_1",description:"user_to_user"},{id:"public_task_details_assignee_type_nosend_2",description:"user_to_bank"},{id:"public_task_details_assignee_type_nosend_3",description:"counterparty"},{id:"public_task_details_assignee_type_nosend_4",description:"bank"}];m.preDisplayAssigneeType=m.preDisplayAssigneeType||function(){return true;};m.preDisplayAssigneeType(_162b);}}_15c4=function(){var _162c=dj.byId("public_task_details_assignee_type_nosend_1"),_1626=dj.byId("public_task_details_assignee_type_nosend_2"),_1627=dj.byId("public_task_details_assignee_type_nosend_3"),_1628=dj.byId("public_task_details_type_nosend_3"),_1629=(_1628)?_1628.get("checked"):false,_162a=d.byId("assigneeTypeFields");m.toggleFields(_1629,["public_task_details_assignee_type_nosend_1","public_task_details_assignee_type_nosend_2","public_task_details_assignee_type_nosend_3","public_task_details_assignee_type_nosend_4"]);if(_1629){var _162d=[{id:"public_task_details_assignee_type_nosend_1",description:"user_to_user"},{id:"public_task_details_assignee_type_nosend_2",description:"user_to_bank"},{id:"public_task_details_assignee_type_nosend_3",description:"counterparty"},{id:"public_task_details_assignee_type_nosend_4",description:"bank"}];m.preDisplayAssigneeType=m.preDisplayAssigneeType||function(){return true;};m.preDisplayAssigneeType(_162d);}if(_1629){m.animate("fadeIn",_162a,function(){if(_1626&&_1626.get("checked")){_1626.set("checked",true);m.animate("fadeOut",d.byId("notifyUserFields"),function(){},false,{duration:20});m.animate("fadeOut",d.byId("notifyCounterpartyFields"),function(){},false,{duration:20});m.animate("fadeIn",d.byId("notifyBankFields"));}else{if(_162c&&_162c.get("checked")){_162c.set("checked",true);m.animate("fadeOut",d.byId("notifyBankFields"),function(){},false,{duration:20});m.animate("fadeOut",d.byId("notifyCounterpartyFields"),function(){},false,{duration:20});m.animate("fadeIn",d.byId("notifyUserFields"));}else{if(_1627&&_1627.get("checked")){_1627.set("checked",true);m.animate("fadeOut",d.byId("notifyUserFields"),function(){},false,{duration:20});m.animate("fadeOut",d.byId("notifyBankFields"),function(){},false,{duration:20});m.animate("fadeIn",d.byId("notifyCounterpartyFields"));}else{_162c.set("checked",true);m.animate("fadeOut",d.byId("notifyBankFields"),function(){},false,{duration:20});m.animate("fadeOut",d.byId("notifyCounterpartyFields"),function(){},false,{duration:20});m.animate("fadeIn",d.byId("notifyUserFields"));}}}},false,{duration:20});}else{m.animate("fadeOut",_162a,function(){if(_162c){_162c.set("checked",false);}if(_1626){_1626.set("checked",false);}if(_1627){_1627.set("checked",false);}_15cc();},false,{duration:20});}};_15cc=function(){var _162e=dj.byId("public_task_details_assignee_type_nosend_1")?dj.byId("public_task_details_assignee_type_nosend_1").get("checked"):false,_162f=dj.byId("public_task_details_assignee_type_nosend_2")?dj.byId("public_task_details_assignee_type_nosend_2").get("checked"):false,_1630=dj.byId("public_task_details_assignee_type_nosend_3")?dj.byId("public_task_details_assignee_type_nosend_3").get("checked"):false,_1631=dj.byId("public_task_details_assignee_type_nosend_4")?dj.byId("public_task_details_assignee_type_nosend_4").get("checked"):false,_1632=d.byId("notifyBankFields"),_1633=d.byId("notifyUserFields"),_1634=d.byId("notifyCounterpartyFields"),_1635=d.byId("bankAssigneeTasks");m.toggleFields(_162e,null,["public_task_details_other_user_assignee_login_id_nosend"]);m.toggleFields(_162f,null,["public_task_details_bank_assignee_name_nosend"],true,true);m.toggleFields(_1630,null,["public_task_details_counterparty_assignee_name_nosend"],true,true);m.toggleFields(_1631,null,["public_task_details_bank_other_user_assignee_login_id_nosend","public_task_details_bank_other_user_assignee_email_nosend"],true,true);dj.byId("public_task_details_other_user_assignee_login_id_nosend").set("readonly",true);dj.byId("public_task_details_other_user_assignee_login_id_nosend").set("disabled",true);m.animate("fadeOut",[_1632,_1633,_1634],function(){if(_162e){m.animate("fadeIn",_1633);}else{if(_162f){m.animate("fadeIn",_1632);}else{if(_1630){m.animate("fadeIn",_1634);var _1636=dj.byId("access_opened"),_1637=dj.byId("public_task_details_counterparty_assignee_name_nosend"),_1638=dj.byId("product_code").get("value"),_1639=null,_163a=dj.byId("counterparty_email_id_hidden"),_163b=dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend");if(_1638&&_1638=="IP"){_1639=dj.byId("seller_name")?dj.byId("seller_name"):dj.byId("seller_abbv_name");}else{if(_1638&&_1638=="IN"){_1639=dj.byId("buyer_name")?dj.byId("buyer_name"):dj.byId("buyer_abbv_name");}}if(_1636&&_1639){if(_1639.get("value")!==""){if(_1636.get("value")==="Y"){_1637.set("value",_1639.get("value"));_163a.set("value",dj.byId("transaction_counterparty_email").get("value"));_163b.set("value",dj.byId("ben_company_abbv_name").get("value"));}else{_1637.set("value","");_163b.set("value","");m.dialog.show("ERROR",m.getLocalization("errorCounterpartyCollaborationNotEnabled"));m.animate("fadeOut",_1634);}}else{_1637.set("value","");_163b.set("value","");m.dialog.show("ERROR",m.getLocalization("errorSelectCounterpartyCollaboration"));m.animate("fadeOut",_1634);}}}else{if(_1631){m.animate("fadeIn",_1635);}}}}_15dc();_15dd();},false,{duration:20});};_1607=[];_1607.push(m.connect("public_task_details_type_nosend_2","onClick",_15c4));_1607.push(m.connect("public_task_details_type_nosend_3","onClick",_15c4));_1607.push(m.connect("public_task_details_assignee_type_nosend_1","onClick",_15c2));_1607.push(m.connect("public_task_details_assignee_type_nosend_1","onClick",_15cc));_1607.push(m.connect("public_task_details_assignee_type_nosend_2","onClick",_15cc));_1607.push(m.connect("public_task_details_assignee_type_nosend_3","onClick",_15cc));_1607.push(m.connect("public_task_details_assignee_type_nosend_4","onClick",_15cc));if(_1623.type[1]==="02"){dj.byId("public_task_details_type_nosend_2").onClick();}else{dj.byId("public_task_details_type_nosend_3").onClick();}}}});},showCollaborationTaskDetails:function(){m.animate("fadeIn",d.byId("collaboration-more-tasks"),function(){m.animate("fadeOut",d.byId("show-tasks-details-link"),false,{duration:20});},false,{duration:20});}});})(dojo,dijit,misys);}if(!dojo._hasResource["dijit.MenuBar"]){dojo._hasResource["dijit.MenuBar"]=true;dojo.provide("dijit.MenuBar");dojo.declare("dijit.MenuBar",dijit._MenuBase,{templateString:dojo.cache("dijit","templates/MenuBar.html","<div class=\"dijitMenuBar dijitMenuPassive\" dojoAttachPoint=\"containerNode\"  role=\"menubar\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress: _onKeyPress\"></div>\n"),baseClass:"dijitMenuBar",_isMenuBar:true,postCreate:function(){var k=dojo.keys,l=this.isLeftToRight();this.connectKeyNavHandlers(l?[k.LEFT_ARROW]:[k.RIGHT_ARROW],l?[k.RIGHT_ARROW]:[k.LEFT_ARROW]);this._orient=this.isLeftToRight()?{BL:"TL"}:{BR:"TR"};},focusChild:function(item){var _163c=this.focusedChild,_163d=_163c&&_163c.popup&&_163c.popup.isShowingNow;this.inherited(arguments);if(_163d&&item.popup&&!item.disabled){this._openPopup();}},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case dojo.keys.DOWN_ARROW:this._moveToPopup(evt);dojo.stopEvent(evt);}},onItemClick:function(item,evt){if(item.popup&&item.popup.isShowingNow){item.popup.onCancel();}else{this.inherited(arguments);}}});}if(!dojo._hasResource["dijit.MenuBarItem"]){dojo._hasResource["dijit.MenuBarItem"]=true;dojo.provide("dijit.MenuBarItem");dojo.declare("dijit._MenuBarItemMixin",null,{templateString:dojo.cache("dijit","templates/MenuBarItem.html","<div class=\"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel\" dojoAttachPoint=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<span dojoAttachPoint=\"containerNode\"></span>\n</div>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"}})});dojo.declare("dijit.MenuBarItem",[dijit.MenuItem,dijit._MenuBarItemMixin],{});}if(!dojo._hasResource["dijit.PopupMenuBarItem"]){dojo._hasResource["dijit.PopupMenuBarItem"]=true;dojo.provide("dijit.PopupMenuBarItem");dojo.declare("dijit.PopupMenuBarItem",[dijit.PopupMenuItem,dijit._MenuBarItemMixin],{});}if(!dojo._hasResource["misys.widget.BookmarkMenu"]){dojo._hasResource["misys.widget.BookmarkMenu"]=true;dojo.provide("misys.widget.BookmarkMenu");(function(d,dj,m){function _163e(link,_163f,_1640){var text="";var _1641=["<?xml version=\"1.0\" encoding=\"UTF-8\"?><bookmark>"];var _1642=dijit.byId("sendBookmark");dojo.forEach(_1642.getDescendants(),function(field){_1641.push("<",field.get("name"),">",field.get("value"),"</",field.get("name"),">");});if(dijit.byId("bookmarkName")){_1641.push("<bookmark_name>",dijit.byId("bookmarkName").get("value"),"</bookmark_name>");}_1641.push("<bookmark_url>","**","</bookmark_url>");_1641.push("<bookmark_source>","**","</bookmark_source>");_1641.push("<bookmark_id>",link,"</bookmark_id>");_1641.push("<action>",link,"</action></bookmark>");var _1643=misys.xhrPost({url:misys.getServletURL("/screen/BookmarkMenuScreen"),handleAs:"json",content:{formContent:_1641.join(""),bookmarkAction:"SAVE",currentActionCode:_163f,currentScreen:_1640},load:function(_1644){text=_1644.content[0];}});_1643.then(function(){var _1645=dojo.byId("favorites");if(!dijit.byId("sendBookmark")){dojo.parser.parse(dojo.byId("favorites"));}misys.animate("wipeOut",_1645,function(){dijit.byId("sendBookmark").destroyRecursive(true);var _1646=dj.findWidgets(dojo.byId("favorites"));dojo.forEach(_1646,function(w){w.destroyRecursive(false);});dojo.empty("favorites");_1645.innerHTML=text.substring(20,text.length-6);dojo.parser.parse(dojo.byId("favorites"));misys.animate("wipeIn",_1645);});});return _1643;};function _1647(id,_1648,_1649,_164a){var _164b=["<?xml version=\"1.0\" encoding=\"UTF-8\"?><bookmark>"];var _164c=dijit.byId("sendBookmark");dojo.forEach(_164c.getDescendants(),function(field){if(field.id!=="bookmark_"+id&&field.id!=="bookmark_name_"+id&&field.id!=="bookmark_source_"+id&&field.id!=="bookmark_url_"+id){_164b.push("<",field.get("name"),">",field.get("value"),"</",field.get("name"),">");}});_164b.push("<action>",_1648,"</action></bookmark>");var text="";var _164d=misys.xhrPost({url:misys.getServletURL("/screen/BookmarkMenuScreen"),handleAs:"json",content:{formContent:_164b.join(""),bookmarkAction:"DELETE",currentActionCode:_1649,currentScreen:_164a},load:function(_164e){text=_164e.content[0];}});_164d.then(function(){var _164f=dojo.byId("favorites");if(!dijit.byId("sendBookmark")){dojo.parser.parse(dojo.byId("favorites"));}misys.animate("wipeOut",_164f,function(){dijit.byId("sendBookmark").destroyRecursive(true);var _1650=dj.findWidgets(dojo.byId("favorites"));dojo.forEach(_1650,function(w){w.destroyRecursive(false);});dojo.empty("favorites");_164f.innerHTML=text.substring(20,text.length-6);dojo.parser.parse(dojo.byId("favorites"));misys.animate("wipeIn",_164f);});});return _164d;};d.mixin(m,{doBookmarkAction:function(type,_1651,id,_1652,_1653){if(!dijit.byId("sendBookmark")){dojo.parser.parse("favorites");}if(type==="SAVE"){_163e(_1651,_1652,_1653);}else{_1647(id,_1651,_1652,_1653);}}});})(dojo,dijit,misys);}if(!dojo._hasResource["dojo.DeferredList"]){dojo._hasResource["dojo.DeferredList"]=true;dojo.provide("dojo.DeferredList");dojo.DeferredList=function(list,_1654,_1655,_1656,_1657){var _1658=[];dojo.Deferred.call(this);var self=this;if(list.length===0&&!_1654){this.resolve([0,[]]);}var _1659=0;dojo.forEach(list,function(item,i){item.then(function(_165a){if(_1654){self.resolve([i,_165a]);}else{_165b(true,_165a);}},function(error){if(_1655){self.reject(error);}else{_165b(false,error);}if(_1656){return null;}throw error;});function _165b(_165c,_165d){_1658[i]=[_165c,_165d];_1659++;if(_1659===list.length){self.resolve(_1658);}};});};dojo.DeferredList.prototype=new dojo.Deferred();dojo.DeferredList.prototype.gatherResults=function(_165e){var d=new dojo.DeferredList(_165e,false,true,false);d.addCallback(function(_165f){var ret=[];dojo.forEach(_165f,function(_1660){ret.push(_1660[1]);});return ret;});return d;};}if(!dojo._hasResource["dijit.tree.TreeStoreModel"]){dojo._hasResource["dijit.tree.TreeStoreModel"]=true;dojo.provide("dijit.tree.TreeStoreModel");dojo.declare("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(args){dojo.mixin(this,args);this.connects=[];var store=this.store;if(!store.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.Tree: store must support dojo.data.Identity");}if(store.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([dojo.connect(store,"onNew",this,"onNewItem"),dojo.connect(store,"onDelete",this,"onDeleteItem"),dojo.connect(store,"onSet",this,"onSetItem")]);}},destroy:function(){dojo.forEach(this.connects,dojo.disconnect);},getRoot:function(_1661,_1662){if(this.root){_1661(this.root);}else{this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(items){if(items.length!=1){throw new Error(this.declaredClass+": query "+dojo.toJson(this.query)+" returned "+items.length+" items, but must return exactly one item");}this.root=items[0];_1661(this.root);}),onError:_1662});}},mayHaveChildren:function(item){return dojo.some(this.childrenAttrs,function(attr){return this.store.hasAttribute(item,attr);},this);},getChildren:function(_1663,_1664,_1665){var store=this.store;if(!store.isItemLoaded(_1663)){var _1666=dojo.hitch(this,arguments.callee);store.loadItem({item:_1663,onItem:function(_1667){_1666(_1667,_1664,_1665);},onError:_1665});return;}var _1668=[];for(var i=0;i<this.childrenAttrs.length;i++){var vals=store.getValues(_1663,this.childrenAttrs[i]);_1668=_1668.concat(vals);}var _1669=0;if(!this.deferItemLoadingUntilExpand){dojo.forEach(_1668,function(item){if(!store.isItemLoaded(item)){_1669++;}});}if(_1669==0){_1664(_1668);}else{dojo.forEach(_1668,function(item,idx){if(!store.isItemLoaded(item)){store.loadItem({item:item,onItem:function(item){_1668[idx]=item;if(--_1669==0){_1664(_1668);}},onError:_1665});}});}},isItem:function(_166a){return this.store.isItem(_166a);},fetchItemByIdentity:function(_166b){this.store.fetchItemByIdentity(_166b);},getIdentity:function(item){return this.store.getIdentity(item);},getLabel:function(item){if(this.labelAttr){return this.store.getValue(item,this.labelAttr);}else{return this.store.getLabel(item);}},newItem:function(args,_166c,_166d){var pInfo={parent:_166c,attribute:this.childrenAttrs[0]},_166e;if(this.newItemIdAttr&&args[this.newItemIdAttr]){this.fetchItemByIdentity({identity:args[this.newItemIdAttr],scope:this,onItem:function(item){if(item){this.pasteItem(item,null,_166c,true,_166d);}else{_166e=this.store.newItem(args,pInfo);if(_166e&&(_166d!=undefined)){this.pasteItem(_166e,_166c,_166c,false,_166d);}}}});}else{_166e=this.store.newItem(args,pInfo);if(_166e&&(_166d!=undefined)){this.pasteItem(_166e,_166c,_166c,false,_166d);}}},pasteItem:function(_166f,_1670,_1671,bCopy,_1672){var store=this.store,_1673=this.childrenAttrs[0];if(_1670){dojo.forEach(this.childrenAttrs,function(attr){if(store.containsValue(_1670,attr,_166f)){if(!bCopy){var _1674=dojo.filter(store.getValues(_1670,attr),function(x){return x!=_166f;});store.setValues(_1670,attr,_1674);}_1673=attr;}});}if(_1671){if(typeof _1672=="number"){var _1675=store.getValues(_1671,_1673).slice();_1675.splice(_1672,0,_166f);store.setValues(_1671,_1673,_1675);}else{store.setValues(_1671,_1673,store.getValues(_1671,_1673).concat(_166f));}}},onChange:function(item){},onChildrenChange:function(_1676,_1677){},onDelete:function(_1678,_1679){},onNewItem:function(item,_167a){if(!_167a){return;}this.getChildren(_167a.item,dojo.hitch(this,function(_167b){this.onChildrenChange(_167a.item,_167b);}));},onDeleteItem:function(item){this.onDelete(item);},onSetItem:function(item,_167c,_167d,_167e){if(dojo.indexOf(this.childrenAttrs,_167c)!=-1){this.getChildren(item,dojo.hitch(this,function(_167f){this.onChildrenChange(item,_167f);}));}else{this.onChange(item);}}});}if(!dojo._hasResource["dijit.tree.ForestStoreModel"]){dojo._hasResource["dijit.tree.ForestStoreModel"]=true;dojo.provide("dijit.tree.ForestStoreModel");dojo.declare("dijit.tree.ForestStoreModel",dijit.tree.TreeStoreModel,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_1680){this.root={store:this,root:true,id:_1680.rootId,label:_1680.rootLabel,children:_1680.rootChildren};},mayHaveChildren:function(item){return item===this.root||this.inherited(arguments);},getChildren:function(_1681,_1682,_1683){if(_1681===this.root){if(this.root.children){_1682(this.root.children);}else{this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(items){this.root.children=items;_1682(items);}),onError:_1683});}}else{this.inherited(arguments);}},isItem:function(_1684){return (_1684===this.root)?true:this.inherited(arguments);},fetchItemByIdentity:function(_1685){if(_1685.identity==this.root.id){var scope=_1685.scope?_1685.scope:dojo.global;if(_1685.onItem){_1685.onItem.call(scope,this.root);}}else{this.inherited(arguments);}},getIdentity:function(item){return (item===this.root)?this.root.id:this.inherited(arguments);},getLabel:function(item){return (item===this.root)?this.root.label:this.inherited(arguments);},newItem:function(args,_1686,_1687){if(_1686===this.root){this.onNewRootItem(args);return this.store.newItem(args);}else{return this.inherited(arguments);}},onNewRootItem:function(args){},pasteItem:function(_1688,_1689,_168a,bCopy,_168b){if(_1689===this.root){if(!bCopy){this.onLeaveRoot(_1688);}}dijit.tree.TreeStoreModel.prototype.pasteItem.call(this,_1688,_1689===this.root?null:_1689,_168a===this.root?null:_168a,bCopy,_168b);if(_168a===this.root){this.onAddToRoot(_1688);}},onAddToRoot:function(item){},onLeaveRoot:function(item){},_requeryTop:function(){var _168c=this.root.children||[];this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(_168d){this.root.children=_168d;if(_168c.length!=_168d.length||dojo.some(_168c,function(item,idx){return _168d[idx]!=item;})){this.onChildrenChange(this.root,_168d);}})});},onNewItem:function(item,_168e){this._requeryTop();this.inherited(arguments);},onDeleteItem:function(item){if(dojo.indexOf(this.root.children,item)!=-1){this._requeryTop();}this.inherited(arguments);},onSetItem:function(item,_168f,_1690,_1691){this._requeryTop();this.inherited(arguments);}});}if(!dojo._hasResource["dijit.tree._dndContainer"]){dojo._hasResource["dijit.tree._dndContainer"]=true;dojo.provide("dijit.tree._dndContainer");dojo.getObject("tree",true,dojo);dijit.tree._compareNodes=function(n1,n2){if(n1===n2){return 0;}if("sourceIndex" in document.documentElement){return n1.sourceIndex-n2.sourceIndex;}else{if("compareDocumentPosition" in document.documentElement){return n1.compareDocumentPosition(n2)&2?1:-1;}else{if(document.createRange){var r1=doc.createRange();r1.setStartBefore(n1);var r2=doc.createRange();r2.setStartBefore(n2);return r1.compareBoundaryPoints(r1.END_TO_END,r2);}else{throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");}}}};dojo.declare("dijit.tree._dndContainer",null,{constructor:function(tree,_1692){this.tree=tree;this.node=tree.domNode;dojo.mixin(this,_1692);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");this.events=[dojo.connect(this.node,"onmouseenter",this,"onOverEvent"),dojo.connect(this.node,"onmouseleave",this,"onOutEvent"),dojo.connect(this.tree,"_onNodeMouseEnter",this,"onMouseOver"),dojo.connect(this.tree,"_onNodeMouseLeave",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",dojo,"stopEvent"),dojo.connect(this.node,"onselectstart",dojo,"stopEvent")];},getItem:function(key){var _1693=this.selection[key],ret={data:_1693,type:["treeNode"]};return ret;},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.node=this.parent=null;},onMouseOver:function(_1694,evt){this.current=_1694;},onMouseOut:function(_1695,evt){this.current=null;},_changeState:function(type,_1696){var _1697="dojoDnd"+type;var state=type.toLowerCase()+"State";dojo.replaceClass(this.node,_1697+_1696,_1697+this[state]);this[state]=_1696;},_addItemClass:function(node,type){dojo.addClass(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){dojo.removeClass(node,"dojoDndItem"+type);},onOverEvent:function(){this._changeState("Container","Over");},onOutEvent:function(){this._changeState("Container","");}});}if(!dojo._hasResource["dijit.tree._dndSelector"]){dojo._hasResource["dijit.tree._dndSelector"]=true;dojo.provide("dijit.tree._dndSelector");dojo.declare("dijit.tree._dndSelector",dijit.tree._dndContainer,{constructor:function(tree,_1698){this.selection={};this.anchor=null;dijit.setWaiState(this.tree.domNode,"multiselect",!this.singular);this.events.push(dojo.connect(this.tree.domNode,"onmousedown",this,"onMouseDown"),dojo.connect(this.tree.domNode,"onmouseup",this,"onMouseUp"),dojo.connect(this.tree.domNode,"onmousemove",this,"onMouseMove"));},singular:false,getSelectedTreeNodes:function(){var nodes=[],sel=this.selection;for(var i in sel){nodes.push(sel[i]);}return nodes;},selectNone:function(){this.setSelection([]);return this;},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null;},addTreeNode:function(node,_1699){this.setSelection(this.getSelectedTreeNodes().concat([node]));if(_1699){this.anchor=node;}return node;},removeTreeNode:function(node){this.setSelection(this._setDifference(this.getSelectedTreeNodes(),[node]));return node;},isTreeNodeSelected:function(node){return node.id&&!!this.selection[node.id];},setSelection:function(_169a){var _169b=this.getSelectedTreeNodes();dojo.forEach(this._setDifference(_169b,_169a),dojo.hitch(this,function(node){node.setSelected(false);if(this.anchor==node){delete this.anchor;}delete this.selection[node.id];}));dojo.forEach(this._setDifference(_169a,_169b),dojo.hitch(this,function(node){node.setSelected(true);this.selection[node.id]=node;}));this._updateSelectionProperties();},_setDifference:function(xs,ys){dojo.forEach(ys,function(y){y.__exclude__=true;});var ret=dojo.filter(xs,function(x){return !x.__exclude__;});dojo.forEach(ys,function(y){delete y["__exclude__"];});return ret;},_updateSelectionProperties:function(){var _169c=this.getSelectedTreeNodes();var paths=[],nodes=[];dojo.forEach(_169c,function(node){nodes.push(node);paths.push(node.getTreePath());});var items=dojo.map(nodes,function(node){return node.item;});this.tree._set("paths",paths);this.tree._set("path",paths[0]||[]);this.tree._set("selectedNodes",nodes);this.tree._set("selectedNode",nodes[0]||null);this.tree._set("selectedItems",items);this.tree._set("selectedItem",items[0]||null);},onMouseDown:function(e){if(!this.current||this.tree.isExpandoNode(e.target,this.current)){return;}if(e.button==dojo.mouseButtons.RIGHT){return;}dojo.stopEvent(e);var _169d=this.current,copy=dojo.isCopyKey(e),id=_169d.id;if(!this.singular&&!e.shiftKey&&this.selection[id]){this._doDeselect=true;return;}else{this._doDeselect=false;}this.userSelect(_169d,copy,e.shiftKey);},onMouseUp:function(e){if(!this._doDeselect){return;}this._doDeselect=false;this.userSelect(this.current,dojo.isCopyKey(e),e.shiftKey);},onMouseMove:function(e){this._doDeselect=false;},userSelect:function(node,multi,range){if(this.singular){if(this.anchor==node&&multi){this.selectNone();}else{this.setSelection([node]);this.anchor=node;}}else{if(range&&this.anchor){var cr=dijit.tree._compareNodes(this.anchor.rowNode,node.rowNode),begin,end,_169e=this.anchor;if(cr<0){begin=_169e;end=node;}else{begin=node;end=_169e;}nodes=[];while(begin!=end){nodes.push(begin);begin=this.tree._getNextNode(begin);}nodes.push(end);this.setSelection(nodes);}else{if(this.selection[node.id]&&multi){this.removeTreeNode(node);}else{if(multi){this.addTreeNode(node,true);}else{this.setSelection([node]);this.anchor=node;}}}}},forInSelectedItems:function(f,o){o=o||dojo.global;for(var id in this.selection){f.call(o,this.getItem(id),id,this);}}});}if(!dojo._hasResource["dijit.Tree"]){dojo._hasResource["dijit.Tree"]=true;dojo.provide("dijit.Tree");dojo.declare("dijit._TreeNode",[dijit._Widget,dijit._Templated,dijit._Container,dijit._Contained,dijit._CssStateMixin],{item:null,isTreeNode:true,label:"",isExpandable:null,isExpanded:false,state:"UNCHECKED",templateString:dojo.cache("dijit","templates/TreeNode.html","<div class=\"dijitTreeNode\" role=\"presentation\"\n\t><div dojoAttachPoint=\"rowNode\" class=\"dijitTreeRow\" role=\"presentation\" dojoAttachEvent=\"onmouseenter:_onMouseEnter, onmouseleave:_onMouseLeave, onclick:_onClick, ondblclick:_onDblClick\"\n\t\t><img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"expandoNode\" class=\"dijitTreeExpando\" role=\"presentation\"\n\t\t/><span dojoAttachPoint=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"\n\t\t></span\n\t\t><span dojoAttachPoint=\"contentNode\"\n\t\t\tclass=\"dijitTreeContent\" role=\"presentation\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"iconNode\" class=\"dijitIcon dijitTreeIcon\" role=\"presentation\"\n\t\t\t/><span dojoAttachPoint=\"labelNode\" class=\"dijitTreeLabel\" role=\"treeitem\" tabindex=\"-1\" aria-selected=\"false\" dojoAttachEvent=\"onfocus:_onLabelFocus\"></span>\n\t\t</span\n\t></div>\n\t<div dojoAttachPoint=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\" style=\"display: none;\"></div>\n</div>\n"),baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow",labelNode:"dijitTreeLabel"},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"labelNode",type:"innerText"},tooltip:{node:"rowNode",type:"attribute",attribute:"title"}}),buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable){dijit.setWaiState(this.labelNode,"expanded",this.isExpanded);}this.setSelected(false);},_setIndentAttr:function(_169f){var _16a0=(Math.max(_169f,0)*this.tree._nodePixelIndent)+"px";dojo.style(this.domNode,"backgroundPosition",_16a0+" 0px");dojo.style(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",_16a0);dojo.forEach(this.getChildren(),function(child){child.set("indent",_169f+1);});this._set("indent",_169f);},markProcessing:function(){this.state="LOADING";this._setExpando(true);},unmarkProcessing:function(){this._setExpando(false);},_updateItemClasses:function(item){var tree=this.tree,model=tree.model;if(tree._v10Compat&&item===model.root){item=null;}this._applyClassAndStyle(item,"icon","Icon");this._applyClassAndStyle(item,"label","Label");this._applyClassAndStyle(item,"row","Row");},_applyClassAndStyle:function(item,lower,upper){var _16a1="_"+lower+"Class";var _16a2=lower+"Node";var _16a3=this[_16a1];this[_16a1]=this.tree["get"+upper+"Class"](item,this.isExpanded);dojo.replaceClass(this[_16a2],this[_16a1]||"",_16a3||"");dojo.style(this[_16a2],this.tree["get"+upper+"Style"](item,this.isExpanded)||{});},_updateLayout:function(){var _16a4=this.getParent();if(!_16a4||_16a4.rowNode.style.display=="none"){dojo.addClass(this.domNode,"dijitTreeIsRoot");}else{dojo.toggleClass(this.domNode,"dijitTreeIsLast",!this.getNextSibling());}},_setExpando:function(_16a5){var _16a6=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],_16a7=["*","-","+","*"],idx=_16a5?0:(this.isExpandable?(this.isExpanded?1:2):3);dojo.replaceClass(this.expandoNode,_16a6[idx],_16a6);this.expandoNodeText.innerHTML=_16a7[idx];},expand:function(){if(this._expandDeferred){return this._expandDeferred;}this._wipeOut&&this._wipeOut.stop();this.isExpanded=true;dijit.setWaiState(this.labelNode,"expanded","true");if(this.tree.showRoot||this!==this.tree.rootNode){dijit.setWaiRole(this.containerNode,"group");}dojo.addClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(this==this.tree.rootNode){dijit.setWaiState(this.tree.domNode,"expanded","true");}var def,_16a8=dojo.fx.wipeIn({node:this.containerNode,duration:dijit.defaultDuration,onEnd:function(){def.callback(true);}});def=(this._expandDeferred=new dojo.Deferred(function(){_16a8.stop();}));_16a8.play();return def;},collapse:function(){if(!this.isExpanded){return;}if(this._expandDeferred){this._expandDeferred.cancel();delete this._expandDeferred;}this.isExpanded=false;dijit.setWaiState(this.labelNode,"expanded","false");if(this==this.tree.rootNode){dijit.setWaiState(this.tree.domNode,"expanded","false");}dojo.removeClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(!this._wipeOut){this._wipeOut=dojo.fx.wipeOut({node:this.containerNode,duration:dijit.defaultDuration});}this._wipeOut.play();},indent:0,setChildItems:function(items){var tree=this.tree,model=tree.model,defs=[];dojo.forEach(this.getChildren(),function(child){dijit._Container.prototype.removeChild.call(this,child);},this);this.state="LOADED";if(items&&items.length>0){this.isExpandable=true;dojo.forEach(items,function(item){var id=model.getIdentity(item),_16a9=tree._itemNodesMap[id],node;if(_16a9){for(var i=0;i<_16a9.length;i++){if(_16a9[i]&&!_16a9[i].getParent()){node=_16a9[i];node.set("indent",this.indent+1);break;}}}if(!node){node=this.tree._createTreeNode({item:item,tree:tree,isExpandable:model.mayHaveChildren(item),label:tree.getLabel(item),tooltip:tree.getTooltip(item),dir:tree.dir,lang:tree.lang,indent:this.indent+1});if(_16a9){_16a9.push(node);}else{tree._itemNodesMap[id]=[node];}}this.addChild(node);if(this.tree.autoExpand||this.tree._state(item)){defs.push(tree._expandNode(node));}},this);dojo.forEach(this.getChildren(),function(child,idx){child._updateLayout();});}else{this.isExpandable=false;}if(this._setExpando){this._setExpando(false);}this._updateItemClasses(this.item);if(this==tree.rootNode){var fc=this.tree.showRoot?this:this.getChildren()[0];if(fc){fc.setFocusable(true);tree.lastFocused=fc;}else{tree.domNode.setAttribute("tabIndex","0");}}return new dojo.DeferredList(defs);},getTreePath:function(){var node=this;var path=[];while(node&&node!==this.tree.rootNode){path.unshift(node.item);node=node.getParent();}path.unshift(this.tree.rootNode.item);return path;},getIdentity:function(){return this.tree.model.getIdentity(this.item);},removeChild:function(node){this.inherited(arguments);var _16aa=this.getChildren();if(_16aa.length==0){this.isExpandable=false;this.collapse();}dojo.forEach(_16aa,function(child){child._updateLayout();});},makeExpandable:function(){this.isExpandable=true;this._setExpando(false);},_onLabelFocus:function(evt){this.tree._onNodeFocus(this);},setSelected:function(_16ab){dijit.setWaiState(this.labelNode,"selected",_16ab);dojo.toggleClass(this.rowNode,"dijitTreeRowSelected",_16ab);},setFocusable:function(_16ac){this.labelNode.setAttribute("tabIndex",_16ac?"0":"-1");},_onClick:function(evt){this.tree._onClick(this,evt);},_onDblClick:function(evt){this.tree._onDblClick(this,evt);},_onMouseEnter:function(evt){this.tree._onNodeMouseEnter(this,evt);},_onMouseLeave:function(evt){this.tree._onNodeMouseLeave(this,evt);}});dojo.declare("dijit.Tree",[dijit._Widget,dijit._Templated],{store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:false,openOnDblClick:false,templateString:dojo.cache("dijit","templates/Tree.html","<div class=\"dijitTree dijitTreeContainer\" role=\"tree\"\n\tdojoAttachEvent=\"onkeypress:_onKeyPress\">\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" dojoAttachPoint=\"indentDetector\"></div>\n</div>\n"),persist:true,autoExpand:false,dndController:"dijit.tree._dndSelector",dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(_16ad,_16ae){dojo.publish(this.id,[dojo.mixin({tree:this,event:_16ad},_16ae||{})]);},postMixInProperties:function(){this.tree=this;if(this.autoExpand){this.persist=false;}this._itemNodesMap={};if(!this.cookieName){this.cookieName=this.id+"SaveStateCookie";}this._loadDeferred=new dojo.Deferred();this.inherited(arguments);},postCreate:function(){this._initState();if(!this.model){this._store2model();}this.connect(this.model,"onChange","_onItemChange");this.connect(this.model,"onChildrenChange","_onItemChildrenChange");this.connect(this.model,"onDelete","_onItemDelete");this._load();this.inherited(arguments);if(this.dndController){if(dojo.isString(this.dndController)){this.dndController=dojo.getObject(this.dndController);}var _16af={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_16af[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController(this,_16af);}},_store2model:function(){this._v10Compat=true;dojo.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var _16b0={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){_16b0.mayHaveChildren=dojo.hitch(this,"mayHaveChildren");}if(this.params.getItemChildren){_16b0.getChildren=dojo.hitch(this,function(item,_16b1,_16b2){this.getItemChildren((this._v10Compat&&item===this.model.root)?null:item,_16b1,_16b2);});}this.model=new dijit.tree.ForestStoreModel(_16b0);this.showRoot=Boolean(this.label);},onLoad:function(){},_load:function(){this.model.getRoot(dojo.hitch(this,function(item){var rn=(this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item),indent:this.showRoot?0:-1}));if(!this.showRoot){rn.rowNode.style.display="none";dijit.setWaiRole(this.domNode,"presentation");dijit.setWaiRole(rn.labelNode,"presentation");dijit.setWaiRole(rn.containerNode,"tree");}this.domNode.appendChild(rn.domNode);var _16b3=this.model.getIdentity(item);if(this._itemNodesMap[_16b3]){this._itemNodesMap[_16b3].push(rn);}else{this._itemNodesMap[_16b3]=[rn];}rn._updateLayout();this._expandNode(rn).addCallback(dojo.hitch(this,function(){this._loadDeferred.callback(true);this.onLoad();}));}),function(err){console.error(this,": error loading root: ",err);});},getNodesByItem:function(item){if(!item){return [];}var _16b4=dojo.isString(item)?item:this.model.getIdentity(item);return [].concat(this._itemNodesMap[_16b4]);},_setSelectedItemAttr:function(item){this.set("selectedItems",[item]);},_setSelectedItemsAttr:function(items){var tree=this;this._loadDeferred.addCallback(dojo.hitch(this,function(){var _16b5=dojo.map(items,function(item){return (!item||dojo.isString(item))?item:tree.model.getIdentity(item);});var nodes=[];dojo.forEach(_16b5,function(id){nodes=nodes.concat(tree._itemNodesMap[id]||[]);});this.set("selectedNodes",nodes);}));},_setPathAttr:function(path){if(path.length){return this.set("paths",[path]);}else{return this.set("paths",[]);}},_setPathsAttr:function(paths){var tree=this;return new dojo.DeferredList(dojo.map(paths,function(path){var d=new dojo.Deferred();path=dojo.map(path,function(item){return dojo.isString(item)?item:tree.model.getIdentity(item);});if(path.length){tree._loadDeferred.addCallback(function(){_16b6(path,[tree.rootNode],d);});}else{d.errback("Empty path");}return d;})).addCallback(_16b7);function _16b6(path,nodes,def){var _16b8=path.shift();var _16b9=dojo.filter(nodes,function(node){return node.getIdentity()==_16b8;})[0];if(!!_16b9){if(path.length){tree._expandNode(_16b9).addCallback(function(){_16b6(path,_16b9.getChildren(),def);});}else{def.callback(_16b9);}}else{def.errback("Could not expand path at "+_16b8);}};function _16b7(_16ba){tree.set("selectedNodes",dojo.map(dojo.filter(_16ba,function(x){return x[0];}),function(x){return x[1];}));};},_setSelectedNodeAttr:function(node){this.set("selectedNodes",[node]);},_setSelectedNodesAttr:function(nodes){this._loadDeferred.addCallback(dojo.hitch(this,function(){this.dndController.setSelection(nodes);}));},mayHaveChildren:function(item){},getItemChildren:function(_16bb,_16bc){},getLabel:function(item){return this.model.getLabel(item);},getIconClass:function(item,_16bd){return (!item||this.model.mayHaveChildren(item))?(_16bd?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf";},getLabelClass:function(item,_16be){},getRowClass:function(item,_16bf){},getIconStyle:function(item,_16c0){},getLabelStyle:function(item,_16c1){},getRowStyle:function(item,_16c2){},getTooltip:function(item){return "";},_onKeyPress:function(e){if(e.altKey){return;}var dk=dojo.keys;var _16c3=dijit.getEnclosingWidget(e.target);if(!_16c3){return;}var key=e.charOrCode;if(typeof key=="string"&&key!=" "){if(!e.altKey&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey){this._onLetterKeyNav({node:_16c3,key:key.toLowerCase()});dojo.stopEvent(e);}}else{if(this._curSearch){clearTimeout(this._curSearch.timer);delete this._curSearch;}var map=this._keyHandlerMap;if(!map){map={};map[dk.ENTER]="_onEnterKey";map[dk.SPACE]=map[" "]="_onEnterKey";map[this.isLeftToRight()?dk.LEFT_ARROW:dk.RIGHT_ARROW]="_onLeftArrow";map[this.isLeftToRight()?dk.RIGHT_ARROW:dk.LEFT_ARROW]="_onRightArrow";map[dk.UP_ARROW]="_onUpArrow";map[dk.DOWN_ARROW]="_onDownArrow";map[dk.HOME]="_onHomeKey";map[dk.END]="_onEndKey";this._keyHandlerMap=map;}if(this._keyHandlerMap[key]){this[this._keyHandlerMap[key]]({node:_16c3,item:_16c3.item,evt:e});dojo.stopEvent(e);}}},_onEnterKey:function(_16c4){this._publish("execute",{item:_16c4.item,node:_16c4.node});this.dndController.userSelect(_16c4.node,dojo.isCopyKey(_16c4.evt),_16c4.evt.shiftKey);this.onClick(_16c4.item,_16c4.node,_16c4.evt);},_onDownArrow:function(_16c5){var node=this._getNextNode(_16c5.node);if(node&&node.isTreeNode){this.focusNode(node);}},_onUpArrow:function(_16c6){var node=_16c6.node;var _16c7=node.getPreviousSibling();if(_16c7){node=_16c7;while(node.isExpandable&&node.isExpanded&&node.hasChildren()){var _16c8=node.getChildren();node=_16c8[_16c8.length-1];}}else{var _16c9=node.getParent();if(!(!this.showRoot&&_16c9===this.rootNode)){node=_16c9;}}if(node&&node.isTreeNode){this.focusNode(node);}},_onRightArrow:function(_16ca){var node=_16ca.node;if(node.isExpandable&&!node.isExpanded){this._expandNode(node);}else{if(node.hasChildren()){node=node.getChildren()[0];if(node&&node.isTreeNode){this.focusNode(node);}}}},_onLeftArrow:function(_16cb){var node=_16cb.node;if(node.isExpandable&&node.isExpanded){this._collapseNode(node);}else{var _16cc=node.getParent();if(_16cc&&_16cc.isTreeNode&&!(!this.showRoot&&_16cc===this.rootNode)){this.focusNode(_16cc);}}},_onHomeKey:function(){var node=this._getRootOrFirstNode();if(node){this.focusNode(node);}},_onEndKey:function(_16cd){var node=this.rootNode;while(node.isExpanded){var c=node.getChildren();node=c[c.length-1];}if(node&&node.isTreeNode){this.focusNode(node);}},multiCharSearchDuration:250,_onLetterKeyNav:function(_16ce){var cs=this._curSearch;if(cs){cs.pattern=cs.pattern+_16ce.key;clearTimeout(cs.timer);}else{cs=this._curSearch={pattern:_16ce.key,startNode:_16ce.node};}var self=this;cs.timer=setTimeout(function(){delete self._curSearch;},this.multiCharSearchDuration);var node=cs.startNode;do{node=this._getNextNode(node);if(!node){node=this._getRootOrFirstNode();}}while(node!==cs.startNode&&(node.label.toLowerCase().substr(0,cs.pattern.length)!=cs.pattern));if(node&&node.isTreeNode){if(node!==cs.startNode){this.focusNode(node);}}},isExpandoNode:function(node,_16cf){return dojo.isDescendant(node,_16cf.expandoNode);},_onClick:function(_16d0,e){var _16d1=e.target,_16d2=this.isExpandoNode(_16d1,_16d0);if((this.openOnClick&&_16d0.isExpandable)||_16d2){if(_16d0.isExpandable){this._onExpandoClick({node:_16d0});}}else{this._publish("execute",{item:_16d0.item,node:_16d0,evt:e});this.onClick(_16d0.item,_16d0,e);this.focusNode(_16d0);}dojo.stopEvent(e);},_onDblClick:function(_16d3,e){var _16d4=e.target,_16d5=(_16d4==_16d3.expandoNode||_16d4==_16d3.expandoNodeText);if((this.openOnDblClick&&_16d3.isExpandable)||_16d5){if(_16d3.isExpandable){this._onExpandoClick({node:_16d3});}}else{this._publish("execute",{item:_16d3.item,node:_16d3,evt:e});this.onDblClick(_16d3.item,_16d3,e);this.focusNode(_16d3);}dojo.stopEvent(e);},_onExpandoClick:function(_16d6){var node=_16d6.node;var _16d7=true;if(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed){_16d7=!(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed);}if(_16d7){this.focusNode(node);}if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}},onClick:function(item,node,evt){},onDblClick:function(item,node,evt){},onOpen:function(item,node){},onClose:function(item,node){},_getNextNode:function(node){if(node.isExpandable&&node.isExpanded&&node.hasChildren()){return node.getChildren()[0];}else{while(node&&node.isTreeNode){var _16d8=node.getNextSibling();if(_16d8){return _16d8;}node=node.getParent();}return null;}},_getRootOrFirstNode:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0];},_collapseNode:function(node){if(node._expandNodeDeferred){delete node._expandNodeDeferred;}if(node.isExpandable){if(node.state=="LOADING"){return;}node.collapse();this.onClose(node.item,node);if(node.item){this._state(node.item,false);this._saveState();}}},_expandNode:function(node,_16d9){if(node._expandNodeDeferred&&!_16d9){return node._expandNodeDeferred;}var model=this.model,item=node.item,_16da=this;switch(node.state){case "UNCHECKED":node.markProcessing();var def=(node._expandNodeDeferred=new dojo.Deferred());model.getChildren(item,function(items){node.unmarkProcessing();var scid=node.setChildItems(items);var ed=_16da._expandNode(node,true);scid.addCallback(function(){ed.addCallback(function(){def.callback();});});},function(err){console.error(_16da,": error loading root children: ",err);});break;default:def=(node._expandNodeDeferred=node.expand());this.onOpen(node.item,node);if(item){this._state(item,true);this._saveState();}}return def;},focusNode:function(node){dijit.focus(node.labelNode);},_onNodeFocus:function(node){if(node&&node!=this.lastFocused){if(this.lastFocused&&!this.lastFocused._destroyed){this.lastFocused.setFocusable(false);}node.setFocusable(true);this.lastFocused=node;}},_onNodeMouseEnter:function(node){},_onNodeMouseLeave:function(node){},_onItemChange:function(item){var model=this.model,_16db=model.getIdentity(item),nodes=this._itemNodesMap[_16db];if(nodes){var label=this.getLabel(item),_16dc=this.getTooltip(item);dojo.forEach(nodes,function(node){node.set({item:item,label:label,tooltip:_16dc});node._updateItemClasses(item);});}},_onItemChildrenChange:function(_16dd,_16de){var model=this.model,_16df=model.getIdentity(_16dd),_16e0=this._itemNodesMap[_16df];if(_16e0){dojo.forEach(_16e0,function(_16e1){_16e1.setChildItems(_16de);});}},_onItemDelete:function(item){var model=this.model,_16e2=model.getIdentity(item),nodes=this._itemNodesMap[_16e2];if(nodes){dojo.forEach(nodes,function(node){this.dndController.removeTreeNode(node);var _16e3=node.getParent();if(_16e3){_16e3.removeChild(node);}node.destroyRecursive();},this);delete this._itemNodesMap[_16e2];}},_initState:function(){if(this.persist){var _16e4=dojo.cookie(this.cookieName);this._openedItemIds={};if(_16e4){dojo.forEach(_16e4.split(","),function(item){this._openedItemIds[item]=true;},this);}}},_state:function(item,_16e5){if(!this.persist){return false;}var id=this.model.getIdentity(item);if(arguments.length===1){return this._openedItemIds[id];}if(_16e5){this._openedItemIds[id]=true;}else{delete this._openedItemIds[id];}},_saveState:function(){if(!this.persist){return;}var ary=[];for(var id in this._openedItemIds){ary.push(id);}dojo.cookie(this.cookieName,ary.join(","),{expires:365});},destroy:function(){if(this._curSearch){clearTimeout(this._curSearch.timer);delete this._curSearch;}if(this.rootNode){this.rootNode.destroyRecursive();}if(this.dndController&&!dojo.isString(this.dndController)){this.dndController.destroy();}this.rootNode=null;this.inherited(arguments);},destroyRecursive:function(){this.destroy();},resize:function(_16e6){if(_16e6){dojo.marginBox(this.domNode,_16e6);}this._nodePixelIndent=dojo._getMarginSize(this.tree.indentDetector).w;if(this.tree.rootNode){this.tree.rootNode.set("indent",this.showRoot?0:-1);}},_createTreeNode:function(args){return new dijit._TreeNode(args);}});}if(!dojo._hasResource["misys.widget.Tree"]){dojo._hasResource["misys.widget.Tree"]=true;dojo.provide("misys.widget.Tree");dojo.experimental("misys.widget.Tree");dojo.declare("misys.widget.Tree",[dijit.Tree],{onLoadId:0,parentId:"",childId:"",rootIdTree:"",onLoad:function(){this.onLoadOpen();},onLoadOpen:function(){if(this.onLoadId>0){var _16e7=this._itemNodesMap[this.onLoadId];var _16e8=_16e7[0].domNode;if(_16e7[0].isExpandable){this._onExpandoClick({node:_16e7[0]});}}if(this.parentId!==null&&this.parentId!==""){var array=[];var _16e9=[];_16e9.push(this.rootIdTree);_16e9.push(this.parentId);if(this.childId!=="0"){_16e9.push(this.childId);}array.push(_16e9);this.set("paths",array);}},onClick:function(item,node,evt){if(item.url){document.location.href=item.url;}else{if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}}},_onClick:function(_16ea,e){var evt=e;var _16eb=_16ea.item.url;if(_16eb!==""&&_16eb!=undefined){if(misys.isPopupRequired()){dojo.stopEvent(evt);misys.showUnsavedDataDialog();var _16ec=dojo.connect(misys,"setUnsavedDataOption",function(){if(misys.unsavedDataOption!=="notset"){var _16ed="";if(misys.unsavedDataOption=="save"){misys.saveAsync(_16eb);this.inherited(arguments);}else{if(_16eb!==""&&_16ed===""&&misys.unsavedDataOption=="nosave"){location.href=_16eb;this.inherited(arguments);}}}dojo.disconnect(_16ec);});}else{this.inherited(arguments);}}else{this.inherited(arguments);}}});}dojo.i18n._preloadLocalizations("dojo.nls.misys_common",["ROOT","ar","ar-ar","de","de-de","el","el-el","en","en-gb","en-us","fr","fr-fr","pt","pt-br","th","th-th","xx","zh","zh-cn"]);
