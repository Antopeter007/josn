/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.openaccount.financing_request_ip"]){dojo._hasResource["misys.binding.openaccount.financing_request_ip"]=true;dojo.provide("misys.binding.openaccount.financing_request_ip");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.TooltipDialog");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.form.FilteringSelect");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.form.file");dojo.require("misys.widget.Collaboration");dojo.require("misys.form.PercentNumberTextBox");(function(d,dj,m){d.mixin(m._config,{initReAuthParams:function(){var _1={productCode:dj.byId("product_code").get("value"),subProductCode:dj.byId("sub_product_code")?dj.byId("sub_product_code").get("value"):"",transactionTypeCode:"63",entity:dj.byId("entity")?dj.byId("entity").get("value"):"",currency:dj.byId("finance_requested_cur_code")?dj.byId("finance_requested_cur_code").get("value"):"",amount:m.trimAmount(dj.byId("finance_requested_amt")?dj.byId("finance_requested_amt").get("value"):""),es_field1:m.trimAmount(dj.byId("finance_requested_amt")?dj.byId("finance_requested_amt").get("value"):""),es_field2:""};return _1;}});d.mixin(m,{bind:function(){m.connect("request_no","onClick",function(){if(dj.byId("inv_eligible_cur_code")){dj.byId("inv_eligible_cur_code").set("value",dj.byId("total_net_amt").get("value"));}if(dj.byId("inv_eligible_pct")){dj.byId("inv_eligible_pct").set("value","");dj.byId("inv_eligible_pct").set("required",true);}if(dj.byId("finance_requested_amt")){dj.byId("finance_requested_amt").set("value","");dj.byId("finance_requested_amt").set("required",false);}if(dj.byId("liab_total_net_amt")){dj.byId("liab_total_net_amt").set("value","");dj.byId("liab_total_net_amt").set("required",false);}});if(dj.byId("inv_eligible_cur_code")){m.setCurrency(inv_eligible_cur_code,["inv_eligible_amt"]);}m.connect("inv_eligible_pct","onChange",function(){if(this.get("value")!==null&&!isNaN(this.get("value"))&&parseFloat(this.get("value"))<=100&&parseFloat(this.get("value"))>0){var _2=parseFloat(dj.byId("invoice_outstanding_amt").get("value").replaceAll(",",""));var _3,_4;var _5=dj.byId("cashCustomizationEnable").get("value");if(_5==="true"&&dj.byId("total_discount")&&dj.byId("total_discount").get("value")!=null){var _6=parseFloat(dj.byId("total_discount").get("value").replace(",",""));_2=_2-_6;_3=(parseFloat(this.get("value"))*_2)/100;}else{_3=(parseFloat(this.get("value"))*_2)/100;}dj.byId("finance_requested_amt").set("value",_3);dj.byId("liab_total_net_amt").set("value",_2);}else{displayMessage=misys.getLocalization("incorrectPercentage");dj.byId("finance_requested_amt").set("value","");dj.byId("liab_total_net_amt").set("value","");this.set("value","");this.set("state","Error");m.dialog.show("ERROR",m.getLocalization("focusOnErrorAlert"));m._config.onSubmitErrorMsg=m.getLocalization("focusOnErrorAlert");dj.hideTooltip(this.domNode);dj.showTooltip(displayMessage,this.domNode,0);}m.setCurrency(dj.byId("finance_requested_cur_code"),["finance_requested_amt"]);m.setCurrency(dj.byId("liab_total_net_cur_code"),["liab_total_net_amt"]);});},onFormLoad:function(){m.setCurrency(dj.byId("finance_requested_cur_code"),["finance_requested_amt"]);m.setCurrency(dj.byId("liab_total_net_cur_code"),["liab_total_net_amt"]);},beforeSubmitValidations:function(){var _7=true;var _8="";var _9=dj.byId("free_format_text");var _a=dj.byId("product_code");if((_a&&_a.get("value")=="IP")&&(_9&&dojo.string.trim(_9.get("value"))==="")){_9.set("required",true);_9.focus();_7=false;}else{_7=true;}m._config.onSubmitErrorMsg=_8;return _7;}});})(dojo,dijit,misys);dojo.require("misys.client.binding.openaccount.financing_request_ip_client");}