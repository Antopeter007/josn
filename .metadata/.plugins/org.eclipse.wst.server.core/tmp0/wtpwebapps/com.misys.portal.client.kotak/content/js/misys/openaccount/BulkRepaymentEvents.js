/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.openaccount.BulkRepaymentEvents"]){dojo._hasResource["misys.openaccount.BulkRepaymentEvents"]=true;dojo.provide("misys.openaccount.BulkRepaymentEvents");dojo.require("misys.validation.common");(function(d,dj,m){d.mixin(m,{getFinancesForBulkRepayment:function(_1,_2,_3){if(_1==="IN"){m.showSearchDialog("bulk_repay","['invoice_ref_id', 'entity', 'program_name','seller_name','buyer_name', 'total_net_cur_code', 'finance_amt', 'outstanding_repayment_amt', 'fin_date', 'fin_due_date','prod_stat_code']",{product_code:_1,entity:_2,customer_reference:_3},"",_1,"width:1250px;height:400px;",m.getLocalization("ListOfFinancesTitleMessage"));}else{if(_1==="IP"){m.showSearchDialog("bulk_repay","['invoice_payable_ref_id', 'entity', 'program_name','seller_name','buyer_name', 'total_net_cur_code', 'finance_amt', 'outstanding_repayment_amt', 'fin_date', 'fin_due_date','prod_stat_code']",{product_code:_1,entity:_2,customer_reference:_3},"",_1,"width:1250px;height:400px;",m.getLocalization("ListOfFinancesTitleMessage"));}}},getFinancesForBulkRepayFiltered:function(_4){var _5;if(dj.byId("issuing_bank_customer_reference")){_5=dj.byId("issuing_bank_customer_reference").get("value");}if(!_5){misys.dialog.show("ERROR",misys.getLocalization("customerReferenceRequiredForBulkFinancingSearch"));return;}var _6;if(dj.byId("curCode")){_6=dj.byId("curCode").get("value");}if(!m.validateCurrencyCode(_6)){misys.dialog.show("ERROR",misys.getLocalization("invalidCurrencyError",[_6]));return;}var _7;var _8;var _9;var _a;if(dj.byId("finance_amount_from")){_b=dj.byId("finance_amount_from");}if(dj.byId("finance_amount_to")){_c=dj.byId("finance_amount_to");}if(dj.byId("os_repay_amount_from")){_d=dj.byId("os_repay_amount_from");}if(dj.byId("os_repay_amount_to")){_e=dj.byId("os_repay_amount_to");}if(dj.byId("finance_date_from")){_7=dj.byId("finance_date_from");}if(dj.byId("finance_date_to")){_8=dj.byId("finance_date_to");}if(dj.byId("finance_due_date_from")){_9=dj.byId("finance_due_date_from");}if(dj.byId("finance_due_date_to")){_a=dj.byId("finance_due_date_to");}if((_c&&_c.get("value")!==null&&_b&&_b.get("value")!==null)&&_c.get("value")<_b.get("value")){misys.dialog.show("ERROR",misys.getLocalization("invalidMaxAmountValueError",[_c.get("displayedValue"),_b.get("displayedValue")]));}if((_e&&_e.get("value")!==null&&_d&&_d.get("value")!==null)&&_e.get("value")<_d.get("value")){misys.dialog.show("ERROR",misys.getLocalization("invalidMaxAmountValueError",[_e.get("displayedValue"),_d.get("displayedValue")]));}if((_8&&_8.get("value")!==null&&_7&&_7.get("value")!==null)&&(d.date.compare(_8.get("value"),_7.get("value"))<0)){misys.dialog.show("ERROR",misys.getLocalization("financeDateToGreaterThanDateFromError",[_8.get("displayedValue"),_7.get("displayedValue")]));}if((_a&&_a.get("value")!==null&&_9&&_9.get("value")!==null)&&(d.date.compare(_a.get("value"),_9.get("value"))<0)){misys.dialog.show("ERROR",misys.getLocalization("financeDueDateToGreaterThanDueDateFromError",[_a.get("displayedValue"),_9.get("displayedValue")]));}var _f="";var _10;if(_4==="IP"&&dj.byId("invoicePayablesGrid")&&dj.byId("invoicePayablesGrid").store&&dj.byId("invoicePayablesGrid").store._arrayOfAllItems&&(dj.byId("invoicePayablesGrid").store._arrayOfAllItems.length>0)){_10=dj.byId("invoicePayablesGrid").store._arrayOfAllItems;for(var i=0;i<_10.length;i++){if(_10[i]&&_10[i]["REFERENCEID"]){_f=_f+_10[i]["REFERENCEID"]+",";}}}else{if(_4==="IN"&&dj.byId("invoicesGrid")&&dj.byId("invoicesGrid").store&&dj.byId("invoicesGrid").store._arrayOfAllItems&&(dj.byId("invoicesGrid").store._arrayOfAllItems.length>0)){_10=dj.byId("invoicesGrid").store._arrayOfAllItems;for(var j=0;j<_10.length;j++){if(_10[j]&&_10[j]["REFERENCEID"]){_f=_f+_10[j]["REFERENCEID"]+",";}}}}var _11;var _12;var _13;var _14;var _15;var _b;var _c;var _d;var _e;var _16;var _17;var _18;if(dj.byId("ref_id")){_11=dj.byId("ref_id").get("value");}if(_4==="IP"&&dj.byId("invoice_payable_ref_id")){_13=dj.byId("invoice_payable_ref_id").get("value");}if(_4==="IN"&&dj.byId("invoice_ref_id")){_13=dj.byId("invoice_ref_id").get("value");}if(dj.byId("seller_name")){_14=dj.byId("seller_name").get("value");}if(dj.byId("buyer_name")){_15=dj.byId("buyer_name").get("value");}if(dj.byId("finance_amount_from")){_b=dj.byId("finance_amount_from");}if(dj.byId("finance_amount_to")){_c=dj.byId("finance_amount_to");}if(dj.byId("os_repay_amount_from")){_d=dj.byId("os_repay_amount_from");}if(dj.byId("os_repay_amount_to")){_e=dj.byId("os_repay_amount_to");}if(dj.byId("entity")){_16=dj.byId("entity").get("value");}if(dj.byId("issuer_ref_id")){_17=dj.byId("issuer_ref_id").get("value");}if(dj.byId("program_name")){_18=dj.byId("program_name").get("value");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetStaticData"),handleAs:"json",sync:true,content:{option:"bulk_repay",product_code:_4,invoice_ref_id:_13,seller_name:_14,buyer_name:_15,curcode:_6,finance_amount_from:_b,finance_amount_to:_c,os_repay_amount_from:_d,os_repay_amount_to:_e,finance_date_from:_7,finance_date_to:_8,finance_due_date_from:_9,finance_due_date_to:_a,invoiceRefIDList:_f,entity:_16,customer_reference:_5,program_name:_18,issuer_ref_id:_17},load:function(_19){if(_4==="IN"){m._showFilteredInvoicesForBulkRepay(_19);}else{if(_4==="IP"){m._showFilteredInvoicePayablesForBulkRepay(_19);}}}});},_showFilteredInvoicesForBulkRepay:function(_1a){var _1b=dj.byId("bulk_repaydata_grid");var _1c=new dojo.data.ItemFileWriteStore({data:{"identifier":"REFERENCEID","items":[]}});if(_1a.items.length>0){var _1d=_1a.items;if(_1d.length>0){for(var i=0;i<_1d.length;i++){var _1e=_1d[i];if(_1e!==null){var _1f=m.createInvoiceRepaymentItem(_1e);_1c.newItem(_1f);}}}if(_1b){_1b.setStore(_1c);dojo.style(_1b.domNode,"display","");_1b.resize();}}else{_1b.setStore(_1c);dojo.style(_1b.domNode,"display","");_1b.resize();_1b.render();}},processInvoiceRepayRecords:function(_20){var _21=dj.byId("invoicesGrid");var _22=new dojo.data.ItemFileWriteStore({data:{"identifier":"REFERENCEID","items":[]}});var _23=[];if(_21&&_21.store&&_21.store._arrayOfTopLevelItems.length>0){_21.store.fetch({query:{REFERENCEID:"*"},onComplete:function(_24,_25){dojo.forEach(_24,function(_26){var _27=m.createInvoiceRepaymentItem(_26);_22.newItem(_27);_23.push(_26);});}});}var _28=_20.selection.getSelected();if(_28.length>0){for(var i=0;i<_28.length;i++){var _29=false;var _2a="";var _2b={};var _2c=_28[i];if(_2c!==null){var _2d=m.createInvoiceRepaymentItem(_2c);if(_23.length>0){for(var t=0;t<_23.length;t++){if(_23[t].REFERENCEID.slice().toString()===_2c.REFERENCEID.slice().toString()){_29=true;}}if(!_29){_22.newItem(_2d);}}else{_22.newItem(_2d);}}}if(_21){_21.setStore(_22);dojo.style(_21.domNode,"display","");_21.resize();}dj.byId("xhrDialog").hide();}else{misys.dialog.show("ERROR",misys.getLocalization("invoicePayableShouldBeSelected"));}},createInvoiceRepaymentItem:function(_2e){var _2f=_2e.REFERENCEID.slice().toString();var _30=_2e.INVOICE_REFERENCE_LABEL.slice().toString();var _31=_2e.PROGRAM_NAME.slice().toString();var _32=_2e.BUYER_NAME.slice().toString();var _33=_2e.SELLER_NAME.slice().toString();var _34=_2e.CURCODE.slice().toString();var _35=_2e.FINANCE_AMOUNT;var _36=_2e.INVOICE_AMOUNT;var _37=_2e.OUTSTANDING_REPAY_AMOUNT;var _38=_2e.TOTAL_REPAID_AMOUNT;var _39=_2e.FINANCE_ISSUE_DATE.slice().toString();var _3a=_2e.FINANCE_DUE_DATE.slice().toString();var _3b=_2e.STATUS;var _3c="";if(d.byId("delete_icon")!=null&&d.byId("delete_icon")){_3c=d.byId("delete_icon").value;}var _3d="<img src="+_3c+" onClick =\"javascript:misys.deleteItemFromBulkGrid('invoicesGrid','"+_2e.REFERENCEID+"')\"/>";var _3e={"REFERENCEID":_2f,"INVOICE_REFERENCE_LABEL":_30,"PROGRAM_NAME":_31,"ACTION":_3d,"BUYER_NAME":_32,"SELLER_NAME":_33,"CURCODE":_34,"FINANCE_AMOUNT":_35,"INVOICE_AMOUNT":_36,"OUTSTANDING_REPAY_AMOUNT":_37,"TOTAL_REPAID_AMOUNT":_38,"FINANCE_ISSUE_DATE":_39,"FINANCE_DUE_DATE":_3a,"STATUS":_3b};return _3e;},deleteItemFromBulkGrid:function(_3f,ref){var _40=[];dj.byId(_3f).store.fetch({query:{REFERENCEID:"*"},onComplete:dojo.hitch(dj.byId(_3f),function(_41,_42){dojo.forEach(_41,function(_43){if(_43.REFERENCEID.slice().toString()===ref.slice().toString()){dj.byId(_3f).store.deleteItem(_43);}});})});dj.byId(_3f).resize();dj.byId(_3f).render();},getFinancesSelectedForBulkRepayment:function(_44){var _45;if(dj.byId("ref_id")){_45=dj.byId("ref_id").get("value");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetStaticData"),handleAs:"json",sync:true,content:{option:"bulk_repay_linked",product_code:_44,bulk_ref_id:_45},load:function(_46){if(_44==="IN"){m._showSelectedInvoicesForBulkRepayment(_46);}else{if(_44==="IP"){m._showSelectedInvoicePayablesForBulkRepayment(_46);}}}});},_showSelectedInvoicesForBulkRepayment:function(_47){var _48=dj.byId("invoicesGrid");var _49=new dojo.data.ItemFileWriteStore({data:{"identifier":"REFERENCEID","items":[]}});if(_47.items.length>0){var _4a=_47.items;if(_4a.length>0){for(var i=0;i<_4a.length;i++){var _4b=_4a[i];if(_4b!==null){var _4c=m.createInvoiceRepaymentItem(_4b);_49.newItem(_4c);}}}if(_48){_48.setStore(_49);dojo.style(_48.domNode,"display","");_48.resize();}}else{_48.setStore(_49);dojo.style(_48.domNode,"display","");_48.resize();_48.render();}},_showSelectedInvoicePayablesForBulkRepayment:function(_4d){var _4e=dj.byId("invoicePayablesGrid");var _4f=new dojo.data.ItemFileWriteStore({data:{"identifier":"REFERENCEID","items":[]}});if(_4d.items.length>0){var _50=_4d.items;if(_50.length>0){for(var i=0;i<_50.length;i++){var _51=_50[i];if(_51!==null){var _52=m.createInvoicePayableRepaymentItem(_51);_4f.newItem(_52);}}}if(_4e){_4e.setStore(_4f);dojo.style(_4e.domNode,"display","");_4e.resize();}}else{_4e.setStore(_4f);dojo.style(_4e.domNode,"display","");_4e.resize();_4e.render();}},validateRepayDate:function(){var _53=dj.byId("bk_repay_date");if(!dj.byId("bk_repay_date").get("value")){return true;}var _54=new Date();_54.setHours(0,0,0,0);var _55=d.date.compare(m.localizeDate(_53),_54)<0?false:true;if(!_55){this.invalidMessage=m.getLocalization("repayDateNotGreaterThanCurrentDate");dj.hideTooltip(_53.domNode);dj.showTooltip(this.invalidMessage,_53.domNode,0);return false;}return true;},_showFilteredInvoicePayablesForBulkRepay:function(_56){var _57=dj.byId("bulk_repaydata_grid");var _58=new dojo.data.ItemFileWriteStore({data:{"identifier":"REFERENCEID","items":[]}});if(_56.items.length>0){var _59=_56.items;if(_59.length>0){for(var i=0;i<_59.length;i++){var _5a=_59[i];if(_5a!==null){var _5b=m.createInvoicePayableRepaymentItem(_5a);_58.newItem(_5b);}}}if(_57){_57.setStore(_58);dojo.style(_57.domNode,"display","");_57.resize();}}else{_57.setStore(_58);dojo.style(_57.domNode,"display","");_57.resize();_57.render();}},createInvoicePayableRepaymentItem:function(_5c){var _5d=_5c.REFERENCEID.slice().toString();var _5e=_5c.INVOICE_REFERENCE_LABEL.slice().toString();var _5f=_5c.PROGRAM_NAME.slice().toString();var _60=_5c.BUYER_NAME.slice().toString();var _61=_5c.SELLER_NAME.slice().toString();var _62=_5c.CURCODE.slice().toString();var _63=_5c.FINANCE_AMOUNT;var _64=_5c.INVOICE_AMOUNT;var _65=_5c.OUTSTANDING_REPAY_AMOUNT;var _66=_5c.TOTAL_REPAID_AMOUNT;var _67=_5c.FINANCE_ISSUE_DATE.slice().toString();var _68=_5c.FINANCE_DUE_DATE.slice().toString();var _69=_5c.STATUS;var _6a="";if(d.byId("delete_icon")!=null&&d.byId("delete_icon")){_6a=d.byId("delete_icon").value;}var _6b="<img src="+_6a+" onClick =\"javascript:misys.deleteItemFromBulkGrid('invoicePayablesGrid','"+_5c.REFERENCEID+"')\"/>";var _6c={"REFERENCEID":_5d,"INVOICE_REFERENCE_LABEL":_5e,"PROGRAM_NAME":_5f,"ACTION":_6b,"BUYER_NAME":_60,"SELLER_NAME":_61,"CURCODE":_62,"FINANCE_AMOUNT":_63,"INVOICE_AMOUNT":_64,"OUTSTANDING_REPAY_AMOUNT":_65,"TOTAL_REPAID_AMOUNT":_66,"FINANCE_ISSUE_DATE":_67,"FINANCE_DUE_DATE":_68,"STATUS":_69};return _6c;},processInvoicePayableRepayRecords:function(_6d){var _6e=dj.byId("invoicePayablesGrid");var _6f=new dojo.data.ItemFileWriteStore({data:{"identifier":"REFERENCEID","items":[]}});var _70=[];if(_6e&&_6e.store&&_6e.store._arrayOfTopLevelItems.length>0){_6e.store.fetch({query:{REFERENCEID:"*"},onComplete:function(_71,_72){dojo.forEach(_71,function(_73){var _74=m.createInvoicePayableRepaymentItem(_73);_6f.newItem(_74);_70.push(_73);});}});}var _75=_6d.selection.getSelected();if(_75.length>0){for(var i=0;i<_75.length;i++){var _76=false;var _77="";var _78={};var _79=_75[i];if(_79!==null){var _7a=m.createInvoicePayableRepaymentItem(_79);if(_70.length>0){for(var t=0;t<_70.length;t++){if(_70[t].REFERENCEID.slice().toString()===_79.REFERENCEID.slice().toString()){_76=true;}}if(!_76){_6f.newItem(_7a);}}else{_6f.newItem(_7a);}}}if(_6e){_6e.setStore(_6f);dojo.style(_6e.domNode,"display","");_6e.resize();}dj.byId("xhrDialog").hide();}else{misys.dialog.show("ERROR",misys.getLocalization("invoicePayableShouldBeSelected"));}},getInvoicePayablesForBulkRepaymentLinkedFiltered:function(){var _7b;if(dj.byId("ref_id")){_7b=dj.byId("ref_id").get("value");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetStaticData"),handleAs:"json",sync:true,content:{option:"bulk_repay_linked",product_code:"IP",bulk_ref_id:_7b},load:function(_7c){m._showFilteredInvoicePayablesForBulkRepaymentLinked(_7c);}});},_showFilteredInvoicePayablesForBulkRepaymentLinked:function(_7d){var _7e=dj.byId("invoicePayablesGrid");var _7f=new dojo.data.ItemFileWriteStore({data:{"identifier":"REFERENCEID","items":[]}});if(_7d.items.length>0){var _80=_7d.items;if(_80.length>0){for(var i=0;i<_80.length;i++){var _81=_80[i];if(_81!==null){var _82=m.createInvoicePayableRepaymentItem(_81);_7f.newItem(_82);}}}if(_7e){_7e.setStore(_7f);dojo.style(_7e.domNode,"display","");_7e.resize();}}else{_7e.setStore(_7f);dojo.style(_7e.domNode,"display","");_7e.resize();_7e.render();}},getInvoicePayablesForBulkRepayFiltered:function(){var _83;if(dj.byId("issuing_bank_customer_reference")){_83=dj.byId("issuing_bank_customer_reference").get("value");}if(!_83){misys.dialog.show("ERROR",misys.getLocalization("customerReferenceRequiredForBulkFinancingSearch"));return;}var _84;if(dj.byId("curCode")){_84=dj.byId("curCode").get("value");}if(!m.validateCurrencyCode(_84)){misys.dialog.show("ERROR",misys.getLocalization("invalidCurrencyError",[_84]));return;}var _85;var _86;var _87;var _88;if(dj.byId("finance_amount_from")){_89=dj.byId("finance_amount_from");}if(dj.byId("finance_amount_to")){_8a=dj.byId("finance_amount_to");}if(dj.byId("os_repay_amount_from")){_8b=dj.byId("os_repay_amount_from");}if(dj.byId("os_repay_amount_to")){_8c=dj.byId("os_repay_amount_to");}if(dj.byId("finance_date_from")){_85=dj.byId("finance_date_from");}if(dj.byId("finance_date_to")){_86=dj.byId("finance_date_to");}if(dj.byId("finance_due_date_from")){_87=dj.byId("finance_due_date_from");}if(dj.byId("finance_due_date_to")){_88=dj.byId("finance_due_date_to");}if((_8a&&_8a.get("value")!==null&&_89&&_89.get("value")!==null)&&_8a.get("value")<_89.get("value")){misys.dialog.show("ERROR",misys.getLocalization("invalidMaxAmountValueError",[_8a.get("displayedValue"),_89.get("displayedValue")]));}if((_8c&&_8c.get("value")!==null&&_8b&&_8b.get("value")!==null)&&_8c.get("value")<_8b.get("value")){misys.dialog.show("ERROR",misys.getLocalization("invalidMaxAmountValueError",[_8c.get("displayedValue"),_8b.get("displayedValue")]));}if((_86&&_86.get("value")!==null&&_85&&_85.get("value")!==null)&&(d.date.compare(_86.get("value"),_85.get("value"))<0)){misys.dialog.show("ERROR",misys.getLocalization("financeDateToGreaterThanDateFromError",[_86.get("displayedValue"),_85.get("displayedValue")]));}if((_88&&_88.get("value")!==null&&_87&&_87.get("value")!==null)&&(d.date.compare(_88.get("value"),_87.get("value"))<0)){misys.dialog.show("ERROR",misys.getLocalization("financeDueDateToGreaterThanDueDateFromError",[_88.get("displayedValue"),_87.get("displayedValue")]));}var _8d="";if(dj.byId("invoicePayablesGrid")&&dj.byId("invoicePayablesGrid").store&&dj.byId("invoicePayablesGrid").store._arrayOfAllItems&&dj.byId("invoicePayablesGrid").store._arrayOfAllItems.length){var _8e=dj.byId("invoicePayablesGrid").store._arrayOfAllItems;for(var i=0;i<_8e.length;i++){if(_8e[i]&&_8e[i]["REFERENCEID"]){_8d=_8d+_8e[i]["REFERENCEID"]+",";}}}var _8f;var _90;var _91;var _89;var _8a;var _8b;var _8c;var _92;if(dj.byId("ref_id")){_8f=dj.byId("ref_id").get("value");}if(dj.byId("invoice_payable_ref_id")){_90=dj.byId("invoice_payable_ref_id").get("value");}if(dj.byId("seller_name")){_91=dj.byId("seller_name").get("value");}if(dj.byId("finance_amount_from")){_89=dj.byId("finance_amount_from");}if(dj.byId("finance_amount_to")){_8a=dj.byId("finance_amount_to");}if(dj.byId("os_repay_amount_from")){_8b=dj.byId("os_repay_amount_from");}if(dj.byId("os_repay_amount_to")){_8c=dj.byId("os_repay_amount_to");}if(dj.byId("entity")){_92=dj.byId("entity").get("value");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetStaticData"),handleAs:"json",sync:true,content:{option:"bulk_repay",product_code:"IP",invoice_ref_id:_90,seller_name:_91,curcode:_84,finance_amount_from:_89,finance_amount_to:_8a,os_repay_amount_from:_8b,os_repay_amount_to:_8c,finance_date_from:_85,finance_date_to:_86,finance_due_date_from:_87,finance_due_date_to:_88,invoiceRefIDList:_8d,entity:_92,customer_reference:_83},load:function(_93){m._showFilteredInvoicePayablesForBulkRepay(_93);}});},clearInvoiceGrid:function(_94){var _95=dj.byId(_94);var _96="";if(dj.byId(_94)&&dj.byId(_94).store&&dj.byId(_94).store._arrayOfAllItems&&(dj.byId(_94).store._arrayOfAllItems.length>0)){var _97=dj.byId(_94).store._arrayOfAllItems;for(var i=0;i<_97.length;i++){if(_97[i]&&_97[i]["REFERENCEID"]){_96=_96+_97[i]["REFERENCEID"]+",";}}}var _98=new dojo.data.ItemFileWriteStore({data:{"identifier":"REFERENCEID","items":[]}});_95.setStore(_98);_95.resize();m.resetBulkInvoiceOnEntityChange(_96);},setTotalRepaymentAmount:function(_99){var _9a=0;if(dj.byId(_99)&&dj.byId(_99).store&&dj.byId(_99).store._arrayOfAllItems&&dj.byId(_99).store._arrayOfAllItems.length&&(dj.byId(_99).store._arrayOfAllItems.length>0)){var _9b=dj.byId(_99).store._arrayOfAllItems;for(var i=0;i<_9b.length;i++){if(_9b[i]&&_9b[i]["OUTSTANDING_REPAY_AMOUNT"]){var _9c=_9b[i]["OUTSTANDING_REPAY_AMOUNT"][0];if(d.isString(_9c)){var _9d=d.number.parse(_9c);}var _9e=_9b[i]["CURCODE"][0];var _9f=m.financeAmtInBaseCcyBulkRepay(_9d,_9e);_9a=_9a+parseFloat(_9f);}}if(_9a!==0){dj.byId("bk_total_amt").set("value",_9a);dj.byId("bk_total_cur_code").set("value",dj.byId("base_ccy").get("value"));}else{dj.byId("bk_total_amt").set("value","");dj.byId("bk_total_cur_code").set("value","");}}else{dj.byId("bk_total_amt").set("value","");dj.byId("bk_total_cur_code").set("value","");}},financeAmtInBaseCcyBulkRepay:function(_a0,_a1){var _a2="";var _a3;if(dj.byId("base_ccy")){_a3=dj.byId("base_ccy").get("value");}if(_a3===_a1){return _a0;}else{if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){_a2=dj.byId("issuing_bank_abbv_name").get("value");}var _a4;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetConvertedAmount"),handleAs:"json",sync:true,content:{original_amt:_a0,src_curr:_a1,dest_curr:_a3},load:function(_a5,_a6){_a4=_a5.convertedAmount;},error:function(_a7,_a8){console.error("[misys.openaccount.BulkRepaymentEvents] financeAmtInBaseCcyBulkRepay error",_a7);}});return _a4;}},validateFinanceFromDate:function(_a9,_aa){if(!m.compareDateFields(_a9,_aa)){var _ab=m.getLocalization("fromDateLessThanToDateError",[m.localizeDate(_a9),m.localizeDate(_aa)]);_a9.focus();_a9.set("state","Error");dj.hideTooltip(_a9.domNode);dj.showTooltip(_ab,_a9.domNode,0);}},validateFinanceToDate:function(_ac,_ad){if(!m.compareDateFields(_ac,_ad)){var _ae=m.getLocalization("toDateLessThanFromDateError",[m.localizeDate(_ad),m.localizeDate(_ac)]);_ad.focus();_ad.set("state","Error");dj.hideTooltip(_ad.domNode);dj.showTooltip(_ae,_ad.domNode,0);}},validateFromAmountBulkRepay:function(_af,_b0){var _b1=_af?_af.get("value"):"";var _b2=_b0?_b0.get("value"):"";var _b3;if(_b1!==""&&_b1<=0){_b3=misys.getLocalization("invalidAmountError");_af.focus();_af.set("state","Error");dj.hideTooltip(_af.domNode);dj.showTooltip(_b3,_af.domNode,0);dj.showTooltip(_b3,domNode,0);}if(_b1!==""&&_b2!==""&&_b1>_b2){_b3=misys.getLocalization("invalidMinAmountValueError");_af.focus();_af.set("state","Error");dj.hideTooltip(_af.domNode);dj.showTooltip(_b3,_af.domNode,0);dj.showTooltip(_b3,domNode,0);}},closeRepaymentGrid:function(_b4){dj.byId("xhrDialog").hide();},validateToAmountBulkRepay:function(_b5,_b6){var _b7=_b5?_b5.get("value"):"";var _b8=_b6?_b6.get("value"):"";var _b9;if(_b7!==""&&_b7<=0){_b9=misys.getLocalization("invalidAmountError");_b5.focus();_b5.set("state","Error");dj.hideTooltip(_b5.domNode);dj.showTooltip(_b9,_b5.domNode,0);dj.showTooltip(_b9,domNode,0);}if(_b7!==""&&_b8!==""&&_b7<_b8){_b9=misys.getLocalization("invalidMaxAmountValueError");_b5.focus();_b5.set("state","Error");dj.hideTooltip(_b5.domNode);dj.showTooltip(_b9,_b5.domNode,0);dj.showTooltip(_b9,domNode,0);}},resetBulkInvoiceOnEntityChange:function(_ba){var _bb;var _bc;var _bd;var _be;var _bf;var _c0;var _c1;if(dj.byId("tnx_id")){_bf=dj.byId("tnx_id").get("value");}if(dj.byId("ref_id")){_bb=dj.byId("ref_id").get("value");}if(dj.byId("invoice_ref_id")){_bc=dj.byId("invoice_ref_id").get("value");}if(dj.byId("entity")){_be=dj.byId("entity").get("value");}if(dj.byId("child_product_code")){_c0=dj.byId("child_product_code").get("value");}if(dj.byId("sub_product_code")){_c1=dj.byId("sub_product_code").get("value");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetStaticData"),handleAs:"json",sync:true,content:{option:"reset_invoice_on_entity_change",product_code:_c0,sub_product_code:_c1,bulk_ref_id:_bb,tnxID:_bf,invoice_ref_id:_bc,invoiceRefIDList:_ba,entity:_be}});}});})(dojo,dijit,misys);}