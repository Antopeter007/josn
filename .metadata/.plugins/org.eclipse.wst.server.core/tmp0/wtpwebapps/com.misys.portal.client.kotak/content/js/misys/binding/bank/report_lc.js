/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.bank.report_lc"]){dojo._hasResource["misys.binding.bank.report_lc"]=true;dojo.provide("misys.binding.bank.report_lc");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.layout.TabContainer");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.widget.Collaboration");dojo.require("misys.form.addons");dojo.require("misys.form.common");dojo.require("misys.form.file");dojo.require("misys.validation.common");dojo.require("misys.binding.trade.ls_common");dojo.require("misys.binding.bank.report_lc_swift");dojo.require("misys.widget.Amendments");(function(d,dj,m){var _1="NOT ALLOWED";var _2="revolving-details";var _3="alternate-party-details";m._config=m._config||{};m._config.lcCurCode=m._config.lcCurCode||{};m._config.applicant=m._config.applicant||{entity:"",name:"",addressLine1:"",addressLine2:"",dom:""};m._config.beneficiary=m._config.beneficiary||{name:"",addressLine1:"",addressLine2:"",dom:""};m._config.expDate=m._config.expDate||{};m._config.lastShipDate=m._config.lastShipDate||{};m._config.lcMandatoryFields=[];function _4(){var _5=dj.byId("lc_liab_amt");var _6=dj.byId("lc_amt");var _7=dj.byId("claim_amt");if(_6&&_7){if(_7.get("value")<=0||_7.get("value")>_5.get("value")||_7.get("value")>_6.get("value")){var _8=function(){var _9=dijit.byId("claim_amt");_9.focus();_9.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("claimAmtGreaterThanOutstandingAmtError",[_5.get("value").toFixed(2)]),"",function(){setTimeout(_8,500);});return false;}}return true;};function _a(){var _b=dj.byId("current_date");var _c=dj.byId("exp_date");var _d=dj.byId("iss_date");var _e=dj.byId("claim_present_date");if(_e){if(_b&&!m.compareDateFields(_e,_b)){var _f=function(){var _10=dijit.byId("claim_present_date");_10.focus();_10.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("claimDateGreaterThanCurrentDateError",[_e.get("displayedValue"),_b.get("displayedValue")]),"",function(){setTimeout(_f,100);});return false;}else{if(_c&&!m.compareDateFields(_e,_c)){var _11=function(){return true;};m.dialog.show("WARNING",m.getLocalization("claimDateGreaterThanExpiryDateError",[_e.get("displayedValue"),_c.get("displayedValue")]),"",function(){setTimeout(_11,100);});}else{if(_d&&!m.compareDateFields(_d,_e)){var _12=function(){return true;};m.dialog.show("WARNING",m.getLocalization("claimDateLessThanIssueDateError",[_e.get("displayedValue"),_d.get("displayedValue")]),"",function(){setTimeout(_12,100);});}}}}return true;};function _13(){if(d.number.parse(dijit.byId("org_lc_amt").get("value"))<dijit.byId("dec_amt_value").get("value")){m.showTooltip(m.getLocalization("decreaseAmountShouldBeLessThanLCAmount",[dj.byId("dec_amt_value").get("displayedValue")]),d.byId("dec_amt_value"),["after"],5000);misys.dialog.show("ERROR",dj.byId("dec_amt_value").invalidMessage,"",function(){dj.byId("dec_amt_value").focus();dj.byId("dec_amt_value").set("state","Error");});return false;}if(d.number.parse(dijit.byId("dec_amt_value").get("value"))<0){dj.byId("lc_amt").set("value",d.number.parse(dj.byId("org_lc_amt").value));m.showTooltip(m.getLocalization("valueShouldBeGreaterThanZero",[dj.byId("dec_amt_value").get("displayedValue")]),d.byId("dec_amt_value"),["after"],5000);misys.dialog.show("ERROR",dj.byId("dec_amt_value").invalidMessage,"",function(){dj.byId("dec_amt_value").focus();dj.byId("dec_amt_value").set("state","Error");});return false;}return true;};d.mixin(m._config,{xmlTransform:function(xml){var _14="<lc_tnx_record>";if(xml.indexOf(_14)!=-1){var _15=m._config.xmlTagName,_16=_15?["<",_15,">"]:[],_17="</lc_tnx_record>",_18="",_19=-1;_18=xml.substring(_14.length,(xml.length-_17.length));var i=0,_1a,_1b,itr=0;var _1c="amd_no";var _1d=xml.substring(xml.indexOf("<"+_1c+">")+("<"+_1c+">").length,xml.indexOf("</"+_1c+">"));var _1e=xml.substring(xml.indexOf("<tnx_type_code>")+("<tnx_type_code>").length,xml.indexOf("</tnx_type_code>"));var _1f=xml.substring(xml.indexOf("<sub_tnx_type_code>")+("<sub_tnx_type_code>").length,xml.indexOf("</sub_tnx_type_code>"));var _20=xml.substring(xml.indexOf("<lc_type>")+("<lc_type>").length,xml.indexOf("</lc_type>"));var _21=xml.substring(xml.indexOf("<prod_stat_code>")+("<prod_stat_code>").length,xml.indexOf("</prod_stat_code>"));var _22=["narrative_description_goods","narrative_documents_required","narrative_additional_instructions","narrative_special_beneficiary","narrative_special_recvbank"];if(m._config.swift2018Enabled&&(Number(_1d)||_21==="08"||_21==="31")&&_20!=="04"){var _23;var _24=[m._config.narrativeDescGoodsDataStore,m._config.narrativeDocsReqDataStore,m._config.narrativeAddInstrDataStore,m._config.narrativeSpBeneDataStore,m._config.narrativeSpRecvbankDataStore];for(itr=0;itr<5;itr++){_23=itr==0?_18.substring(0,_18.indexOf("<"+_22[itr]+">")):(_23.indexOf("<"+_22[itr]+">")>0?_23.substring(0,_23.indexOf("<"+_22[itr]+">")):_23);if(_18.indexOf("<"+_22[itr]+">")<0){continue;}if(_24[itr]&&_24[itr].length>0){i=0;_23=_23.concat("<"+_22[itr]+">");_23=_23.concat("<![CDATA[");_23=_23.concat("<amendments>");_23=_23.concat("<amendment>");_23=_23.concat("<sequence>");_23=_23.concat("");_23=_23.concat("</sequence>");_23=_23.concat("<data>");d.forEach(_24[itr],function(){if(_24[itr][i]&&_24[itr][i]!=null){_1a=_24[itr][i].verb[0];_1b=dojox.html.entities.encode(_24[itr][i].content[0],dojox.html.entities.html);_23=_23.concat("<datum>");_23=_23.concat("<id>");_23=_23.concat(i);_23=_23.concat("</id>");_23=_23.concat("<verb>");_23=_23.concat(_1a);_23=_23.concat("</verb>");_23=_23.concat("<text>");_23=_23.concat(_1b);_23=_23.concat("</text>");_23=_23.concat("</datum>");}i++;});_23=_23.concat("</data>");_23=_23.concat("</amendment>");_23=_23.concat("</amendments>");_23=_23.concat("]]>");_23=_23.concat(_18.substring(_18.indexOf("</"+_22[itr]+">"),_18.length));}else{_23=_23.concat("<"+_22[itr]+">");_23=_23.concat(_18.substring(_18.indexOf("</"+_22[itr]+">"),_18.length));}}_16.push(_23);}else{if(m._config.swift2018Enabled&&_1e==="01"&&_1f!=="04"&&_20!=="04"){for(itr=0;itr<5;itr++){_23=itr==0?_18.substring(0,_18.indexOf("<"+_22[itr]+">")):_23.substring(0,_23.indexOf("<"+_22[itr]+">"));_23=_23.concat("<"+_22[itr]+">");if(dj.byId(_22[itr])){_23=_23.concat("<![CDATA[");_23=_23.concat("<issuance>");_23=_23.concat("<sequence>");_23=_23.concat("0");_23=_23.concat("</sequence>");_23=_23.concat("<data>");_23=_23.concat("<datum>");_23=_23.concat("<id>");_23=_23.concat("0");_23=_23.concat("</id>");_23=_23.concat("<verb>");_23=_23.concat("ISSUANCE");_23=_23.concat("</verb>");_23=_23.concat("<text>");_23=_23.concat(dojox.html.entities.encode(dj.byId(_22[itr]).get("value"),dojox.html.entities.html));_23=_23.concat("</text>");_23=_23.concat("</datum>");_23=_23.concat("</data>");_23=_23.concat("</issuance>");_23=_23.concat("]]>");}_23=_23.concat(_18.substring(_18.indexOf("</"+_22[itr]+">"),_18.length));}_16.push(_23);}else{_16.push(_18);}}if(dj.byId("gridLicense")&&dj.byId("gridLicense").store&&dj.byId("gridLicense").store!==null&&dj.byId("gridLicense").store._arrayOfAllItems.length>0){_16.push("<linked_licenses>");dj.byId("gridLicense").store.fetch({query:{REFERENCEID:"*"},onComplete:dojo.hitch(dj.byId("gridLicense"),function(_25,_26){dojo.forEach(_25,function(_27){_16.push("<license>");_16.push("<ls_ref_id>",_27.REFERENCEID,"</ls_ref_id>");_16.push("<bo_ref_id>",_27.BO_REF_ID,"</bo_ref_id>");_16.push("<ls_number>",_27.LS_NUMBER,"</ls_number>");_16.push("<ls_allocated_amt>",_27.LS_ALLOCATED_AMT,"</ls_allocated_amt>");_16.push("<ls_amt>",_27.LS_AMT,"</ls_amt>");_16.push("<ls_os_amt>",_27.LS_OS_AMT,"</ls_os_amt>");_16.push("<converted_os_amt>",_27.CONVERTED_OS_AMT,"</converted_os_amt>");_16.push("<allow_overdraw>",_27.ALLOW_OVERDRAW,"</allow_overdraw>");_16.push("</license>");});})});_16.push("</linked_licenses>");}if(_15){_16.push("</",_15,">");}return _16.join("");}else{return xml;}}});d.mixin(m,{bind:function(){m.setValidation("iss_date",m.validateIssueDate);m.setValidation("amd_date",m.validateAmendmentDate);m.setValidation("exp_date",m.validateBankExpiryDate);m.setValidation("tenor_maturity_date",m.validateMaturityDate);m.setValidation("pstv_tol_pct",m.validateTolerance);m.setValidation("neg_tol_pct",m.validateTolerance);m.setValidation("max_cr_desc_code",m.validateMaxCreditTerm);m.setValidation("earliest_ship_date",m.validateEarliestShipmentDate);m.setValidation("last_ship_date",m.validateLastShipmentDate);m.setValidation("lc_cur_code",m.validateCurrency);m.setValidation("latest_answer_date",m.validateLatestAnswerDate);m.setValidation("next_revolve_date",m.validateNextRevolveDate);m.setValidation("alt_applicant_country",m.validateCountry);m.setValidation("maturity_date",m.validateEnteredDateGreaterThanCurrentDate);m.setValidation("renew_for_nb",m.validateRenewFor);m.setValidation("advise_renewal_days_nb",m.validateDaysNotice);m.setValidation("rolling_renewal_nb",m.validateNumberOfRenewals);m.setValidation("rolling_cancellation_days",m.validateCancellationNotice);m.setValidation("renewal_calendar_date",m.validateRenewalCalendarDate);m.setValidation("renew_on_code",m.validateRenewalCalendarDate);m.setValidation("rolling_renew_for_nb",m.validateRollingFrequency);m.setValidation("bo_comment",m.bofunction);m.connect("renew_flag","onClick",m.toggleRenewalDetails);m.connect("ship_period","onChange",m.validateShipPeriod);m.connect("courier_partner","onChange",m.validatecourierPartnerField);m.connect("renew_flag","onClick",function(){if(!this.get("checked")){dj.byId("rolling_renewal_nb").set("value","");}else{if(!dj.byId("rolling_renewal_flag").get("checked")){dj.byId("rolling_renewal_nb").set("value",m.getLocalization("default_rewnewalNumber"));}}});m.connect("renew_on_code","onChange",function(){m.toggleFields(this.get("value")==="02",null,["renewal_calendar_date"]);});m.connect("inco_term_year","onChange",m.getIncoTerm);m.connect("inco_term","onChange",function(){m.toggleFields(this.get("value"),null,["inco_place"],false,false);});m.connect("inco_term_year","onChange",function(){m.toggleFields(this.get("value"),null,["inco_term"],false,true);});m.connect("prod_stat_code","onChange",m.validateOutstandingAmount);m.connect("prod_stat_code","onChange",function(){var _28=dj.byId("prod_stat_code");var _29=dj.byId("prod_stat_code").get("value");var _2a=dj.byId("imp_bill_ref_id");if(_28&&_28.get("value")&&_2a){if(_29==="04"||_29==="07"||_29==="12"||_29==="13"||_29==="05"||_29==="14"||_29==="15"){dj.byId("imp_bill_ref_id").set("disabled",false);}else{dj.byId("imp_bill_ref_id").set("disabled",true);dj.byId("imp_bill_ref_id").set("value","");}}});m.connect(dj.byId("prod_stat_code"),"onChange",function(){this.validate();if(m._config.swift2018Enabled){m.refreshUIforAmendment();}});m.connect("irv_flag","onClick",m.checkIrrevocableFlag);m.connect("ntrf_flag","onClick",m.checkNonTransferableFlag);m.connect("ntrf_flag","onClick",m.toggleTransferIndicatorFlag);m.connect("stnd_by_lc_flag","onClick",m.checkStandByFlag);if(m._config.swift2018Enabled){m._bindSwift2018();}else{m.connect("cfm_inst_code_1","onClick",m.resetConfirmationCharges);m.connect("cfm_inst_code_2","onClick",m.resetConfirmationCharges);m.connect("cfm_inst_code_3","onClick",m.resetConfirmationCharges);}m.connect("lc_exp_date_type_code","onChange",function(){if(this.get("value")==="02"){m.toggleRequired("exp_date",false);m.animate("fadeIn",d.byId("exp-event"));m.toggleRequired("exp_event",true);dj.byId("exp_date").set("disabled",false);m.toggleRequired("exp_date",false);}else{if(this.get("value")==="03"){m.toggleRequired("exp_date",false);dj.byId("exp_date").set("disabled",true);m.animate("fadeOut",d.byId("exp-event"));dj.byId("exp_event").set("value","");m.toggleRequired("exp_event",false);dj.byId("exp_date").set("value",null);}else{m.toggleRequired("exp_date",true);dj.byId("exp_date").set("disabled",false);m.animate("fadeOut",d.byId("exp-event"));dj.byId("exp_event").set("value","");m.toggleRequired("exp_event",false);}}});if(m._config.charge_splitting_lc){if(dj.byId("open_chrg_brn_by_code_3")){dj.byId("open_chrg_brn_by_code_3").set("disabled",false);dj.byId("corr_chrg_brn_by_code_3").set("disabled",false);m.connect("open_chrg_brn_by_code_1","onClick",m.checkApplBeneCharges);m.connect("open_chrg_brn_by_code_2","onClick",m.checkApplBeneCharges);m.connect("open_chrg_brn_by_code_3","onClick",m.checkApplBeneCharges);m.connect("corr_chrg_brn_by_code_1","onClick",m.checkApplBeneCharges);m.connect("corr_chrg_brn_by_code_2","onClick",m.checkApplBeneCharges);m.connect("corr_chrg_brn_by_code_3","onClick",m.checkApplBeneCharges);if(dj.byId("open_chrg_brn_by_code_3").get("checked")){dj.byId("open_chrg_applicant").set("disabled",false).set("required",true);dj.byId("open_chrg_beneficiary").set("disabled",false).set("required",true);}if(dj.byId("corr_chrg_brn_by_code_3").get("checked")){dj.byId("corr_chrg_applicant").set("disabled",false).set("required",true);dj.byId("corr_chrg_beneficiary").set("disabled",false).set("required",true);}}if(dj.byId("cfm_chrg_brn_by_code_3")){dj.byId("cfm_chrg_brn_by_code_3").set("disabled",false);m.connect("cfm_chrg_brn_by_code_3","onClick",m.checkConfirmationCharges);if(dj.byId("cfm_chrg_brn_by_code_3").get("checked")){dj.byId("cfm_chrg_applicant").set("disabled",false).set("required",true);dj.byId("cfm_chrg_beneficiary").set("disabled",false).set("required",true);}}}m.connect("cfm_chrg_brn_by_code_1","onClick",m.checkConfirmationCharges);m.connect("cfm_chrg_brn_by_code_2","onClick",m.checkConfirmationCharges);m.connect("cr_avl_by_code_1","onClick",m.togglePaymentDraftAt);m.connect("cr_avl_by_code_1","onClick",m.setDraftTerm);m.connect("cr_avl_by_code_2","onClick",m.togglePaymentDraftAt);m.connect("cr_avl_by_code_3","onClick",m.togglePaymentDraftAt);m.connect("cr_avl_by_code_4","onClick",m.togglePaymentDraftAt);m.connect("cr_avl_by_code_5","onClick",m.togglePaymentDraftAt);m.connect("cr_avl_by_code_5","onChange",function(){dj.byId("draft_term").set("value","");});m.connect("cr_avl_by_code_2","onClick",m.setDraftTerm);m.connect("cr_avl_by_code_3","onClick",m.setDraftTerm);m.connect("cr_avl_by_code_4","onClick",m.setDraftTerm);m.connect("adv_send_mode","onClick",m.setDraftTerm);m.connect("tenor_type_1","onClick",m.toggleDraftTerm);m.connect("tenor_type_1","onClick",m.setDraftTerm);m.connect("tenor_type_2","onClick",m.toggleDraftTerm);m.connect("tenor_type_3","onClick",m.toggleDraftTerm);if(!m._config.swift2018Enabled){m.connect("lc_amt","onBlur",function(){var _2b=(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")==="03")||(dj.byId("prod_stat_code")&&(dj.byId("prod_stat_code").get("value")==="08"||dj.byId("prod_stat_code").get("value")==="31"));if(_2b){var _2c=dj.byId("lc_amt").getValue()-dojo.number.parse(dj.byId("org_lc_amt").getValue());var _2d=Math.abs(_2c);if(_2d!==0){m.setTnxAmt(_2d);}}else{m.setTnxAmt(this.get("value"));}});}var _2e=!dj.byId("tnx_stat_code")||!(dj.byId("tnx_stat_code").get("value")&&(dj.byId("tnx_stat_code").get("value")==="03"||dj.byId("tnx_stat_code").get("value")==="07"));if(_2e){m.connect("lc_amt","onBlur",function(){m.validateDocumentAmtAndLCAmt();});m.connect("tnx_amt","onBlur",function(){m.validateDocumentAmtAndLCAmt();});}m.connect("last_ship_date","onClick",function(){if(m._config.shipment_period_standard===true){m.toggleDependentFields(this,dj.byId("narrative_shipment_period"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));}});m.connect("last_ship_date","onChange",function(){if(m._config.shipment_period_standard===true){m.toggleDependentFields(this,dj.byId("narrative_shipment_period"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));}});m.connect("tenor_maturity_date","onBlur",m.setDraftTerm);m.connect("tenor_days_type","onBlur",m.setDraftTerm);m.connect("tenor_type_details","onBlur",m.setDraftTerm);m.connect("lc_cur_code","onChange",function(){m.setCurrency(this,["lc_amt"]);m.setCurrency(this,["lc_available_amt","lc_liab_amt"]);});m.connect("tenor_period","onChange",m.setDraftTerm);m.connect("tenor_from_after","onChange",m.setDraftTerm);m.connect("tenor_days","onChange",m.setDraftTerm);m.connect("tenor_days_type","onChange",function(){m.toggleFields((this.get("value")=="99"),null,["tenor_type_details"]);});m.connect("drawee_details_bank_name","onChange",m.initDraweeFields);m.connect("issuing_bank_abbv_name","onChange",m.populateReferences);if(dj.byId("issuing_bank_abbv_name")){m.connect("entity","onChange",function(){dj.byId("issuing_bank_abbv_name").onChange();});}m.connect("issuing_bank_customer_reference","onChange",m.setApplicantReference);m.connect("part_ship_detl_nosend","onChange",function(){var _2f=dj.byId("part_ship_detl_nosend").value;dj.byId("part_ship_detl").set("value",_2f);if(m._config.swift2018Enabled){if(_2f=="CONDITIONAL"){document.getElementById("infoMessagePartialShipment").style.display="block";document.getElementById("infoMessagePartialShipment").style.paddingLeft="250px";}else{document.getElementById("infoMessagePartialShipment").style.display="none";}}m.toggleFields(_2f&&_2f!=="ALLOWED"&&_2f!==_1&&_2f!=="NONE",null,["part_ship_detl_text_nosend"]);});m.connect("part_ship_detl_text_nosend","onBlur",function(){if(dj.byId("part_ship_detl_nosend").value==="OTHER"){dj.byId("part_ship_detl").set("value",dj.byId("part_ship_detl_text_nosend").value);}else{dj.byId("part_ship_detl").set("value",dj.byId("part_ship_detl_nosend").value);}});m.connect("tran_ship_detl_nosend","onChange",function(){var _30=dj.byId("tran_ship_detl_nosend").value;dj.byId("tran_ship_detl").set("value",_30);if(m._config.swift2018Enabled){if(_30=="CONDITIONAL"){document.getElementById("infoMessageTranshipment").style.display="block";document.getElementById("infoMessageTranshipment").style.paddingLeft="250px";}else{document.getElementById("infoMessageTranshipment").style.display="none";}}m.toggleFields(_30&&_30!=="ALLOWED"&&_30!==_1&&_30!=="NONE",null,["tran_ship_detl_text_nosend"]);});m.connect("tran_ship_detl_text_nosend","onBlur",function(){if(dj.byId("tran_ship_detl_nosend").value==="OTHER"||dj.byId("tran_ship_detl_nosend").value==="Other"){dj.byId("tran_ship_detl").set("value",dj.byId("tran_ship_detl_text_nosend").value);}else{dj.byId("tran_ship_detl").set("value",dj.byId("tran_ship_detl_nosend").value);}});m.connect("tenor_days","onFocus",m.setDraftDaysReadOnly);m.connect("tenor_period","onFocus",m.setDraftDaysReadOnly);m.connect("tenor_from_after","onFocus",m.setDraftDaysReadOnly);m.connect("tenor_days_type","onFocus",m.setDraftDaysReadOnly);m.connect("draft_term","onFocus",function(){this.set("readOnly",!dj.byId("cr_avl_by_code_5").get("checked"));});m.connect("narrative_shipment_period","onClick",function(){if(m._config.shipment_period_standard===true){m.toggleDependentFields(this,dj.byId("last_ship_date"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));}});m.connect("narrative_shipment_period","onChange",function(){if(m._config.shipment_period_standard===true){m.toggleDependentFields(this,dj.byId("last_ship_date"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));}});m.connect("prod_stat_code","onChange",function(){var _31=this.get("value");m.toggleFields(_31&&_31!=="01"&&_31!=="18",["action_req_code"],["iss_date","bo_ref_id"]);if(dj.byId("mode")&&dj.byId("mode").get("value")==="RELEASE"){m.toggleRequired("bo_ref_id",false);m.toggleRequired("iss_date",false);m.toggleRequired("lc_liab_amt",false);m.toggleRequired("lc_available_amt",false);}});m.connect("cr_avl_by_code_2","onClick",function(){if(dj.byId("mode")&&dj.byId("mode").get("value")==="RELEASE"){m.toggleRequired("drawee_details_bank_address_line_1",false);}});m.connect("cr_avl_by_code_3","onClick",function(){if(dj.byId("mode")&&dj.byId("mode").get("value")==="RELEASE"){m.toggleRequired("drawee_details_bank_address_line_1",false);}});m.connect("prod_stat_code","onChange",function(){m.updateOutstandingAmount(dj.byId("lc_liab_amt"),dj.byId("org_lc_liab_amt"));var _32=dj.byId("prod_stat_code").get("value"),_33=dj.byId("lc_liab_amt");if(_33&&(_32==="01"||_32==="10"||_32==="06")){_33.set("readOnly",true);_33.set("disabled",true);m.toggleRequired("lc_liab_amt",false);}else{if(_32==="05"||_32==="13"||_32==="15"||_32==="14"){if(_33){_33.set("readOnly",true);_33.set("disabled",true);_33.set("value","");m.toggleRequired("lc_liab_amt",false);}}else{if(_33){_33.set("readOnly",false);_33.set("disabled",false);if(!(dj.byId("mode")&&dj.byId("mode").get("value")==="RELEASE")){m.toggleRequired("lc_liab_amt",true);}if(_32!=="07"){dj.byId("lc_liab_amt").set("value",dj.byId("org_lc_liab_amt").get("value"));}}}}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="01"){if(_32==="01"){_33.set("value",0);}else{_33.set("value",dj.byId("lc_amt").get("value"));}}var _34=dj.byId("lc_available_amt");if(_34&&(_32==="01"||_32==="10"||_32==="06")){_34.set("readOnly",true);_34.set("disabled",true);m.toggleRequired("lc_available_amt",false);}else{if(_34){_34.set("readOnly",false);_34.set("disabled",false);if(!(dj.byId("mode")&&dj.byId("mode").get("value")==="RELEASE")){m.toggleRequired("lc_available_amt",true);}}}if(dj.byId("doc_ref_no")){if(_32==="16"||_32==="24"||_32==="A9"||_32==="12"){dj.byId("doc_ref_no").set("disabled",false);}else{dj.byId("doc_ref_no").set("disabled",true);}}if(dj.byId("lc_type")&&dj.byId("lc_type").get("value")==="02"){if(_32==="01"){dojo.forEach(dj.byId("fakeform1").getChildren(),function(_35){var id=_35.id;if(_35.required===true){m._config.lcMandatoryFields.push(id);m.toggleRequired(id,false);}});m._config.lcMandatoryFields.push("narrative_description_goods");m._config.lcMandatoryFields.push("narrative_documents_required");m.toggleRequired("narrative_description_goods",false);m.toggleRequired("narrative_documents_required",false);}else{if(_32==="03"){for(var i in m._config.lcMandatoryFields){m.toggleRequired(m._config.lcMandatoryFields[i],true);}m.toggleTransaction(true);}}}if(m._config.enable_to_edit_customer_details_bank_side=="false"&&dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")!==""&&dj.byId("lc_liab_amt")&&dj.byId("lc_available_amt")&&dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")!=="15"&&dj.byId("tnx_type_code").get("value")!=="13"){m.toggleRequired("lc_liab_amt",false);m.toggleRequired("lc_available_amt",false);m.toggleRequired("applicable_rules",false);}});m.connect("prod_stat_code","onChange",function(){m.toggleProdStatCodeFields();var _36=this.get("value");if(_36==="78"||_36==="79"){dj.byId("action_req_code").set("value","07");dj.byId("action_req_code").set("readOnly",true);dj.byId("action_req_code").set("disabled",false);}else{if(_36=="01"){dj.byId("action_req_code").set("value","");dj.byId("action_req_code").set("readOnly",true);dj.byId("action_req_code").set("disabled",true);}else{if(_36=="03"){dj.byId("action_req_code").set("value","");dj.byId("action_req_code").set("readOnly",false);dj.byId("action_req_code").set("disabled",false);}else{if(_36=="A9"){m.toggleRequired("tnx_amt",true);m.toggleRequired("maturity_date",true);dj.byId("latest_answer_date").set("disabled",true);}else{if(_36=="26"){m.toggleRequired("tnx_amt",true);m.toggleRequired("maturity_date",false);}else{if(_36=="12"||_36==="05"||_36==="13"||_36==="15"||_36==="14"||_36==="04"){m.toggleRequired("tnx_amt",true);}else{m.toggleRequired("tnx_amt",false);m.toggleRequired("maturity_date",false);}}}}}}});m.connect("prod_stat_code","onChange",function(){m.toggleProdStatCodeFields();var _37=this.get("value");if(_37==="05"||_37==="13"||_37==="15"||_37==="14"||_37==="04"){m.toggleRequired("maturity_date",true);}});m.connect("prod_stat_code","onChange",function(){if(this.get("value")==="12"){m.toggleRequired("bo_comment",true);}else{m.toggleRequired("bo_comment",false);}});m.connect("prod_stat_code","onChange",function(){if(this.get("value")==="84"||this.get("value")==="85"){m.animate("fadeIn",d.byId("claimDetails"));dj.byId("claim_cur_code").set("value",dj.byId("lc_cur_code").get("value"));dj.byId("claim_reference").set("disabled",false);dj.byId("claim_present_date").set("disabled",false);dj.byId("claim_amt").set("disabled",false);dj.byId("claim_cur_code").set("disabled",false);if(dj.byId("prod_stat_code").get("value")==="85"&&dj.byId("claim_reference_hidden")&&dj.byId("claim_amt_hidden")&&d.byId("claimPresentDate")){m.animate("fadeOut",d.byId("claimPresentDate"));dj.byId("claim_reference").set("value",dj.byId("claim_reference_hidden").get("value"));dj.byId("claim_amt").set("value",dj.byId("claim_amt_hidden").get("value"));}else{m.animate("fadeIn",d.byId("claimPresentDate"));dj.byId("claim_reference").set("value","");dj.byId("claim_amt").set("value","");}}else{if(dj.byId("claim_reference")&&dj.byId("claim_present_date")&&dj.byId("claim_amt")){m.animate("fadeOut",d.byId("claimDetails"));dj.byId("claim_reference").set("disabled",true);dj.byId("claim_present_date").set("disabled",true);dj.byId("claim_amt").set("disabled",true);dj.byId("claim_cur_code").set("disabled",true);dj.byId("claim_reference").set("value","");dj.byId("claim_present_date").set("value",null);dj.byId("claim_amt").set("value","");dj.byId("claim_cur_code").set("value","");}}var _38=dj.byId("tnx_amt");if(_38){m.validateDocumentAmtAndCalcLiabAmt();}});m.connect("facility_id","onChange",m.getLimitDetails);m.connect("limit_id","onChange",m.setLimitFieldsValue);m.connect("eucp_flag","onClick",function(){m.toggleFields(this.get("checked"),null,["eucp_details"]);});m.connect("credit_available_with_bank_name","onChange",function(){m.toggleFields(!((d.string.trim(this.value)).toLowerCase()===m.getLocalization("xslCrAnyBank")||(d.string.trim(this.value)).toLowerCase()===m.getLocalization("xslCrAdvisingBank")||(d.string.trim(this.value)).toLowerCase()===m.getLocalization("xslCrIssuingBank")),null,null,false,false);if((d.string.trim(this.value)).toLowerCase()===m.getLocalization("xslCrAnyBank")){dj.byId("credit_available_with_bank_type").set("value","Any Bank");}else{if((d.string.trim(this.value)).toLowerCase()===m.getLocalization("xslCrAdvisingBank")){dj.byId("credit_available_with_bank_type").set("value","Advising Bank");}else{if((d.string.trim(this.value)).toLowerCase()===m.getLocalization("xslCrIssuingBank")){dj.byId("credit_available_with_bank_type").set("value","Issuing Bank");}}}});m.connect("tnx_amt","onChange",function(){m.validateDocumentAmtAndCalcLiabAmt();});m.connect("transport_mode_nosend","onChange",function(){var _39=this.get("value");dj.byId("transport_mode").set("value",_39);m.toggleFields(_39&&_39!=="AIRT"&&_39!=="SEAT"&&_39!=="RAIL"&&_39!=="ROAD"&&_39!=="MULT",null,["transport_mode_text_nosend"],false,false);});m.connect("transport_mode_text_nosend","onBlur",function(){dj.byId("transport_mode").set("value",this.get("value"));});m.connect("license_lookup","onClick",function(){m.getLicenses("lc");});m.connect("lc_cur_code","onChange",function(){m.clearLicenseGrid(this,m._config.lcCurCode,"lc");});m.connect("entity","onChange",function(){m.clearLicenseGrid(this,m._config.applicant,"lc");});m.connect("beneficiary_name","onChange",function(){m.clearLicenseGrid(this,m._config.beneficiary,"lc");});m.connect("exp_date","onChange",function(){m.clearLicenseGrid(this,m._config.expDate,"lc");});m.connect("last_ship_date","onChange",function(){m.clearLicenseGrid(this,m._config.lastShipDate,"lc");});m.connect("revolving_flag","onChange",function(){if(this.get("checked")){m.animate("fadeIn",d.byId(_2));}else{m.animate("fadeOut",d.byId(_2));dj.byId("revolve_period").set("value","");dj.byId("revolve_frequency").set("value","");dj.byId("revolve_time_no").set("value","");dj.byId("cumulative_flag").set("checked",false);dj.byId("next_revolve_date").set("displayedValue","");dj.byId("notice_days").set("value","");dj.byId("charge_upto").set("value","");}});m.connect("stnd_by_lc_flag","onChange",function(){if(dj.byId("stnd_by_lc_flag")){if(dj.byId("stnd_by_lc_flag").get("checked")){m.animate("fadeIn",d.byId("expiryType"));m.animate("fadeIn",d.byId("deliveryInstructions"));m.animate("fadeIn",d.byId("renewalDetails"));m.animate("fadeIn",d.byId("governingLawDetails"));if(dj.byId("lc_exp_date_type_code")){m.toggleRequired("lc_exp_date_type_code",true);}if(dj.byId("delv_org")){m.toggleRequired("delv_org",true);}}else{m.animate("fadeOut",d.byId("expiryType"));m.animate("fadeOut",d.byId("deliveryInstructions"));m.animate("fadeOut",d.byId("renewalDetails"));m.animate("fadeOut",d.byId("governingLawDetails"));if(dj.byId("lc_exp_date_type_code")){dj.byId("lc_exp_date_type_code").set("value","");m.toggleRequired("lc_exp_date_type_code",false);}if(dj.byId("delv_org")){dj.byId("delv_org").set("value","");m.toggleRequired("delv_org",false);}if(dj.byId("delv_org_text")){dj.byId("delv_org_text").set("value","");}if(dj.byId("delivery_to")){dj.byId("delivery_to").set("value","");}if(dj.byId("narrative_delivery_to")){dj.byId("narrative_delivery_to").set("value","");}if(dj.byId("renew_flag")){dj.byId("renew_flag").set("checked",false);d.hitch(dj.byId("renew_flag"),m.toggleRenewalDetails,true)();m.connect("renew_flag","onClick",m.toggleRenewalDetails);}if(dj.byId("lc_govern_country")){dj.byId("lc_govern_country").set("value","");}if(dj.byId("lc_govern_text")){dj.byId("lc_govern_text").set("value","");}}}});m.connect("for_account_flag","onChange",function(){if(this.get("checked")){m.animate("fadeIn",d.byId(_3));}else{m.animate("fadeOut",d.byId(_3));dj.byId("alt_applicant_name").set("value","");dj.byId("alt_applicant_address_line_1").set("value","");dj.byId("alt_applicant_address_line_2").set("value","");dj.byId("alt_applicant_dom").set("value","");dj.byId("alt_applicant_country").set("value","");}});m.connect("for_account_flag","onChange",function(){m.toggleFields((this.get("value")==="on"),["alt_applicant_address_line_2","alt_applicant_dom"],["alt_applicant_name","alt_applicant_address_line_1","alt_applicant_country"]);});m.connect("revolve_period","onBlur",function(){m.validateIntegerValue(dj.byId("revolve_period"));});m.connect("revolve_time_no","onBlur",function(){m.validateIntegerValue(dj.byId("revolve_time_no"));});m.connect("notice_days","onBlur",function(){m.validateIntegerValue(dj.byId("notice_days"));});m.setValidation("claim_cur_code",m.validateCurrency);m.setValidation("claim_reference",m.validateSwiftAddressCharacters);m.connect("claim_amt","onBlur",_4);m.connect("claim_present_date","onBlur",_a);m.connect("claim_reference","onBlur",m.checkClaimReferenceExists);m.connect("applicable_rules","onChange",function(){m.toggleFields((this.get("value")=="99"),null,["applicable_rules_text"]);});m.connect("adv_send_mode","onChange",function(){m.toggleFields((this.get("value")=="99"),null,["adv_send_mode_text"]);});m.connect("lc_available_amt","onBlur",function(){if(dj.byId("lc_amt")&&(dj.byId("lc_amt").get("value")<dj.byId("lc_available_amt").get("value"))){var _3a=function(){var _3b=dijit.byId("lc_available_amt");_3b.focus();_3b.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("AvailLCamtcanNotMoreThanTranAmt"),"",function(){setTimeout(_3a,500);});}});m.connect("applicant_address_line_4","onFocus",function(){m.showTooltip(m.getLocalization("addressLine4ToolTip",[dj.byId("applicant_address_line_4").get("displayedValue"),dj.byId("applicant_address_line_4").get("value")]),d.byId("applicant_address_line_4"),["after"],5000);});m.connect("beneficiary_address_line_4","onFocus",function(){m.showTooltip(m.getLocalization("addressLine4ToolTip",[dj.byId("beneficiary_address_line_4").get("displayedValue"),dj.byId("beneficiary_address_line_4").get("value")]),d.byId("beneficiary_address_line_4"),["after"],5000);});m.connect("credit_available_with_bank_address_line_4","onFocus",function(){m.showTooltip(m.getLocalization("addressLine4ToolTip",[dj.byId("credit_available_with_bank_address_line_4").get("displayedValue"),dj.byId("credit_available_with_bank_address_line_4").get("value")]),d.byId("credit_available_with_bank_address_line_4"),["after"],5000);});m.connect("advising_bank_address_line_4","onFocus",function(){m.showTooltip(m.getLocalization("addressLine4ToolTip",[dj.byId("advising_bank_address_line_4").get("displayedValue"),dj.byId("advising_bank_address_line_4").get("value")]),d.byId("advising_bank_address_line_4"),["after"],5000);});m.connect("advise_thru_bank_address_line_4","onFocus",function(){m.showTooltip(m.getLocalization("addressLine4ToolTip",[dj.byId("advise_thru_bank_address_line_4").get("displayedValue"),dj.byId("advise_thru_bank_address_line_4").get("value")]),d.byId("advise_thru_bank_address_line_4"),["after"],5000);});m.connect("requested_confirmation_party_address_line_4","onFocus",function(){m.showTooltip(m.getLocalization("addressLine4ToolTip",[dj.byId("requested_confirmation_party_address_line_4").get("displayedValue"),dj.byId("requested_confirmation_party_address_line_4").get("value")]),d.byId("requested_confirmation_party_address_line_4"),["after"],5000);});m.connect("drawee_details_bank_address_line_4","onFocus",function(){m.showTooltip(m.getLocalization("addressLine4ToolTip",[dj.byId("drawee_details_bank_address_line_4").get("displayedValue"),dj.byId("drawee_details_bank_address_line_4").get("value")]),d.byId("drawee_details_bank_address_line_4"),["after"],5000);});m.connect("inc_amt_value","onBlur",m.amendTransactionBank);m.connect("dec_amt_value","onBlur",m.amendTransactionBank);m.connect("inc_amt_value","onBlur",function(){m.validateAmendAmount(true,this,"lc");if(!isNaN(dj.byId("inc_amt_value").value)&&d.number.parse(dijit.byId("inc_amt_value").get("value"))>0){dj.byId("lc_amt").set("value",d.number.parse(dj.byId("org_lc_amt").value)+d.number.parse(dj.byId("inc_amt_value").value));dj.byId("inc_amt_value").set("disabled",false);dj.byId("dec_amt_value").set("disabled",true);dj.byId("dec_amt_value").set("value","");}else{if(d.number.parse(dijit.byId("inc_amt_value").get("value"))<0){dj.byId("lc_amt").set("value",d.number.parse(dj.byId("org_lc_amt").value));m.showTooltip(m.getLocalization("valueShouldBeGreaterThanZero",[dj.byId("inc_amt_value").get("displayedValue")]),d.byId("inc_amt_vlue"),["after"],5000);misys.dialog.show("ERROR",dj.byId("inc_amt_value").invalidMessage,"",function(){dj.byId("inc_amt_value").focus();dj.byId("inc_amt_value").set("state","Error");});return false;}}return true;});m.connect("dec_amt_value","onBlur",function(){_13();m.validateAmendAmount(true,this,"lc");if(!isNaN(dj.byId("dec_amt_value").value)){if(d.number.parse(dj.byId("org_lc_amt").value)<d.number.parse(dj.byId("dec_amt_value").value)){m.showTooltip(m.getLocalization("decreaseAmountShouldBeLessThanLCAmount",[dj.byId("dec_amt_value").get("displayedValue")]),d.byId("dec_amt_value"),["after"],5000);misys.dialog.show("ERROR",dj.byId("dec_amt_value").invalidMessage,"",function(){dj.byId("dec_amt_value").focus();dj.byId("dec_amt_value").set("state","Error");});return false;}else{if(d.number.parse(dijit.byId("dec_amt_value").get("value"))<0){dj.byId("lc_amt").set("value",d.number.parse(dj.byId("org_lc_amt").value));m.showTooltip(m.getLocalization("valueShouldBeGreaterThanZero",[dj.byId("dec_amt_value").get("displayedValue")]),d.byId("dec_amt_value"),["after"],5000);misys.dialog.show("ERROR",dj.byId("dec_amt_value").invalidMessage,"",function(){dj.byId("dec_amt_value").focus();dj.byId("dec_amt_value").set("state","Error");});return false;}else{if(d.number.parse(dj.byId("dec_amt_value").value)>0){dj.byId("lc_amt").set("value",d.number.parse(dj.byId("org_lc_amt").value)-d.number.parse(dj.byId("dec_amt_value").value));dj.byId("dec_amt_value").set("disabled",false);dj.byId("inc_amt_value").set("disabled",true);dj.byId("inc_amt_value").set("value","");}}}}return true;});m.connect("lc_amt","onBlur",function(){var _3c=d.number.parse(dj.byId("org_lc_amt_value").value),_3d=d.number.parse(dj.byId("lc_amt").value);if(!isNaN(_3d)){if(_3c>_3d){dj.byId("dec_amt_value").set("value",_3c-_3d);dj.byId("dec_amt_value").set("disabled",false);dj.byId("inc_amt_value").set("disabled",true);dj.byId("inc_amt_value").set("value","");}if(_3c<_3d){dj.byId("inc_amt_value").set("value",_3d-_3c);dj.byId("inc_amt_value").set("disabled",false);dj.byId("dec_amt_value").set("disabled",true);dj.byId("dec_amt_value").set("value","");}if(_3c===_3d){dj.byId("inc_amt_value").set("value","");dj.byId("inc_amt_value").set("disabled",false);dj.byId("dec_amt_value").set("value","");dj.byId("dec_amt_value").set("disabled",false);}}if(d.number.parse(dj.byId("lc_amt").value)<=0){m.showTooltip(m.getLocalization("valueShouldBeGreaterThanZero",[dj.byId("lc_amt").get("displayedValue")]),d.byId("lc_amt"),["after"],5000);misys.dialog.show("ERROR",dj.byId("lc_amt").invalidMessage,"",function(){dj.byId("dec_amt_value").set("value","");dj.byId("inc_amt_value").set("value","");dj.byId("dec_amt_value").set("disabled",false);dj.byId("inc_amt_value").set("disabled",false);dj.byId("lc_amt").set("state","Error");});return false;}if(isNaN(d.number.parse(dj.byId("lc_amt").value))){dj.byId("dec_amt_value").set("value","");dj.byId("inc_amt_value").set("value","");dj.byId("dec_amt_value").set("disabled",false);dj.byId("inc_amt_value").set("disabled",false);dj.byId("lc_amt").set("state","Error");return false;}return true;});m.connect("advise_renewal_flag","onClick",function(){m.toggleFields(this.get("checked"),null,["advise_renewal_days_nb"]);});m.connect("advise_renewal_flag","onChange",function(){m.toggleFields(this.get("checked"),null,["advise_renewal_days_nb"]);});m.connect("rolling_renewal_flag","onClick",function(){m.toggleFields(this.get("checked"),null,["rolling_renewal_nb","rolling_cancellation_days","rolling_renew_on_code"]);if(!this.get("checked")){dj.byId("rolling_renew_for_nb").set("value","");dj.byId("rolling_renew_for_period").set("value","");dj.byId("rolling_day_in_month").set("value","");if(dj.byId("renew_flag").get("checked")){dj.byId("rolling_renewal_nb").set("value",m.getLocalization("default_rewnewalNumber"));}}});m.connect("rolling_renewal_flag","onChange",function(){m.toggleFields(this.get("checked"),null,["rolling_renewal_nb","rolling_cancellation_days","rolling_renew_on_code"]);if(!this.get("checked")){dj.byId("rolling_renew_for_nb").set("value","");dj.byId("rolling_renew_for_period").set("value","");dj.byId("rolling_day_in_month").set("value","");if(dj.byId("renew_flag").get("checked")){dj.byId("rolling_renewal_nb").set("value",m.getLocalization("default_rewnewalNumber"));}}});m.connect("rolling_renew_on_code","onChange",function(){m.toggleFields(this.get("value")==="03",["rolling_day_in_month"],["rolling_renew_for_nb"],true);if(this.get("value")==="01"){dj.byId("rolling_renew_for_nb").set("value","");dj.byId("rolling_renew_for_period").set("value","");dj.byId("rolling_day_in_month").set("value","");}else{if(dj.byId("rolling_renew_on_code").get("value")==="03"&&dj.byId("rolling_renewal_flag").get("checked")&&dj.byId("renew_for_period").get("value")!==""){dj.byId("rolling_renew_for_period").set("value",dj.byId("renew_for_period").get("value"));}}});m.connect("rolling_renew_for_nb","onBlur",function(){m.validateRollingRenewalFrequency(dj.byId("rolling_renew_for_nb"));});m.connect("renew_for_nb","onBlur",function(){m.validateRollingRenewalFrequency(dj.byId("renew_for_nb"));});m.connect("renew_for_period","onChange",function(){if(dj.byId("rolling_renew_on_code").get("value")==="03"&&dj.byId("rolling_renewal_flag").get("checked")&&dj.byId("renew_for_period").get("value")!==""){dj.byId("rolling_renew_for_period").set("value",dj.byId("renew_for_period").get("value"));}});m.connect("rolling_day_in_month","onBlur",function(){if(dj.byId("rolling_day_in_month").get("value")===0){dj.byId("rolling_day_in_month").set("state","Error");dj.showTooltip(m.getLocalization("dayInMonthZeroNotApplicableError"),dj.byId("rolling_day_in_month").domNode,0);var _3e=function(){dj.hideTooltip(dj.byId("rolling_day_in_month").domNode);};setTimeout(_3e,4500);}});m.connect("rolling_day_in_month","onChange",function(){if(dj.byId("rolling_renew_for_period").get("value")==="D"){this.set("value","");dj.showTooltip(m.getLocalization("dayInMonthNotApplicableForDaysError"),dj.byId("rolling_day_in_month").domNode,0);var _3f=function(){dj.hideTooltip(dj.byId("rolling_day_in_month").domNode);};setTimeout(_3f,1500);}});m.connect("rolling_renew_for_period","onChange",function(){if(dj.byId("rolling_renew_for_period").get("value")==="D"&&!isNaN(dj.byId("rolling_day_in_month").get("value"))){dj.byId("rolling_day_in_month").set("value","");dj.showTooltip(m.getLocalization("dayInMonthNotApplicableForDaysError"),dj.byId("rolling_renew_for_period").domNode,0);var _40=function(){dj.hideTooltip(dj.byId("rolling_day_in_month").domNode);};setTimeout(_40,1500);}});m.connect("maturity_date","onBlur",m.validateMaturityDateInMO);},validateEnteredDateGreaterThanCurrentDate:function(){if(!m._config.isBank||(m._config.isBank&&dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")==="03"||dj.byId("prod_stat_code").get("value")==="08")){var _41=dj.byId("maturity_date");var _42=new Date();var _43=new Date(_41);var _44=new Date();_44.setTime(_44.getTime()-(1000*3600*24));if(d.date.compare(_43,_44)<0){m.dialog.show("ERROR",m.getLocalization("lessthanCurrentDate"));_41.set("value"," ");return false;}}return true;},validateDocumentAmtAndCalcLiabAmt:function(){var _45=dj.byId("org_lc_liab_amt").get("value");var _46=dj.byId("tnx_amt");var _47=_46.get("value");var _48=true;var _49;if(!m.validateAmount((_46)?_46:0)){_49=m.getLocalization("amountcannotzero");_46.set("state","Error");dj.hideTooltip(_46.domNode);dj.showTooltip(_49,_46.domNode,100);_46.invalidMessage=_49;_48=false;}var _4a;if(d.isString(_45)){_4a=d.number.parse(_45);}if(_48&&(dj.byId("prod_stat_code").get("value")==="05"||dj.byId("prod_stat_code").get("value")==="15"||dj.byId("prod_stat_code").get("value")==="14"||dj.byId("prod_stat_code").get("value")==="13")&&_47>_4a){_49=m.getLocalization("documentAmtGreaterThanLCAmt",[dj.byId("lc_cur_code").getValue(),_47,_45]);_46.set("state","Error");dj.hideTooltip(_46.domNode);dj.showTooltip(_49,_46.domNode,100);_46.invalidMessage=_49;_48=false;}if(_48){m.updateOutstandingAmount(dj.byId("lc_liab_amt"),dj.byId("org_lc_liab_amt"));}return _48;},onFormLoad:function(){if(document.getElementById("amd_no")){m._config.amendmentNumber=document.getElementById("amd_no").value;}m._config.lcCurCode=dj.byId("lc_cur_code").get("value");m._config.beneficiary.name=dj.byId("beneficiary_name")?dj.byId("beneficiary_name").get("value"):"";m._config.beneficiary.addressLine1=dj.byId("beneficiary_address_line_1")?dj.byId("beneficiary_address_line_1").get("value"):"";m._config.beneficiary.addressLine2=dj.byId("beneficiary_address_line_2")?dj.byId("beneficiary_address_line_2").get("value"):"";m._config.beneficiary.dom=dj.byId("beneficiary_dom")?dj.byId("beneficiary_dom").get("value"):"";m._config.applicant.entity=dj.byId("entity")?dj.byId("entity").get("value"):"";m._config.applicant.name=dj.byId("applicant_name")?dj.byId("applicant_name").get("value"):"";m._config.applicant.addressLine1=dj.byId("applicant_address_line_1")?dj.byId("applicant_address_line_1").get("value"):"";m._config.applicant.addressLine2=dj.byId("applicant_address_line_2")?dj.byId("applicant_address_line_2").get("value"):"";m._config.applicant.dom=dj.byId("applicant_dom")?dj.byId("applicant_dom").get("value"):"";m._config.expDate=dj.byId("exp_date")?dj.byId("exp_date").get("displayedValue"):"";m._config.lastShipDate=dj.byId("last_ship_date")?dj.byId("last_ship_date").get("displayedValue"):"";if(m._config.shipment_period_standard===false){m._config.earliestShipDate=dj.byId("earliest_ship_date")?dj.byId("earliest_ship_date").get("displayedValue"):"";m._config.shipPeriod=dj.byId("ship_period")?dj.byId("ship_period").get("displayedValue"):"";m._config.shipName=dj.byId("ship_name")?dj.byId("ship_name").get("displayedValue"):"";if(dj.byId("narrative_shipment_period")){m._config.narrativeShipPeriod=dj.byId("narrative_shipment_period").get("displayedValue")?dj.byId("narrative_shipment_period").get("displayedValue"):"";}}if(dj.byId("mode")&&dj.byId("mode").get("value")==="RELEASE"){m.toggleRequired("iss_date",false);m.toggleRequired("lc_liab_amt",false);m.toggleRequired("lc_available_amt",false);}m.toggleRequired("credit_available_with_bank_address_line_1",false);if(m._config.swift2018Enabled){m._formLoadSwift2018();}m.setCurrency(dj.byId("lc_cur_code"),["tnx_amt","lc_amt"]);m.setCurrency(dj.byId("lc_cur_code"),["lc_available_amt","lc_liab_amt"]);m.setCurrency(dj.byId("lc_cur_code"),["org_lc_amt_value","inc_amt_value","dec_amt_value"]);if(dj.byId("inc_amt")&&dj.byId("inc_amt_value")&&dj.byId("dec_amt_value")){if(dj.byId("inc_amt").get("value")){dj.byId("inc_amt_value").set("value",dj.byId("inc_amt").get("value"));dj.byId("dec_amt_value").set("disabled",true);}}if(dj.byId("dec_amt")&&dj.byId("inc_amt_value")&&dj.byId("dec_amt_value")){if(dj.byId("dec_amt").get("value")){dj.byId("dec_amt_value").set("value",dj.byId("dec_amt").get("value"));dj.byId("inc_amt_value").set("disabled",true);}}var _4b=dj.byId("adv_send_mode");if(_4b){m.toggleFields(_4b.get("value")=="99",null,["adv_send_mode_text"]);}var _4c=dj.byId("part_ship_detl_nosend");if(_4c){var _4d=_4c.get("value");m.toggleFields(_4d&&_4d!=="ALLOWED"&&_4d!==_1&&_4d!=="NONE",null,["part_ship_detl_text_nosend"],true);}var _4e=dj.byId("part_ship_detl");if(_4e&&_4e.get("value")===""){_4e.set("value",_4c.get("value"));}var _4f=dj.byId("tran_ship_detl_nosend");if(_4f){var _50=_4f.get("value");m.toggleFields(_50&&_50!=="ALLOWED"&&_50!==_1&&_50!=="NONE",null,["tran_ship_detl_text_nosend"]);}var _51=dj.byId("tran_ship_detl");if(_51&&_51.get("value")===""){_51.set("value",_4f.get("value"));}var _52=["cr_avl_by_code_1","cr_avl_by_code_2","cr_avl_by_code_3","cr_avl_by_code_4","cr_avl_by_code_5"];d.forEach(_52,function(id){var _53=dj.byId(id);if(_53&&_53.get("checked")){_53.onClick();}});var _54=dj.byId("renew_flag");if(_54){d.hitch(_54,m.toggleRenewalDetails,true)();m.toggleFields((dj.byId("renew_on_code").get("value")=="02"),null,["renewal_calendar_date"],true);m.toggleFields(dj.byId("advise_renewal_flag").get("checked"),null,["advise_renewal_days_nb"],true);m.toggleFields(dj.byId("rolling_renewal_flag").get("checked"),null,["rolling_renewal_nb","rolling_cancellation_days","rolling_renew_on_code"],true);if(d.byId("advise_renewal_days_nb")&&d.byId("advise_renewal_days_nb").value==""){dj.byId("advise_renewal_flag").set("checked",false);}var _55=dj.byId("rolling_renew_on_code");if(_55){m.toggleFields(_55.get("value")==="03",["rolling_day_in_month"],["rolling_renew_for_nb"],true);}}var _56=dj.byId("eucp_flag");if(_56){m.toggleFields(_56.get("checked"),null,["eucp_details"]);}var _57=dj.byId("cr_avl_by_code_1").get("checked"),_58=dj.byId("cr_avl_by_code_2").get("checked"),_59=dj.byId("cr_avl_by_code_3").get("checked"),_5a=dj.byId("cr_avl_by_code_5").get("checked");if(!_57&&!_58&&!_59&&!_5a){m.setDraftTerm();}var _5b=dj.byId("issuing_bank_abbv_name");if(_5b){_5b.onChange();}var _5c=dj.byId("drawee_details_bank_name");if(_5c){_5c.onChange();m.setDraweeDetailBankName();}if(dj.byId("prod_stat_code").get("value")==="01"){m.toggleFields(false,["action_req_code"],["iss_date","bo_ref_id"]);dojo.forEach(dj.byId("fakeform1").getChildren(),function(_5d){var id=_5d.id;if(_5d.required===true){m._config.lcMandatoryFields.push(id);m.toggleRequired(id,false);}});m._config.lcMandatoryFields.push("narrative_description_goods");m._config.lcMandatoryFields.push("narrative_documents_required");m.toggleRequired("narrative_description_goods",false);m.toggleRequired("narrative_documents_required",false);}if(dj.byId("facility_id")){m._config.isLoading=true;dj.byId("facility_id").onChange();m.connect("limit_id","onChange",m.validateLimitBookingAmount);m.connect("booking_amt","onBlur",m.validateLimitBookingAmount);}if(dj.byId("facility_mandatory")&&dj.byId("facility_mandatory").get("value")==="true"){m.toggleRequired("facility_id",true);}if(dj.byId("latest_answer_date")){m.toggleProdStatCodeFields();if(dj.byId("prod_stat_code").get("value")==="A9"){dj.byId("latest_answer_date").set("disabled",true);}}var _5e=dj.byId("transport_mode_nosend");if(_5e){var _5f=_5e.get("value");m.toggleFields(_5f&&_5f!=="AIRT"&&_5f!=="SEAT"&&_5f!=="RAIL"&&_5f!=="ROAD"&&_5f!=="MULT",null,["transport_mode_text_nosend"]);}var _60=dj.byId("transport_mode");if(_60&&_60.get("value")===""){_60.set("value",_5e.get("value"));}var _61=dj.byId("prod_stat_code"),_62=dj.byId("lc_liab_amt");if(_62&&_61&&(_61.get("value")==="01"||_61.get("value")==="10"||_61.get("value")==="06")){_62.set("readOnly",true);_62.set("disabled",true);}else{if(_62){_62.set("readOnly",false);_62.set("disabled",false);}}var _63=dj.byId("lc_available_amt");if(_63&&_61&&(_61.get("value")==="01"||_61.get("value")==="10"||_61.get("value")==="06")){_63.set("readOnly",true);_63.set("disabled",true);}else{if(_63){_63.set("readOnly",false);_63.set("disabled",false);}}var _64=dj.byId("prod_stat_code");if(dj.byId("doc_ref_no")){if(_61&&(_61.get("value")==="16"||_61.get("value")==="24"||_61.get("value")==="A9")){dj.byId("doc_ref_no").set("disabled",false);}else{dj.byId("doc_ref_no").set("disabled",true);}if(dj.byId("option")&&dj.byId("option").get("value")==="EXISTING"&&dj.byId("doc_ref_no").get("value")!==""&&dj.byId("doc_ref_no").get("disabled")){dj.byId("doc_ref_no").set("value","");}}if(dj.byId("mode")&&dj.byId("mode").get("value")!=="DRAFT"&&dj.byId("action_req_code")){dijit.byId("action_req_code").set("value","");}m.populateGridOnLoad("lc");if(dj.byId("tnx_type_code")&&(dj.byId("tnx_type_code").get("value")==="15"||(dj.byId("tnx_type_code").get("value")==="13"))&&(m._config.enable_to_edit_customer_details_bank_side=="false")){dojo.style("transactionDetails","display","none");}else{if(m._config.enable_to_edit_customer_details_bank_side=="false"&&dojo.byId("release_dttm_view_row")){dojo.style("transactionDetails","display","none");var _65=["stnd_by_lc_flag","transport_mode_nosend","transport_mode_text_nosend","cfm_chrg_brn_by_code_2","cfm_chrg_brn_by_code_1","open_chrg_brn_by_code_1","open_chrg_brn_by_code_2","corr_chrg_brn_by_code_1","corr_chrg_brn_by_code_2","max_cr_desc_code","neg_tol_pct","pstv_tol_pct","lc_liab_amt","lc_amt_img","lc_amt","lc_cur_code","cfm_inst_code_3","cfm_inst_code_2","cfm_inst_code_1","ntrf_flag","irv_flag","max_expiry_date","expiry_place","exp_date","exp_date_type_code","entity","applicant_name","applicant_address_line_1","applicant_address_line_2","applicant_dom","applicant_country","applicant_reference","applicant_contact_number","applicant_email","alt_applicant_name","drawee_details_bank_dom","issuing_bank_reference","tenor_days","tenor_period","tenor_from_after","beneficiary_name","beneficiary_address_line_1","tenor_days_type","drawee_details_bank_name","drawee_details_bank_address_line_1","beneficiary_address_line_2","beneficiary_dom","beneficiary_country","beneficiary_reference","beneficiary_contact_number","beneficiary_email","issuing_bank_type_code","drawee_details_bank_address_line_2","issuing_bank_name","issuing_bank_address_line_1","issuing_bank_address_line_2","narrative_additional_instructions","advising_bank_name","advising_bank_address_line_1","advising_bank_address_line_2","advising_bank_dom","advising_bank_iso_code","advise_thru_bank_iso_code","advise_thru_bank_reference","advising_bank_reference","narrative_additional_amount","narrative_payment_instructions","narrative_sender_to_receiver","narrative_charges","narrative_period_presentation","narrative_shipment_period","tenor_type_3","narrative_description_goods","narrative_documents_required","advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","inco_place","inco_term","last_ship_date","ship_name","ship_period","earliest_ship_date","template_id","mlt_ship_detl","tran_ship_detl_text_nosend","tran_ship_detl_nosend","part_ship_detl_text_nosend","purchase_order","part_ship_detl_nosend","ship_to","ship_discharge","ship_loading","ship_from","draft_term_free_format_text","tenor_type_details","tenor_days_type","tenor_type_99","tenor_days","tenor_period","tenor_from_after","tenor_type_2","tenor_maturity_date","tenor_type_1","cr_avl_by_code_6","cr_avl_by_code_5","draft_term","cr_avl_by_code_4","cr_avl_by_code_3","cr_avl_by_code_2","cr_avl_by_code_1","carrier_detl","credit_available_with_bank_name","credit_available_with_bank_address_line_1","credit_available_with_bank_address_line_2","credit_available_with_bank_dom","lc_available_amt","applicable_rules"];d.forEach(_65,function(id){var _66=dj.byId(id);if(_66){m.toggleRequired(_66,false);}});}}if(dj.byId("stnd_by_lc_flag")){if(dj.byId("stnd_by_lc_flag").get("checked")){m.animate("fadeIn",d.byId("expiryType"));m.animate("fadeIn",d.byId("deliveryInstructions"));m.animate("fadeIn",d.byId("renewalDetails"));m.animate("fadeIn",d.byId("governingLawDetails"));if(dj.byId("lc_exp_date_type_code")){m.toggleRequired("lc_exp_date_type_code",true);}if(dj.byId("delv_org")){m.toggleRequired("delv_org",true);}}else{m.animate("fadeOut",d.byId("expiryType"));m.animate("fadeOut",d.byId("deliveryInstructions"));m.animate("fadeOut",d.byId("renewalDetails"));m.animate("fadeOut",d.byId("governingLawDetails"));if(dj.byId("lc_exp_date_type_code")){dj.byId("lc_exp_date_type_code").set("value","");m.toggleRequired("lc_exp_date_type_code",false);}if(dj.byId("delv_org")){dj.byId("delv_org").set("value","");m.toggleRequired("delv_org",false);}if(dj.byId("delv_org_text")){dj.byId("delv_org_text").set("value","");}if(dj.byId("delivery_to")){dj.byId("delivery_to").set("value","");}if(dj.byId("narrative_delivery_to")){dj.byId("narrative_delivery_to").set("value","");}if(dj.byId("renew_flag")){dj.byId("renew_flag").set("checked",false);d.hitch(dj.byId("renew_flag"),m.toggleRenewalDetails,true)();m.connect("renew_flag","onClick",m.toggleRenewalDetails);}if(dj.byId("lc_govern_country")){dj.byId("lc_govern_country").set("value","");}if(dj.byId("lc_govern_text")){dj.byId("lc_govern_text").set("value","");}}}m.connect("lc_exp_date_type_code","onChange",function(){if(this.get("value")==="02"){m.toggleRequired("exp_date",false);m.animate("fadeIn",d.byId("exp-event"));m.toggleRequired("exp_event",true);dj.byId("exp_date").set("disabled",false);m.toggleRequired("exp_date",false);}else{if(this.get("value")==="03"){dj.byId("exp_date").set("disabled",true);m.toggleRequired("exp_date",false);dj.byId("exp_date").set("value",null);m.animate("fadeOut",d.byId("exp-event"));dj.byId("exp_event").set("value","");m.toggleRequired("exp_event",false);}else{m.toggleRequired("exp_date",true);dj.byId("exp_date").set("disabled",false);m.animate("fadeOut",d.byId("exp-event"));dj.byId("exp_event").set("value","");m.toggleRequired("exp_event",false);}}});m.connect("delv_org","onChange",function(){m.toggleFields((this.get("value")==="99"),null,["delv_org_text"]);});if(dj.byId("revolving_flag")){if(dj.byId("revolving_flag").get("checked")){m.animate("fadeIn",d.byId(_2));}else{m.animate("fadeOut",d.byId(_2));dj.byId("revolve_period").set("value","");dj.byId("revolve_frequency").set("value","");dj.byId("revolve_time_no").set("value","");dj.byId("cumulative_flag").set("checked",false);dj.byId("next_revolve_date").set("displayedValue","");dj.byId("notice_days").set("value","");dj.byId("charge_upto").set("value","");}}if(dj.byId("for_account_flag")){if(dj.byId("for_account_flag").get("checked")){m.animate("fadeIn",d.byId(_3));}else{m.animate("fadeOut",d.byId(_3));dj.byId("alt_applicant_name").set("value","");dj.byId("alt_applicant_address_line_1").set("value","");dj.byId("alt_applicant_address_line_2").set("value","");dj.byId("alt_applicant_dom").set("value","");dj.byId("alt_applicant_country").set("value","");}}var _67=dj.byId("for_account_flag");if(_67){m.toggleFields(_67.get("value")==="on",["alt_applicant_address_line_2","alt_applicant_dom"],["alt_applicant_name","alt_applicant_address_line_1","alt_applicant_country"]);}if(_64.get("value")==="79"||_64.get("value")==="78"){dj.byId("action_req_code").set("value","07");dj.byId("action_req_code").set("readOnly",true);}else{if(_64.get("value")=="A9"){m.toggleRequired("tnx_amt",true);m.toggleRequired("maturity_date",true);}else{if(_64.get("value")==="05"||_64.get("value")==="13"||_64.get("value")==="15"||_64.get("value")==="14"||_64.get("value")==="04"){m.toggleRequired("maturity_date",true);}}}if(dj.byId("claim_reference")&&dj.byId("claim_present_date")&&dj.byId("claim_amt")&&dj.byId("claim_cur_code")){if(dj.byId("prod_stat_code")&&(dj.byId("prod_stat_code").get("value")==="84"||dj.byId("prod_stat_code").get("value")==="85")){m.animate("fadeIn",d.byId("claimDetails"));dj.byId("claim_reference").set("required",true);dj.byId("claim_present_date").set("required",true);dj.byId("claim_amt").set("required",true);dj.byId("claim_cur_code").set("value",dj.byId("lc_cur_code").get("value"));if(dj.byId("prod_stat_code").get("value")==="85"&&dj.byId("claim_reference_hidden")&&dj.byId("claim_present_date_hidden")&&dj.byId("claim_amt_hidden")){dj.byId("claim_reference").set("value",dj.byId("claim_reference_hidden").get("value"));dj.byId("claim_present_date").set("value",dj.byId("claim_present_date_hidden").get("value"));dj.byId("claim_amt").set("value",dj.byId("claim_amt_hidden").get("value"));}}else{m.animate("fadeOut",d.byId("claimDetails"));dj.byId("claim_reference").set("disabled",true);dj.byId("claim_present_date").set("disabled",true);dj.byId("claim_amt").set("disabled",true);dj.byId("claim_cur_code").set("disabled",true);dj.byId("claim_reference").set("value","");dj.byId("claim_present_date").set("value",null);dj.byId("claim_amt").set("value","");dj.byId("claim_cur_code").set("value","");}}if((_58||_59)&&dj.byId("mode").get("value")==="RELEASE"){m.toggleRequired("drawee_details_bank_address_line_1",false);}var _68=dj.byId("applicable_rules");if(_68){m.toggleFields(_68.get("value")=="99",null,["applicable_rules_text"]);}if(dj.byId("inco_term_year")){m.getIncoYear();dijit.byId("inco_term_year").set("value",dj.byId("org_term_year").get("value"));}if(dj.byId("inco_term")){if(dj.byId("inco_term_year")&&dj.byId("inco_term_year").get("value")!=""){m.getIncoTerm();}dijit.byId("inco_term").set("value",dj.byId("org_inco_term").get("value"));}var _69=dj.byId("inco_term")?dj.byId("inco_term").get("value"):"";if(_69){m.toggleFields(_69,null,["inco_place"],false,true);}else{m.toggleFields(_69,null,["inco_place"],false,false);}if(dj.byId("stnd_by_lc_flag")&&dj.byId("stnd_by_lc_flag").get("checked")){dj.byId("stnd_by_lc_flag").disabled=true;}else{m.animate("fadeOut",d.byId("standByLcFlagDetails"));}var _6a=dj.byId("maturity_date");if(_6a&&_6a.get("value")){_6a.onBlur();}var _6b=dj.byId("prod_stat_code");var _6c=dj.byId("imp_bill_ref_id");if(_6b&&_6b.get("value")&&_6c){var _6d=dj.byId("prod_stat_code").get("value");if(_6d==="04"||_6d==="07"||_6d==="12"||_6d==="13"||_6d==="05"||_6d==="14"||_6d==="15"){dj.byId("imp_bill_ref_id").set("disabled",false);}else{dj.byId("imp_bill_ref_id").set("disabled",true);dj.byId("imp_bill_ref_id").set("value","");}}var _6e=dj.byId("ship_period");if(_6e&&_6e.get("value")){_6e.onChange();}},beforeSaveValidations:function(){var _6f=dj.byId("applicant_abbv_name");m.setDraftTerm();if(_6f&&_6f.get("value")===""){return false;}else{return true;}},beforeSubmitValidations:function(){var _70=true;if(dj.byId("lc_amt")){if(!m.validateAmount((dj.byId("lc_amt"))?dj.byId("lc_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("lc_amt").set("value","");return false;}}if(dj.byId("lc_available_amt")){if(!m.validateLCAvailablelAmount((dj.byId("lc_available_amt"))?dj.byId("lc_available_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("invalidMessage");dj.byId("lc_available_amt").set("value","");return false;}}if(dj.byId("tnx_amt")&&(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").getValue()!="03"&&dj.byId("tnx_type_code").getValue()!="14"&&!(dj.byId("tnx_type_code").getValue()=="15"&&(dj.byId("prod_stat_code").get("value")=="03"||dj.byId("prod_stat_code").get("value")=="06"||dj.byId("prod_stat_code").get("value")=="08"||dj.byId("prod_stat_code").get("value")=="81")))){if(!m.validateAmount((dj.byId("tnx_amt"))?dj.byId("tnx_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("tnx_amt").set("value","");return false;}}if(dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")==="84"&&dj.byId("claim_amt")&&dj.byId("claim_amt").get("value")!==""&&dj.byId("tnx_amt")){dj.byId("tnx_amt").set("value",dj.byId("claim_amt").get("value"));}m.setDraftTerm();var _71=dj.byId("tnx_amt");if(_71){var _72=_71.get("value");if(!m.validateAmount(_71)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");tnx_amt.set("value","");return false;}var _73=dj.byId("org_lc_liab_amt").get("value");var _74;if(d.isString(_73)){_74=d.number.parse(_73);}var _75=true;if(dj.byId("prod_stat_code")&&(dj.byId("prod_stat_code").get("value")==="05"||dj.byId("prod_stat_code").get("value")==="15"||dj.byId("prod_stat_code").get("value")==="14"||dj.byId("prod_stat_code").get("value")==="13")&&_72>_74){var _76=m.getLocalization("documentAmtGreaterThanLCAmt",[dj.byId("lc_cur_code").getValue(),_72,_73]);_71.set("state","Error");dj.hideTooltip(_71.domNode);dj.showTooltip(_76,_71.domNode,100);_71.invalidMessage=_76;m._config.onSubmitErrorMsg=m.getLocalization("documentAmtGreaterThanLCAmt",[dj.byId("lc_cur_code").getValue(),_72,_73]);_75=false;return _75;}if(_75&&!(dj.byId("product_code")&&dj.byId("product_code").get("value")=="LC"&&dj.byId("tnx_type_code")&&(dj.byId("tnx_type_code").get("value")=="01"||dj.byId("tnx_type_code").get("value")=="03")&&dj.byId("mode")&&dj.byId("mode").get("value")==="UNSIGNED")&&dj.byId("prod_stat_code").get("value")!="12"){m.updateOutstandingAmount(dj.byId("lc_liab_amt"),dj.byId("org_lc_liab_amt"));}}if(m._config.swift2018Enabled){_70=m._beforeSubmitValidationsSwift2018();if(!_70){return _70;}}if(dj.byId("lc_amt")&&dj.byId("lc_available_amt")&&(dj.byId("lc_amt").get("value")<dj.byId("lc_available_amt").get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("AvailLCamtcanNotMoreThanTranAmt");dj.byId("lc_available_amt").set("value","");return false;}if(dj.byId("lc_amt")&&dj.byId("lc_liab_amt")&&dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")=="03"&&(dj.byId("lc_amt").get("value")>dj.byId("lc_liab_amt").get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("LiabLCAmtcanNotLessThanTranAmt");dj.byId("lc_liab_amt").set("value","");return false;}if(dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")==="01"){return true;}else{var _77=function(){dj.hideTooltip(dj.byId("tnx_amt").domNode);};setTimeout(_77,0);if(dj.byId("booking_amt")&&!isNaN(dj.byId("booking_amt").get("value"))&&dj.byId("limit_review_date")&&dj.byId("facility_date")){if(d.date.compare(dj.byId("limit_review_date").get("value"),new Date(),"date")<0){m._config.onSubmitErrorMsg=m.getLocalization("amendLimitDateExpiry");return false;}}var _78=!dj.byId("tnx_stat_code")||!(dj.byId("tnx_stat_code").get("value")&&(dj.byId("tnx_stat_code").get("value")==="03"||dj.byId("tnx_stat_code").get("value")==="07"));if(_78){_70=m.validateDocumentAmtAndLCAmt();if(!_70){var _79=dj.byId("lc_amt");_79.focus();_79.set("state","Error");return false;}}return m.validateLSAmtSumAgainstTnxAmt("lc");}},beforeSubmit:function(){if(m._config.swift2018Enabled){m._beforeSubmit2018();}}});})(dojo,dijit,misys);dojo.require("misys.client.binding.bank.report_lc_client");}