/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.common"]){dojo._hasResource["misys.common"]=true;var originalOperationValue="";var consoleMSG="widget invalid: ";var attachmntFile="attachment-file";var tabContainr=".tabcontainer";var colbortionWindow="#collaborationWindow";var ariaDescrib="aria-describedby";var langMenu="#languagesMenu .dijitReset.dijitStretch.dijitButtonContents.dijitDownArrowButton";var bookmrkMenu="#bookmarkMenu .dijitReset.dijitStretch.dijitButtonContents.dijitDownArrowButton";var popuMenuItem=".dijitReset.dijitInline.dijitMenuItem.dijitMenuItemLabel.portalPopupMenuBarItem";var h1portletTitle="h1.portlet-title";var h2portletTitle="h2.portlet-title";var homepagePortlet=".homepage .portlet";var inlneBlock="inline-block";var prductCode="&productcode=";var refrnceId="&referenceid=";var entitlementCod="&entitlementcode=";var entitlementDescp="&entitlementdescription=";var scrhCrieteria="#searchCriteria > div > p";var GTPRootPotlet="#GTPRootPortlet > div.portlet-section-header.portlet-font > h1";var reportingPopup="/screen/ReportingPopup";var footerHtml="footerHtml";dojo.provide("misys.common");dojo.require("misys.grid._base");dojo.require("misys.widget.Bookmark");dojo.require("misys.binding.SessionTimer");dojo.require("dojox.html.entities");dojo.require("dojox.fx.scroll");dojo.require("dojox.NodeList.delegate");dojo.require("dijit.Editor");dojo.require("dijit.layout.TabContainer");dojo.require("misys.form.SimpleTextarea");dojo.require("dijit.form.MultiSelect");dojo.require("dijit.form.Form");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.binding.AsyncMessage");dojo.require("dojox.lang.aspect");dojo.require("dojox.collections.ArrayList");dojo.require("dojo.io.iframe");dojo.require("dojo.NodeList-traverse");dojo.extend(dijit.Editor,{toXML:function(){var _1=this.get("value").replace("<br _moz_editor_bogus_node=\"TRUE\" />","");_1=dojo.trim(_1);return _1!==""?"<![CDATA["+dojo.trim(dojox.html.entities.encode(_1,dojox.html.entities.html))+"]]>":"";}});dojo.extend(misys.form.SimpleTextarea,{toXML:function(){var _2=this.get("value");_2=dojo.trim(_2);return _2!==""?"<![CDATA["+dojo.trim(_2)+"]]>":"";}});dojo.extend(dijit.form.MultiSelect,{_getValueAttr:function(){return dojo.query("option",this.containerNode).map(function(n){return n.value;});}});function getErrorSection(){var _3=0,_4=0;var _5=[];misys._config=misys._config||{};dojo.query(".toplevel-header").forEach(function(_6){var _7;var i;var _8;var _9=_6.childNodes;for(i=0;i<_9.length;i++){_7=_9[i];if(_7.className==="toc-item"){_8=_7.firstChild.innerHTML;}else{if(_7.className==="fieldset-content"){var _a=[];dojo.forEach(_7.querySelectorAll("*"),function(_b){var _c=dijit.byId(_b.id);if(_c){_c._hasBeenBlurred=true;var _d=_c.disabled||!_c.validate||_c.validate();if(!_d){var _e={"widget":_c};var _f=_c.declaredClass;_a.push(_e);}}});}}if(_8&&_a&&_a.length>0){var _10={"header":_8,"widgetArray":_a,"child":_7};_5.push(_10);}}});if(_5.length>0){var _11=dojo.byId("errorContent");if(_11){_11.innerHTML="";var _12=dojo.create("ul");dojo.forEach(_5,function(_13){_13.child.id="mylink"+_4++;var _14="mylink"+_3++;var li=dojo.create("li");var a=dojo.create("a",{href:"#"+_14,id:"goto_"+_14,innerHTML:_13.header},li);dojo.place(li,_12);});dojo.empty(_11);dojo.style(dojo.byId("errorSection"),"display","block");dojo.place(_12,_11);}}else{if(dojo.byId("errorSection")){dojo.style(dojo.byId("errorSection"),"display","none");}}};dojo.extend(dijit.form.Form,{validate:function(){var _15=false;misys._config=misys._config||{};return dojo.every(dojo.map(this.getDescendants(),function(_16){_16._hasBeenBlurred=true;var _17=_16.disabled||!_16.validate||_16.validate();if(!_17){}if(!_17&&!_15){if(_16.hasOwnProperty("parentTab")){dijit.byId(_16.get("tabContainer")).selectChild(_16.get("parentTab"));}var _18=_16.focus||function(){};if(dojo.isIE<=6||misys._config.popupType){dojo.window.scrollIntoView(_16.containerNode||_16.domNode);_18();}else{dojox.fx.smoothScroll({node:_16.containerNode||_16.domNode,win:window,onEnd:function(){_18();}}).play();}_15=true;}return _17;}),function(_19){return _19;});}});(function(d,dj,m){var _1a=".validate",_1b="realform",_1c="transactionDetails",_1d=attachmntFile,_1e="attachment-fileinvoice",_1f="attachment-filepurchaseorder",_20="attachment-filepurchaseorderupload",_21="files_master_table",_22="attachment-fileOTHER",_23=".swift",_24=100,_25="popup_fakeform1",_26=".subscribeTopic",_27="subscribe_topic",_28="tabChangeStyle",_29=tabContainr,_2a=".dojoxGrid",_2b="TransactionSearchForm",_2c="export_list",_2d="filename",_2e="collaborationWindowContainer",_2f=".toc-item",_30=5000,_31=".chartImg",_32="400px",_33="600",_34="800",_35=500,_36,_37,_38,_39;function _3a(_3b){var _3c=[function(){return true;}],_3d=_3b,_3e,_3f,_40,_41,_42,_43,_44;switch(_3b){case "VALIDATE":_3c.push(misys.validateSummitTransaction);_3e=m.getLocalization("validatingTransactionMessage");break;case "SAVE":_3c.push(_81,m.beforeSaveValidations);if(m.client&&m.client.beforeSaveValidations){_3c.push(m.client.beforeSaveValidations);}_40=m.getLocalization("mandatoryEntityMessage");var _45=dj.byId("product_code")?dj.byId("product_code").get("value"):null;if(_45!==null){var _46=dj.byId(_45.toLowerCase()+"_cur_code");}var _47=_46?_46.get("value"):"";if(_46&&_47!==""&&_46.state==="Error"){_46.set("value","");}_3e=m.getLocalization("savingTransactionMessage");_3f=function(){dijit.byId("entity")?dijit.byId("entity").focus():null;if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _48=dijit.byId(m._config.swiftError[i]);_48.set("state","Error");_48._setStateClass();dj.setWaiState(_48.focusNode,"invalid","true");}_48=dijit.byId(m._config.swiftError[0]);if(_48.hasOwnProperty("parentTab")){dj.byId(_48.get("tabContainer")).selectChild(_48.get("parentTab"));_7a();}dojox.fx.smoothScroll({node:_48.containerNode||_48.domNode,win:window}).play();}};break;case "ADD_BULK":_3c.push(_81,_72,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){if(d.byId(_1c)){m.toggleTransaction(true,false,function(){_72(true);});}else{_72(true);}if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _49=dijit.byId(m._config.swiftError[i]);_49.set("state","Error");_49._setStateClass();dj.setWaiState(_49.focusNode,"invalid","true");}_49=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_49.containerNode||_49.domNode,win:window}).play();}};break;case "UPDATE_BULK":_3c.push(_81,_72,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){if(d.byId(_1c)){m.toggleTransaction(true,false,function(){_72(true);});}else{_72(true);}if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _4a=dijit.byId(m._config.swiftError[i]);_4a.set("state","Error");_4a._setStateClass();dj.setWaiState(_4a.focusNode,"invalid","true");}_4a=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_4a.containerNode||_4a.domNode,win:window}).play();}};break;case "SYSTEM_SUBMIT":_3d="SUBMIT";_3c.push(_72,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){setTimeout(function(){_72(true);},dj.defaultDuration);};break;case "SUBMIT":_3c.push(_81,_72,_7b,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");if(dj.byId("return_comments")){dj.byId("return_comments").set("required",false);}getErrorSection();_3f=function(){_72(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _4b=dijit.byId(m._config.swiftError[i]);_4b.set("state","Error");_4b._setStateClass();dj.setWaiState(_4b.focusNode,"invalid","true");}_4b=dijit.byId(m._config.swiftError[0]);if(_4b.hasOwnProperty("parentTab")){dj.byId(_4b.get("tabContainer")).selectChild(_4b.get("parentTab"));_7a();}if(d.byId(_1c)){m.toggleTransaction(true,false,function(){dojox.fx.smoothScroll({node:_4b.containerNode||_4b.domNode,win:window}).play();});}else{dojox.fx.smoothScroll({node:_4b.containerNode||_4b.domNode,win:window}).play();}}};break;case "SAVE_TEMPLATE":var _4c=dj.byId("template_id"),_4d=_4c.get("value");if(_4d.indexOf("<")!==-1){_4d=_4d.replaceAll("<","&lt;");}if(misys._config.isMultiBank){var _4e=dj.byId("bk_type");var _4f=dj.byId("bk_type_hidden");var _50=dj.byId("payroll_type");var _51=dj.byId("payroll_type_hidden");if(_4e&&_4e.get("value")===""&&_4f&&_4f.get("value")!==""){_4e.set("value",_4f.get("value"));}if(_50&&_50.get("value")===""&&_51&&_51.get("value")!==""){_50.set("value",_51.get("value"));}}_3e=m.getLocalization("savingTemplateMessage",[_4d]);_40=m.getLocalization("mandatoryTemplateFieldError");_3c.push(function(){if(_4c.get("value")===""){_40=m.getLocalization("mandatoryTemplateFieldError");return false;}return true;});_3f=function(){_4c.focus();};break;case "SAVE_REPORT_TEMPLATE":_3d="SAVE_TEMPLATE";_3c.push(_72);_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){setTimeout(function(){_72(true);},dj.defaultDuration);};break;case "CANCEL":document.location.href=m.onCancelNavigation();return;break;case "CANCEL_BULK_TRANSACTION":var _52=dj.byId("ref_id").get("value");var _53=["/screen/BulkScreen?referenceid=",_52,"&mode=CANCEL"];window.location.href=misys.getServletURL(_53.join(""));return;break;case "CANCEL_BULK":var _54=dj.byId("bulk_ref_id").get("value");var _55=dj.byId("bulk_tnx_id").get("value");var _56=dj.byId("ref_id").get("value");var _57=dj.byId("tnx_id").get("value");var _58=["/screen/BulkScreen?referenceid=",_54,"&tnxid=",_55,"&childrefid=",_56,"&childtnxid=",_57,"&tnxtype=01&mode=DRAFT"];window.location.href=misys.getServletURL(_58.join(""));return;break;case "RETURN":_41=dj.byId("return_comments");if(_41&&dojo.string.trim(_41.get("value"))===""){_41.set("value","");_41.set("required",true);if(dj.byId("fakeform1")){dj.byId("fakeform1").validate();}_40=m.getLocalization("requiredToolTip");_41.focus();return;}else{if(_41&&dojo.string.trim(_41.get("value"))!==""){_41.set("value",dojo.string.trim(_41.get("value")));}}break;case "REJECT":_3d="REJECT";if(dj.byId("reject_comments")){_42=dj.byId("reject_comments");if(_42&&dojo.string.trim(_42.get("value"))===""){_42.set("required",true);_40=m.getLocalization("requiredToolTip");_42.focus();return;}}if(dj.byId("free_format_text")){_43=dj.byId("free_format_text");if(_43&&dojo.string.trim(_43.get("value"))===""){_43.set("required",true);_40=m.getLocalization("requiredToolTip");_43.focus();return;}}_3e=m.getLocalization("rejectingTransactionMessage");break;case "RETURN_TRANSACTION":_3d="RETURN_TRANSACTION";_3e=m.getLocalization("returningTransactionMessage");_41=dj.byId("return_comments");if(_41){if(_41&&_41.get("value")===""){_41.set("required",true);dj.byId("fakeform1").validate();_40=m.getLocalization("requiredToolTip");_41.focus();return;}else{var _59=dojo.string.trim(dj.byId("return_comments").get("value"));if(_59===""){dj.byId("return_comments").set("value",_59);_41.set("required",true);dj.byId("fakeform1").validate();_40=m.getLocalization("requiredToolTip");_41.focus();return;}}}break;case "AUTO_FORWARD_SUBMIT":_3d="AUTO_FORWARD_SUBMIT";if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_3e=m.getLocalization("submitAutoForwardMsg");break;case "LEGAL_TEXT_SUBMIT":_3d="SUBMIT";if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_3e=m.getLocalization("validatingAndSubmittingMessage");break;case "DRAFT":_3d="DRAFT";_3c.push(m.beforeSaveValidations);if(m.client&&m.client.beforeSaveValidations){_3c.push(m.client.beforeSaveValidations);}break;case "MAKER_SUBMIT":_3d="SUBMIT";_3c.push(_81,_72,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){_72(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _5a=dijit.byId(m._config.swiftError[i]);_5a.set("state","Error");_5a._setStateClass();dj.setWaiState(_5a.focusNode,"invalid","true");}_5a=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_5a.containerNode||_5a.domNode,win:window}).play();}};break;case "RESUBMIT":_3d="SUBMIT";_3e=m.getLocalization("resubmitMessage");break;case "MAKER_BENE_FILE_UPLOAD_SUBMIT":_3d="SUBMIT";_3c.push(_81,_72,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){_72(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _5b=dijit.byId(m._config.swiftError[i]);_5b.set("state","Error");_5b._setStateClass();dj.setWaiState(_5b.focusNode,"invalid","true");}_5b=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_5b.containerNode||_5b.domNode,win:window}).play();}};break;case "MAKER_BENE_SUBMIT":_3d="SUBMIT";_3c.push(_81,_72,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){_72(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _5c=dijit.byId(m._config.swiftError[i]);_5c.set("state","Error");_5c._setStateClass();dj.setWaiState(_5c.focusNode,"invalid","true");}_5c=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_5c.containerNode||_5c.domNode,win:window}).play();}};break;default:break;}if(_3e&&_3e!==""){m.dialog.show("PROGRESS",_3e);}if((d.every(_3c,function(f){return f();}))||(dj.byId("tnxtype")&&dj.byId("tnxtype").get("value")==="55")){var _5d=dj.byId("realform_operation");if(_5d&&_5d.get("value")===""){_5d.set("value",_3d);}else{if(_3d!==""&&(_3d==="CHECKER_BENE_SUBMIT"||_3d==="CHECKER_BENE_FILE_UPLOAD_SUBMIT")){_5d.set("value","APPROVE_FEATURES");}}_69();if(_3b==="SAVE_TEMPLATE"&&!_104(dijit.byId("template_id"))){m.dialog.show("CONFIRMATION",m.getLocalization("nonUniqueTemplateIDError"),"",function(){if(m.isFormDirty&&m.isFormDirty===true){m.isFormDirty=false;}dj.byId("TransactionData").set("value",m.formToXML());dj.byId("realform").submit();});return;}var _5e=dj.byId("transaction_confirmation_details");if(_5e&&_5e.get("value")==="Y"&&(_3b==="SUBMIT"||_3b==="AUTO_FORWARD_SUBMIT")){m.checkAndShowTnxConfirmationDetailsDialog();}else{if(_3b==="SUBMIT"||_3b==="MAKER_SUBMIT"||_3b==="LEGAL_TEXT_SUBMIT"||_3b==="AUTO_FORWARD_SUBMIT"||_3b==="APPROVE"||_3b==="REJECT"||_3b==="RETURN_TRANSACTION"||_3b==="REVERT"||_3b==="RETURN"||_3b==="DELETE"||_3b==="SYSTEM_SUBMIT"||_3b==="RESUBMIT"||_3b==="CHECKER_BENE_FILE_UPLOAD_SUBMIT"||_3b==="CHECKER_BENE_SUBMIT"||_3b==="MAKER_BENE_FILE_UPLOAD_SUBMIT"||_3b==="MAKER_BENE_SUBMIT"){m.performReauthentication();}else{if(m.isFormDirty&&m.isFormDirty===true){m.isFormDirty=false;}dj.byId("TransactionData").set("value",m.formToXML());dj.byId(_1b).submit();}}}else{var _5f=m._config.holidayCutOffEnabled;var _60=m._config.legalTextEnabled;if(_5f&&_5f===true){m._config.holidayCutOffEnabled=false;}else{if(_60&&_60==true){m._config.legalTextEnabled=false;}else{var _61=m._config.onSubmitErrorMsg;_40=(_61&&_61!=="")?_61:_40;m._config.onSubmitErrorMsg="";if(_40&&_40!==""){m.dialog.show("ERROR",_40,"",_3f);}}}}};function _62(_63){var _64=[function(){return true;}],_65=_63,_66,_67;_64.push(m.beforeSaveValidations);_67=m.getLocalization("mandatoryEntityMessage");_66=function(){dijit.byId("entity")?dijit.byId("entity").focus():null;};if(d.every(_64,function(f){return f();})){var _68=dj.byId("realform_operation");if(_68.get("value")===""){_68.set("value",_65);}_69();_67="";dj.byId("TransactionData").set("value",m.formToXML());}else{var _6a=m._config.holidayCutOffEnabled;if(_6a&&_6a===true){m._config.holidayCutOffEnabled=false;}else{var _6b=m._config.onSubmitErrorMsg;_67=(_6b&&_6b!=="")?_6b:_67;m._config.onSubmitErrorMsg="";if(_67&&_67!==""){m.dialog.show("ERROR",_67,"",_66);}}}return _67;};function _6c(_6d,_6e){m.dialog.show("PROGRESS",m.getLocalization("validatingAndSubmittingMessage"),"",null,function(){setTimeout(function(){m.xhrPost({form:_6d,load:function(_6f,_70){var _71=_6f.substring(_6f.indexOf("<div id='GTPRootPortlet' class='portlet'>"));_71=_71.substring(_71.indexOf("<div class='portlet-font portlet-section-body'><p>"));_71=_71.substring(_71.indexOf("<p>"),_71.indexOf("</div>"));dj.byId("alertDialog").hide();m.dialog.clear(d.byId(m._config.popupType+"data"),dj.byId("contentPane"),_6e,_71);},contentType:""});},1000);});};function _72(_73,_74){var _75=(_74||d.query(_1a)).reverse(),_76=dj.byId("draft_term"),_77=true;if(_76){_76.validate();}d.forEach(_75,function(_78){var _79=dj.byId(_78.id);if(_79._getState()!==""||_79.state!==""){if(_73){_79.validate();}_77=false;}});if(!_77&&_73){_7a();}return _77;};function _7b(){var _7c=dj.byId(_1d);var _7d=dj.byId("delivery_channel");var _7e=false;if(_7d&&(_7d.get("value")=="FACT")&&_7c&&_7c.grid.selection&&_7c.fileActVisible){d.forEach(_7c.grid.selection.getSelected(),function(_7f,_80){if(_7f&&_7f!=null){_7e=true;}});}else{_7e=true;}if(!_7e){m._config.onSubmitErrorMsg=m.getLocalization("selectAtleastOneFileForFileAct");}return _7e;};function _81(){var _82=dj.byId("adv_send_mode");var _83,_84,_85=false,_86=false,_87=false;var _88=false;var _89=false;var _8a;if(document.getElementById("_userType")){_8a=document.getElementById("_userType").getAttribute("value");}misys._config=misys._config||{};misys._config.swiftRelatedSections=misys._config.swiftRelatedSections||[];dojo.mixin(misys._config,{swiftError:new Array()});var _8b=false;var _8c=true;if(m._config.isBank){if(m._config.isBank===true){_8b=true;_8c=false;}}if((_82&&_82.get("value")==="01")||m._config.forceSWIFTValidation){if(_8c||((_8b&&misys._config.productCode!="SR")&&(_8b&&misys._config.productCode!="EL"))){var _8d=[];misys._config.swiftRelatedSections.forEach(function(_8e){var _8f=dj.byId(_8e.concat("_name"));var _90=dj.byId(_8e.concat("_address_line_4"));if(_8f){if(!_99(_8f)){_8d.push(_8f);_86=true;}}if(_90&&_90.get("value")!==""){if(_8c||((_8b&&misys._config.productCode!="SR")&&(_8b&&misys._config.productCode!="EL"))){_8d.push(_90);_87=true;}}});d.query(_23).forEach(function(_91){var _92=dj.byId(_91.getAttribute("widgetid"));var _93=misys._config.productCode;var _94=dj.byId("is798")?dj.byId("is798").get("value"):"";m._config.is798=_94;if((_92&&_92.id!="cust_ref_id")||(_92&&_92.id=="cust_ref_id"&&misys._config.is798=="Y")){_92.onBlur(_92);if(!_9c(_92)&&!(_93!="LC"||_93!="SI"||_93!="EL"||_93!="SR")){m.showTooltip(m.getLocalization("invalidSWIFTFieldSizeError"),_91);_8d.push(_92);m.connect(_92,"onBlur",function(){m.setFieldState(this,_9c(this));});_84=true;}else{if(!_a6(_92)&&_92.id!="template_id"){_8d.push(_92);m.connect(_92,"onBlur",function(){m.setFieldState(this,_a6(this));});_83=true;}else{if(m._config.swift2018Enabled&&_97(_91)&&!_af(_92)){_8d.push(_92);m.connect(_92,"onBlur",function(){m.setFieldState(this,_af(this));});_85=true;}else{if(!(_92.get("required")&&(_92.get("value")===""||isNaN(_92.get("value"))))){m.setFieldState(_92,true);}}}}}});if(_8d.length>0){d.forEach(_8d,function(_95,_96){m.setFieldState(_95,false);if(m._config.swift2018Enabled&&_97(_95)){_88=true;}else{_89=true;}_95.invalidMessage=m.getLocalization("invalidSWIFTTransactionError");misys._config.swiftError[_96]=_95.get("id");});if(_84){_7a();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTFieldSizeError");return false;}else{if(_86){_7a();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTFieldSizeErrorForTrade");return false;}else{if(_83){_7a();var _98=m.getLocalization("invalidSWIFTTransactionErrorMsg");if(_89&&!_88&&_8a){_98=_98+m.getLocalization("invalidSWIFTTransactionValidValues");}if(!_89&&_88&&_8a){_98=_98+m.getLocalization("invalidSWIFTTransactionValidValuesExt");}if(_89&&_88&&_8a){if(_8a=="03"||_8a=="06"){_98=_98+m.getLocalization("invalidSWIFTTransactionValidValuesWithExt");}else{_98=_98+m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank");}}m._config.onSubmitErrorMsg=_98;return false;}else{if(_87){_7a();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTAddressFieldErrorForTrade");return false;}else{if(_85){_7a();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTFirstCharErrorMsg");return false;}}}}}}}}return true;};function _99(_9a){var _9b=dj.byId(_9a);if(_9b.get("value").length>35){return false;}return true;};function _9c(_9d){var _9e=dj.byId(_9d);if(/SimpleTextarea/.test(_9e.declaredClass)){var _9f=1,_a0=_9e.get("value");return d.every(_a0,function(c){if(c==="\n"){return (++_9f<=_24);}return true;});}return true;};function _97(_a1){if(!m._config.swift2018Enabled){return false;}var _a2=dj.byId("product_code");var _a3="";if(_a2){_a3=_a2.get("value");}if(m._config.swift2023Enabled){var _a4=["ship_from","ship_loading","ship_discharge","ship_to","narrative_delivery_to"];if((_a3==="LC"&&new RegExp(_a4.join("|")).test(_a1.id))||(_a3==="SI"&&new RegExp(_a4.join("|")).test(_a1.id))){return true;}}var _a5=["narrative_documents_required","narrative_description_goods","narrative_additional_instructions","narrative_full_details","narrative_charges","narrative_special_beneficiary","narrative_special_recvbank","narrative_sender_to_receiver","narrative_amend_charges_other","free_format_text","narrative_transfer_conditions","narrative_additional_amount","narrative_payment_instructions","narrative_period_presentation","narrative_shipment_period","line_item_product_name","purchase_order","inco_place","ship_name"];if((_a3==="LC"&&new RegExp(_a5.join("|")).test(_a1.id))||(_a3==="EL"&&new RegExp(_a5.join("|")).test(_a1.id))||(_a3==="SI"&&new RegExp(_a5.join("|")).test(_a1.id))||(_a3==="SR"&&new RegExp(_a5.join("|")).test(_a1.id))||(_a3==="BG"&&new RegExp(_a5.join("|")).test(_a1.id))){return true;}else{return false;}};function _a6(_a7){var _a8=dj.byId(_a7),_a9=_a8.get("value");var _aa=_a8.get("displayedValue");if((_a9!=null&&_a9!="")&&(_aa!=null&&_aa!="")){if(_a9.length>_aa.length){_a9=_a8.get("displayedValue");}}if(_a8.datePackage&&_a8.datePackage==="dojo.date"){_a9=_a8.get("displayedValue");}if(_a9===null||_a9===""){return true;}var _ab=true;try{var _ac=dj.byId("swiftregexValue")?dj.byId("swiftregexValue").get("value"):"";if(m._config.swift2018Enabled&&_97(_a7)){_ac=dj.byId("swiftregexzcharValue")?dj.byId("swiftregexzcharValue").get("value"):"";}var _ad=_a9;var _ae=new RegExp(_ac);_ab=_ae.test(_ad);}catch(err){return _ab;}return _ab;};function _af(_b0){var _b1=dj.byId(_b0),_b2=_b1.get("value");if(_b2===null||_b2===""){return true;}if(_b2.indexOf("\n:")!=-1||_b2.indexOf("\n-")!=-1){return false;}return true;};function _b3(_b4,_b5){if(d.isArray(_b4)){if(/CheckBox/.test(_b5)){if(_b4.length===1&&_b4[0]==="on"){return "Y";}return "N";}}if(_b4===null||_b4===""||((_b4+"")==="NaN")){return "";}if(/Date/.test(_b5)){return d.date.locale.format(_b4,{selector:"date",datePattern:misys.getLocalization("g_strGlobalDateFormat")});}if(/Time/.test(_b5)){return d.date.locale.format(_b4,{datePattern:"dd/MM/yyyy",timePattern:"HH:mm:ss"});}return dojo.isString(_b4)?dojox.html.entities.encode(_b4,dojox.html.entities.html):_b4;};function _69(){var _b6=dj.byId("attIds");var _b7=dj.byId("fileActIds");if(_b6){var _b8=[];var _b9=[];if(d.query("table[id^="+_21+"]").length>0){d.query("table[id^="+_21+"] tr[id^='file_row_']]").forEach(function(_ba,i){var _bb=_ba.id;if(i!==0){_b8.push("|");}_b8.push(_bb.substring(_bb.indexOf("row_")+4,_bb.length));});}else{var _bc=[dj.byId(_1d),dj.byId(_22),dj.byId(_1e),dj.byId(_1f),dj.byId(_20)];var _bd=false;d.forEach(_bc,function(_be){if(_be&&_be.grid){var arr=_be.grid.store._arrayOfAllItems;d.forEach(arr,function(_bf,i){if(_bf&&_bf!=null){if(_bd){_b8.push("|");}else{_bd=true;}_b8.push(_bf.attachment_id);}});}});var _c0=dj.byId(_1d);if(_b7&&_c0&&_c0.grid&&_c0.grid.selection){_bd=false;d.forEach(_c0.grid.selection.getSelected(),function(_c1,_c2){if(_c1&&_c1!=null){if(_bd){_b9.push("|");}else{_bd=true;}_b9.push(_c1.attachment_id);}});_b7.set("value",_b9.join(""));}}_b6.set("value",_b8.join(""));}};function _7a(_c3){d.query(_29,_c3).forEach(function(_c4){var _c5=dj.byId(_c4.getAttribute("widgetid"));if(_c5){d.forEach(_c5.getChildren(),function(tab){d.some(tab.getChildren(),function(_c6){if(_c6.get("state")==="Error"){m.connect(_c6,"onChange",function(){_c7(tab,_c6);});_c6.onChange();return true;}return false;});});}});};function _c7(tab,_c8){var _c9=d.create("img",{"class":"errorIcon",src:m.getContextualURL(m._config.imagesSrc+m._config.imageStore.warningIcon),alt:m.getLocalization("tabErrorWarning"),title:m.getLocalization("tabErrorWarning")}),_ca=m._config.requiredFieldPrefix||"*",_cb=tab.get("title"),_cc,_cd;if(_c8.declaredClass){var _ce=_c8.get("value");_cd={"isRequired":_c8.get("required"),"isNonEmpty":_ce!==null&&_ce!=="","isInError":_c8.get("state")==="Error"};}else{_cd=_c8;}if(_cd.isRequired&&(_cb.indexOf(_ca)===-1)){_ca+=" ";_cb=_ca+_cb;}if(_cd.isInError&&_cb.indexOf("<img")===-1){_cc=d.create("div");_cc.innerHTML=_cb;if(!(dojo.isIE&&dojo.isIE===6)){d.place(_c9,_cc);}_cb=_cc.innerHTML;}if(!_cd.isInError&&_cb.indexOf("<img")!==-1){_cb=_cb.substr(0,_cb.indexOf("<img"));}if(_cd.isNonEmpty&&_cb.indexOf(_28)===-1){_cc=d.create("div");d.create("span",{"class":_28,innerHTML:_cb},_cc);_cb=_cc.innerHTML;}if(_cb!==tab.get("title")){tab.set("title",_cb);}};function _cf(_d0){var _d1=false,_d2=false,_d3=false,_d4,_d5;d.query(_29,_d0).forEach(function(_d6){var _d7=dj.byId(_d6.getAttribute("widgetid"));if(_d7){_d5=_d7.get("id");d.forEach(_d7.getChildren(),function(tab){_d1=false;_d2=false;_d3=false;_d4=tab.get("id");d.forEach(tab.getChildren(),function(_d8){var _d9=_d8.get("value");if(!_d1&&_d8.get("required")){_d1=true;}if(!_d2&&(_d9!==null&&_d9!=="")){_d2=true;}if(!_d3&&_d8.get("state")==="Error"){_d3=true;}m.connect(_d8,"onChange",function(){_c7(tab,{"isRequired":_d8.get("required"),"isNonEmpty":_d8.get("value")!==null&&_d8.get("value")!=="","isInError":false});});_d8.set("parentTab",_d4);_d8.set("tabContainer",_d5);});_c7(tab,{"isRequired":_d1,"isNonEmpty":_d2,"isInError":_d3});});}});};function _da(){var _db,_dc;d.query(_26).forEach(function(_dd){_db=dj.byId(dojo.attr(_dd,"widgetid"))||dj.byId(dojo.attr(_dd,"id"));if(_db){_dc=_db.get(_27);if(_dc){d.forEach(_dc.split(" "),function(_de){d.subscribe(_de,_db,function(_df){if(this.handleTopicEvent){this.handleTopicEvent(_df,_de);}});});}}});};function _e0(){if(d.byId(_2b)){m.connect(_2b,"onSubmit",function(e){var _e1=dj.byId(_2c)?dj.byId(_2c).get("value"):"screen";if(e&&_e1==="screen"){e.preventDefault();}d.forEach(dj.byId("TransactionSearchForm").getDescendants(),function(fld){if(fld.state==="Incomplete"&&fld.required===true){fld._hasBeenBlurred=true;fld.validate(false);}});if(this.isValid()){if(_e1!=="screen"){if(_e1==="pdf"){dj.byId(_2d).set("value","AccountStatement."+_e1);}else{dj.byId(_2d).set("value","inquiry."+_e1);}return true;}else{m.grid.reloadForSearchTerms();m.reloadChartImg();return false;}}else{if(dojo.byId("hugeDiv")){dojo.byId("hugeDiv").style.display="none";}return true;}});}};function _e2(){d.query(_2a).forEach(function(_e3){var _e4;var _e5=dj.byId(_e3.id);if(_e5){if(d.hasClass(_e3,"ischarted")){m.grid.toggleAllGroups(_e5,false);}if(!window.isTopElementToBeFocussed){_e5.resize();}}});};function _e6(){var _e7=d.byId(_2e),_e8;if(_e7){d.parser.parse(_e7);_e8=dj.byId("collaborationWindow");_e8.placeAt(dojo.body());if((!d.isIE||d.isIE>7)&&_e8.show){d.style(_e8.domNode,"opacity",0);_e8.show();}else{d.style(_e8.domNode,"opacity",1);}}};function _e9(){var _ea=/ValidationTextBox/;if(!m._config.disableFocusTrap){d.query(".widgetContainer *[id].dijitTextBox:not(.dijitReadOnly):not(.nofocusonerror)").forEach(function(_eb){var _ec=dj.byId(_eb.getAttribute("widgetid"));if(_ea.test(_ec.get("declaredClass"))&&!_ec.focusonerror){}else{m.connect(_ec,"onBlur",_ed);}});}};function _ed(){var _ee=this.get("value")+"";if(this.state==="Error"&&(!m._config.fieldInError||m._config.fieldInError===this.id)&&((typeof _ee==="undefined")||(_ee!==""&&_ee!=="null"&&_ee!=="NaN")||(/Select/.test(this.declaredClass)&&this.get("displayedValue")!==""&&!this.item))){m._config.fieldInError=this.id;var _ef=this;m.dialog.show("ERROR",m.getLocalization("focusOnErrorAlert"),"",function(){_ef.focus();});}else{if(misys._config.fieldInError===this.id){delete misys._config.fieldInError;}}};function _f0(_f1,_f2){_f1.forEach(function(_f3){var _f4=_f3.parentNode.offsetWidth;if(_f4!==0){_39=_f4;}if(_f2){d.attr(_f3,"width",_39);d.attr(_f3,"height",_32);}else{d.attr(_f3,"src",d.attr(_f3,"alt")+"&chartwidth="+_39);}});};function _f5(url,key,_f6){key=encodeURI(key);_f6=encodeURI(_f6);var _f7;if(url.indexOf("?")===-1){_f7=url+"?"+key+"="+_f6;}else{var _f8=url.split("?")[0];var _f9=url.split("?")[1].split("&");var i=_f9.length;var x;while(i--){x=_f9[i].split("=");if(x[0]==key){x[1]=_f6;_f9[i]=x.join("=");break;}}if(i<0){_f9[_f9.length]=[key,_f6].join("=");}_f7=_f8+"?"+_f9.join("&");}return _f7;};function _fa(_fb){_fb.forEach(function(_fc){var _fd=dj.byId(_fc.id);if(_fd){if(!window.isTopElementToBeFocussed||!window.isToPreventTableHeaderFocusAlways){_fd.resize();}_fd.update();}});};function _fe(url,_ff,_100){var _101=_ff||misys.getLocalization("transactionPopupWindowTitle"),_102=_100||"width=800,height=500,resizable=yes,scrollbars=yes",_103=d.global.open(url,_101,_102);if(!_103.opener){_103.opener=self;}_103.focus();};function _104(node){var _105=dj.byId(node),_106=_105.get("value"),_107=true;var _108;if(dj.byId("sub_product_code")){_108=dj.byId("sub_product_code").get("value");}else{_108="*";}if(_106!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateTemplateId"),handleAs:"text",content:{productcode:m._config.productCode,templateid:_106,companyid:dj.byId("company_id").get("value"),subproductcode:_108},sync:true,load:function(_109,_10a){_107=(_109.toLowerCase()==="true");},customError:function(_10b,_10c){console.error("[misys.common] _isUniqueTemplateId error",_10b,_10c);_107=false;}});}return _107;};function _10d(){if(d.query(".cancelButton").length>0||d.query(".cancelBkButton").length>0){d.query(".saveButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SAVE");});});d.query(".systemSaveButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SYSTEM_SUBMIT");});});d.query(".saveTemplateButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SAVE_TEMPLATE");});});d.query(".submitButton").forEach(function(btn){var _10e=dj.byId("transaction_confirmation_details");var _10f=function(){if(m.commonclient&&m.commonclient.submit){m.commonclient.submit("SUBMIT");}else{m.submit("SUBMIT");}};if(_10e&&_10e.get("value")==="Y"){_10f=function(){window.onbeforeunload=null;m.beforeSubmit();_3a("SUBMIT");};}m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",_10f);});d.query(".validateButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("VALIDATE");});});d.query(".forwardButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("FORWARD");});});d.query(".rejectButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("REJECT");});});d.query(".returnTransactionButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("RETURN_TRANSACTION");});});d.query(".cancelButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("CANCEL");});});d.query(".cancelBkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("CANCEL_BULK_TRANSACTION");});});d.query(".helpButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("HELP");});});d.query(".resubmitButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("RESUBMIT");});});d.query(".submitBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SUBMITBULK");});});}if(d.query(".cancelBulkButton").length>0){dj.byId("realform").set("action",m.getServletURL("/screen/BulkScreen"));d.query(".addBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("ADD_BULK");});});d.query(".updateBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("UPDATE_BULK");});});d.query(".saveTemplateBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SAVE_TEMPLATE_BULK");});});d.query(".cancelBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("CANCEL_BULK");});});d.query(".helpButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("HELP");});});}d.query("#toc").delegate("a","onclick",function(evt){if(this.id==="toggleTocLink"){m.toggleTOC();return;}if(this.id&&this.id.indexOf("_")!==-1){var _110=this.id.substr(this.id.indexOf("_")+1),_111=d.byId(_110),_112=d.byId("transactionDetails"),fnc=function(){if(d.isIE<=6){d.window.scrollIntoView(_111);}else{dojox.fx.smoothScroll({node:_111,win:window}).play();}};if(_112&&d.isDescendant(_111,_112)&&(d.style(_112,"display")==="none"||d.style(_112,"position")==="absolute")){m.toggleTransaction(true,false,fnc);}else{fnc();}}});d.query("#errorSection").delegate("a","onclick",function(evt){if(this.id==="errorLink"){m.toggleErrorSection();return;}});if(dj.byId("editTransactionDetails")){m.connect("editTransactionDetails","onclick",function(){m.toggleTransaction(true,true);});}if(dj.byId("hideTransactionDetails")){m.connect("hideTransactionDetails","onclick",function(){m.toggleTransaction(false);});}};function _113(){d.query(".savePopupButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.dialog.submit("SUBMIT");});});d.query(".cancelPopupButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.dialog.submit("CANCEL");});});d.query(".helpPopupButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.dialog.submit("HELP");});});};function _114(){if(m.unloadListener){window.onbeforeunload=m.unloadListener;}dojo.forEach(m.excludedMethods,function(item,idx){dojox.lang.aspect.advise(item.object,item.method,{before:function(){m.isSystemButtonClicked=true;window.onbeforeunload=null;}});});if(dijit.byId(attachmntFile)){dojox.lang.aspect.advise(dijit.byId(attachmntFile).grid.store,["onSet","onNew","onDelete"],{after:function(){m.isFormDirty=true;}});}dojox.lang.aspect.advise(m.dialog,"show",{before:function(){window.onbeforeunload=null;}});dojox.lang.aspect.advise(m,["addTransactionAddon","deleteTransactionAddon","editTransactionAddon"],{after:function(){m.isFormDirty=true;}});d.query("#fakeform0, #fakeform1").forEach(function(node){var form=dj.byId(node.id);d.forEach(form.getDescendants(),function(_115){m.connect(_115,"onChange",m.markFormDirty);});});d.query("#fakeform0 a, #fakeform1 a, #fakeform0 img[onclick], #fakeform1 img[onclick]").forEach(function(node){dojox.lang.aspect.advise(node,"onclick",{before:function(){m.isSystemButtonClicked=true;window.onbeforeunload=null;setTimeout(function(){window.onbeforeunload=m.unloadListener;},50);}});});dojox.lang.aspect.advise(misys,"downloadFile",{before:function(){m.isSystemButtonClicked=true;window.onbeforeunload=null;setTimeout(function(){window.onbeforeunload=m.unloadListener;},50);}});dojo.query(".header a, .footer a, .portalMenuItem *").forEach(function(node,idx){m.connect(node,"onClick",function(_116){if(m.isPopupRequired()){var evt=_116;var _117=_121(evt);if(_117!==""){dojo.stopEvent(evt);m.showUnsavedDataDialog();}var _118=dojo.connect(m,"setUnsavedDataOption",function(){if(m.unsavedDataOption!=="notset"){var _119="";if(m.unsavedDataOption==="save"){m.saveAsync(_117);}else{if(_117!==""&&_119===""&&m.unsavedDataOption==="nosave"){location.href=_117;}}}dojo.disconnect(_118);});}});});var _11a=dj.byId("menu_tree");if(_11a){d.connect(_11a,"onOpen",function(item,node,_11b){d.forEach(dojo.query("#"+node.id+" span.dijitTreeLabel"),function(_11c,idx){m.connect(_11c,"onClick",function(_11d){if(m.isPopupRequired()){var evt=_11d;var _11e=_121(evt);if(_11e!==""){dojo.stopEvent(evt);m.showUnsavedDataDialog();}var _11f=dojo.connect(m,"setUnsavedDataOption",function(){if(m.unsavedDataOption!=="notset"){var _120="";if(m.unsavedDataOption==="save"){m.saveAsync(_11e);}else{if(_11e!==""&&_120===""&&m.unsavedDataOption==="nosave"){location.href=_11e;}}}dojo.disconnect(_11f);});}});});});}};function _121(evt){var _122=evt.target;var _123="";if(_122.nodeName==="IMG"&&_122.parentNode.nodeName==="A"){if(_122.parentNode.href){_123=_122.parentNode.href;}}else{if(_122.href){_123=_122.href;}else{if(dojo.hasClass(_122,"dijitTreeLabel")){var _124=dijit.byId("menu_tree");var _125=_124.attr("path");var _126=dojo.filter(_125,function(_127){return _127.hasOwnProperty("url");});if(_126.length===1&&_126[0].url){_123=_126[0].url;}}}}return _123;};function _128(){var _129="";var path=misys._config.homeUrl;if(misys._config.homeUrl.indexOf("?")!=-1){path=misys._config.homeUrl.split("?")[0];}_129=path.substr(path.lastIndexOf("/")+1);return _129;};function _12a(_12b){var _12c=["LC","BG","EC","EL","IC","BR","TF","SG","SI","SR","IR","FT","BK","SE","LN","TD","LI"];if(_12c.indexOf(_12b)!==-1){if(_12b==="FT"||_12b==="BK"){return m.formToXML({ignoreDisabled:true});}return m.formToXML();}else{return "";}};d.mixin(m,{performReauthentication:function(){var _12d=dj.byId("reauth_perform");if(_12d&&_12d.get("value")==="Y"){var _12e={};if(d.isFunction(m._config.initReAuthParams)){_12e=m._config.initReAuthParams();m.checkAndShowReAuthDialog(_12e);}else{m.setContentInReAuthDialog("ERROR","");dj.byId("reauth_dialog").show();}}else{if(m.isFormDirty&&m.isFormDirty===true){m.isFormDirty=false;}dj.byId("TransactionData").set("value",m.formToXML());dj.byId(_1b).submit();}},submitCommon:function(type){_3a(type);},validateFormsCommon:function(){return _72(true);},openPopupCommon:function(url,name,_12f){_fe(url,name,_12f);},setContentInReAuthDialog:function(_130,_131){var _132;switch(_130){case "01":if(d.isFunction(m._config.nonReauthSubmit)){m._config.nonReauthSubmit();}else{if(dj.byId("TransactionData")){dj.byId("TransactionData").set("value",m.formToXML());}dj.byId(_1b).submit();}break;case "ERROR":if(d.byId("reauth_dialog_content")){_132=dj.findWidgets(d.byId("reauth_dialog_content"));d.forEach(_132,function(w){w.destroyRecursive(false);});d.empty("reauth_dialog_content");}d.byId("reauth_dialog_content").innerHTML=m.getLocalization("technicalErrorReauth");d.parser.parse("reauth_dialog_content");dj.byId("reauth_password").set("required",false);m.animate("wipeOut",d.byId("reauth_otp_response_sb"));m.toggleClassInlineBlock("reauth_sb",false);break;case "EXCHANGE_RATE_ERROR":if(d.byId("reauth_dialog_content")){_132=dj.findWidgets(d.byId("reauth_dialog_content"));d.forEach(_132,function(w){w.destroyRecursive(false);});d.empty("reauth_dialog_content");}d.byId("reauth_dialog_content").innerHTML=m.getLocalization("technicalErrorExchangeRate");d.parser.parse("reauth_dialog_content");dj.byId("reauth_password").set("required",false);m.animate("wipeOut",d.byId("reauth_otp_response_sb"));m.toggleClassInlineBlock("reauth_dialog_password",false);m.toggleClassInlineBlock("reauth_sb",false);break;default:if(d.byId("reauth_dialog_content")){_132=dj.findWidgets(dojo.byId("reauth_dialog_content"));d.forEach(_132,function(w){w.destroyRecursive(false);});d.empty("reauth_dialog_content");}d.byId("reauth_dialog_content").innerHTML=_130;d.parser.parse("reauth_dialog_content");m.toggleClassInlineBlock("reauth_sb",true);break;}},checkAndShowReAuthDialog:function(_133){if(misys.commonclient&&misys.commonclient.checkAndShowReAuthDialog){misys.commonclient.checkAndShowReAuthDialog(_133);return;}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ReAuthenticationAjax"),handleAs:"text",sync:true,preventCache:true,content:{productCode:_133.productCode,subProductCode:_133.subProductCode,transactionTypeCode:_133.transactionTypeCode,subTransactionTypeCode:(_133.subTransactionTypeCode)?_133.subTransactionTypeCode:"",entity:(_133.entity)?_133.entity:"",currency:(_133.currency)?_133.currency:"",amount:(_133.amount)?_133.amount:"",tnxAmt:(_133.tnxAmt)?_133.tnxAmt:"",bank_abbv_name:(_133.bankAbbvName)?_133.bankAbbvName:"",xml:_12a(_133.productCode),mode:dj.byId("mode")?dj.byId("mode").get("value"):"",operation:dj.byId("realform_operation")?dj.byId("realform_operation").get("value"):"",option:_133.option?_133.option:""},load:function(_134,_135){if(!(_134.indexOf("SC_UNAUTHORIZED")===-1)){misys.showSessionOverDialog();}else{m.setContentInReAuthDialog(_134,_135);if(""+_134+""!="01"){dj.byId("reauth_dialog").show();}}},customError:function(_136,_137){console.error(_136);m.setContentInReAuthDialog("ERROR",_137);dj.byId("reauth_dialog").show();}});},getQueryParameterByName:function(name,url){name=name.replace(/[\[\]]/g,"\\$&");var _138=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),_139=_138.exec(url);if(!_139){return null;}if(!_139[2]){return "";}return decodeURIComponent(_139[2].replace(/\+/g," "));},isAngularProductUrl:function(_13a,_13b){if(!_13b||_13b==="null"||_13b===""){var ret=misys._config.angularProducts&&misys._config.angularProducts.indexOf(_13a)>-1;var _13c=[];if(typeof misys._config["restrictedangularscreen"]!="undefined"&&misys._config.restrictedangularscreen!=null){_13c=misys._config.restrictedangularscreen.replace(/[\[\]']+/g,"").split(", ");}var _13d=false;for(var i=0;i<_13c.length;i++){if(window.location.href.indexOf(_13c[i])>-1){_13d=true;}}if(ret&&_13a&&_13a!==""&&((typeof misys._config["restrictedangularproductcode"]!="undefined")&&misys._config.restrictedangularproductcode!=null&&misys._config.restrictedangularproductcode.indexOf(_13a)>-1)&&((_13d)||(window.location.href.indexOf("MessageCenterScreen")>-1)||(window.location.href.indexOf("classicUXHome")>-1))){ret=false;}return ret;}else{return misys._config.angularSubProducts&&misys._config.angularProducts&&misys._config.angularProducts.indexOf(_13a)>-1&&m.isSubProductCodeValidForAngularUrl(misys._config.angularSubProducts,_13b);}},isSubProductCodeValidForAngularUrl:function contains(_13e,_13f){var _140=_13e.replace("[","").replace("]","");var _141=_140.split(", ");if(_141.includes(_13f)){return true;}return false;},setTnxConfirmationDetailsInDialog:function(_142,_143){switch(_142){case "ERROR":undefined;m.dialog.show("ERROR",m.getLocalization("technicalErrorTnxConfirmationDetails"));break;default:undefined;var _144=function(){m.performReauthentication();};var _145=function(){var _146=dj.byId("realform_operation");_146.set("value","");m.dialog.hide();};m.dialog.show("CONFIRMATION",_142,"",null,null,"",_144,_145,null);break;}},checkAndShowTnxConfirmationDetailsDialog:function(){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/TransactionConfirmationDetailsAction"),handleAs:"text",sync:true,preventCache:true,content:{transactionData:m.formToXML()},load:function(_147,_148){if(!(_147.indexOf("SC_UNAUTHORIZED")===-1)){misys.showSessionOverDialog();}else{m.setTnxConfirmationDetailsInDialog(_147,_148);}},customError:function(_149,_14a){console.error(_149);m.setTnxConfirmationDetailsInDialog("ERROR",_14a);}});},angularMenuReSize:function(){var _14b=document.querySelector(".ui-menubar-root-list").offsetHeight;var _14c=document.querySelector(".colmask");if(_14c&&_14c!=="undefined"){if(_14b>=42){_14c.style.top="80px";}}},_setupFocus:function(_14d){m.hideCollabWindow();if(_14d){m.setAccessibilityFlags();}if(window.isTopElementToBeFocussed){m.focusTopElement();}if(window.isTopElementToBeFocussed&&_14d){setTimeout(function(){window.isTopElementToBeFocussed=false;},window.topElementFocusTimeout);}},hideCollabWindow:function(){if(!window.isFloatingFormSummaryMenuEnabled){if(dojo.query(colbortionWindow)&&dojo.query(colbortionWindow)[0]!=undefined){dojo.style(dojo.query(colbortionWindow)[0],"display","none");}if(dojo.query("#toc")&&dojo.query("#toc")[0]!=undefined){dojo.style(dojo.query("#toc")[0],"display","none");}}},skipToMenuLink:function(){if(!dojo.byId("portalMenuBar")){dojo.style(dojo.byId("skipToMenu"),"display","none");}else{dojo.style(dojo.byId("skipToMenu"),"display","inline");}},skipToContentLink:function(){if(!dojo.byId("GTPRootPortlet")){var _14e=dojo.query(".portlet-title")[0];var _14f=dojo.attr(_14e,"id");if(_14f){dojo.attr(dojo.byId("skipToContent"),"href","#"+_14f);dojo.style(dojo.byId("skipToContent"),"display","block");}else{dojo.style(dojo.byId("skipToContent"),"display","none");}}},setAccessibilityFlags:function(){dojo.query("label").forEach(function(_150){try{if(dojo.hasAttr(_150,"for")&&dojo.attr(_150,"for")===""){dojo.removeAttr(_150,"for");}}catch(exe){}});var _151=["validateButton","validateButton2","saveButton","saveButton2","submitButton","submitButton2","forwardButton","forwardButton2","rejectButton","rejectButton2","returnTransactionButton","returnTransactionButton2","templateButton","templateButton2","menuCancelButton","cancelButton2","helpButton","helpButton2","previewButton","previewButton2","submitBulkButton","submitBulkButton2","addBulkButton","addBulkButton2","updateBulkButton","updateBulkButton2","templateBulkButton","templateBulkButton2","cancelBulkButton","cancelBulkButton2","helpButton","helpButton2","uploadFormButton","uploadFormButton2","resubmitButton","resubmitButton2","sySubmitButton"];dojo.forEach(_151,function(_152,i){if(dojo.query("#"+_152)[0]){dojo.attr(dojo.query("#"+_152)[0],ariaDescrib,"mainScreenHeadingText");}});if(dojo.query(langMenu)&&dojo.query(langMenu)[0]!==undefined){dojo.attr(dojo.query(langMenu)[0],"role","menu");dojo.attr(dojo.query(langMenu)[0],ariaDescrib,"language-menu-instructions");}if(dojo.query(bookmrkMenu)&&dojo.query(bookmrkMenu)[0]!==undefined){dojo.attr(dojo.query(bookmrkMenu)[0],ariaDescrib,"bookmark-menu-instructions");dojo.attr(dojo.query(langMenu)[0],"role","listbox");}dojo.query("#bookmarkToolTipDialog .bookmark").forEach(function(_153){var _154=dojo.query("a",_153)[0];var _155=dojo.query("a",_153)[1];var _156=dojo.attr(dojo.query("img",_155)[0],"title")+" "+dojo.attr(_154,"innerHTML")+" "+misys.getLocalization("bookmark");dojo.style(_155,"display","inline");dojo.attr(_155,"aria-label",_156);});dojo.query(".dojoxGridHeader table.dojoxGridRowTable").forEach(function(_157){try{dojo.attr(dojo.query("tbody>tr>th",_157)[0],ariaDescrib,"table-head-instructions");}catch(exc){}});dojo.query(".dojoxGridContent ").forEach(function(_158){try{if(dojo.query("div>div.dojoxGridRow>table>tbody>tr>td",_158)[0]){dojo.attr(dojo.query("div>div.dojoxGridRow>table>tbody>tr>td",_158)[0],ariaDescrib,"table-body-instructions");}}catch(exc){}});if(dojo.query(popuMenuItem)&&dojo.query(popuMenuItem)[0]!=undefined){try{dojo.attr(dojo.query(popuMenuItem)[0],ariaDescrib,"top-menu-instructions");}catch(exc){}}dojo.query(".collapsingImgSpan, .collapsingImgSpanLeftSide").forEach(function(_159){var _15a="toggle-box-inst";if(dojo.attr(_159,"onclick")==="javascript:misys.toggleSearchGrid();"){if(dojo.query(scrhCrieteria)&&dojo.query(scrhCrieteria)[0]!==undefined){var _15b;var _15c=dojo.query(scrhCrieteria)[0];if(dojo.attr(_15c,"id")){_15b=dojo.attr(_15c,"id");}else{dojo.attr(_15c,"id","searchHelpText");_15b=dojo.attr(_15c,"id");}_15a=_15a+" "+_15b;}}dojo.attr(_159,ariaDescrib,_15a);});dojo.query("#GTPRootPortlet img, #GTPRootPortlet a, #GTPRootPortlet button, #GTPRootPortlet span, #GTPRootPortlet div ").forEach(function(_15d){try{var _15e="";if(dojo.attr(_15d,"onClick")){_15e=dojo.attr(_15d,"onClick");}else{if(dojo.attr(_15d,"href")){_15e=dojo.attr(_15d,"href");}}if(_15e&&_15e.length>0){if(_15e.indexOf("misys.showSearchDialog")!==-1||_15e.indexOf("misys.popup.showReporting")!==-1||_15e.indexOf("misys.popup.showPreview")!==-1||_15e.indexOf("misys.showBankTypeDialog")!==-1||_15e.indexOf("misys.showSearchUserAccountsDialog")!==-1||_15e.indexOf("misys.showEntityDialog")!==-1){dojo.attr(_15d,ariaDescrib,"dialog-link-inst");}}else{var _15f="";if(dojo.attr(_15d,"src")){_15f=dojo.attr(_15d,"src");if(_15f.indexOf("open_dialog.png")!==-1||_15f.indexOf("search.png")!==-1){var _160=_15d.parentNode;if(dojo.attr(_160,"dojoattachpoint")&&(dojo.attr(_160,"dojoattachpoint")==="containerNode")&&!(dojo.attr(_160,"onClick"))){_160=_160.parentNode;}dojo.attr(_160,ariaDescrib,"dialog-link-inst");}}}}catch(exc){}});},focusTopElement:function(){var _161="";var _162;if(window.isTopElementFirstH1&&dojo.query(GTPRootPotlet)){try{dojo.query(GTPRootPotlet)[0].focus();_161=dojo.attr(dojo.query(GTPRootPotlet)[0],"innerHTML");dojo.attr(dojo.query(GTPRootPotlet)[0],"id","mainScreenHeadingText");}catch(exc){if(dojo.query(h1portletTitle)&&dojo.query(h1portletTitle)[0]!==undefined){dojo.query(h1portletTitle)[0].focus();}else{if(dojo.query(h2portletTitle)&&dojo.query(h2portletTitle)[0]!==undefined){dojo.query(h2portletTitle)[0].focus();_162=dojo.query(h2portletTitle)[0];}}}}else{if(dojo.byId("skipToMenu")){dojo.byId("skipToMenu").focus();}else{if(dojo.byId("helpDesk")){dojo.byId("helpDesk").focus();}else{if(dojo.byId("manageProfile")){dojo.byId("manageProfile").focus();}}}}if(_162&&_162!==undefined){dojo.attr(_162,ariaDescrib,"welcome userId lastLoginSpanID");}},onLoad:function(){m.onBeforeLoad();var _163=function(elem,_164){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){var _165=(this.document||this.ownerDocument).querySelectorAll(s),i=_165.length;while(--i>=0&&_165.item(i)!==this){}return i>-1;};}for(;elem&&elem!==document;elem=elem.parentNode){if(elem.matches(_164)){return elem;}}return null;};function _166(n1,n2){var p1=n1.parentNode;var p2=n2.parentNode;var i1,i2;if(!p1||!p2||p1.isEqualNode(n2)||p2.isEqualNode(n1)){return;}for(var i=0;i<p1.children.length;i++){if(p1.children[i].isEqualNode(n1)){i1=i;}}for(i=0;i<p2.children.length;i++){if(p2.children[i].isEqualNode(n2)){i2=i;}}if(p1.isEqualNode(p2)&&i1<i2){i2++;}p1.insertBefore(n2,p1.children[i1]);p2.insertBefore(n1,p2.children[i2]);};window.onresize=function(){var _167=document.getElementsByClassName("dijitPopup dijitComboBoxMenuPopup");for(var i=0;i<_167.length;i++){_167[i].style.display="none";}};window.setTimeout(function(){if(dojo.byId("saveDashboard")){dojo.byId("saveDashboard").addEventListener("click",function(){var _168={"level1":[],"level2":[],"level3":[]};for(var i=0;i<d.query(homepagePortlet).length;i++){var obj={};var ele=d.query(homepagePortlet)[i];if(ele&&!_163(d.query(homepagePortlet)[i],".colmid")){if(ele&&_163(d.query(homepagePortlet)[i],".colLeft")){obj["position"]=ele.getAttribute("position");obj["id"]=ele.id;_168.level1.push(obj);}else{if(ele&&_163(d.query(homepagePortlet)[i],".colRight")){obj["position"]=ele.getAttribute("position");obj["id"]=ele.id;_168.level2.push(obj);}}}else{obj["position"]=ele.getAttribute("position");obj["id"]=ele.id;_168.level3.push(obj);}}document.getElementById("_dashboardpositions").value=JSON.stringify(_168);m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/UserPreferencesAction"),handleAs:"text",sync:true,preventCache:true,content:{portletPositions:document.getElementById("_dashboardpositions").value,PSML:document.getElementById("DashboardPSML").value,operation:"SAVE",themeColor:document.documentElement.style.getPropertyValue("--main-bg-color"),textColor:document.documentElement.style.getPropertyValue("--main-text-color"),fontType:document.documentElement.style.getPropertyValue("--main-font-family"),fontSize:document.documentElement.style.getPropertyValue("--main-font-size")},load:function(_169,_16a){window.location.href=m.getServletURL("");},customError:function(_16b,_16c){console.error(_16b);}});},false);}},100);var _16d=function(e){var _16e=_163(e.target,".portlet");_16e.style.display="none";};if(d.query(".delIcon")[0]){for(var i=0;i<d.query(".delIcon").length;i++){d.query(".delIcon")[i].addEventListener("click",_16d,true);}}if(dojo.byId("saveDashboard")&&d.query(homepagePortlet)[0]){for(i=0;i<d.query(homepagePortlet).length;i++){var dEle=d.query(homepagePortlet)[i];dEle.setAttribute("draggable","true");dEle.setAttribute("position",i);dEle.addEventListener("dragstart",function(e){e.dataTransfer.effectAllowed="copy";e.dataTransfer.setData("Text",this.id);});}if(d.query(".colContainer")[0]){var _16f=d.query(".colContainer")[0];_16f.addEventListener("dragover",function(e){if(e.preventDefault){e.preventDefault();}this.className="over";e.dataTransfer.dropEffect="copy";return false;});_16f.addEventListener("dragenter",function(e){this.className="over";return false;});_16f.addEventListener("dragleave",function(){this.className="";});_16f.addEventListener("drop",function(e){if(e.stopPropagation){e.stopPropagation();}var _170=document.getElementById(e.dataTransfer.getData("Text"));var _171=_163(e.target,".homepage .portlet");var _172=_170.getAttribute("position");var _173=_171.getAttribute("position");_166(_170,_171);_170.setAttribute("position",_173);_171.setAttribute("position",_172);});}}if(dojo.query(".maincontent.homepage")&&dojo.query(".maincontent.homepage")[0]!==undefined){var _174=dojo.byId("CustomerOngoingTasksList")?true:false;var _175=dojo.byId("InternalNewsPortlet")?true:false;var _176=dojo.byId("OutstandingPerProductChartPortlet")?true:false;var _177=dojo.byId("TradeEventsGridPortlet")?true:false;var _178=dojo.byId("HomeAccountSummaryListPortlet")?true:false;var _179=dojo.byId("ActionRequiredPortlet")?true:false;var _17a=dojo.byId("OpicsAccountListPortletPlusBalance")?true:false;if(!_174&&!_175&&!_176&&!_177&&!_178&&!_179&&!_17a){if(dojo.byId("RatePortlet")){dojo.style("RatePortlet","width",10);dojo.style("RatePortlet","position","relative");dojo.style("RatePortlet","left","100%");}if(dojo.byId("ratesGrid")){dojo.style("ratesGrid","width",10);dojo.style("ratesGrid","position","relative");}}}var p1=function(){try{if(dojo.byId("footerMain")&&dojo.byId("footerHtml")){dojo.byId("footerHtml").style.cssText="display:none !important";}if(dojo.query(".homepage")&&window.dontShowRouter&&window.dontShowRouter===true){dojo.style(dojo.query(".colContainer")[0],"padding-top","70px");dojo.byId("layout").style.cssText="padding:0px 24px 0px 24px !important";if(dojo.query(".colMask")[0]){dojo.style(dojo.query(".colMask")[0],"position","static");}}}catch(err){}m._setupFocus(false);_e2();_e0();if(m._config.saveUnsavedData&&m._config.saveUnsavedData===true){_114();}var _17b=document.querySelector(".ui-menubar-root-list");if(_17b&&_17b!=="undefined"){m.angularMenuReSize();window.addEventListener("resize",m.angularMenuReSize());}},p2=function(){_da();_cf();_e9();m.resizeCharts();_e6();_10d();m._setupFocus(true);};return this._onLoad(p1,p2);},onBeforeLoad:function(){if(window.isAccessibilitySkiptoLinksEnabled){m.skipToMenuLink();m.skipToContentLink();}},submit:function(type){if(misys.commonclient&&misys.commonclient.submit){misys.commonclient.submit(type);}else{var _17c=m.getLocalization("saveTransactionConfirmation"),_17d=function(){if(type==="SUBMITBULK"){m.submitBulk(_72);}else{m.beforeSubmit();_3a(type);}};if(dj.byId("realform_operation")&&(dj.byId("realform_operation").get("_resetValue")!=="")){originalOperationValue=dj.byId("realform_operation").get("_resetValue");}switch(type){case "VALIDATE":_3a(type);return;break;case "SUBMITBULK":case "SUBMIT":m.setCustomConfirmMessage();var _17e=m._config.globalSubmitConfirmationMsg;var _17f=misys._config.warningMessages?misys._config.warningMessages.length:0;if(_17f>0){var i;var _180="<b><ol>";for(i=0;i<_17f;i++){_180+=("<li>"+misys._config.warningMessages[i]+"</li>");}_180+="</ol></b>";_17e=misys.getLocalization("submitTransactionConfirmationWithWarning",[_180]);}_17c=(_17e&&_17e!=="")?_17e:m.getLocalization("submitTransactionConfirmation");var eucp=dj.byId("eucp_flag");if(eucp&&!eucp.get("disabled")){_17c=m.getLocalization("submitEUCPTransactionConfirmation");}break;case "SYSTEM_SUBMIT":var _181=m.formApplicableWarningMsg();_17c=_181?_181:_17c;_17d=function(){_3a(type);};break;case "SAVE_TEMPLATE":_17c=m.getLocalization("saveTemplateConfirmation");_17d=function(){_3a(type);};break;case "SAVE_REPORT_TEMPLATE":_17c=m.getLocalization("saveTemplateConfirmation");_17d=function(){_3a(type);};break;case "CANCEL":_17c=m.getLocalization("cancelTransactionConfirmation");_17d=function(){_3a(type);};break;case "CANCEL_BULK_TRANSACTION":_17c=m.getLocalization("cancelTransactionConfirmation");_17d=function(){_3a(type);};break;case "REJECT":_17c=m.getLocalization("rejectTransactionConfirmation");_17d=function(){_3a(type);};break;case "RETURN_TRANSACTION":_17c=m.getLocalization("returnTransactionConfirmation");_17d=function(){_3a(type);};break;case "HELP":_fe(m._config.onlineHelpUrl,m.getLocalization("onlineHelpWindowTitle"),"width=1000,height=700,resizable=yes,scrollbars=yes");return;break;case "APPROVE":_17c=m.getLocalization("submitTransactionConfirmation");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_17d=function(){_3a(type);};break;case "DELETE":_17c=m.getLocalization("deleteMCTransactionsConfirmation");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_17d=function(){_3a(type);};break;case "CHECKER_WARN_DELETE_ROLE_SUBMIT":var _182=dijit.byId("featureid").get("value");var _183=dijit.byId("roletype").get("value");var _184=false;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckRoleMapping"),handleAs:"json",preventCache:true,sync:true,content:{role_name:_182,role_type:_183},load:function(_185,args){_184=_185.isRoleMapped;},error:function(_186,args){_184=false;console.error("Checking Role mapping  error ",_186);}});if(_184){_17c=m.getLocalization("deleteMappedRoleConfirmation");}else{_17c=m.getLocalization("deleteRoleConfirmation");}dj.byId("realform_operation").set("value","APPROVE_FEATURES");_17d=function(){_3a(type);};break;case "REVERT":_17c=m.getLocalization("revertMCTransactionsConfirmation");dj.byId("realform_operation").set("value","REVERT_FEATURES");_17d=function(){_3a(type);};break;case "RETURN":_17c=m.getLocalization("returnMCTransactionsConfirmation");dj.byId("realform_operation").set("value","RETURN_FEATURES");_17d=function(){_3a(type);};break;case "DRAFT":dj.byId("realform_operation").set("value","DRAFT_FEATURES");_17d=function(){_3a(type);};break;case "MAKER_SUBMIT":m.setCustomConfirmMessage();_17e=m._config.globalSubmitConfirmationMsg;_17c=m.getLocalization("submitTransactionConfirmation");_17c=_17e?_17e:_17c;_17d=function(){_3a(type);};break;case "MAKER_BENE_SUBMIT":_17c=m.getLocalization("submitTransactionConfirmationForMasterBeneficiary");_17d=function(){_3a("MAKER_SUBMIT");};break;case "MAKER_BENE_FILE_UPLOAD_SUBMIT":_17c=m.getLocalization("submitTransactionConfirmationForBeneficiaryFileUpload");_17d=function(){_3a("MAKER_SUBMIT");};break;case "CHECKER_BENE_SUBMIT":_17c=m.getLocalization("submitTransactionConfirmationForMasterBeneficiary");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_17d=function(){_3a("APPROVE");};break;case "CHECKER_BENE_FILE_UPLOAD_SUBMIT":_17c=m.getLocalization("submitTransactionConfirmationForBeneficiaryFileUpload");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_17d=function(){_3a("APPROVE");};break;case "AUTO_FORWARD_SUBMIT":_17c=m.getLocalization("submitAutoForwardTransactionConfirmation");_17d=function(){_3a(type);};break;case "ADD_BULK":_17c=m.getLocalization("addBulkConfirmation");_17d=function(){_3a(type);};break;case "UPDATE_BULK":_17c=m.getLocalization("updateBulkConfirmation");_17d=function(){_3a("ADD_BULK");};break;case "CANCEL_BULK":_17c=m.getLocalization("cancelBulkConfirmation");_17d=function(){_3a(type);};break;case "SAVE_TEMPLATE_BULK":_17c=m.getLocalization("saveTemplateBulkConfirmation");_17d=function(){_3a(type);};break;case "RESUBMIT":_17c=m.getLocalization("resubmitConfirmation");_17d=function(){_3a(type);};break;default:break;}var _187=function(){if(originalOperationValue!==""){dj.byId("realform_operation").set("value",originalOperationValue);}if(m.unloadListener){window.onbeforeunload=m.unloadListener;}};m.dialog.show("CONFIRMATION",_17c,"",_17d,"","","",_187);}},acceptLegalText:function(){_3a("LEGAL_TEXT_SUBMIT");},submitBulkNoAutoForward:function(type){_3a(type);},saveAsync:function(_188){var type;if(d.query("#draftButton").length>0){type="DRAFT";dj.byId("realform_operation").set("value","DRAFT_FEATURES");}else{type="SAVE";}var _189=_62(type);if(_189!==""){m.unsavedDataOption="notset";var _18a=function(){dijit.byId("entity")?dijit.byId("entity").focus():null;};m.dialog.show("ERROR",_189,"",_18a);}else{var _18b=d.byId("realform");d.attr(_18b,"action",m.getServletURL("/screen/AsyncScreen"));var _18c={realscreen:_128()};m.xhrPost({url:m.getServletURL("/screen/AsyncScreen")+"?"+d.objectToQuery(_18c),preventCache:true,sync:true,form:_18b,handleAs:"json",load:function(_18d,args){if(_18d.status==="success"){location.href=_188;m.isFormDirty=false;}else{if(_18d.status==="failure"){m.unsavedDataOption="notset";m.dialog.show("ERROR",m.getLocalization(_18d.message));}}},error:function(_18e,args){console.error("Error during Save");m.dialog.show("ERROR",m.getLocalization("technicalError"));}});}},formToXML:function(init){var _18f={selector:".validate",xmlRoot:m._config.xmlTagName,ignoreDisabled:false},xml=[];d.mixin(_18f,init);if(_18f.xmlRoot){xml=["<",_18f.xmlRoot,">"];}if(!_18f.ignoreDisabled){d.query(".dijitDisabled").forEach(function(w){var _190=dj.byId(d.attr(w,"widgetid"));if(_190){_190.set("disabled",false);}});}d.query(_18f.selector).forEach(function(node){var form=dj.byId(node.id),_191={},_192,_193,_194,_195;d.forEach(form.getDescendants(),function(_196){if(!_196.name||_191[_196.name]){return;}_191[_196.name]=_196;});_192=form.get("value");for(var name in _192){if(_191.hasOwnProperty(name)){_193=_191[name];_194=_193.declaredClass;if(_193.toXML){_195=_193.toXML();_195=(!_195)?"":_195;}else{if(name==="org_narrative_description_goods"||name==="org_narrative_documents_required"||name==="org_narrative_additional_instructions"||name==="org_narrative_special_beneficiary"||name==="org_narrative_special_recvbank"){_195=dojox.html.entities.decode(_193.value,dojox.html.entities.map);}else{_195=_b3(_192[name],_194);}}if(_193.xmlTagName){xml.push(_195);}else{xml.push("<",name,">",_195,"</",name,">");}}}});if(_18f.xmlRoot){xml.push("</",_18f.xmlRoot,">");}var _197=false;if(dj.byId("xhrDialog")&&dj.byId("xhrDialog").open){_197=true;}if(m._config.hasOwnProperty("xmlTransform")&&d.isFunction(m._config.xmlTransform)){if(m.e2ee_transaction&&m.e2ee_transaction.enabled===true&&!_197){return m.e2ee_transaction.encryptData(m._config.xmlTransform(xml.join("")));}else{return m._config.xmlTransform(xml.join(""));}}if(m.e2ee_transaction&&m.e2ee_transaction.enabled===true&&!_197){return m.e2ee_transaction.encryptData(xml.join(""));}else{return xml.join("");}},fieldToXML:function(node){var _198=dj.byId(node),_199=_198.get("name"),tag=[];if(_199){tag.push("<",_199,">",d.trim(dojox.html.entities.encode(_198.get("value"),dojox.html.entities.html)),"</",_199,">");}return tag.join("");},getDomNode:function(dom,_19a){var _19b=dom.getElementsByTagName(_19a),xml=[],node;if(_19b.length>0){xml.push("<",_19a,">");node=_19b[0].childNodes[0];if(node&&node.nodeValue){xml.push(dojo.isString(node.nodeValue)?dojox.html.entities.encode(node.nodeValue,dojox.html.entities.html):node.nodeValue);}xml.push("</",_19a,">");}return xml.join("");},getDomValue:function(dom,_19c){var _19d=dom.getElementsByTagName(_19c),xml=[],node;if(_19d.length>0){node=_19d[0].childNodes[0];if(node&&node.nodeValue){xml.push(dojo.isString(node.nodeValue)?dojox.html.entities.encode(node.nodeValue,dojox.html.entities.html):node.nodeValue);}}return xml.join("");},toggleFields:function(_19e,_19f,_1a0,_1a1,_1a2){var _1a3=m._config.requiredFieldPrefix||"*",_1a4=_1a0,_1a5=0,_1a6=/Check/,_1a7=/Date/,_1a8=/Time/;if(_19f&&d.isArray(_19f)){if(_1a0&&d.isArray(_1a0)){_1a4=_19f.concat(_1a0);}else{_1a4=_19f;}_1a5=_19f.length;}d.forEach(_1a4,function(id,i){var _1a9=dj.byId(id);if(_1a9){if(!_19e&&!_1a1){var _1aa=_1a9.declaredClass;var _1ab="";if(_1a6.test(_1aa)){_1ab=false;}else{if(_1a7.test(_1aa)||(_1a8.test(_1aa))){_1ab=null;}}_1a9.set("value",_1ab);}if(_1a2){_1a9.set("readOnly",false);_1a9.set("disabled",false);}else{_1a9.set("readOnly",!_19e);_1a9.set("disabled",!_19e);}if(i>=_1a5){_1a9.set("required",_19e);if(!_19e&&_1a9.validate){_1a9.validate(false);}var row=d.byId(id+"_row");if(row){var _1ac=d.query("label[for="+id+"]")[0];d.toggleClass(row,"required",_19e);var _1ad="";if(_19e){if(_1ac&&_1ac.innerHTML.indexOf(_1a3)===-1){if(!(_1a6.test(_1aa))){d.place(d.create("span",{"class":"required-field-symbol",innerHTML:_1a3}),_1ac,"first");}}}else{if(_1ac&&_1ac.innerHTML.indexOf(_1a3)!=-1){d.query("span",_1ac).orphan();}}}}}});},toggleRequired:function(node,_1ae){var _1af=dj.byId(node);if(_1af){_1af.set("required",_1ae);var _1b0=d.query("#"+_1af.id+"_row > label");_1b0.forEach(function(_1b1){d.query("span",_1b1).orphan();if(_1ae){d.create("span",{innerHTML:"*","class":"required-field-symbol"},_1b1,"first");}});}},setFieldState:function(node,_1b2){node.state=(_1b2)?"":"Error";node._setStateClass();dj.setWaiState(node.focusNode,"invalid",!_1b2);},confirmDelete:function(_1b3,args){if(_1b3.indexOf("<")!==-1){_1b3=_1b3.replaceAll("<","&lt;");}if(_1b3!==""){this.dialog.show("CONFIRMATION",this.getLocalization("deleteTransactionConfirmation",[_1b3]),"",function(){m.post(args);});}else{this.dialog.show("CONFIRMATION",this.getLocalization("deleteTransactionConfirmationforEmptyTitle"),"",function(){m.post(args);});}},warnDeleteRole:function(_1b4,args){if(_1b4.indexOf("<")!==-1){_1b4=_1b4.replaceAll("<","&lt;");}if(_1b4!==""){var _1b5=false;var _1b6=null;for(var arg=0;arg<args.params.length;arg++){var arr=args.params[arg].name;if(arr=="Role_Type"){_1b6=args.params[arg].value;break;}}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckRoleMapping"),handleAs:"json",preventCache:true,sync:true,content:{role_name:_1b4,role_type:_1b6},load:function(_1b7,args){_1b5=_1b7.isRoleMapped;},error:function(_1b8,args){_1b5=false;console.error("Checking Role mapping  error ",_1b8);}});if(_1b5){this.dialog.show("CONFIRMATION",this.getLocalization("deleteMappedRoleConfirmation",[_1b4]),"",function(){m.post(args);});}else{this.dialog.show("CONFIRMATION",this.getLocalization("deleteRoleConfirmation",[_1b4]),"",function(){m.post(args);});}}else{this.dialog.show("CONFIRMATION",this.getLocalization("deleteTransactionConfirmationforEmptyTitle"),"",function(){m.post(args);});}},showTooltip:function(_1b9,node,_1ba,_1bb){var _1bc=d.byId(node);if(_1bc){setTimeout(function(){dj.hideTooltip(_1bc);},(_1bb||_30));return dj.showTooltip(_1b9,_1bc,_1ba);}},toggleTransaction:function(show,_1bd,_1be){var _1bf=d.byId("transactionDetails"),_1c0=d.byId("editTransactionDetails"),_1c1=d.byId("hideTransactionDetails"),_1c2=_1be||function(){},_1c3=dojo.fx.chain([]);if(d.style(_1bf,"position")==="absolute"){d.style(_1bf,"position","inherit");d.style(_1bf,"display","none");if(d.isIE!==6){d.style(_1bf,"left",0);}else{d.style(_1bf,"right","auto");}}if(show){var _1c4=function(){if(_1c0){return m.animate("fadeOut",_1c0,function(){dojo.style(_1bf,"display","none");dojo.removeClass(_1bf,"offscreen");m.animate("wipeIn",_1bf,function(){m.animate("fadeIn",_1c1,_1c2);dojo.query(tabContainr).forEach(function(t){var tabc=dijit.byId(t.id);if(tabc.resize&&d.isFunction(tabc.resize)){tabc.resize();}});});});}else{return _1c2();}};if(_1bd){m.dialog.show("CONFIRMATION",m.getLocalization("editTransactionConfirmation"),null,_1c4);}else{return _1c4();}}else{return m.animate("wipeOut",_1bf,function(){dojo.addClass(_1bf,"offscreen");m.animate("fadeOut",_1c1,function(){m.animate("fadeIn",_1c0,_1c2);});});}return _1c3;},toggleAmdDetails:function(show,_1c5,_1c6){var _1c7=d.byId("amdDetails"),_1c8=d.byId("showAmdDetails"),_1c9=d.byId("hideAmdDetails"),_1ca=_1c6||function(){},_1cb=dojo.fx.chain([]);if(d.style(_1c7,"position")==="absolute"){d.style(_1c7,"position","inherit");d.style(_1c7,"display","none");if(d.isIE!==6){d.style(_1c7,"left",0);}else{d.style(_1c7,"right","auto");}}if(show){var _1cc=function(){if(_1c8){return m.animate("fadeOut",_1c8,function(){dojo.style(_1c7,"display","none");dojo.removeClass(_1c7,"offscreen");m.animate("wipeIn",_1c7,function(){m.animate("fadeIn",_1c9,_1ca);dojo.query(tabContainr).forEach(function(t){var tabc=dijit.byId(t.id);if(tabc.resize&&d.isFunction(tabc.resize)){tabc.resize();}});});});}else{return _1ca();}};if(_1c5){m.dialog.show("CONFIRMATION",m.getLocalization("editTransactionConfirmation"),null,_1cc);}else{return _1cc();}}else{return m.animate("wipeOut",_1c7,function(){dojo.addClass(_1c7,"offscreen");m.animate("fadeOut",_1c9,function(){m.animate("fadeIn",_1c8,_1ca);});});}return _1cb;},createTOC:function(){var toc=d.byId("toccontent");if(toc){if(d.style(toc,"display")==="block"){m.toggleTOC();}var _1cd=0,_1ce=d.create("ul");d.query(_2f).forEach(function(_1cf){var _1d0=_1cf.id||"link"+_1cd++;_1cf.id=_1d0;var _1d1;try{var _1d2=_1cf.firstChild;if(_1d2){_1d1=_1d2.innerHTML;}}catch(err){console.error("[m.form.common] There was an error building the TOC!");console.error(err);}if(_1d1&&_1d1!==""){var li=d.create("li");var a=d.create("a",{href:"javascript:void(0)",id:"goto_"+_1d0,innerHTML:_1d1},li);d.place(li,_1ce);}});d.empty(toc);d.place(_1ce,toc);}},toggleTOC:function(_1d3){var _1d4=d.byId("toccontent");if(_1d4){if(_1d4.innerHTML===""){m.createTOC();}var _1d5=d.byId("toggleTocLink"),_1d6=d.byId("toc"),show=(d.style(_1d4,"display")==="none"),_1d7=(show)?d.style(d.byId("toc"),"width")+6:d.style(d.byId("toc"),"width")-6,_1d8=(show)?0.9:1,_1d9=(show)?"wipeIn":"wipeOut",_1da=(show)?m.getLocalization("hideFormSummaryMessage"):m.getLocalization("showFormSummaryMessage"),_1db=[],_1dc=[];_1db.push(d.animateProperty({node:_1d6,properties:{width:_1d7}}));_1dc=_1dc.concat(m.animate(_1d9,_1d4,null,true)._animations);_1dc.push(d.animateProperty({node:_1d6,properties:{opacity:_1d8}}));_1db=dojo.fx.chain(_1db.concat(_1dc));d.connect(_1db,"onBegin",function(){setTimeout(function(){_1d5.innerHTML=_1da;},500);});d.connect(_1db,"onEnd",function(){if(_1d3&&d.isFunction(_1d3)){_1d3();}});return _1db.play();}},trim:function(str){var _1dd=str+"",_1de=[];d.forEach(_1dd,function(c){if((c!=="\r")&&(c!=="\n")){_1de.push(c);}});return d.trim(_1de.join(""));},addMultiSelectItems:function(_1df,_1e0){var _1e1=dijit.byId(_1df),_1e2=dijit.byId(_1e0);_1e1.addSelected(_1e2);_1e2.focus();_1e1.focus();},insertAtCursor:function(_1e3,text){var _1e4=_1e3.domNode,_1e5=_1e3.get("value");if(document.selection){_1e3.focus();var sel=window.getSelection();sel.text=text;_1e3.set("value",_1e5+text);}else{if(_1e4.selectionStart||_1e4.selectionStart=="0"){_1e3.set("value",_1e5+text);}else{_1e3.set("value",_1e5+text);}}},resizeCharts:function(){var _1e6=d.query(_31);if(_1e6.length>0){if(_37){clearTimeout(_37);}_37=setTimeout(function(){_f0(_1e6);},_35);}},resizeGrids:function(){var _1e7=d.query(_2a),_1e8=(d.isIE<=6)?2000:200;if(_1e7.length>0){if(_36){clearTimeout(_36);}_36=setTimeout(function(){_fa(_1e7);},_1e8);}},getChartImageMap:function(url,_1e9,_1ea,_1eb){m.xhrGet({url:m.getServletURL("/screen/AjaxScreen/action/"+url),handleAs:"text",contentType:"text/html; charset=utf-8",content:{getmap:"true",dealID:_1ea,borrowerID:_1eb},load:function(_1ec){d.byId(_1e9).innerHTML=_1ec;}});},showChartDialog:function(id){var _1ed=d.create("img",{src:d.attr(d.byId(id),"alt")+"&chartwidth="+_34+"&chartheight="+_33,width:_34,height:_33,alt:"Chart"});if(!_38){_38=new misys.widget.Dialog({onLoad:function(){var that=this;setTimeout(function(){that.show();},dj.defaultDuration);}});}_38.set("width",_34+50);_38.set("height",_33+50);_38.set("content",_1ed);_38.show();},isVisible:function(node){if(!node){return false;}var p;if(node.domNode){node=node.domNode;}return (dojo.style(node,"display")!="none")&&(dojo.style(node,"visibility")!="hidden")&&(p=dojo.position(node),(p.y+p.h>=0)&&(p.x+p.w>=0)&&(p.h&&p.w));},beforeSubmitValidations:function(){return true;},beforeSaveValidations:function(){return true;},onCancelNavigation:function(){return m._config.homeUrl;},setCustomConfirmMessage:function(){},localizeDate:function(_1ee){var _1ef=_1ee.get("value");if(_1ee.get("type")==="hidden"){return d.date.locale.parse(_1ef,{selector:"date",datePattern:m.getLocalization("g_strGlobalDateFormat")});}return _1ef;},validateSearchStartEndDates:function(){var _1f0=dj.byId("dttm_begin"),end=dj.byId("dttm_end");if(end&&end.get("value")===null){return true;}if(_1f0&&end){if(!m.compareDateFields(_1f0,end)){this.invalidMessage=m.getLocalization("dateRangeValidityMessage");return false;}}return true;},compareDateFields:function(_1f1,_1f2){var _1f3,_1f4,_1f5,_1f6;if(_1f1&&_1f2){_1f4=_1f1.get("value");_1f3=_1f2.get("value");if(_1f4&&_1f3){_1f5=m.localizeDate(_1f1);_1f6=m.localizeDate(_1f2);if(d.date.compare(_1f6,_1f5)<0){return false;}}}return true;},confirmMCCancel:function(_1f7,args){this.dialog.show("CONFIRMATION",this.getLocalization("cancelMCTransactionConfirmation",[_1f7]),"",function(){m.post(args);});},trimAmount:function(_1f8){var _1f9=(""+_1f8+"").replace(/[^\d.]/g,"");var _1fa=_1f9.indexOf(".");var _1fb=_1f9.length;var _1fc=_1f9;if(_1fa!==-1){for(var v=_1fb;v>_1fa;v--){var n=_1f9.charAt(v-1);if(n==="0"||n==="."){_1fc=_1fc.substring(0,v-1);}else{break;}}}return _1fc;},exportListToFormat:function(_1fd){if(d.byId(_2b)){dj.byId("export_list").set("value",_1fd);d.create("input",{type:"hidden",name:"searchFlag",value:"true"},TransactionSearchForm);dj.byId("TransactionSearchForm").submit();dj.byId("export_list").set("value","screen");}},exportListFormat:function(_1fe){if(d.byId(_2b)){dj.byId("export_list").set("value",_1fe);var form=dj.byId("TransactionSearchForm");var _1ff=dj.byId("account_no");var _200=dj.byId("account_no").get("value");var _201=dj.byId("entity");var _202;if(dj.byId("operation")&&dj.byId("operation").get("value")==="LIST_BALANCES"){if(_201&&_201.get("value")===""){m.dialog.show("ERROR",m.getLocalization("entityNotSelectedError"));return;}}else{if(dj.byId("operation")&&dj.byId("operation").get("value")==="LIST_STATEMENTS"){if(_201&&_201.get("value")===""){m.dialog.show("ERROR",m.getLocalization("entityNotSelectedError"));dj.byId("export_list").set("value","");return;}if(_1ff.get("value")===""){m.dialog.show("ERROR","Please select an account.");dj.byId("export_list").set("value","");return;}}}if(dijit.byId("is_acc_mandatory")&&_200==""){m.dialog.show("ERROR",m.getLocalization("EmptyAccountError"));}else{if(dijit.byId("account_id")&&dijit.byId("account_id").get("value")){dijit.byId("account_no").set("required",false);dijit.byId("account_no").set("value","");}var _203;var _204;var _205;var _206;var _207;if(_1fe==="swift941"||_1fe==="swift942"){if(dijit.byId("owner_type").get("value")=="05"){m.dialog.show("ERROR",m.getLocalization("ExternalAccountError"));}else{var _208=dj.byId("Current Day").get("value");_203=dj.byId("dateRange").get("value");_204=dj.byId("create_date").get("value");_205=dj.byId("create_date2").get("value");_206=dj.byId("today").get("value");_207=dojo.date.locale.format(_205,{datePattern:misys.getLocalization("g_strGlobalDateFormat"),selector:"date"});if((_208==="1")||((_203==="5")&&(dojo.date.compare(_204,_205)==0)&&(_206===_207))){if(_1fe==="swift942"){dj.byId("export_list").set("value","swift");}form.submit();}else{m.dialog.show("ERROR",m.getLocalization("MT941942ExportError"));}}}else{form.submit();}}if(dijit.byId("account_id")&&dijit.byId("account_id").get("value")){dijit.byId("account_no").set("value",_200);dijit.byId("account_no").set("required",true);}dj.byId("export_list").set("value","screen");}},exportListToFormatInXsl:function(_209){var _20a=dijit.byId("facility_id")?dijit.byId("facility_id").value:"";dojo.io.iframe._currentDfd=null;dojo.io.iframe.send({url:m.getServletURL("/screen/AjaxScreen/action/GetLimitData"),handleAs:"json",sync:true,content:{option:_209,facility_id:_20a,token:document.getElementById("_token").getAttribute("value")}});},exportListToFormatInXslPdfRpmntSc:function(_20b,_20c){dojo.io.iframe._currentDfd=null;var form=document.createElement("FORM");form.setAttribute("id","dummyform");document.body.appendChild(form);dojo.io.iframe.send({url:m.getServletURL("/screen/AjaxScreen/action/LoanRepaymentScheduleAction"),handleAs:"json",form:"dummyform",method:"POST",sync:true,content:{option:_20b,allColumn:_20c,token:document.getElementById("_token").getAttribute("value")}});},getFrequencyCodeData:function(_20d){var _20e;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetFrequencyCodeData"),handleAs:"json",sync:true,content:{frequencyValue:_20d},load:function(_20f){_20e=_20f.items.long_desc;},error:function(){_20e=_20d;}});return _20e;},getBalanceTypeCodeData:function(_210){var _211;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetBalanceTypeCodeData"),handleAs:"json",sync:true,content:{balance_type_Value:_210},load:function(_212){_211=_212.items.long_desc;},error:function(){_211=_210;}});return _211;},getsubGroupTypeData:function(_213){var _214;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetSubGrpTypeCodeData"),handleAs:"json",sync:true,content:{subGrp_type_Value:_213},load:function(_215){_214=_215.items.long_desc;},error:function(){_214=_213;}});return _214;},preDisplayAssigneeType:function(_216){var _217=m._config.task_mode||"userandbank";dojo.forEach(_216,function(_218){if(_218.description==="user_to_bank"&&dj.byId(_218.id)){if(_217==="userandbank"){if(dj.byId(_218.id)){dj.byId(_218.id).set("disabled",false);}else{console.error("Could not find widget with id "+_218.id);}}else{if(dj.byId(_218.id)){dj.byId(_218.id).set("disabled",true);}else{console.error("Could not find widget with id "+_218.id);}}}});},isFormDirty:false,isSystemButtonClicked:false,unsavedDataOption:"notset",excludedMethods:[{object:m,method:"submit"}],markFormDirty:function(){m.isFormDirty=true;},isPopupRequired:function(){var _219=false;if(m.isFormDirty&&m.unsavedDataOption==="notset"){if(dojo.query(".saveButton").length>0){_219=true;}}return _219;},unloadListener:function(){if(misys.isFormDirty&&misys.isFormDirty===true&&m._config.saveUnsavedData&&m._config.saveUnsavedData===true){if(m.unsavedDataOption==="save"){return undefined;}else{if(m.unsavedDataOption==="nosave"){return undefined;}else{return m.getLocalization("unsavedData");}}}},setUnsavedDataOption:function(val){misys.unsavedDataOption=val;},showUnsavedDataDialog:function(){var _21a=dijit.byId("unsavedDataDialog");var _21b=dojo.byId("unsavedDataDialogButtons");var _21c=dijit.byId("SaveContButton").domNode;var _21d=dijit.byId("ContButton").domNode;var _21e=dijit.byId("CancelButton").domNode;var _21f=dijit.byId("unsavedDataDialog").domNode;dojo.style(_21b,"display","block");dojo.style(_21c,"display",inlneBlock);dojo.style(_21d,"display",inlneBlock);dojo.style(_21e,"display",inlneBlock);dojo.style(_21f,"display",inlneBlock);_21a.set("title",misys.getLocalization("unsavedDataPreUnload"));misys.dialog.connect(_21a,"onKeyPress",function(evt){if(evt.keyCode===dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("SaveContButton"),"onMouseUp",function(){misys.dialog.disconnect(_21a);_21a.hide();},_21a.id);misys.dialog.connect(dijit.byId("ContButton"),"onMouseUp",function(){misys.dialog.disconnect(_21a);_21a.hide();},_21a.id);misys.dialog.connect(dijit.byId("CancelButton"),"onMouseUp",function(){misys.dialog.disconnect(_21a);_21a.hide();},_21a.id);misys.dialog.connect(_21a,"onHide",function(){misys.dialog.disconnect(_21a);});_21a.show();},reloadChartImg:function(){var _220=dojo.query("#GTPRootPortlet > .portlet-section-body > div.widgetContainer");var form=dj.byId("TransactionSearchForm");var _221=/Date/;var _222=/Time/;if(form&&_220&&_220[0]&&_220[0].id){var _223=_220[0].id.split("id")[1];var _224=dojo.query("#chart"+_223)[0];if(_224&&_224.src&&_224.alt){var _225=_224.alt;form.getDescendants().forEach(function(_226,i){if(_226.name){var _227;if(_226.declaredClass=="dijit.form.RadioButton"){var _228=dojo.query("[name='"+_226.name+"']",form.domNode);d.some(_228,function(_229){var _22a=dj.byNode(_229.parentNode);if(_22a.checked){_227=_22a.params.value;}});}else{_227=_226.get("value");}if(_221.test(_226.declaredClass)||(_222.test(_226.declaredClass))){_227=_226.get("displayedValue");}if(_227===" "){_227="";}if(_226.type!=="hidden"){_225=_f5(_225,_226.get("name"),_227);}}});_224.alt=_225;m.resizeCharts();}}},formApplicableWarningMsg:function(){var _22b=m._config.globalSubmitConfirmationMsg;var _22c=misys._config.warningMessages?misys._config.warningMessages.length:0;if(_22c>0){var i;var _22d="<b><ol>";for(i=0;i<_22c;i++){_22d+=("<li>"+misys._config.warningMessages[i]+"</li>");}_22d+="</ol></b>";_22b=misys.getLocalization("submitTransactionConfirmationWithWarning",[_22d]);}return (_22b&&_22b!=="")?_22b:"";},toggleErrorSection:function(_22e){var _22f=d.byId("errorContent");if(_22f){var _230=d.byId("errorLink"),_231=d.byId("errorSection"),show=(d.style(_22f,"display")==="none"),_232=(show)?d.style(d.byId("errorSection"),"width")+6:d.style(d.byId("errorSection"),"width")-6,_233=(show)?0.9:1,_234=(show)?"wipeIn":"wipeOut",_235=(show)?m.getLocalization("hideErrorSectionMessage"):m.getLocalization("showErrorSectionMessage"),_236=[],_237=[];_236.push(d.animateProperty({node:_231,properties:{width:_232}}));_237=_237.concat(m.animate(_234,_22f,null,true)._animations);_237.push(d.animateProperty({node:_231,properties:{opacity:_233}}));_236=dojo.fx.chain(_236.concat(_237));d.connect(_236,"onBegin",function(){setTimeout(function(){_230.innerHTML=_235;},500);});d.connect(_236,"onEnd",function(){if(_22e&&d.isFunction(_22e)){_22e();}});return _236.play();}},encryptText:function(_238){if(misys._config.clientSideEncryption){var rsa=new RSAKey();var _239=misys._config.htmlUsedModulus;var _23a=misys._config.cr_seq;rsa.setPublic(_239,"10001");return rsa.encrypt(_238)+_23a;}else{return _238;}}});m.popup=m.popup||{};d.mixin(m.popup,{showPreview:function(type,_23b,_23c,_23d,_23e,_23f,_240){var _241="ReportingPopup",url=[];if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&m.isAngularProductUrl(_23b,"")){url.push("/view?");url.push("referenceid=",_23c);url.push("&tnxid=",_23d);url.push("&productCode=",_23b);url.push("&subProductCode=","");url.push("&mode=","view");url.push("&operation=","PREVIEW");url.push("&tnxTypeCode=",_23e);url.push("&subTnxTypeCode=",_23f);url.push("&eventTnxStatCode=","");var _242=window.open(m.getServletURL("").replace(/.$/,"#")+url.join(""),"_blank","top=100,left=200,height=400,width=900,toolbar=no,resizable=no");_242.onload=function(){var _243=misys.getLocalization("mainTitle");var _244=misys.getLocalization(_23b);_242.document.title=_243+" - "+_244;};}else{var _245="",_246="",_247="",_248="";if(_23d){_245="&tnxid="+_23d;}if(_23e&&_23e!==""){_246="&tnxtype="+_23e;}if(_23f&&_23f!==""){_247="&subtnxtype="+_23f;}if(_240){_241=_240;}url=["/screen/",_241];url.push("?option=",type,"&titlecode=INFO_MSG_PREVIEW_UNCONTROLLED&referenceid=",_23c,_245);url.push(_246);url.push(_247);url.push(prductCode,_23b);if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){url.push("&parenttitle=",window.document.title);}_fe(m.getServletURL(url.join("")));}},showSummary:function(type,_249,_24a,_24b,_24c){switch(type.toLowerCase()){case "print":d.global.print();break;case "close":d.global.close();break;case "export":if(_249){_249=_249.toLowerCase();var _24d=_249;if(_249==="summary"){_24d="EXPORT_PDF_SUMMARY";}else{if(_249==="full"){_24d="EXPORT_PDF_FULL";}else{if(_249==="details"){_24d="EXPORT_PDF_DETAILS";}else{if(_249==="pdf_ec_details"){_24d="PDF_EC_DETAILS";}else{if(_249==="csv_bk_details"){_24d="CSV_BK_DETAILS";}else{if(_249==="snapshot_pdf"){_24d="SNAPSHOT_PDF";}else{if(_249==="updated"){_24d="EXPORT_PDF_FULL";}}}}}}}_24d=_24d.toUpperCase();var url=[reportingPopup];url.push("?option=",_24d);url.push(refrnceId,_24a);if(_24b&&_24b!==""){url.push("&tnxid=",_24b);}url.push(prductCode,_24c);_fe(misys.getServletURL(url.join("")));}break;default:break;}},showPDF:function(url){_fe(misys.getServletURL(url));},showReporting:function(type,_24e,_24f,_250,_251,_252,_253,_254,_255){var _256,_257=[],_258=[],_259=[],_25a=[],_25b="ReportingPopup",url=[],_25c=[],_25d=[],_25e=[];var _25f=m.isAngularProductUrl(_24e,_255);if(_24e==="SE"&&_255!=null&&_255!=undefined&&_255!=""&&_255==="OTHER"){_25f=false;}if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&_25f){url.push("/view?");url.push("referenceid=",_24f);url.push("&tnxid=",_250);url.push("&productCode=",_24e);url.push("&subProductCode=",_255);url.push("&mode=","view");url.push("&operation=","PREVIEW");url.push("&tnxTypeCode=",_251);url.push("&subTnxTypeCode=",_252);url.push("&eventTnxStatCode=",_253);var _260=window.open(m.getServletURL("").replace(/.$/,"#")+url.join(""),"_blank","top=100,left=200,height=400,width=900,toolbar=no,resizable=no");_260.onload=function(){var _261=misys.getLocalization("mainTitle");var _262=misys.getLocalization(_24e);_260.document.title=_261+" - "+_262;};}else{if(_24e&&_24e!==""){_257.push(prductCode,_24e);}if(_24f&&_24f!==""){_258.push(refrnceId,_24f);}if(_250&&_250!==""){_259.push("&tnxid=",_250);}if(_251&&_251!==""){_25c.push("&tnxtype=",_251);}if(_252&&_252!==""){_25d.push("&subtnxtype=",_252);}if(_253&&_253!==""){_25e.push("&tnxstatus=",_253);}if(_254&&_254!==""){_25b=_254;}url.push("/screen/",_25b);url.push("?option=",type);url.push(_258.join(""),_259.join(""),_257.join(""),_25c.join(""),_25d.join(""),_25e.join(""));if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){_25a.push("&parentTitle=",window.document.title);url.push(_25a.join(""));}_fe(m.getServletURL(url.join("")));}},openIframePopup:function(type,_263,_264,_265){var _266=[],_267=[],_268=[],_269=[],_26a="IframePopup",url=[];if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&m.isAngularProductUrl(prodCode,subProductCode)){url.push("/view?");url.push("entitlementcode=",_263);url.push("&companyabbvname=",_265);url.push("&entitlementdescription=",entitlementdescription);url.push("&mode=","view");url.push("&operation=","PREVIEW");window.open(m.getServletURL("").replace(/.$/,"#")+url.join(""),"_blank","top=100,left=200,height=400,width=900,toolbar=no,resizable=no");}else{if(_263&&_263!==""){_266.push(entitlementCod,_263);}if(_264&&_264!==""){_267.push(entitlementDescp,_264);}if(_265&&_265!==""){_268.push("&companyAbbvName=",_265);}url.push("/screen/",_26a);url.push("?option=",type);url.push(_267.join(""),_268.join(""),_266.join(""));if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){_269.push("&parentTitle=",window.document.title);url.push(_269.join(""));}_fe(m.getServletURL(url.join("")));}},showPopup:function(_26b,_26c){var url=[];url.push("/screen/","ReportingPopup");url.push("?option=",_26c);var _26d=misys.getLocalization("transactionPopupWindowTitle");var _26e=document.createElement("form");_26e.target=_26d;_26e.method="POST";_26e.action=m.getServletURL(url.join(""));if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){_26b=_26b+"&parenttitle="+window.document.title;}if(_26b){var _26f=_26b.split("&");for(var i=0;i<_26f.length;i++){if(_26f[i]){if(_26f[i].indexOf("=")==-1){_26f[i-1]=_26f[i-1]+"&"+_26f[i];var _270=Array.from(_26f);_270.splice(i,1);_26f=_270;}}}for(i=0;i<_26f.length;i++){if(_26f[i]){var _271=_26f[i].split("=");var _272=document.createElement("input");_272.type="hidden";_272.name=_271[0];var _273=_271[1];if(_271.length>2){for(var j=2;j<_271.length;j++){_273=_273+"="+_271[j];}}_272.value=_273;_26e.appendChild(_272);}}}document.body.appendChild(_26e);var _274;if(misys._config.showAddressBarInPopup&&misys._config.showAddressBarInPopup==true){_274=d.global.open("",_26d,"width=800,height=500,resizable=yes,scrollbars=yes,location=yes");}else{_274=d.global.open("",_26d,"width=800,height=500,resizable=yes,scrollbars=yes");}if(!_274.opener){_274.opener=self;}_274.focus();if(_274){_26e.submit();}},generateDocument:function(type,_275,_276,_277,_278,_279,_27a){switch(type.toLowerCase()){case "bg-document":var url=[reportingPopup];url.push("?option=",_275);if(_276&&_276!==""){url.push(refrnceId,_276);}if(_277&&_277!==""){url.push("&tnxid=",_277);}url.push(prductCode,_278);if(_279&&!(_279==="")){url.push("&featureid=",_279);}if(_27a&&!(_27a==="")){url.push("&companyId=",_27a);}_fe(m.getServletURL(url.join(""),null,m.getLocalization("pdfSummaryWindowTitle")));break;case "si-document":var _27b=[reportingPopup];_27b.push("?option=",_275);if(_276&&_276!==""){_27b.push(refrnceId,_276);}if(_277&&_277!==""){_27b.push("&tnxid=",_277);}_27b.push(prductCode,_278);if(_279&&!(_279==="")){_27b.push("&featureid=",_279);}if(_27a&&!(_27a==="")){_27b.push("&companyId=",_27a);}_fe(m.getServletURL(_27b.join(""),null,m.getLocalization("pdfSummaryWindowTitle")));break;default:break;}},showBulkSummary:function(type,_27c,_27d,_27e,_27f,_280){var _281;if(!_280){if(dj.byId("export_field")){_281=dj.byId("export_field").get("value");m.popup.showSummary(type,_281,_27d,_27e,_27f);}}else{if(_280){if(dj.byId("export_field_bottom")){_281=dj.byId("export_field_bottom").get("value");m.popup.showSummary(type,_281,_27d,_27e,_27f);}}}}});m.dialog=m.dialog||{};d.mixin(m.dialog,{populate:function(type,url,_282,_283){var _284=_282||"misys.binding.dialog";m._config.popupType=type;d["require"](_284+"."+type);var _285=d.byId(type+"data");if(!_285){console.error("[misys.common] Cannot populate the dialog with content for URL",url);console.error("[misys.common] Check that the dialog content has an element with","ID equal to",(type+"data"));return;}var dim=d.coords(_285),_286=d.create("div",{id:"contentPaneContainer"});var _287;if(!dj.byId("contentPane")){_287=new dijit.layout.ContentPane({id:"contentPane",style:{height:dim.h+"px",width:dim.w+"px",overflow:"auto",position:"relative"}});}else{_287=dj.byId("contentPane");}_287.placeAt(_286,"first");d.style(_286,"visibility","hidden");d.style(_286,"height","0px");d.place(_286,_285,"after");m.animate("wipeOut",_285,function(){m.animate("wipeIn",_286,function(){m.connect(_287.get("id"),"onLoad",function(){m.dialog.bind();_113();_cf(_25);});if(_283){_287.set("ioMethod",m.xhrPost);_287.set("ioArgs",{content:_283});}_287.set("href",url);_287.startup();_287.resize();},null,null,true);},null,null,true);},clear:function(_288,_289,_28a,_28b){var _28c=d.byId("contentPaneContainer");if(_28b){if(d.byId("responseXHRDialogDiv")){d.destroy(d.byId("responseXHRDialogDiv"));}var _28d=dojo.create("div");_28d.id="responseXHRDialogDiv";dojo.addClass(_28d,"responseXHRDialogDiv");d.place(_28b,_28d,"first");}m.animate("wipeOut",_28c,function(){d.place(_28c,d.body(),"last");if(_28b){d.place(_28d,_288,"first");}m.animate("wipeIn",_288,function(){_289.destroyRecursive();d.destroy(_28c);if(_28a&&d.isFunction(_28a)){_28a();}delete m._config.popupType;});});},submit:function(_28e){switch(_28e){case "SUBMIT":undefined;var _28f=dj.byId("product_code")?dj.byId("product_code").get("value"):null;var _290=false;if(_28f==="LC"||_28f==="EL"||_28f==="SI"||_28f==="SR"){_290=true;}var _291=d.query("#"+_25);if(_72(false,_291)){var _292=m.getLocalization("submitTransactionConfirmation");m.dialog.show("CONFIRMATION",_292,"",function(){var _293=dj.byId("popup_realform_operation");if(_293.get("value")===""){_293.set("value","SUBMIT");}dj.byId("popup_TransactionData").set("value",m.formToXML({ignoreDisabled:_290,selector:"#"+_25,xmlRoot:dj.byId("node_name").get("value")}));_6c("popup_realform",function(){m.grid.setStoreURL(dj.byId(m._config.popupType+"data_grid"));});});}else{_7a(_25);m.dialog.show("ERROR",m.getLocalization("mandatoryFieldsToSubmitError"),"",function(){_72(true,_291);});}break;case "CANCEL":m.dialog.clear(d.byId(m._config.popupType+"data"),dj.byId("contentPane"));break;case "HELP":_fe(m._config.onlineHelpUrl,m.getLocalization("onlineHelpWindowTitle"),"width=1000,height=700,resizable=yes,scrollbars=yes");return;break;default:break;}},passBack:function(_294,_295,_296,type){var _297=null;var _298=null;var _299=null;var _29a=null;var _29b=null;var _29c=null;var _29d=null;var _29e=_294.indexOf("applicant_act_nickname")!==-1?_294.indexOf("applicant_act_nickname"):_294.indexOf("applicant_collection_act_nickname");var _29f=_294.indexOf("beneficiary_account_nickname");var _2a0=_294.indexOf("beneficiary_nickname");_299=_294.indexOf("customer_associated_bank");_29a=_295[_29e];_29c=_295[_2a0];_29b=_295[_29f];var _2a1=_295[_299];if(_2a1!==""&&_2a1!==null){m._config.customerBankName=_2a1;}if(_29a!==undefined&&_29a!==""&&_29a!==null&&dj.byId("applicant_act_nickname")){dj.byId("applicant_act_nickname").set("value",_29a);}if(_29c!==undefined&&_29c!==""&&_29c!==null&&dj.byId("beneficiary_nickname")){dj.byId("beneficiary_nickname").set("value",_29c);}if(_29b!==undefined&&_29b!==""&&_29b!==null&&dj.byId("beneficiary_act_nickname")){dj.byId("beneficiary_act_nickname").set("value",_29b);}var _2a2=dj.byId("childXhrDialog"),_2a3=/SimpleTextArea/,_2a4=/SimpleTextarea/,_2a5=/FilteringSelect/,obj;if(type==="swift_bic"){m._config.isBankDetailsPopulated=true;}else{if(type==="beneficiary_accounts"){m._config.isBeneficiaryAccountsPopulated=true;}}d.forEach(_294,function(id,_2a6){var _2a7=["seller_account_type"];obj=dj.byId(id);if(obj){var _2a8=_295[_2a6];if(_2a3.test(obj.declaredClass)||_2a4.test(obj.declaredClass)){if(obj.get("value")!==""){_2a8="\n"+_2a8;}m.insertAtCursor(obj,_2a8);}else{if(_2a5.test(obj.declaredClass)){if(_2a7.indexOf(obj.id)>-1){obj.set("value",_2a8);}else{if(type==="treasury_beneficiary_accounts"){obj.set("value",_2a8);obj.set("displayedValue",_2a8);}else{obj.set("value","");obj.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_2a8}});}}}else{obj.set("value",_2a8);}}obj.onChange();obj.onFocus();obj.onBlur();}});var _2a9="false";if(dj.byId("show_bic_code")){_2a9=dj.byId("show_bic_code").get("value");}if(_2a9==="true"){if(type==="treasury_beneficiary_accounts"&&dj.byId("beneficiary_bank_bic")&&dj.byId("beneficiary_bank_bic").get("value")!==""){dj.byId("beneficiary_bank").set("value","");dj.byId("beneficiary_bank_branch").set("value","");dj.byId("beneficiary_bank_address").set("value","");dj.byId("beneficiary_bank_city").set("value","");dj.byId("beneficiary_bank_country").set("value","");dj.byId("beneficiary_bank_bic").set("disabled",true);}}if(_2a2){if(_296){m.dialog.connect(_2a2,"onHide",function(){setTimeout(function(){dj.byId("xhrDialog").hide();},dj.defaultDuration);});}_2a2.hide();}else{if(dj.byId("xhrDialog")){dj.byId("xhrDialog").hide();}}var _2aa=dj.byId("01entity");var _2ab=dj.byId("02entity");var _2ac=dj.byId("03entity");if(_2aa){_2aa.set("value",_295[0]);}if(_2ab){_2ab.set("value",_295[0]);}if(_2ac){_2ac.set("value",_295[0]);}var _2ad=_295[_294.indexOf("swift_charges_type")];if(_2ad){if(_2ad==="01"){document.getElementById("swift_charges_type_1").click();}else{if(_2ad==="02"){document.getElementById("swift_charges_type_2").click();}else{if(_2ad==="05"){document.getElementById("swift_charges_type_3").click();}}}}if(d.isFunction(m._config.passBack)){return m._config.passBack(_294,_295,_296);}}});d.subscribe("ready",function(){if(d.query(_31).length>0){m.connect(window,"onresize",m.resizeCharts);}if(d.query(_2a).length>0){m.connect(window,"onresize",m.resizeGrids);}});})(dojo,dijit,misys);dojo.require("misys.client.common_client");}