/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.bank.report_el"]){dojo._hasResource["misys.binding.bank.report_el"]=true;dojo.provide("misys.binding.bank.report_el");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.NumberTextBox");dojo.require("misys.form.file");dojo.require("misys.form.addons");dojo.require("misys.form.SimpleTextarea");dojo.require("dijit.layout.TabContainer");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("misys.widget.Collaboration");dojo.require("misys.binding.trade.ls_common");dojo.require("misys.binding.bank.report_el_swift");dojo.require("misys.widget.Amendments");(function(d,dj,m){var _1="NOT ALLOWED";var _2="ALLOWED";m._config=m._config||{};m._config.lcCurCode=m._config.lcCurCode||{};m._config.beneficiary=m._config.beneficiary||{entity:"",name:"",abbvName:"",addressLine1:"",addressLine2:"",dom:""};m._config.expDate=m._config.expDate||{};m._config.lastShipDate=m._config.lastShipDate||{};d.mixin(m._config,{xmlTransform:function(_3){var _4="<el_tnx_record>";if(_3.indexOf(_4)!=-1){var _5=m._config.xmlTagName,_6=_5?["<",_5,">"]:[],_7="</el_tnx_record>",_8="",_9=-1;_8=_3.substring(_4.length,(_3.length-_7.length));var _a="amd_no";var _b=_3.substring(_3.indexOf("<"+_a+">")+("<"+_a+">").length,_3.indexOf("</"+_a+">"));var _c=["narrative_description_goods","narrative_documents_required","narrative_additional_instructions","narrative_special_beneficiary","narrative_special_recvbank"];var _d=_3.substring(_3.indexOf("<tnx_type_code>")+("<tnx_type_code>").length,_3.indexOf("</tnx_type_code>"));var _e=_3.substring(_3.indexOf("<prod_stat_code>")+("<prod_stat_code>").length,_3.indexOf("</prod_stat_code>"));var _f=dj.byId("lc_type")?dj.byId("lc_type").get("value"):"";if(m._config.swift2018Enabled&&(Number(_b)||_e==="08"||_e==="31")){var _10;var _11=[m._config.narrativeDescGoodsDataStore,m._config.narrativeDocsReqDataStore,m._config.narrativeAddInstrDataStore,m._config.narrativeSpBeneDataStore,m._config.narrativeSpRecvbankDataStore];var i=0,_12,_13,itr=0;for(itr=0;itr<5;itr++){_10=itr==0?_8.substring(0,_8.indexOf("<"+_c[itr]+">")):(_10.indexOf("<"+_c[itr]+">")>0?_10.substring(0,_10.indexOf("<"+_c[itr]+">")):_10);if(_8.indexOf("<"+_c[itr]+">")<0){continue;}if(_11[itr]&&_11[itr].length>0){i=0;_10=_10.concat("<"+_c[itr]+">");_10=_10.concat("<![CDATA[");_10=_10.concat("<amendments>");_10=_10.concat("<amendment>");_10=_10.concat("<sequence>");_10=_10.concat(Number(_b));_10=_10.concat("</sequence>");_10=_10.concat("<data>");d.forEach(_11[itr],function(){if(_11[itr][i]&&_11[itr][i]!=null){_12=_11[itr][i].verb[0];_13=dojox.html.entities.encode(_11[itr][i].content[0],dojox.html.entities.html);_10=_10.concat("<datum>");_10=_10.concat("<id>");_10=_10.concat(i);_10=_10.concat("</id>");_10=_10.concat("<verb>");_10=_10.concat(_12);_10=_10.concat("</verb>");_10=_10.concat("<text>");_10=_10.concat(_13);_10=_10.concat("</text>");_10=_10.concat("</datum>");}i++;});_10=_10.concat("</data>");_10=_10.concat("</amendment>");_10=_10.concat("</amendments>");_10=_10.concat("]]>");_10=_10.concat(_8.substring(_8.indexOf("</"+_c[itr]+">"),_8.length));}else{_10=_10.concat("<"+_c[itr]+">");_10=_10.concat(_8.substring(_8.indexOf("</"+_c[itr]+">"),_8.length));}}_6.push(_10);}else{if(m._config.swift2018Enabled&&_d=="01"&&_f!=="02"){for(itr=0;itr<5;itr++){_10=itr==0?_8.substring(0,_8.indexOf("<"+_c[itr]+">")):_10.substring(0,_10.indexOf("<"+_c[itr]+">"));_10=_10.concat("<"+_c[itr]+">");if(dj.byId(_c[itr])){_10=_10.concat("<![CDATA[");_10=_10.concat("<issuance>");_10=_10.concat("<sequence>");_10=_10.concat("0");_10=_10.concat("</sequence>");_10=_10.concat("<data>");_10=_10.concat("<datum>");_10=_10.concat("<id>");_10=_10.concat("0");_10=_10.concat("</id>");_10=_10.concat("<verb>");_10=_10.concat("ISSUANCE");_10=_10.concat("</verb>");_10=_10.concat("<text>");_10=_10.concat(dojox.html.entities.encode(dj.byId(_c[itr]).get("value"),dojox.html.entities.html));_10=_10.concat("</text>");_10=_10.concat("</datum>");_10=_10.concat("</data>");_10=_10.concat("</issuance>");_10=_10.concat("]]>");}_10=_10.concat(_8.substring(_8.indexOf("</"+_c[itr]+">"),_8.length));}_6.push(_10);}else{_6.push(_8);}}if(dj.byId("gridLicense")&&dj.byId("gridLicense").store&&dj.byId("gridLicense").store!==null&&dj.byId("gridLicense").store._arrayOfAllItems.length>0){_6.push("<linked_licenses>");dj.byId("gridLicense").store.fetch({query:{REFERENCEID:"*"},onComplete:dojo.hitch(dj.byId("gridLicense"),function(_14,_15){dojo.forEach(_14,function(_16){_6.push("<license>");_6.push("<ls_ref_id>",_16.REFERENCEID,"</ls_ref_id>");_6.push("<bo_ref_id>",_16.BO_REF_ID,"</bo_ref_id>");_6.push("<ls_number>",_16.LS_NUMBER,"</ls_number>");_6.push("<ls_allocated_amt>",_16.LS_ALLOCATED_AMT,"</ls_allocated_amt>");_6.push("<ls_amt>",_16.LS_AMT,"</ls_amt>");_6.push("<ls_os_amt>",_16.LS_OS_AMT,"</ls_os_amt>");_6.push("<converted_os_amt>",_16.CONVERTED_OS_AMT,"</converted_os_amt>");_6.push("<allow_overdraw>",_16.ALLOW_OVERDRAW,"</allow_overdraw>");_6.push("</license>");});})});_6.push("</linked_licenses>");}if(_5){_6.push("</",_5,">");}return _6.join("");}else{return _3;}}});d.mixin(m,{bind:function(){m.setValidation("iss_date",m.validateMOProdELIssueDate);m.setValidation("exp_date",m.validateBankExpiryDate);m.setValidation("pstv_tol_pct",m.validateTolerance);m.setValidation("neg_tol_pct",m.validateTolerance);m.setValidation("max_cr_desc_code",m.validateMaxCreditTerm);m.setValidation("last_ship_date",m.validateLastShipmentDate);m.setValidation("amd_date",m.validateAmendmentDate);m.setValidation("lc_cur_code",m.validateCurrency);m.setValidation("latest_answer_date",m.validateLatestAnswerDate);m.setValidation("earliest_ship_date",m.validateEarliestShipmentDate);m.connect("prod_stat_code","onChange",m.validateOutstandingAmount);m.connect("prod_stat_code","onChange",function(){var _17=dj.byId("prod_stat_code").get("value");var _18=dj.byId("prod_stat_code");var _19=dj.byId("imp_bill_ref_id");if(_18&&_18.get("value")&&_19){if(_17==="04"||_17==="07"||_17==="12"||_17==="13"||_17==="05"||_17==="14"||_17==="15"){dj.byId("imp_bill_ref_id").set("disabled",false);}else{dj.byId("imp_bill_ref_id").set("disabled",true);dj.byId("imp_bill_ref_id").set("value","");}}});m.setValidation("bo_comment",m.bofunction);m.connect("courier_partner","onChange",m.validatecourierPartnerField);var _1a=["draft_term","narrative_description_goods","narrative_documents_required","narrative_additional_instructions","narrative_special_beneficiary","narrative_special_recvbank","narrative_charges","narrative_period_presentation","narrative_shipment_period","narrative_sender_to_receiver","narrative_payment_instructions","narrative_additional_amount"];var _1b=[];for(var i=0;i<=_1a.length;i++){if(dj.byId(_1a[i])&&dj.byId(_1a[i])!==null){_1b.push(_1a[i]);}}d.forEach(_1b,function(id){var _1c=dj.byId(id);_1c.onBlur(_1c);});m.connect("ship_period","onChange",m.validateShipPeriod);m.connect(dj.byId("prod_stat_code"),"onChange",function(){this.validate();});m.connect("prod_stat_code","onChange",m.toggleProdStatCodeFields);m.connect("prod_stat_code","onChange",function(){var _1d=this.get("value");m.toggleFields(_1d&&_1d!=="01"&&_1d!=="18",null,["iss_date","bo_ref_id"]);});m.connect("prod_stat_code","onChange",function(){m.updateOutstandingAmount(dj.byId("lc_liab_amt"),dj.byId("org_lc_liab_amt"));});m.connect("prod_stat_code","onChange",function(){m.toggleProdStatCodeFields();var _1e=this.get("value");if(_1e==="05"||_1e==="13"||_1e==="15"||_1e==="14"||_1e==="04"){m.toggleRequired("maturity_date",true);}else{m.toggleRequired("maturity_date",false);}});m.connect("lc_available_amt","onBlur",m.validateLCAvailableAmt);m.connect("lc_liab_amt","onBlur",m.validateLCLiabAmt);m.connect("prod_stat_code","onChange",function(){var _1f=dj.byId("prod_stat_code").get("value"),_20=dj.byId("lc_liab_amt");if(_20&&(_1f==="01"||_1f==="10"||_1f==="06")){_20.set("readOnly",true);_20.set("disabled",true);}else{if(_20){_20.set("readOnly",false);_20.set("disabled",false);}}});m.connect("irv_flag","onClick",m.checkIrrevocableFlag);m.connect("ntrf_flag","onClick",m.checkNonTransferableFlag);m.connect("stnd_by_lc_flag","onClick",m.checkStandByFlag);m.connect("cfm_inst_code_1","onClick",m.resetConfirmationCharges);m.connect("cfm_inst_code_2","onClick",m.resetConfirmationCharges);m.connect("cfm_inst_code_3","onClick",m.resetConfirmationCharges);m.connect("cfm_chrg_brn_by_code_1","onClick",m.checkConfirmationCharges);m.connect("cfm_chrg_brn_by_code_2","onClick",m.checkConfirmationCharges);if(m._config.swift2018Enabled){m._bindSwift2018();}m.connect("part_ship_detl_nosend","onChange",function(){var _21=this.get("value");dj.byId("part_ship_detl").set("value",this.get("value"));if(m._config.swift2018Enabled){if(_21=="CONDITIONAL"){document.getElementById("infoMessagePartialShipment").style.display="block";document.getElementById("infoMessagePartialShipment").style.paddingLeft="250px";}else{document.getElementById("infoMessagePartialShipment").style.display="none";}}m.toggleFields(_21&&_21!==_2&&_21!==_1&&_21!=="NONE",null,["part_ship_detl_text_nosend"]);});m.connect("part_ship_detl_text_nosend","onBlur",function(){if(dj.byId("part_ship_detl_nosend").value==="OTHER"){dj.byId("part_ship_detl").set("value",dj.byId("part_ship_detl_text_nosend").value);}else{dj.byId("part_ship_detl").set("value",dj.byId("part_ship_detl_nosend").value);}});m.connect("tran_ship_detl_nosend","onChange",function(){var _22=this.get("value");dj.byId("tran_ship_detl").set("value",_22);if(m._config.swift2018Enabled){if(_22=="CONDITIONAL"){document.getElementById("infoMessageTranshipment").style.display="block";document.getElementById("infoMessageTranshipment").style.paddingLeft="250px";}else{document.getElementById("infoMessageTranshipment").style.display="none";}}m.toggleFields(_22&&_22!==_2&&_22!==_1&&_22!=="NONE",null,["tran_ship_detl_text_nosend"]);});m.connect("tran_ship_detl_text_nosend","onBlur",function(){if(dj.byId("tran_ship_detl_nosend").value==="OTHER"||dj.byId("tran_ship_detl_nosend").value==="Other"){dj.byId("tran_ship_detl").set("value",dj.byId("tran_ship_detl_text_nosend").value);}else{dj.byId("tran_ship_detl").set("value",dj.byId("tran_ship_detl_nosend").value);}});var _23=["cr_avl_by_code_1","cr_avl_by_code_2","cr_avl_by_code_3","cr_avl_by_code_4","cr_avl_by_code_5"];d.forEach(_23,function(id){m.connect(id,"onClick",m.toggleBankPaymentDraftAt);m.connect(id,"onClick",function(){var _24=dj.byId("cr_avl_by_code_2").get("checked"),_25=dj.byId("cr_avl_by_code_3").get("checked");if(d.byId("drawee_details_bank_img")){if(!_24&&!_25){m.animate("fadeOut","drawee_details_bank_img");}else{m.animate("fadeIn","drawee_details_bank_img");}}var _26=dj.byId("cr_avl_by_code_1").get("checked");if(d.byId("draft_term_img_label")){if(!_26){m.animate("fadeIn","draft_term_img_label");}else{m.animate("fadeOut","draft_term_img_label");}}m.toggleFields(_24||_25,["drawee_details_bank_address_line_2","drawee_details_bank_dom","drawee_details_bank_address_line_4"],["drawee_details_bank_name","drawee_details_bank_address_line_1"]);if(dj.byId("cr_avl_by_code_1").get("checked")){dj.byId("draft_term").set("value","Sight");dj.byId("draft_term").set("disabled",true);m.animate("fadeOut","draft_term_img_label");}if(!dj.byId("cr_avl_by_code_1").get("checked")){dj.byId("draft_term").set("value","");dj.byId("draft_term").set("disabled",false);dj.byId("draft_term_img").set("disabled",false);m.animate("fadeIn","draft_term_img_label");}m.toggleRequired("draft_term",true);});});m.connect("cr_avl_by_code_1","onChange",function(){m.toggleFields(!this.get("checked"),null,["draft_term"],false);if(this.get("checked")){dj.byId("draft_term").set("value","Sight");}else{dj.byId("draft_term").set("value","");}});m.connect("tenor_type_1","onClick",m.toggleDraftTerm);m.connect("tenor_type_2","onClick",m.toggleDraftTerm);m.connect("tenor_type_3","onClick",m.toggleDraftTerm);m.connect("advise_mode_code_1","onClick",function(){m.toggleFields(this.get("checked"),null,["part_ship_detl_text"]);});m.connect("charge_details_status_nosend","onChange",function(){m.toggleFields(this.get("value")==="01",null,["charge_details_settlement_date_nosend"]);if(this.get("value")==="01"){dj.byId("charge_details_settlement_date_nosend").set("displayedValue",dj.byId("currentDate").get("value"));}});m.connect("advise_mode_code_2","onClick",function(){m.toggleFields(this.get("checked"),["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4"],null);});m.connect("lc_cur_code","onChange",function(){m.setCurrency(this,["lc_amt"]);m.setCurrency(this,["lc_available_amt","lc_liab_amt"]);});m.connect("lc_amt","onBlur",function(){m.setTnxAmt(this.get("value"));});m.connect("tnx_amt","onBlur",function(){m.validateDocumentAmtAndLCAmt();});m.connect("last_ship_date","onClick",function(){if(m._config.shipment_period_standard===true){m.toggleDependentFields(this,dj.byId("narrative_shipment_period"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));}});m.connect("last_ship_date","onChange",function(){if(m._config.shipment_period_standard===true){m.toggleDependentFields(this,dj.byId("narrative_shipment_period"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));}});m.connect("beneficiary_name","onFocus",m.enableBeneficiaryFields);m.connect("beneficiary_dom","onFocus",m.enableBeneficiaryFields);m.connect("inco_term_year","onChange",m.getIncoTerm);m.connect("inco_term","onChange",function(){m.toggleFields(this.get("value"),null,["inco_place"],false,false);});m.connect("inco_term_year","onChange",function(){m.toggleFields(this.get("value"),null,["inco_term"],false,true);});m.connect("eucp_flag","onClick",function(){m.toggleFields(this.get("checked"),null,["eucp_details"]);});m.connect("narrative_shipment_period","onClick",function(){if(m._config.shipment_period_standard===true){m.toggleDependentFields(this,dj.byId("last_ship_date"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));}});m.connect("narrative_shipment_period","onChange",function(){if(m._config.shipment_period_standard===true){m.toggleDependentFields(this,dj.byId("last_ship_date"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));}});m.connect("advise_mode_code","onChange",function(){m.toggleFields(this.get("value")=="02",["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4"],["advise_thru_bank_name","advise_thru_bank_address_line_1"]);});m.connect("tnx_amt","onChange",function(){m.updateOutstandingAmount(dj.byId("lc_liab_amt"),dj.byId("org_lc_liab_amt"));});m.connect("license_lookup","onClick",function(){m.getLicenses("el");});m.connect("lc_cur_code","onChange",function(){m.clearLicenseGrid(this,m._config.lcCurCode,"el");});m.connect("entity","onChange",function(){m.clearLicenseGrid(this,m._config.beneficiary,"el");});m.connect("beneficiary_name","onChange",function(){m.clearLicenseGrid(this,m._config.beneficiary,"el");});m.connect("exp_date","onChange",function(){m.clearLicenseGrid(this,m._config.expDate,"el");});m.connect("last_ship_date","onChange",function(){m.clearLicenseGrid(this,m._config.lastShipDate,"el");});m.connect("applicable_rules","onChange",function(){m.toggleFields((this.get("value")=="99"),null,["applicable_rules_text"]);});m.connect("maturity_date","onBlur",function(){m.validateEnteredGreaterThanCurrentDate();m.validateMaturityDateInMO();});m.connect("iss_date","onBlur",m.validateIssueDateInMO);m.connect("prod_stat_code","onChange",function(){if(dj.byId("latest_answer_date")){dj.byId("latest_answer_date").set("disabled",true);}});},onFormLoad:function(){if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="none";}if(d.byId("view-narrative-swift")){d.byId("view-narrative-swift").style.display="block";}if(document.getElementById("amd_no")){m._config.amendmentNumber=document.getElementById("amd_no").value;document.getElementById("amd_no").value="";}m._config.lcCurCode=dj.byId("lc_cur_code")?dj.byId("lc_cur_code").get("value"):"";m._config.beneficiary.entity=dj.byId("entity")?dj.byId("entity").get("value"):"";m._config.beneficiary.abbvName=dj.byId("beneficiary_abbv_name")?dj.byId("beneficiary_abbv_name").get("value"):"";m._config.beneficiary.name=dj.byId("beneficiary_name")?dj.byId("beneficiary_name").get("value"):"";m._config.beneficiary.addressLine1=dj.byId("beneficiary_address_line_1")?dj.byId("beneficiary_address_line_1").get("value"):"";m._config.beneficiary.addressLine2=dj.byId("beneficiary_address_line_2")?dj.byId("beneficiary_address_line_2").get("value"):"";m._config.beneficiary.dom=dj.byId("beneficiary_dom")?dj.byId("beneficiary_dom").get("value"):"";m._config.expDate=dj.byId("exp_date")?dj.byId("exp_date").get("displayedValue"):"";m._config.lastShipDate=dj.byId("last_ship_date")?dj.byId("last_ship_date").get("displayedValue"):"";m.setCurrency(dj.byId("lc_cur_code"),["tnx_amt","lc_amt"]);if(dj.byId("lc_cur_code")){m.setCurrency(dj.byId("lc_cur_code"),["lc_available_amt","lc_liab_amt"]);}if(m._config.swift2018Enabled){m._onFormLoadSwift2018();}var _27=dj.byId("cr_avl_by_code_1");if(_27){var _28=dj.byId("cr_avl_by_code_2").get("checked"),_29=dj.byId("cr_avl_by_code_3").get("checked");if(d.byId("drawee_details_bank_img")){if(!_28&&!_29){m.animate("fadeOut","drawee_details_bank_img");}else{m.animate("fadeIn","drawee_details_bank_img");}}m.toggleFields(_28||_29,["drawee_details_bank_address_line_2","drawee_details_bank_dom","drawee_details_bank_address_line_4"],["drawee_details_bank_name","drawee_details_bank_address_line_1"]);m.toggleFields(!_27.get("checked"),null,["draft_term"],true,true);if(_27.get("checked")){dj.byId("draft_term").set("value","Sight");dj.byId("draft_term").set("disabled",true);m.animate("fadeOut","draft_term_img_label");}}var _2a=dj.byId("eucp_flag");if(_2a){m.toggleFields(_2a.get("checked"),null,["eucp_details"]);}var _2b=dj.byId("part_ship_detl_nosend");if(_2b){var _2c=_2b.get("value");if(m._config.swift2018Enabled){if(_2b=="CONDITIONAL"){document.getElementById("infoMessagePartialShipment").style.display="block";document.getElementById("infoMessagePartialShipment").style.paddingLeft="250px";}else{document.getElementById("infoMessagePartialShipment").style.display="none";}}m.toggleFields(_2c&&_2c!==_2&&_2c!==_1&&_2c!=="NONE",null,["part_ship_detl_text_nosend"],true);}var _2d=dj.byId("part_ship_detl");if(_2d&&_2d.get("value")===""){if(_2b){_2d.set("value",_2b.get("value"));}}var _2e=dj.byId("tran_ship_detl_nosend");if(_2e){var _2f=_2e.get("value");if(m._config.swift2018Enabled){if(_2f=="CONDITIONAL"){document.getElementById("infoMessageTranshipment").style.display="block";document.getElementById("infoMessageTranshipment").style.paddingLeft="250px";}else{document.getElementById("infoMessageTranshipment").style.display="none";}}m.toggleFields(_2f&&_2f!==_2&&_2f!==_1&&_2f!=="NONE",null,["tran_ship_detl_text_nosend"]);}var _30=dj.byId("tran_ship_detl");if(_30&&_30.get("value")===""){if(_2e){_30.set("value",_2e.get("value"));}}if(dj.byId("advise_mode_code")){m.toggleFields(dj.byId("advise_mode_code").get("value")=="02",["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4"],["advise_thru_bank_name","advise_thru_bank_address_line_1"]);}if(dj.byId("latest_answer_date")){m.toggleProdStatCodeFields();}var _31=dj.byId("prod_stat_code"),_32=dj.byId("lc_liab_amt");if(_31.get("value")==="05"||_31.get("value")==="13"||_31.get("value")==="15"||_31.get("value")==="14"||_31.get("value")==="04"){m.toggleRequired("maturity_date",true);}else{m.toggleRequired("maturity_date",false);}if(_32&&_31&&(_31.get("value")==="01"||_31.get("value")==="10"||_31.get("value")==="06")){_32.set("readOnly",true);_32.set("disabled",true);}else{if(_32){_32.set("readOnly",false);_32.set("disabled",false);}}var _33=dj.byId("tnx_type_code");var _34=dj.byId("sub_tnx_type_code");if(dj.byId("advise_mode_code")&&_33&&(_33.get("value")==="13")&&_34&&(_34.get("value")==="19")){m.toggleRequired("advise_mode_code",false);}else{m.toggleRequired("advise_mode_code",true);}m.populateGridOnLoad("lc");if(dj.byId("tnx_type_code")&&(dj.byId("tnx_type_code").get("value")==="15"||(dj.byId("tnx_type_code").get("value")==="13"))&&(m._config.enable_to_edit_customer_details_bank_side=="false")){dojo.style("transactionDetails","display","none");}else{if(m._config.enable_to_edit_customer_details_bank_side=="false"&&dojo.byId("release_dttm_view_row")){dojo.style("transactionDetails","display","none");}}var _35=dj.byId("applicable_rules");if(_35){m.toggleFields(_35.get("value")=="99",null,["applicable_rules_text"]);}if(dj.byId("inco_term_year")){m.getIncoYear();dijit.byId("inco_term_year").set("value",dj.byId("org_term_year").get("value"));}if(dj.byId("inco_term")){if(dj.byId("inco_term_year")&&dj.byId("inco_term_year").get("value")!=""){m.getIncoTerm();}dijit.byId("inco_term").set("value",dj.byId("org_inco_term").get("value"));}var _36=dj.byId("inco_term")?dj.byId("inco_term").get("value"):"";if(_36){m.toggleFields(_36,null,["inco_place"],false,true);}else{m.toggleFields(_36,null,["inco_place"],false,false);}var _37=dj.byId("iss_date");if(_37&&_37.get("value")){_37.onBlur();}var _38=dj.byId("prod_stat_code");var _39=dj.byId("imp_bill_ref_id");if(_38&&_38.get("value")&&_39){var _3a=dj.byId("prod_stat_code").get("value");if(_3a==="04"||_3a==="07"||_3a==="12"||_3a==="13"||_3a==="05"||_3a==="14"||_3a==="15"){dj.byId("imp_bill_ref_id").set("disabled",false);}else{dj.byId("imp_bill_ref_id").set("disabled",true);dj.byId("imp_bill_ref_id").set("value","");}}var _3b=dj.byId("ship_period");if(_3b&&_3b.get("value")){_3b.onChange();}},beforeSubmitValidations:function(){var _3c=true;if(dj.byId("lc_amt")){if(!m.validateAmount((dj.byId("lc_amt"))?dj.byId("lc_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("lc_amt").set("value","");return false;}}var _3d=dj.byId("lc_amt");var _3e=dj.byId("prod_stat_code");var _3f=dj.byId("lc_available_amt");var _40=dj.byId("lc_liab_amt");if(_3d&&_3f&&_3e&&_3e.get("value")=="03"&&(_3d.get("value")!=_3f.get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("AvailLCAmtNotEqualToTranAmt");_3f.set("value","");return false;}else{if(_3d&&_3f&&(_3d.get("value")<_3f.get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("AvailLCamtcanNotMoreThanTranAmt");_3f.set("value","");return false;}}if(_3d&&_40&&_3e&&_3e.get("value")=="03"&&(_3d.get("value")>_40.get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("LiabLCAmtcanNotLessThanTranAmt");_40.set("value","");return false;}if(dj.byId("tnx_amt")&&(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").getValue()!="03"&&dj.byId("tnx_type_code").getValue()!="14"&&!(dj.byId("tnx_type_code").getValue()=="15"&&(dj.byId("prod_stat_code").get("value")=="03"||dj.byId("prod_stat_code").get("value")=="06"||dj.byId("prod_stat_code").get("value")=="08"||dj.byId("prod_stat_code").get("value")=="81")))){if(!m.validateAmount((dj.byId("tnx_amt"))?dj.byId("tnx_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("tnx_amt").set("value","");return false;}}if(!(m.validateLength(["beneficiary","applicant","issuing_bank","credit_available_with_bank","drawee"]))){return false;}if(m._config.swift2018Enabled){_3c=m._beforeSubmitValidationsSwift2018();if(!_3c){return _3c;}}return m.validateLSAmtSumAgainstTnxAmt("lc");}});})(dojo,dijit,misys);dojo.require("misys.client.binding.bank.report_el_client");}